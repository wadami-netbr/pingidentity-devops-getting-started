{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-\\.]+"},"docs":[{"location":"","text":"Welcome \u00b6 Significant Portal Changes July 2022 Based on feedback and deprecated examples, this portal received a significant number of changes in July 2022. See this page for details. This documentation exists to enable DevOps professionals, administrators, and developers to deploy Ping Identity software using container technologies. Our goal is to provide tools, frameworks, blueprints, and reference architectures in support of running our products in containerized environments. First time here? We recommend the Get Started page. New to Kubernetes? See Kubernetes Basics New to Helm? See Helm Basics Benefits from this program \u00b6 Streamlined Deployments Deploy and run workloads on our solutions without the need for additional hardware or virtual machines (VMs). Consistent and Flexible Maintain all configurations and dependencies, ensuring consistent environments. Containers are portable and can be used on nearly any machine. Optimized Sizing Orchestration of containers allows organizations to increase fault tolerance and availability and to better manage costs by auto-scaling to application demand. Resources \u00b6 Resources provided include Docker images of Ping Identity products, deployment examples, and configuration management tools. Docker Images \u00b6 Docker Images Docker Builds Ping provides preconfigured Docker images of our products for running as containers. Each of our containers is a complete working product instance that is immediately usable when deployed. Our Docker stacks are integrated collections of Ping products preconfigured to coordinate across all containers in the stack. By default, our Docker images run as an unprivileged user in the container. You can find information about our available Docker images in the pingidentity-docker-builds repository on Github or on the Docker Hub site. Included in this portal are detailed image specifications on variables, related images and so on. The Docker images are automatically pulled from our repository the first time you deploy a product container or orchestrated set of containers. Alternatively, you can pull the images manually from our Docker Hub site. Deployment Examples \u00b6 DevOps Getting Started The Github repository linked here provides examples for deploying our products as standalone containers or as an orchestrated deployment in Kubernetes (using Helm). Docker Compose is often used for development, demonstrations, and lightweight orchestration. Kubernetes is typically used for enterprise-level orchestration. Configuration Management \u00b6 For configuration management, we use: Server profiles, for runtime configuration of containers. YAML files for runtime configuration of stacks. YAML file configuration settings complement those provided through server profiles. Environment variables. These can be included in YAML files or called from external files. Shell scripts (hooks) to automate certain operations for a product. Release tags to give you a choice between stable builds or the current (potentially unstable) builds. More information about how server profiles, variables and these other options coordinate to configure the products can be found on the Configuration Reference page. Other Resources \u00b6 All Ping DevOps Github Repos Ping Helm Charts","title":"Home"},{"location":"#welcome","text":"Significant Portal Changes July 2022 Based on feedback and deprecated examples, this portal received a significant number of changes in July 2022. See this page for details. This documentation exists to enable DevOps professionals, administrators, and developers to deploy Ping Identity software using container technologies. Our goal is to provide tools, frameworks, blueprints, and reference architectures in support of running our products in containerized environments. First time here? We recommend the Get Started page. New to Kubernetes? See Kubernetes Basics New to Helm? See Helm Basics","title":"Welcome"},{"location":"#benefits-from-this-program","text":"Streamlined Deployments Deploy and run workloads on our solutions without the need for additional hardware or virtual machines (VMs). Consistent and Flexible Maintain all configurations and dependencies, ensuring consistent environments. Containers are portable and can be used on nearly any machine. Optimized Sizing Orchestration of containers allows organizations to increase fault tolerance and availability and to better manage costs by auto-scaling to application demand.","title":"Benefits from this program"},{"location":"#resources","text":"Resources provided include Docker images of Ping Identity products, deployment examples, and configuration management tools.","title":"Resources"},{"location":"#docker-images","text":"Docker Images Docker Builds Ping provides preconfigured Docker images of our products for running as containers. Each of our containers is a complete working product instance that is immediately usable when deployed. Our Docker stacks are integrated collections of Ping products preconfigured to coordinate across all containers in the stack. By default, our Docker images run as an unprivileged user in the container. You can find information about our available Docker images in the pingidentity-docker-builds repository on Github or on the Docker Hub site. Included in this portal are detailed image specifications on variables, related images and so on. The Docker images are automatically pulled from our repository the first time you deploy a product container or orchestrated set of containers. Alternatively, you can pull the images manually from our Docker Hub site.","title":"Docker Images"},{"location":"#deployment-examples","text":"DevOps Getting Started The Github repository linked here provides examples for deploying our products as standalone containers or as an orchestrated deployment in Kubernetes (using Helm). Docker Compose is often used for development, demonstrations, and lightweight orchestration. Kubernetes is typically used for enterprise-level orchestration.","title":"Deployment Examples"},{"location":"#configuration-management","text":"For configuration management, we use: Server profiles, for runtime configuration of containers. YAML files for runtime configuration of stacks. YAML file configuration settings complement those provided through server profiles. Environment variables. These can be included in YAML files or called from external files. Shell scripts (hooks) to automate certain operations for a product. Release tags to give you a choice between stable builds or the current (potentially unstable) builds. More information about how server profiles, variables and these other options coordinate to configure the products can be found on the Configuration Reference page.","title":"Configuration Management"},{"location":"#other-resources","text":"All Ping DevOps Github Repos Ping Helm Charts","title":"Other Resources"},{"location":"overview/","text":"Overview \u00b6 The DevOps resources include Docker images of Ping Identity products, deployment examples, and configuration management tools. When you're ready, begin with our Get Started guide. Our documentation will help set you up and familiarize you with the use of the resources. DevOps Docker Images \u00b6 Docker Images Docker Builds We make available preconfigured Docker images of our products in Docker containers. Each of our containers is a complete working product instance, immediately usable when deployed. Our Docker stacks are integrated collections of these containers, preconfigured to interoperate with the containers in the stack. You can find information about our available Docker images in the pingidentity-docker-builds repository or on our Docker Hub site. The Docker images are automatically pulled from our repository the first time you deploy a product container or orchestrated set of containers. Alternatively, you can pull the images from our Docker Hub site. Deployment Examples \u00b6 DevOps Getting Started We supply examples for deploying our products as standalone containers, as a Docker Compose stack, or as an orchestrated set using Kubernetes. Use Docker Compose for development, demonstrations, and lightweight orchestration. Use Kubernetes for enterprise-level orchestration. Configuration Management \u00b6 For configuration management, we use: Server profiles, for runtime configuration of containers. YAML files for runtime configuration of stacks. YAML file configuration settings complement that used for server profiles. Environment variables. These can be included in YAML files or called from external files. Shell scripts (hooks) to automate certain operations for a product. Release tags to give you a choice between stable builds or the current (potentially unstable) builds. By default, our Docker images run as unprivileged within the container.","title":"Overview"},{"location":"overview/#overview","text":"The DevOps resources include Docker images of Ping Identity products, deployment examples, and configuration management tools. When you're ready, begin with our Get Started guide. Our documentation will help set you up and familiarize you with the use of the resources.","title":"Overview"},{"location":"overview/#devops-docker-images","text":"Docker Images Docker Builds We make available preconfigured Docker images of our products in Docker containers. Each of our containers is a complete working product instance, immediately usable when deployed. Our Docker stacks are integrated collections of these containers, preconfigured to interoperate with the containers in the stack. You can find information about our available Docker images in the pingidentity-docker-builds repository or on our Docker Hub site. The Docker images are automatically pulled from our repository the first time you deploy a product container or orchestrated set of containers. Alternatively, you can pull the images from our Docker Hub site.","title":"DevOps Docker Images"},{"location":"overview/#deployment-examples","text":"DevOps Getting Started We supply examples for deploying our products as standalone containers, as a Docker Compose stack, or as an orchestrated set using Kubernetes. Use Docker Compose for development, demonstrations, and lightweight orchestration. Use Kubernetes for enterprise-level orchestration.","title":"Deployment Examples"},{"location":"overview/#configuration-management","text":"For configuration management, we use: Server profiles, for runtime configuration of containers. YAML files for runtime configuration of stacks. YAML file configuration settings complement that used for server profiles. Environment variables. These can be included in YAML files or called from external files. Shell scripts (hooks) to automate certain operations for a product. Release tags to give you a choice between stable builds or the current (potentially unstable) builds. By default, our Docker images run as unprivileged within the container.","title":"Configuration Management"},{"location":"contact-us/community/","text":"Ping Identity maintains a community where you can ask questions of Ping employees and other users of our products. You can submit your questions at the Cloud DevOps Community .","title":"Community"},{"location":"contact-us/contributing/","text":"Contributing \u00b6 Thanks for taking the time to help improve our tools! How Can I Contribute? \u00b6 Reporting Bugs \u00b6 How Do I Submit a Bug Report? \u00b6 Bugs are tracked as GitHub Issues . You can report a bug by submitting an issue in the Ping Identity DevOps Issue Tracker . To help the maintainers understand and reproduce the problem, please provide information such as: A clear and descriptive title. A description of what happened and a description of what you expected to happen. An example with the exact steps needed to reproduce the problem. If relevant, provide sample code. Please understand that bug reports are reviewed and prioritized internally, and we might not be able to address all bug reports or provide an estimated time for resolution. Suggesting Enhancements \u00b6 As with bugs, requests are tracked as GitHub Issues . You can suggest an enhancement by submitting an issue in the Ping Identity DevOps Issue Tracker . Please understand that enhancement requests are reviewed and prioritized internally, and we might not be able to address all requests or provide an estimated time for resolution. Alternate Route for Submitting Bugs and Suggesting Enhancements \u00b6 If you would rather not have your issue discussed on the public repository, you can open an issue from Ping Identity's Support Portal . Contributing Code Changes \u00b6 Ping Identity does not accept third-party code submissions.","title":"Contributing"},{"location":"contact-us/contributing/#contributing","text":"Thanks for taking the time to help improve our tools!","title":"Contributing"},{"location":"contact-us/contributing/#how-can-i-contribute","text":"","title":"How Can I Contribute?"},{"location":"contact-us/contributing/#reporting-bugs","text":"","title":"Reporting Bugs"},{"location":"contact-us/contributing/#how-do-i-submit-a-bug-report","text":"Bugs are tracked as GitHub Issues . You can report a bug by submitting an issue in the Ping Identity DevOps Issue Tracker . To help the maintainers understand and reproduce the problem, please provide information such as: A clear and descriptive title. A description of what happened and a description of what you expected to happen. An example with the exact steps needed to reproduce the problem. If relevant, provide sample code. Please understand that bug reports are reviewed and prioritized internally, and we might not be able to address all bug reports or provide an estimated time for resolution.","title":"How Do I Submit a Bug Report?"},{"location":"contact-us/contributing/#suggesting-enhancements","text":"As with bugs, requests are tracked as GitHub Issues . You can suggest an enhancement by submitting an issue in the Ping Identity DevOps Issue Tracker . Please understand that enhancement requests are reviewed and prioritized internally, and we might not be able to address all requests or provide an estimated time for resolution.","title":"Suggesting Enhancements"},{"location":"contact-us/contributing/#alternate-route-for-submitting-bugs-and-suggesting-enhancements","text":"If you would rather not have your issue discussed on the public repository, you can open an issue from Ping Identity's Support Portal .","title":"Alternate Route for Submitting Bugs and Suggesting Enhancements"},{"location":"contact-us/contributing/#contributing-code-changes","text":"Ping Identity does not accept third-party code submissions.","title":"Contributing Code Changes"},{"location":"deployment/deployCompose/","text":"Single product examples only \u00b6 Deprecation Docker Compose has been used by Ping in the past for basic orchestration and examples. We are no longer maintaining multi-product or clustering docker compose examples. All of those files have been removed from this repository. The only examples remaining are for deploying individual products. For orchestration of multiple products, clustering and other use cases, use helm to deploy to Kubernetes . Example docker compose files to deploy standalone instances of PingAccess, PingCentral, PingDirectory or PingFederate are in the Github repository . Refer to the comments in the each provided file for instructions on accessing the product after running docker compose up from the directory of the product in which you are interested. For more information about the structure of Docker Compose YAML files provided by Ping, see this page","title":"Single Product Deployments"},{"location":"deployment/deployCompose/#single-product-examples-only","text":"Deprecation Docker Compose has been used by Ping in the past for basic orchestration and examples. We are no longer maintaining multi-product or clustering docker compose examples. All of those files have been removed from this repository. The only examples remaining are for deploying individual products. For orchestration of multiple products, clustering and other use cases, use helm to deploy to Kubernetes . Example docker compose files to deploy standalone instances of PingAccess, PingCentral, PingDirectory or PingFederate are in the Github repository . Refer to the comments in the each provided file for instructions on accessing the product after running docker compose up from the directory of the product in which you are interested. For more information about the structure of Docker Compose YAML files provided by Ping, see this page","title":"Single product examples only"},{"location":"deployment/deployHelm/","text":"Deploy Ping DevOps Charts using Helm \u00b6 Helm Charts Repo To use Ping Identity Helm charts for deployment to Kubernetes, go to the Getting Started page for the Helm chart repository to configure your system to run Helm. Afterward, continue on this page for examples illustrating how to deploy various scenarios from the charts. Ingress with the local K8s cluster If you want to run these examples on the local kind cluster created as outlined on the Deploy a local Kubernetes cluster page with ingresses, see this page for ingress configuration instructions. Otherwise, you can port-forward to product services as in the getting started guide. Helm Chart Example Configurations \u00b6 The following table contains example configurations and instructions to run and configure Ping products using the Ping Devops Helm Chart. Config Description .yaml Notes Everything Example with most products integrated together everything.yaml PingAccess PingAccess Admin Console & Engine pingaccess-cluster.yaml Update line 8 with your domain PingCentral PingCentral pingcentral.yaml PingFederate PingFederate Admin Console & Engine pingfederate-cluster.yaml PingFederate Upgrade PingFederate See .yaml files in pingfederate-upgrade PingDirectory PingDirectory Instance pingdirectory.yaml Simple Sync PingDataSync and PingDirectory simple-sync.yaml PingDirectory Backup and Sidecar PingDirectory with periodic backup and sidecar pingdirectory-periodic-backup.yaml Ingress Expose an application outside of the cluster ingress.yaml Update line 7 with your domain Vault Example vault values section vault.yaml Cluster Metrics Example values using various open source tools See .yaml files in cluster-metrics RBAC Enable RBAC for workloads rbac.yaml To Deploy \u00b6 helm upgrade --install myping pingidentity/ping-devops \\ -f <HTTP link to yaml> Uninstall \u00b6 helm uninstall myping","title":"Ping Identity Helm Charts"},{"location":"deployment/deployHelm/#deploy-ping-devops-charts-using-helm","text":"Helm Charts Repo To use Ping Identity Helm charts for deployment to Kubernetes, go to the Getting Started page for the Helm chart repository to configure your system to run Helm. Afterward, continue on this page for examples illustrating how to deploy various scenarios from the charts. Ingress with the local K8s cluster If you want to run these examples on the local kind cluster created as outlined on the Deploy a local Kubernetes cluster page with ingresses, see this page for ingress configuration instructions. Otherwise, you can port-forward to product services as in the getting started guide.","title":"Deploy Ping DevOps Charts using Helm"},{"location":"deployment/deployHelm/#helm-chart-example-configurations","text":"The following table contains example configurations and instructions to run and configure Ping products using the Ping Devops Helm Chart. Config Description .yaml Notes Everything Example with most products integrated together everything.yaml PingAccess PingAccess Admin Console & Engine pingaccess-cluster.yaml Update line 8 with your domain PingCentral PingCentral pingcentral.yaml PingFederate PingFederate Admin Console & Engine pingfederate-cluster.yaml PingFederate Upgrade PingFederate See .yaml files in pingfederate-upgrade PingDirectory PingDirectory Instance pingdirectory.yaml Simple Sync PingDataSync and PingDirectory simple-sync.yaml PingDirectory Backup and Sidecar PingDirectory with periodic backup and sidecar pingdirectory-periodic-backup.yaml Ingress Expose an application outside of the cluster ingress.yaml Update line 7 with your domain Vault Example vault values section vault.yaml Cluster Metrics Example values using various open source tools See .yaml files in cluster-metrics RBAC Enable RBAC for workloads rbac.yaml","title":"Helm Chart Example Configurations"},{"location":"deployment/deployHelm/#to-deploy","text":"helm upgrade --install myping pingidentity/ping-devops \\ -f <HTTP link to yaml>","title":"To Deploy"},{"location":"deployment/deployHelm/#uninstall","text":"helm uninstall myping","title":"Uninstall"},{"location":"deployment/deployHelmLocalIngress/","text":"Local Kind ingress \u00b6 If you have deployed the local kind cluster as outlined on the create a local cluster page, follow these instructions to use an ingress for accessing your products. Prerequisites \u00b6 A kind cluster deployed with ingress enabled. For this guide, the cluster name ping is assumed The hostname aliases have been appended to the /etc/hosts file You have created the secret for your DevOps user and key for retrieving licenses Assumptions \u00b6 With the /etc/hosts file entries created from the page linked above, the release in helm must be myping for the hostnames to work with the configuration here. Consider the first entry as an example: 127 .0.0.1 myping-pingaccess-admin.ping-local.com ... When using our charts, the release name provided to helm is prepended - that is what provides the myping- portion of the hostname in the file. The ping-local.com domain suffix is provided through the ingress definitions as shown later on this page. So, the structure is: <helm-release-name>-<ping-product-service>.<domain-name-from-ingress> If you use a release name other than myping or a domain other than ping-local.com you will need to update the aliases in /etc/hosts / accordingly. Instructions \u00b6 There is a file under the 30-helm directory of this repository named ingress.yaml . Modify this file for use with a local cluster: Replace insert domain name here with your domain name (ping-local.com in this guide) Edit line 11, removing the -public suffix for the class The file should look as shown here: global : envs : PING_IDENTITY_ACCEPT_EULA : \"YES\" ingress : enabled : true addReleaseNameToHost : prepend defaultDomain : \"ping-local.com\" defaultTlsSecret : annotations : nginx.ingress.kubernetes.io/backend-protocol : \"HTTPS\" kubernetes.io/ingress.class : \"nginx\" Create ingresses \u00b6 When deploying using helm and one of the example YAML files in the 30-helm directory, also pass in the ingress.yaml file to include the ingress definitions as part of the overall deployment. For example, to use the everything.yaml and include ingresses, you would run the following command from the 30-helm directory (after updating the ingress.yaml file): helm upgrade --install myping pingidentity/ping-devops -f everything.yaml -f ingress.yaml After everything has started, you will see the same pods and services as in the getting started example. In addition, you will see ingress definitions in the same namespace as the products: # List ingress definitions kubectl get ingress # Output NAME CLASS HOSTS ADDRESS PORTS AGE myping-pingaccess-admin <none> myping-pingaccess-admin.ping-local.com localhost 80 , 443 47m myping-pingaccess-engine <none> myping-pingaccess-engine.ping-local.com localhost 80 , 443 47m myping-pingauthorize <none> myping-pingauthorize.ping-local.com localhost 80 , 443 47m myping-pingdataconsole <none> myping-pingdataconsole.ping-local.com localhost 80 , 443 47m myping-pingdirectory <none> myping-pingdirectory.ping-local.com localhost 80 , 443 47m myping-pingfederate-admin <none> myping-pingfederate-admin.ping-local.com localhost 80 , 443 47m myping-pingfederate-engine <none> myping-pingfederate-engine.ping-local.com localhost 80 , 443 47m The HOSTS column reflects the entries added to the /etc/hosts file. To access a given service, enter the HOSTS entry in your browser (you will have to accept the self-signed certificate). For example, to view the Ping Federate console, you would access https://myping-pingfederate-admin.ping-local.com/ . For the Ping Data console, https://myping-pingdataconsole.ping-local.com and so on. Here are the credentials and URLs. This table is similar to the getting started example but reflects the release name used on this page: Product Connection Details PingFederate URL: https://myping-pingfederate-admin.ping-local.com/pingfederate/app Username: administrator Password: 2FederateM0re PingDirectory URL: https://myping-pingdataconsole.ping-local.com/console Server: ldaps://myping-pingdirectory-cluster:1636 Username: administrator Password: 2FederateM0re PingAccess URL: https://myping-pingaccess-admin.ping-local.com Username: administrator Password: 2FederateM0re PingAuthorize URL: https://myping-pingdataconsole/console Server: ldaps://myping-pingauthorize-cluster:1636 Username: administrator Password: 2FederateM0re Cleaning up \u00b6 Since the ingresses are deployed as part of the overall release, deleting the release will also remove the ingress definitions (leaving the ingress controller intact). The ingress controller will be removed when the cluster is deleted. If you only want to remove the ingress controller, you can either: Run kubectl delete -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/1.23/deploy.yaml if you installed the controller from Github OR Run kubectl delete -f ./20-kubernetes/kind-nginx.yaml if you used the local copy to install the controller.","title":"Ingress on local Kind Cluster"},{"location":"deployment/deployHelmLocalIngress/#local-kind-ingress","text":"If you have deployed the local kind cluster as outlined on the create a local cluster page, follow these instructions to use an ingress for accessing your products.","title":"Local Kind ingress"},{"location":"deployment/deployHelmLocalIngress/#prerequisites","text":"A kind cluster deployed with ingress enabled. For this guide, the cluster name ping is assumed The hostname aliases have been appended to the /etc/hosts file You have created the secret for your DevOps user and key for retrieving licenses","title":"Prerequisites"},{"location":"deployment/deployHelmLocalIngress/#assumptions","text":"With the /etc/hosts file entries created from the page linked above, the release in helm must be myping for the hostnames to work with the configuration here. Consider the first entry as an example: 127 .0.0.1 myping-pingaccess-admin.ping-local.com ... When using our charts, the release name provided to helm is prepended - that is what provides the myping- portion of the hostname in the file. The ping-local.com domain suffix is provided through the ingress definitions as shown later on this page. So, the structure is: <helm-release-name>-<ping-product-service>.<domain-name-from-ingress> If you use a release name other than myping or a domain other than ping-local.com you will need to update the aliases in /etc/hosts / accordingly.","title":"Assumptions"},{"location":"deployment/deployHelmLocalIngress/#instructions","text":"There is a file under the 30-helm directory of this repository named ingress.yaml . Modify this file for use with a local cluster: Replace insert domain name here with your domain name (ping-local.com in this guide) Edit line 11, removing the -public suffix for the class The file should look as shown here: global : envs : PING_IDENTITY_ACCEPT_EULA : \"YES\" ingress : enabled : true addReleaseNameToHost : prepend defaultDomain : \"ping-local.com\" defaultTlsSecret : annotations : nginx.ingress.kubernetes.io/backend-protocol : \"HTTPS\" kubernetes.io/ingress.class : \"nginx\"","title":"Instructions"},{"location":"deployment/deployHelmLocalIngress/#create-ingresses","text":"When deploying using helm and one of the example YAML files in the 30-helm directory, also pass in the ingress.yaml file to include the ingress definitions as part of the overall deployment. For example, to use the everything.yaml and include ingresses, you would run the following command from the 30-helm directory (after updating the ingress.yaml file): helm upgrade --install myping pingidentity/ping-devops -f everything.yaml -f ingress.yaml After everything has started, you will see the same pods and services as in the getting started example. In addition, you will see ingress definitions in the same namespace as the products: # List ingress definitions kubectl get ingress # Output NAME CLASS HOSTS ADDRESS PORTS AGE myping-pingaccess-admin <none> myping-pingaccess-admin.ping-local.com localhost 80 , 443 47m myping-pingaccess-engine <none> myping-pingaccess-engine.ping-local.com localhost 80 , 443 47m myping-pingauthorize <none> myping-pingauthorize.ping-local.com localhost 80 , 443 47m myping-pingdataconsole <none> myping-pingdataconsole.ping-local.com localhost 80 , 443 47m myping-pingdirectory <none> myping-pingdirectory.ping-local.com localhost 80 , 443 47m myping-pingfederate-admin <none> myping-pingfederate-admin.ping-local.com localhost 80 , 443 47m myping-pingfederate-engine <none> myping-pingfederate-engine.ping-local.com localhost 80 , 443 47m The HOSTS column reflects the entries added to the /etc/hosts file. To access a given service, enter the HOSTS entry in your browser (you will have to accept the self-signed certificate). For example, to view the Ping Federate console, you would access https://myping-pingfederate-admin.ping-local.com/ . For the Ping Data console, https://myping-pingdataconsole.ping-local.com and so on. Here are the credentials and URLs. This table is similar to the getting started example but reflects the release name used on this page: Product Connection Details PingFederate URL: https://myping-pingfederate-admin.ping-local.com/pingfederate/app Username: administrator Password: 2FederateM0re PingDirectory URL: https://myping-pingdataconsole.ping-local.com/console Server: ldaps://myping-pingdirectory-cluster:1636 Username: administrator Password: 2FederateM0re PingAccess URL: https://myping-pingaccess-admin.ping-local.com Username: administrator Password: 2FederateM0re PingAuthorize URL: https://myping-pingdataconsole/console Server: ldaps://myping-pingauthorize-cluster:1636 Username: administrator Password: 2FederateM0re","title":"Create ingresses"},{"location":"deployment/deployHelmLocalIngress/#cleaning-up","text":"Since the ingresses are deployed as part of the overall release, deleting the release will also remove the ingress definitions (leaving the ingress controller intact). The ingress controller will be removed when the cluster is deleted. If you only want to remove the ingress controller, you can either: Run kubectl delete -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/1.23/deploy.yaml if you installed the controller from Github OR Run kubectl delete -f ./20-kubernetes/kind-nginx.yaml if you used the local copy to install the controller.","title":"Cleaning up"},{"location":"deployment/deployK8s-AKS/","text":"Preparing Azure Kubernetes Service \u00b6 This directory contains scripts and deployment files to help with the deployment, management, and scaling of Ping Identity DevOps Docker images to Microsoft Azure Kubernetes Service (AKS). Prerequisites \u00b6 Before you begin, you must: Set up your DevOps environment and run a test deployment of the products. For more information, see Get Started . Create a Kubernetes cluster on AKS. Create a Kubernetes secret using your DevOps credentials. See the For Kubernetes topic in Using your DevOps user and key . Download and install the Azure CLI . We also highly recommend you are familiar with the information in these AKS articles: Azure Kubernetes Service Deploying our fullstack example in AKS \u00b6 Create an Azure Resource Group to put all resources into by entering: az group create \\ --name ping-devops-rg \\ --location westus Create a two-node Azure AKS cluster by entering the following. az aks create \\ --resource-group ping-devops-rg \\ --name ping-devops-cluster \\ --node-count 2 \\ --enable-addons monitoring \\ --ssh-key-value ~/.ssh/id_rsa.pub You need a public certificate by default in ~/.ssh/id_rsa.pub. Import the AKS Credentials into .kube/config by entering: az aks get-credentials \\ --resource-group ping-devops-rg \\ --name ping-devops-cluster At this point, the cluster should be ready for helm deployments. To clean up the Azure Resource Group and all associated resources, including the AKS cluster created, enter the following command. Warning This will remove everything you created that is associated with this resource group. az group delete \\ --name ping-devops-rg","title":"Azure Kubernetes Service"},{"location":"deployment/deployK8s-AKS/#preparing-azure-kubernetes-service","text":"This directory contains scripts and deployment files to help with the deployment, management, and scaling of Ping Identity DevOps Docker images to Microsoft Azure Kubernetes Service (AKS).","title":"Preparing Azure Kubernetes Service"},{"location":"deployment/deployK8s-AKS/#prerequisites","text":"Before you begin, you must: Set up your DevOps environment and run a test deployment of the products. For more information, see Get Started . Create a Kubernetes cluster on AKS. Create a Kubernetes secret using your DevOps credentials. See the For Kubernetes topic in Using your DevOps user and key . Download and install the Azure CLI . We also highly recommend you are familiar with the information in these AKS articles: Azure Kubernetes Service","title":"Prerequisites"},{"location":"deployment/deployK8s-AKS/#deploying-our-fullstack-example-in-aks","text":"Create an Azure Resource Group to put all resources into by entering: az group create \\ --name ping-devops-rg \\ --location westus Create a two-node Azure AKS cluster by entering the following. az aks create \\ --resource-group ping-devops-rg \\ --name ping-devops-cluster \\ --node-count 2 \\ --enable-addons monitoring \\ --ssh-key-value ~/.ssh/id_rsa.pub You need a public certificate by default in ~/.ssh/id_rsa.pub. Import the AKS Credentials into .kube/config by entering: az aks get-credentials \\ --resource-group ping-devops-rg \\ --name ping-devops-cluster At this point, the cluster should be ready for helm deployments. To clean up the Azure Resource Group and all associated resources, including the AKS cluster created, enter the following command. Warning This will remove everything you created that is associated with this resource group. az group delete \\ --name ping-devops-rg","title":"Deploying our fullstack example in AKS"},{"location":"deployment/deployK8s-AWS/","text":"Preparing AWS EKS for Multi-Region Deployments \u00b6 Overview \u00b6 In this guide you will deploy two Kubernetes clusters, each in a different Amazon Web Services (AWS) region. An AWS virtual private cloud (VPC) is assigned and dedicated to each cluster. Throughout this document, \"VPC\" is synonymous with \"cluster\". Prerequisites \u00b6 Before you begin, you must have: AWS CLI eksctl , the current version AWS account permissions to create clusters Configuring the AWS CLI \u00b6 If you have not already done so, configure the AWS CLI to use your profile and credentials: To assign your profile and supply your aws_access_key_id and aws_secret_access_key , run the following command: aws configure --profile = <aws-profile> When prompted, provide your aws_access_key_id and aws_secret_access_key . Open the ~/.aws/credentials file in a text editor and add your AWS role_arn . For example: \u201crole_arn = arn:aws:iam::xxxxxxxx4146:role/xxx\u201d Create the multi-region clusters \u00b6 Create the YAML files to configure the the clusters. You will create the clusters in different AWS regions. For this example, we use the ca-central-1 region and the us-west-2 region. First cluster, using the ca-central-1 region and the reserved CIDR 172.16.0.0 : apiVersion : eksctl.io/v1alpha5 kind : ClusterConfig metadata : name : pingfed-ca-central-1 region : ca-central-1 version : \"1.17\" vpc : cidr : 172.16.0.0/16 managedNodeGroups : - name : us-west-2a-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true - name : us-west-2b-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true For production purposes, select a VPC with a private IP. The ssh entry is optional, allowing you to SSH in to your cluster. Second cluster, using the us-west-2 region and the reserved CIDR 10.0.0.0 : apiVersion : eksctl.io/v1alpha5 kind : ClusterConfig metadata : name : pingfed-us-west-2 region : us-west-2 version : \"1.17\" vpc : cidr : 10.0.0.0/16 managedNodeGroups : - name : us-west-2a-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true - name : us-west-2b-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true For production purposes, select a VPC with a private IP. The ssh entry is optional, allowing you to SSH in to your cluster. Create the clusters using eksctl . Create the first cluster: eksctl create cluster -f ca-central-1.yaml --profile <aws-profile> Create the second cluster: eksctl create cluster -f us-west-2.yaml --profile <aws-profile> Sign on to the AWS console and navigate to the VPC service. Select Your VPCs (under Virtual Private Cloud), and record the VPC details for the clusters that were just created. Make note of the VpcId values for the ca-central-1 and us-west-2 VPCs for use in subsequent steps. Set up VPC peering between the two clusters. Create a peering connection from the cluster in the us-west-2 region to the cluster in the ca-central-1 region, using the VPC Dashboard as in the previous step. At the top right of the page, select the Oregon (us-west-2) region. Select Peering Connections and click Create Peering Connection . Assign a unique name for the peering connection (for example, us-west-2-to-ca-central-1). Under the Select a local VPC to peer with section, enter the VpcId value for the us-west-2 VPC. In the Select another VPC to peer with list, select My account --> Another region --> Canada Central (ca-central-1). Under the VPC (Accepter) section, enter the VpcId value for the ca-central-1 region. Click Create Peering Connection and when you receive a confirmation message, click OK to continue. At the top right of the page, change the region to Canada Central . Select Peering Connections . The peering connection status for us-west-2 will show as Pending Acceptance . Select the ca-central-1 connection, click the Actions list, and select Accept Request and confirm when prompted. The VPC peering connection status should now show as Active . Get the subnet information for each cluster node. Each cluster node uses a different subnet, so there are three subnets assigned to each VPC. The information displayed contains the subnet ID for each subnet. Use the subnet IDs in the subsequent step to get the associated routing tables. At the top right of the page, change the region to Oregon . Go to the EC2 service, and select Instances . Apply a filter, if needed, to find your nodes for the cluster. Select each node and record the Subnet ID for use in a subsequent step. At the top right of the page, change the region to Canada Central , and repeat these steps to find and record the subnet IDs for this VPC. Get the routing table associated with the subnets for each VPC. Go to the VPC service for the Canada Central region. In the VPC Dashboard, select Subnets . For each subnet displayed, record the Routing Table value. You might have a single routing table for all of your subnets. You will use the routing table ID or IDs in a subsequent step. At the top right of the page, change the region to Oregon , and repeat these steps to find and record the routing table ID or IDs for this VPC. Modify the routing table or tables for each VPC to add a route to the other VPC using the peering connection that was created. In the VPC Dashboard, select Route Tables for the Oregon region. Select the route table you recorded for the us-west-2 (Oregon) VPC, and click the Routes button. Two routes are displayed. Click Edit Routes --> Add Route , and for Destination , enter the CIDR block for the ca-central-1 cluster (172.16.0.0/16). For Target , select the VPC peering connection you created in a prior step. Click Save Routes . A route for the ca-central-1 cluster directed to the peering connection is displayed. If more than one routing table is used for the us-west-2 VPC, repeat the previous steps for each routing table. At the top right of the page, change the region to Canada Central . Select the route table you recorded for the ca-central-1 (Canada Central) VPC, and click the Routes button. Two routes are displayed. Click Edit Routes --> Add Route , and for Destination , enter the CIDR block for the us-west-2 cluster (10.0.0.0/16). For Target , select the VPC peering connection you created in a prior step. Click Save Routes . A route for the us-west-2 cluster directed to the peering connection is displayed. If more than one routing table is used for the ca-central-1 VPC, repeat the previous steps for each routing table. Update the Security Groups for each VPC. Note the Security Group IDs for each VPC and add inbound and outbound rules for both the us-west-2 VPC, and the ca-central-1 VPC. In the VPC Dashboard, select Security Groups for the Canada Central region. Apply a filter to find the security groups for the ca-central-1 cluster, and select the security group with \u201c-nodegroup\u201d in the name. This security group is used for the firewall settings for all the worker nodes in the ca-central-1 cluster. Click Inbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 These ports are for are specific to PingFederate Clustering; adjust based on your products. Source: Custom, and enter the CIDR block for the us-west-2 (10.0.0.0/16) cluster. Click Save Rules to save the inbound security group rule for the ca-central-1 cluster. Click Outbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 As before, these ports are for are specific to PingFederate Clustering; adjust based on your products. Source: Custom, and enter the CIDR block for the us-west-2 (10.0.0.0/16) cluster. Click Save Rules to save the outbound security group rule for the ca-central-1 cluster. At the top right of the page, change the region to Oregon . The process for configuring these security groups will mirror the previous steps. Apply a filter to find the security groups for the us-west-2 cluster, and select the security group with \u201c-nodegroup\u201d in the name. This security group is used for the firewall settings for all the worker nodes in the us-west-2 cluster. Click Inbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 Again, PingFederate Clustering is used in this example; adjust based on your products. Source: Custom, and enter the CIDR block for the ca-central-1 (172.16.0.0/16) cluster. Click Save Rules to save the inbound security group rule for the us-west-2 cluster. Click Outbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 PingFederate Clustering again Source: Custom and enter the CIDR block for the ca-central-1 (172.16.0.0/16) cluster. Click Save Rules to save the outbound security group rule for the us-west-2 cluster.","title":"Peered EKS Clusters"},{"location":"deployment/deployK8s-AWS/#preparing-aws-eks-for-multi-region-deployments","text":"","title":"Preparing AWS EKS for Multi-Region Deployments"},{"location":"deployment/deployK8s-AWS/#overview","text":"In this guide you will deploy two Kubernetes clusters, each in a different Amazon Web Services (AWS) region. An AWS virtual private cloud (VPC) is assigned and dedicated to each cluster. Throughout this document, \"VPC\" is synonymous with \"cluster\".","title":"Overview"},{"location":"deployment/deployK8s-AWS/#prerequisites","text":"Before you begin, you must have: AWS CLI eksctl , the current version AWS account permissions to create clusters","title":"Prerequisites"},{"location":"deployment/deployK8s-AWS/#configuring-the-aws-cli","text":"If you have not already done so, configure the AWS CLI to use your profile and credentials: To assign your profile and supply your aws_access_key_id and aws_secret_access_key , run the following command: aws configure --profile = <aws-profile> When prompted, provide your aws_access_key_id and aws_secret_access_key . Open the ~/.aws/credentials file in a text editor and add your AWS role_arn . For example: \u201crole_arn = arn:aws:iam::xxxxxxxx4146:role/xxx\u201d","title":"Configuring the AWS CLI"},{"location":"deployment/deployK8s-AWS/#create-the-multi-region-clusters","text":"Create the YAML files to configure the the clusters. You will create the clusters in different AWS regions. For this example, we use the ca-central-1 region and the us-west-2 region. First cluster, using the ca-central-1 region and the reserved CIDR 172.16.0.0 : apiVersion : eksctl.io/v1alpha5 kind : ClusterConfig metadata : name : pingfed-ca-central-1 region : ca-central-1 version : \"1.17\" vpc : cidr : 172.16.0.0/16 managedNodeGroups : - name : us-west-2a-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true - name : us-west-2b-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true For production purposes, select a VPC with a private IP. The ssh entry is optional, allowing you to SSH in to your cluster. Second cluster, using the us-west-2 region and the reserved CIDR 10.0.0.0 : apiVersion : eksctl.io/v1alpha5 kind : ClusterConfig metadata : name : pingfed-us-west-2 region : us-west-2 version : \"1.17\" vpc : cidr : 10.0.0.0/16 managedNodeGroups : - name : us-west-2a-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true - name : us-west-2b-worker-nodes instanceType : t3a.2xlarge labels : {} tags : {} minSize : 1 maxSize : 2 desiredCapacity : 1 volumeSize : 12 privateNetworking : true ssh : publicKeyPath : ~/.ssh/id_rsa.pub iam : withAddonPolicies : imageBuilder : true autoScaler : true externalDNS : true certManager : true appMesh : true ebs : true fsx : true efs : true albIngress : true xRay : true cloudWatch : true For production purposes, select a VPC with a private IP. The ssh entry is optional, allowing you to SSH in to your cluster. Create the clusters using eksctl . Create the first cluster: eksctl create cluster -f ca-central-1.yaml --profile <aws-profile> Create the second cluster: eksctl create cluster -f us-west-2.yaml --profile <aws-profile> Sign on to the AWS console and navigate to the VPC service. Select Your VPCs (under Virtual Private Cloud), and record the VPC details for the clusters that were just created. Make note of the VpcId values for the ca-central-1 and us-west-2 VPCs for use in subsequent steps. Set up VPC peering between the two clusters. Create a peering connection from the cluster in the us-west-2 region to the cluster in the ca-central-1 region, using the VPC Dashboard as in the previous step. At the top right of the page, select the Oregon (us-west-2) region. Select Peering Connections and click Create Peering Connection . Assign a unique name for the peering connection (for example, us-west-2-to-ca-central-1). Under the Select a local VPC to peer with section, enter the VpcId value for the us-west-2 VPC. In the Select another VPC to peer with list, select My account --> Another region --> Canada Central (ca-central-1). Under the VPC (Accepter) section, enter the VpcId value for the ca-central-1 region. Click Create Peering Connection and when you receive a confirmation message, click OK to continue. At the top right of the page, change the region to Canada Central . Select Peering Connections . The peering connection status for us-west-2 will show as Pending Acceptance . Select the ca-central-1 connection, click the Actions list, and select Accept Request and confirm when prompted. The VPC peering connection status should now show as Active . Get the subnet information for each cluster node. Each cluster node uses a different subnet, so there are three subnets assigned to each VPC. The information displayed contains the subnet ID for each subnet. Use the subnet IDs in the subsequent step to get the associated routing tables. At the top right of the page, change the region to Oregon . Go to the EC2 service, and select Instances . Apply a filter, if needed, to find your nodes for the cluster. Select each node and record the Subnet ID for use in a subsequent step. At the top right of the page, change the region to Canada Central , and repeat these steps to find and record the subnet IDs for this VPC. Get the routing table associated with the subnets for each VPC. Go to the VPC service for the Canada Central region. In the VPC Dashboard, select Subnets . For each subnet displayed, record the Routing Table value. You might have a single routing table for all of your subnets. You will use the routing table ID or IDs in a subsequent step. At the top right of the page, change the region to Oregon , and repeat these steps to find and record the routing table ID or IDs for this VPC. Modify the routing table or tables for each VPC to add a route to the other VPC using the peering connection that was created. In the VPC Dashboard, select Route Tables for the Oregon region. Select the route table you recorded for the us-west-2 (Oregon) VPC, and click the Routes button. Two routes are displayed. Click Edit Routes --> Add Route , and for Destination , enter the CIDR block for the ca-central-1 cluster (172.16.0.0/16). For Target , select the VPC peering connection you created in a prior step. Click Save Routes . A route for the ca-central-1 cluster directed to the peering connection is displayed. If more than one routing table is used for the us-west-2 VPC, repeat the previous steps for each routing table. At the top right of the page, change the region to Canada Central . Select the route table you recorded for the ca-central-1 (Canada Central) VPC, and click the Routes button. Two routes are displayed. Click Edit Routes --> Add Route , and for Destination , enter the CIDR block for the us-west-2 cluster (10.0.0.0/16). For Target , select the VPC peering connection you created in a prior step. Click Save Routes . A route for the us-west-2 cluster directed to the peering connection is displayed. If more than one routing table is used for the ca-central-1 VPC, repeat the previous steps for each routing table. Update the Security Groups for each VPC. Note the Security Group IDs for each VPC and add inbound and outbound rules for both the us-west-2 VPC, and the ca-central-1 VPC. In the VPC Dashboard, select Security Groups for the Canada Central region. Apply a filter to find the security groups for the ca-central-1 cluster, and select the security group with \u201c-nodegroup\u201d in the name. This security group is used for the firewall settings for all the worker nodes in the ca-central-1 cluster. Click Inbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 These ports are for are specific to PingFederate Clustering; adjust based on your products. Source: Custom, and enter the CIDR block for the us-west-2 (10.0.0.0/16) cluster. Click Save Rules to save the inbound security group rule for the ca-central-1 cluster. Click Outbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 As before, these ports are for are specific to PingFederate Clustering; adjust based on your products. Source: Custom, and enter the CIDR block for the us-west-2 (10.0.0.0/16) cluster. Click Save Rules to save the outbound security group rule for the ca-central-1 cluster. At the top right of the page, change the region to Oregon . The process for configuring these security groups will mirror the previous steps. Apply a filter to find the security groups for the us-west-2 cluster, and select the security group with \u201c-nodegroup\u201d in the name. This security group is used for the firewall settings for all the worker nodes in the us-west-2 cluster. Click Inbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 Again, PingFederate Clustering is used in this example; adjust based on your products. Source: Custom, and enter the CIDR block for the ca-central-1 (172.16.0.0/16) cluster. Click Save Rules to save the inbound security group rule for the us-west-2 cluster. Click Outbound Rules --> Add Rule . Select these values for the rule: Type: Custom TCP Rule Protocol: TCP Port Range: 7600-7700 PingFederate Clustering again Source: Custom and enter the CIDR block for the ca-central-1 (172.16.0.0/16) cluster. Click Save Rules to save the outbound security group rule for the us-west-2 cluster.","title":"Create the multi-region clusters"},{"location":"deployment/deployK8sCloud/","text":"Kubernetes deployments for cloud platforms \u00b6 We currently have instructions for typical configuration of Kubernetes for use with Ping products on these platforms: Amazon Web Services (AWS) Elastic Kubernetes Service (EKS) Microsoft Azure Kubernetes Service (AKS) Each hosting platform supports and manages Kubernetes differently. Before you begin \u00b6 You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Create a Kubernetes cluster on one of these platforms: Amazon EKS Microsoft AKS Create a Kubernetes secret using your DevOps credentials. For more information, see For Kubernetes in Using your DevOps user and key . AWS EKS \u00b6 See Deploy Peered EKS Clusters . AKS \u00b6 See Deploy to Azure Kubernetes Service .","title":"Cloud Kubernetes Platform Prerequisites"},{"location":"deployment/deployK8sCloud/#kubernetes-deployments-for-cloud-platforms","text":"We currently have instructions for typical configuration of Kubernetes for use with Ping products on these platforms: Amazon Web Services (AWS) Elastic Kubernetes Service (EKS) Microsoft Azure Kubernetes Service (AKS) Each hosting platform supports and manages Kubernetes differently.","title":"Kubernetes deployments for cloud platforms"},{"location":"deployment/deployK8sCloud/#before-you-begin","text":"You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Create a Kubernetes cluster on one of these platforms: Amazon EKS Microsoft AKS Create a Kubernetes secret using your DevOps credentials. For more information, see For Kubernetes in Using your DevOps user and key .","title":"Before you begin"},{"location":"deployment/deployK8sCloud/#aws-eks","text":"See Deploy Peered EKS Clusters .","title":"AWS EKS"},{"location":"deployment/deployK8sCloud/#aks","text":"See Deploy to Azure Kubernetes Service .","title":"AKS"},{"location":"deployment/deployK8sClusterMetrics/","text":"Deploy a Kubernetes Cluster Metrics Stack \u00b6 This document covers deploying and using a sample open-source monitoring stack in a Kubernetes cluster. The resulting environment should not be considered production-ready. It is meant to show how quickly Ping DevOps software can produce metrics for consumption by a popular open-source monitoring system. This example metrics stack is not maintained or directly supported by Ping. Stack Components \u00b6 Open Source Tools kube-prometheus-stack - includes : Prometheus - Metrics collection and storage. Grafana - Metrics visualization in Dashboards. telegraf-operator - Metrics exposure and formatting. Grafana Dashboard - JSON file to import for dashboard definition. ping-devops values.yaml - values relevant only to exposing metrics for Ping Identity software. Prerequisites \u00b6 It is assumed you are familiar with the prerequisites for the base Helm examples. Beyond that, any knowledge of Prometheus, Grafana, and Telegraf is helpful. Deploy the Stack \u00b6 In the pingidentity-devops-getting-started/30-helm/cluster-metrics directory of this repository, edit the 01-prometheus-values.yaml as needed. This file provides configurations beyond the default kube-prometheus-stack. In this sample deployment, the monitoring stack is granted read access to the entire cluster and is deployed into the metrics namespace. Not for production use Changing these settings or making the deployment production-ready is beyond scope of this document. The full set of optional values can be found on the Github repository for the Prometheus chart. There are numerous lines that have ##CHANGEME . These lines should be considered for configuration options to meet your needs. After updating the file, deploy the kube-prometheus-stack . The path to the configuration file assumes you are in the root folder of the local repository copy: kubectl create namespace metrics helm upgrade --install metrics --repo https://prometheus-community.github.io/helm-charts kube-prometheus-stack -n metrics --version 30.0.1 -f 30-helm/cluster-metrics/01-prometheus-values.yaml Deploy telegraf-operator : helm upgrade --install telegraf --repo https://helm.influxdata.com/ telegraf-operator -n metrics --version 1.3.3 -f 30-helm/cluster-metrics/02-telegraf-values.yaml Telegraf operator makes it very easy to add monitoring sidecars to your deployments. All you need to do is add annotations, which are shown in 30-helm/cluster-metrics/03-ping-with-metrics-values.yaml These values can be copied to your ping-devops values.yaml manually, or the file can be referenced at the end of your helm install command. For example: helm upgrade --install ping-metrics pingidentity/ping-devops -f my-values.yaml -f 30-helm/cluster-metrics/03-ping-with-metrics-values.yaml After the Ping software is healthy and producing metrics, there should be sidecars on Ping pods. NAME READY STATUS ping-metrics-pingaccess-admin-0 1/1 Running ping-metrics-pingaccess-engine-68464d8cc8-mhlsv 2/2 Running ping-metrics-pingdataconsole-559786c98f-8wsrm 1/1 Running ping-metrics-pingdirectory-0 2/2 Running ping-metrics-pingfederate-admin-64fdb4b975-2xdjl 1/1 Running ping-metrics-pingfederate-engine-64c5f896c7-fn99v 2/2 Running Note the 2/2 indicator for pods with sidecars. View Metrics \u00b6 Browse to Grafana using the Ingress URL or by running a kubectl port-forward command. For example: kubectl port-forward svc/metrics-grafana --namespace metrics 9000:80 In your browser, navigate to http://localhost:9000 and log in with the user admin and the password set in 01-prometheus-values.yaml Finally, import the 04-ping-overview-dashboard.json using the + button on the left of Grafana's home screen. The Ping Identity Overview dashboard will have a dropdown for namespace at the top. Select the namespace running Ping products to see something similar to this example: Any of the panels can be edited, or new ones created to fit your needs.","title":"Sample Monitoring Stack"},{"location":"deployment/deployK8sClusterMetrics/#deploy-a-kubernetes-cluster-metrics-stack","text":"This document covers deploying and using a sample open-source monitoring stack in a Kubernetes cluster. The resulting environment should not be considered production-ready. It is meant to show how quickly Ping DevOps software can produce metrics for consumption by a popular open-source monitoring system. This example metrics stack is not maintained or directly supported by Ping.","title":"Deploy a Kubernetes Cluster Metrics Stack"},{"location":"deployment/deployK8sClusterMetrics/#stack-components","text":"Open Source Tools kube-prometheus-stack - includes : Prometheus - Metrics collection and storage. Grafana - Metrics visualization in Dashboards. telegraf-operator - Metrics exposure and formatting. Grafana Dashboard - JSON file to import for dashboard definition. ping-devops values.yaml - values relevant only to exposing metrics for Ping Identity software.","title":"Stack Components"},{"location":"deployment/deployK8sClusterMetrics/#prerequisites","text":"It is assumed you are familiar with the prerequisites for the base Helm examples. Beyond that, any knowledge of Prometheus, Grafana, and Telegraf is helpful.","title":"Prerequisites"},{"location":"deployment/deployK8sClusterMetrics/#deploy-the-stack","text":"In the pingidentity-devops-getting-started/30-helm/cluster-metrics directory of this repository, edit the 01-prometheus-values.yaml as needed. This file provides configurations beyond the default kube-prometheus-stack. In this sample deployment, the monitoring stack is granted read access to the entire cluster and is deployed into the metrics namespace. Not for production use Changing these settings or making the deployment production-ready is beyond scope of this document. The full set of optional values can be found on the Github repository for the Prometheus chart. There are numerous lines that have ##CHANGEME . These lines should be considered for configuration options to meet your needs. After updating the file, deploy the kube-prometheus-stack . The path to the configuration file assumes you are in the root folder of the local repository copy: kubectl create namespace metrics helm upgrade --install metrics --repo https://prometheus-community.github.io/helm-charts kube-prometheus-stack -n metrics --version 30.0.1 -f 30-helm/cluster-metrics/01-prometheus-values.yaml Deploy telegraf-operator : helm upgrade --install telegraf --repo https://helm.influxdata.com/ telegraf-operator -n metrics --version 1.3.3 -f 30-helm/cluster-metrics/02-telegraf-values.yaml Telegraf operator makes it very easy to add monitoring sidecars to your deployments. All you need to do is add annotations, which are shown in 30-helm/cluster-metrics/03-ping-with-metrics-values.yaml These values can be copied to your ping-devops values.yaml manually, or the file can be referenced at the end of your helm install command. For example: helm upgrade --install ping-metrics pingidentity/ping-devops -f my-values.yaml -f 30-helm/cluster-metrics/03-ping-with-metrics-values.yaml After the Ping software is healthy and producing metrics, there should be sidecars on Ping pods. NAME READY STATUS ping-metrics-pingaccess-admin-0 1/1 Running ping-metrics-pingaccess-engine-68464d8cc8-mhlsv 2/2 Running ping-metrics-pingdataconsole-559786c98f-8wsrm 1/1 Running ping-metrics-pingdirectory-0 2/2 Running ping-metrics-pingfederate-admin-64fdb4b975-2xdjl 1/1 Running ping-metrics-pingfederate-engine-64c5f896c7-fn99v 2/2 Running Note the 2/2 indicator for pods with sidecars.","title":"Deploy the Stack"},{"location":"deployment/deployK8sClusterMetrics/#view-metrics","text":"Browse to Grafana using the Ingress URL or by running a kubectl port-forward command. For example: kubectl port-forward svc/metrics-grafana --namespace metrics 9000:80 In your browser, navigate to http://localhost:9000 and log in with the user admin and the password set in 01-prometheus-values.yaml Finally, import the 04-ping-overview-dashboard.json using the + button on the left of Grafana's home screen. The Ping Identity Overview dashboard will have a dropdown for namespace at the top. Select the namespace running Ping products to see something similar to this example: Any of the panels can be edited, or new ones created to fit your needs.","title":"View Metrics"},{"location":"deployment/deployK8sUtilitySidecar/","text":"Using a Utility Sidecar \u00b6 Why Use a Sidecar \u00b6 When running containerized software, each individual container should represent one process. This model allows containers to be minimal, more easily secured, and to be configured with the proper resource allocations accurately. There are common situations where running commands and tools on a pod running Ping Identity software is useful. These situations include collecting a support archive, exporting data, or running a backup. However, because many of these processes might introduce unexpected contention for CPU and memory resources, executing such commands inside the container running the actual server process can be risky. The container for the product is sized for the server process without consideration for auxiliary processes that might be executed at the same time. To avoid these issues, one practice is to use a utility sidecar for tools that need to run alongside the main server process. This sidecar runs as a separate container on the pod. However, in the Kubernetes model, all containers in the same pod can share a process namespace (if enabled), and can also be configured to share a persistent volume. This co-location allows any required processes to run in the sidecar without competing with the main server process for the same resources. The major downside of running a utility sidecar is that it must always be running because new containers cannot be attached to existing pods. The sidecar can be configured with minimal memory and CPU resources, but will continue to run even when it is not actively in use. StatefulSets You cannot remove a sidecar from a running StatefulSet without rolling all the pods. How to Deploy a Sidecar \u00b6 If you are using the Ping Identity Helm charts , you can update your custom values.yaml file to enable a sidecar for any product. For example: pingdirectory : enabled : true workload : # Share process namespace for sidecar to get a view inside the main container shareProcessNamespace : true # Share /tmp so sidecar can see Java processes. Don't keep /tmp around between restarts though. volumes : - name : temp emptyDir : {} volumeMounts : - name : temp mountPath : /tmp # Backups, restores, and other CLI tools should be run from the sidecar to prevent interfering # with the main PingDirectory container process. utilitySidecar : enabled : true These values will add a sidecar container using the same image as the main server container, configured with minimal resources and waiting in an endless loop. The generated yaml will look like the following example and could be applied directly outside of Helm: apiVersion : apps/v1 kind : StatefulSet metadata : labels : app.kubernetes.io/name : pingdirectory name : sidecar-pingdirectory spec : replicas : 1 selector : matchLabels : app.kubernetes.io/name : pingdirectory serviceName : sidecar-pingdirectory-cluster template : metadata : labels : app.kubernetes.io/name : pingdirectory spec : containers : - envFrom : - secretRef : name : devops-secret optional : true image : pingidentity/pingdirectory:latest livenessProbe : exec : command : - /opt/liveness.sh failureThreshold : 4 initialDelaySeconds : 30 periodSeconds : 30 successThreshold : 1 timeoutSeconds : 5 name : pingdirectory ports : - containerPort : 1443 name : https - containerPort : 1389 name : ldap - containerPort : 1636 name : ldaps readinessProbe : exec : command : - /opt/readiness.sh failureThreshold : 4 initialDelaySeconds : 30 periodSeconds : 30 successThreshold : 1 timeoutSeconds : 5 resources : limits : cpu : 2 memory : 8Gi requests : cpu : 50m memory : 2Gi startupProbe : exec : command : - /opt/liveness.sh failureThreshold : 180 periodSeconds : 10 timeoutSeconds : 5 volumeMounts : - mountPath : /tmp name : temp - mountPath : /opt/out name : out-dir - args : - -f - /dev/null command : - tail image : pingidentity/pingdirectory:latest name : utility-sidecar resources : limits : cpu : \"1\" memory : 2Gi requests : cpu : \"0\" memory : 128Mi volumeMounts : - mountPath : /opt/out name : out-dir - mountPath : /tmp name : temp securityContext : fsGroup : 0 runAsGroup : 0 runAsUser : 9031 shareProcessNamespace : true terminationGracePeriodSeconds : 300 volumes : - emptyDir : {} name : temp - name : out-dir persistentVolumeClaim : claimName : out-dir volumeClaimTemplates : - metadata : name : out-dir spec : accessModes : - ReadWriteOnce resources : requests : storage : 8Gi storageClassName : null","title":"Utility Sidecars"},{"location":"deployment/deployK8sUtilitySidecar/#using-a-utility-sidecar","text":"","title":"Using a Utility Sidecar"},{"location":"deployment/deployK8sUtilitySidecar/#why-use-a-sidecar","text":"When running containerized software, each individual container should represent one process. This model allows containers to be minimal, more easily secured, and to be configured with the proper resource allocations accurately. There are common situations where running commands and tools on a pod running Ping Identity software is useful. These situations include collecting a support archive, exporting data, or running a backup. However, because many of these processes might introduce unexpected contention for CPU and memory resources, executing such commands inside the container running the actual server process can be risky. The container for the product is sized for the server process without consideration for auxiliary processes that might be executed at the same time. To avoid these issues, one practice is to use a utility sidecar for tools that need to run alongside the main server process. This sidecar runs as a separate container on the pod. However, in the Kubernetes model, all containers in the same pod can share a process namespace (if enabled), and can also be configured to share a persistent volume. This co-location allows any required processes to run in the sidecar without competing with the main server process for the same resources. The major downside of running a utility sidecar is that it must always be running because new containers cannot be attached to existing pods. The sidecar can be configured with minimal memory and CPU resources, but will continue to run even when it is not actively in use. StatefulSets You cannot remove a sidecar from a running StatefulSet without rolling all the pods.","title":"Why Use a Sidecar"},{"location":"deployment/deployK8sUtilitySidecar/#how-to-deploy-a-sidecar","text":"If you are using the Ping Identity Helm charts , you can update your custom values.yaml file to enable a sidecar for any product. For example: pingdirectory : enabled : true workload : # Share process namespace for sidecar to get a view inside the main container shareProcessNamespace : true # Share /tmp so sidecar can see Java processes. Don't keep /tmp around between restarts though. volumes : - name : temp emptyDir : {} volumeMounts : - name : temp mountPath : /tmp # Backups, restores, and other CLI tools should be run from the sidecar to prevent interfering # with the main PingDirectory container process. utilitySidecar : enabled : true These values will add a sidecar container using the same image as the main server container, configured with minimal resources and waiting in an endless loop. The generated yaml will look like the following example and could be applied directly outside of Helm: apiVersion : apps/v1 kind : StatefulSet metadata : labels : app.kubernetes.io/name : pingdirectory name : sidecar-pingdirectory spec : replicas : 1 selector : matchLabels : app.kubernetes.io/name : pingdirectory serviceName : sidecar-pingdirectory-cluster template : metadata : labels : app.kubernetes.io/name : pingdirectory spec : containers : - envFrom : - secretRef : name : devops-secret optional : true image : pingidentity/pingdirectory:latest livenessProbe : exec : command : - /opt/liveness.sh failureThreshold : 4 initialDelaySeconds : 30 periodSeconds : 30 successThreshold : 1 timeoutSeconds : 5 name : pingdirectory ports : - containerPort : 1443 name : https - containerPort : 1389 name : ldap - containerPort : 1636 name : ldaps readinessProbe : exec : command : - /opt/readiness.sh failureThreshold : 4 initialDelaySeconds : 30 periodSeconds : 30 successThreshold : 1 timeoutSeconds : 5 resources : limits : cpu : 2 memory : 8Gi requests : cpu : 50m memory : 2Gi startupProbe : exec : command : - /opt/liveness.sh failureThreshold : 180 periodSeconds : 10 timeoutSeconds : 5 volumeMounts : - mountPath : /tmp name : temp - mountPath : /opt/out name : out-dir - args : - -f - /dev/null command : - tail image : pingidentity/pingdirectory:latest name : utility-sidecar resources : limits : cpu : \"1\" memory : 2Gi requests : cpu : \"0\" memory : 128Mi volumeMounts : - mountPath : /opt/out name : out-dir - mountPath : /tmp name : temp securityContext : fsGroup : 0 runAsGroup : 0 runAsUser : 9031 shareProcessNamespace : true terminationGracePeriodSeconds : 300 volumes : - emptyDir : {} name : temp - name : out-dir persistentVolumeClaim : claimName : out-dir volumeClaimTemplates : - metadata : name : out-dir spec : accessModes : - ReadWriteOnce resources : requests : storage : 8Gi storageClassName : null","title":"How to Deploy a Sidecar"},{"location":"deployment/deployLocalK8sCluster/","text":"Deploy a local Kubernetes Cluster \u00b6 If you do not have access to a managed Kubernetes cluster you can deploy one on your local machine or VM. This document describes deploying a cluster with kind . Refer to the documentation for additional information. Demo Use Only The instructions in this document are for testing and learning, and not intended for use in production. Why not Docker Desktop? The process outlined on this page will create a Kubernetes in Docker ( kind ) cluster. Kind is very similar in functionality to the Docker Desktop implementation of Kubernetes, but the advantage here is that it is more portable (not requiring Docker Desktop). In addition, the files provided will enable and deploy an ingress controller for communicating with the services in the cluster. In the Getting Started example, port-forwarding was needed with Docker Desktop. With the ingress in place, a port-forward is not required. Prerequisites \u00b6 docker kubectl ports 80 and 443 available on machine Docker System Resources Docker on Linux is typically installed with root privileges and thus has access to the full resources of the machine. Docker Desktop for Mac and Windows provides a way to set the resources allocated to Docker. For this documentation, a Macbook Pro was configured to use 3 CPUs and 6 GB Memory. You can adjust these values as necessary for your needs. Kubernetes Version For this guide, the kind implementation of Kubernetes 1.23 is used. Steps \u00b6 Install kind on your platform. Use the provided sample kind.yaml file to create a kind cluster named ping with ingress enabled. From the root of the repository code, run: kind create cluster --config = ./20-kubernetes/kind.yaml Output: Test cluster health by running the following commands: kubectl cluster-info Kubernetes control plane is running at https://127.0.0.1:58527 CoreDNS is running at https://127.0.0.1:58527/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy kubectl version --short < output removed > Server Version: v1.23.6 kubectl get nodes NAME STATUS ROLES AGE VERSION ping-control-plane Ready control-plane,master 14m v1.23.6 Next, install the nginx-ingress-controller for kind . In the event the Github file is unavailable, a copy has been made to this repository here . To use the Github file: kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/1.23/deploy.yaml To use the local copy: kubectl apply -f ./20-kubernetes/kind-nginx.yaml To wait for the Nginx ingress to reach a healthy state, run the following command. You can also observe the pod status using k9s or by running kubectl get pods --namespace ingress-nginx . You should see one controller pod running when the ingress controller is ready. This command should exit after no more than 90 seconds or so, depending on the speed of your computer: kubectl wait --namespace ingress-nginx \\ --for = condition = ready pod \\ --selector = app.kubernetes.io/component = controller \\ --timeout = 90s Verify nginx-ingress-controller is working: curl localhost Output: <html> <head><title>404 Not Found</title></head> <body> <center><h1>404 Not Found</h1></center> <hr><center>nginx</center> </body> </html> Our examples will use the Helm release name myping and DNS domain suffix *ping-local.com for accessing applications. You can add all expected hosts to /etc/hosts : echo '127.0.0.1 myping-pingaccess-admin.ping-local.com myping-pingaccess-engine.ping-local.com myping-pingauthorize.ping-local.com myping-pingauthorizepap.ping-local.com myping-pingdataconsole.ping-local.com myping-pingdelegator.ping-local.com myping-pingdirectory.ping-local.com myping-pingdatagovernance.ping-local.com myping-pingdatagovernancepap.ping-local.com myping-pingfederate-admin.ping-local.com myping-pingfederate-engine.ping-local.com myping-pingcentral.ping-local.com' | sudo tee -a /etc/hosts > /dev/null Setup is complete. This local Kubernetes environment should be ready to deploy our Helm examples Stop the cluster \u00b6 When you are finished, you can remove the cluster by running the following command. Doing so will require you to create the cluster and install the ingress controller when you want another cluster. kind delete cluster --name ping","title":"Create a local Kubernetes Cluster"},{"location":"deployment/deployLocalK8sCluster/#deploy-a-local-kubernetes-cluster","text":"If you do not have access to a managed Kubernetes cluster you can deploy one on your local machine or VM. This document describes deploying a cluster with kind . Refer to the documentation for additional information. Demo Use Only The instructions in this document are for testing and learning, and not intended for use in production. Why not Docker Desktop? The process outlined on this page will create a Kubernetes in Docker ( kind ) cluster. Kind is very similar in functionality to the Docker Desktop implementation of Kubernetes, but the advantage here is that it is more portable (not requiring Docker Desktop). In addition, the files provided will enable and deploy an ingress controller for communicating with the services in the cluster. In the Getting Started example, port-forwarding was needed with Docker Desktop. With the ingress in place, a port-forward is not required.","title":"Deploy a local Kubernetes Cluster"},{"location":"deployment/deployLocalK8sCluster/#prerequisites","text":"docker kubectl ports 80 and 443 available on machine Docker System Resources Docker on Linux is typically installed with root privileges and thus has access to the full resources of the machine. Docker Desktop for Mac and Windows provides a way to set the resources allocated to Docker. For this documentation, a Macbook Pro was configured to use 3 CPUs and 6 GB Memory. You can adjust these values as necessary for your needs. Kubernetes Version For this guide, the kind implementation of Kubernetes 1.23 is used.","title":"Prerequisites"},{"location":"deployment/deployLocalK8sCluster/#steps","text":"Install kind on your platform. Use the provided sample kind.yaml file to create a kind cluster named ping with ingress enabled. From the root of the repository code, run: kind create cluster --config = ./20-kubernetes/kind.yaml Output: Test cluster health by running the following commands: kubectl cluster-info Kubernetes control plane is running at https://127.0.0.1:58527 CoreDNS is running at https://127.0.0.1:58527/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy kubectl version --short < output removed > Server Version: v1.23.6 kubectl get nodes NAME STATUS ROLES AGE VERSION ping-control-plane Ready control-plane,master 14m v1.23.6 Next, install the nginx-ingress-controller for kind . In the event the Github file is unavailable, a copy has been made to this repository here . To use the Github file: kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/1.23/deploy.yaml To use the local copy: kubectl apply -f ./20-kubernetes/kind-nginx.yaml To wait for the Nginx ingress to reach a healthy state, run the following command. You can also observe the pod status using k9s or by running kubectl get pods --namespace ingress-nginx . You should see one controller pod running when the ingress controller is ready. This command should exit after no more than 90 seconds or so, depending on the speed of your computer: kubectl wait --namespace ingress-nginx \\ --for = condition = ready pod \\ --selector = app.kubernetes.io/component = controller \\ --timeout = 90s Verify nginx-ingress-controller is working: curl localhost Output: <html> <head><title>404 Not Found</title></head> <body> <center><h1>404 Not Found</h1></center> <hr><center>nginx</center> </body> </html> Our examples will use the Helm release name myping and DNS domain suffix *ping-local.com for accessing applications. You can add all expected hosts to /etc/hosts : echo '127.0.0.1 myping-pingaccess-admin.ping-local.com myping-pingaccess-engine.ping-local.com myping-pingauthorize.ping-local.com myping-pingauthorizepap.ping-local.com myping-pingdataconsole.ping-local.com myping-pingdelegator.ping-local.com myping-pingdirectory.ping-local.com myping-pingdatagovernance.ping-local.com myping-pingdatagovernancepap.ping-local.com myping-pingfederate-admin.ping-local.com myping-pingfederate-engine.ping-local.com myping-pingcentral.ping-local.com' | sudo tee -a /etc/hosts > /dev/null Setup is complete. This local Kubernetes environment should be ready to deploy our Helm examples","title":"Steps"},{"location":"deployment/deployLocalK8sCluster/#stop-the-cluster","text":"When you are finished, you can remove the cluster by running the following command. Doing so will require you to create the cluster and install the ingress controller when you want another cluster. kind delete cluster --name ping","title":"Stop the cluster"},{"location":"deployment/deploymentPatterns/","text":"Operating Patterns \u00b6 This page discusses how to have a successful first day and beyond. After you are comfortable with the deployment examples in the getting-started repository, you can shift your focus to managing ongoing operations of the products that are relevant to you. Since it is not feasible to cover every operating scenario, this section will focus on guidance to identify an operating pattern suitable for your organization. The PingFederate application is used as an example of performing this assessment. PingFederate Configuration Management \u00b6 PingFederate has a variety of operating patterns. These patterns typically involve a trade-off between ease of implementation and mitigation of deployment risks. To simplify the moving parts we will categorize PingFederate Configuration into three categories: Infrastructure Config Examples: Resource allocation (CPU/Memory/Storage), Client Ingress (Access and Hostnames), Image Version, Exposed Ports, Environment Variable Definition, Secrets Definition Orchestration - These items are defined in the release's values.yaml and any change triggers an update. Server Config Examples: *.properties files, Integration Kits, HTML Templates, logs formatting (log4j2.xml). This can be oversimplified to everything besides the /instance/server/default/data folder or /instance/bulk-config/data.json . Orchestration - These items are stored in the Server Profile and any change should trigger an update. It is up to the implementor to ensure that happens. This can be done by adding a non-functional variable in values.yaml to track the current profile \"version\". Example: SERVER_PROFILE_VERSION: v1.1 App Config Examples - Core PingFederate configuration. Changes that are typicaly made through the UI or Admin APIs. This can be oversimplified to the /instance/server/default/data folder or /instance/bulk-config/data.json . Orchestration - Dependent of your operating pattern this changes may be delivered via a rolling update, or by configuration replication. PingFederate Data Mount \u00b6 In the most common pattern, we attach a persistent volume to /opt/out/instance/server/default/data on the PingFederate Admin Console only . This pattern is intended to be used when PingFederate Administrators need to deliver configuration through the UI in each environment, including production . Another reason for this may be if SP connections are allowed to be created by app developers via Admin API. In both of these scenarios, the defining factor is that there are mutations in the production Admin console that are not being tracked in any other way, like source control, and therefore must be persisted. Attributes of this pattern : App Config is persisted in each SDLC environment (e.g. Dev, QA, Prod). App Config promotion is done manually or via Admin API. App Config is replicated from Admin Console to Engines. Server Config is maintained and delivered via server profile. Server profile does not include App Config. Backups are taken regularly in case of Persistent Volume loss or corruption. Data Mount Example \u00b6 Helm values relevant to this configuration may look like: pingfederate-admin : enabled : true container : replicaCount : 1 envs : SERVER_PROFILE_URL : https://github.com/pingidentity/pingidentity-server-profiles.git SERVER_PROFILE_PATH : pf-data-mount/pingfederate SERVER_PROFILE_VERSION : v1.1 workload : type : StatefulSet statefulSet : persistentvolume : enabled : true volumes : out-dir : ## NOTE THIS PVC DEFINITION ## mountPath : /opt/out/instance/server/default/data persistentVolumeClaim : accessModes : - ReadWriteOnce storageClassName : resources : requests : storage : 8Gi pingfederate-engine : enabled : true envs : SERVER_PROFILE_URL : https://github.com/samir-gandhi/server-profiles.git SERVER_PROFILE_PATH : pf-data-mount/pingfederate SERVER_PROFILE_VERSION : v1.1 container : replicaCount : 3 workload : type : Deployment deployment : strategy : type : RollingUpdate rollingUpdate : maxSurge : 1 maxUnavailable : 0 The key aspect here is pingfederate-admin.workload.statefulset.persistentvoume.volumes.out-dir.mountPath=/opt/out/instance/server/default/data . This is where all UI configuration (App Config) is stored as files. Because this is the mountPath , PingFederate admins have the freedom to deliver any files not used in /opt/out/instance/server/default/data via Server Profile. For example, adding a new IDP adapter requires a restart of the service in order for the adapter to be identified and available to App Config. The steps in this case would be: Add the adapter at https://github.com/samir-gandhi/server-profiles/pf-data-mount/pingfederate/instance/server/defaule/deploy/idp-adapter-name-1.jar update SERVER_PROFILE_VERSION: v1.1 -> SERVER_PROFILE_VERSION: v1.2 on both the admin and engine run helm upgrade --install myping pingidentity/ping-devops -f /path/to/values.yaml If the release already existed, the variable change signifies that the definition has mutated, and thus must be re-deployed. The admin pod will be deleted and recreated, while the engines will surge and roll one by one. Reference links: K8s - Performing a Rolling Update K8s - Update a deployment Data Mount Pros and Cons \u00b6 Values with this approach Managing App Config is more familiar to PingFederate admins with traditional experience. Less to account for when building a CI/CD pipeline because there is no config export + templating. Ability to have configurations different in each environment Cautions with this approach More room for user configuration error and outage because configurations are not promoted with automated testing.","title":"Operating Patterns"},{"location":"deployment/deploymentPatterns/#operating-patterns","text":"This page discusses how to have a successful first day and beyond. After you are comfortable with the deployment examples in the getting-started repository, you can shift your focus to managing ongoing operations of the products that are relevant to you. Since it is not feasible to cover every operating scenario, this section will focus on guidance to identify an operating pattern suitable for your organization. The PingFederate application is used as an example of performing this assessment.","title":"Operating Patterns"},{"location":"deployment/deploymentPatterns/#pingfederate-configuration-management","text":"PingFederate has a variety of operating patterns. These patterns typically involve a trade-off between ease of implementation and mitigation of deployment risks. To simplify the moving parts we will categorize PingFederate Configuration into three categories: Infrastructure Config Examples: Resource allocation (CPU/Memory/Storage), Client Ingress (Access and Hostnames), Image Version, Exposed Ports, Environment Variable Definition, Secrets Definition Orchestration - These items are defined in the release's values.yaml and any change triggers an update. Server Config Examples: *.properties files, Integration Kits, HTML Templates, logs formatting (log4j2.xml). This can be oversimplified to everything besides the /instance/server/default/data folder or /instance/bulk-config/data.json . Orchestration - These items are stored in the Server Profile and any change should trigger an update. It is up to the implementor to ensure that happens. This can be done by adding a non-functional variable in values.yaml to track the current profile \"version\". Example: SERVER_PROFILE_VERSION: v1.1 App Config Examples - Core PingFederate configuration. Changes that are typicaly made through the UI or Admin APIs. This can be oversimplified to the /instance/server/default/data folder or /instance/bulk-config/data.json . Orchestration - Dependent of your operating pattern this changes may be delivered via a rolling update, or by configuration replication.","title":"PingFederate Configuration Management"},{"location":"deployment/deploymentPatterns/#pingfederate-data-mount","text":"In the most common pattern, we attach a persistent volume to /opt/out/instance/server/default/data on the PingFederate Admin Console only . This pattern is intended to be used when PingFederate Administrators need to deliver configuration through the UI in each environment, including production . Another reason for this may be if SP connections are allowed to be created by app developers via Admin API. In both of these scenarios, the defining factor is that there are mutations in the production Admin console that are not being tracked in any other way, like source control, and therefore must be persisted. Attributes of this pattern : App Config is persisted in each SDLC environment (e.g. Dev, QA, Prod). App Config promotion is done manually or via Admin API. App Config is replicated from Admin Console to Engines. Server Config is maintained and delivered via server profile. Server profile does not include App Config. Backups are taken regularly in case of Persistent Volume loss or corruption.","title":"PingFederate Data Mount"},{"location":"deployment/deploymentPatterns/#data-mount-example","text":"Helm values relevant to this configuration may look like: pingfederate-admin : enabled : true container : replicaCount : 1 envs : SERVER_PROFILE_URL : https://github.com/pingidentity/pingidentity-server-profiles.git SERVER_PROFILE_PATH : pf-data-mount/pingfederate SERVER_PROFILE_VERSION : v1.1 workload : type : StatefulSet statefulSet : persistentvolume : enabled : true volumes : out-dir : ## NOTE THIS PVC DEFINITION ## mountPath : /opt/out/instance/server/default/data persistentVolumeClaim : accessModes : - ReadWriteOnce storageClassName : resources : requests : storage : 8Gi pingfederate-engine : enabled : true envs : SERVER_PROFILE_URL : https://github.com/samir-gandhi/server-profiles.git SERVER_PROFILE_PATH : pf-data-mount/pingfederate SERVER_PROFILE_VERSION : v1.1 container : replicaCount : 3 workload : type : Deployment deployment : strategy : type : RollingUpdate rollingUpdate : maxSurge : 1 maxUnavailable : 0 The key aspect here is pingfederate-admin.workload.statefulset.persistentvoume.volumes.out-dir.mountPath=/opt/out/instance/server/default/data . This is where all UI configuration (App Config) is stored as files. Because this is the mountPath , PingFederate admins have the freedom to deliver any files not used in /opt/out/instance/server/default/data via Server Profile. For example, adding a new IDP adapter requires a restart of the service in order for the adapter to be identified and available to App Config. The steps in this case would be: Add the adapter at https://github.com/samir-gandhi/server-profiles/pf-data-mount/pingfederate/instance/server/defaule/deploy/idp-adapter-name-1.jar update SERVER_PROFILE_VERSION: v1.1 -> SERVER_PROFILE_VERSION: v1.2 on both the admin and engine run helm upgrade --install myping pingidentity/ping-devops -f /path/to/values.yaml If the release already existed, the variable change signifies that the definition has mutated, and thus must be re-deployed. The admin pod will be deleted and recreated, while the engines will surge and roll one by one. Reference links: K8s - Performing a Rolling Update K8s - Update a deployment","title":"Data Mount Example"},{"location":"deployment/deploymentPatterns/#data-mount-pros-and-cons","text":"Values with this approach Managing App Config is more familiar to PingFederate admins with traditional experience. Less to account for when building a CI/CD pipeline because there is no config export + templating. Ability to have configurations different in each environment Cautions with this approach More room for user configuration error and outage because configurations are not promoted with automated testing.","title":"Data Mount Pros and Cons"},{"location":"deployment/introduction/","text":"Deployment Examples \u00b6 This section assumes you have already deployed the full-stack server profile in Get Started . In this section, you will find examples for using Docker Compose for running standalone product containers and Helm/Kubernetes to deploy Ping products in typical combinations.","title":"Introduction"},{"location":"deployment/introduction/#deployment-examples","text":"This section assumes you have already deployed the full-stack server profile in Get Started . In this section, you will find examples for using Docker Compose for running standalone product containers and Helm/Kubernetes to deploy Ping products in typical combinations.","title":"Deployment Examples"},{"location":"deployment/k8sClusterSizing/","text":"Sizing Kubernetes clusters \u00b6 When creating your Kubernetes cluster, size the nodes appropriately. Kubernetes cluster capacity \u00b6 When determining the capacity of your cluster, there are many ways to approach sizing the nodes. For example, if you calculated a cluster sizing of 16 CPU and 64GB RAM, you could break down the node sizing into these options: 2 nodes: 8 CPU / 32 GB RAM 4 nodes: 4 CPU / 16 GB RAM 8 nodes: 2 CPU / 8 GB RAM 16 nodes: 1 CPU / 4 GB RAM To understand which sizing option to select, consider the associated pros and cons. Instance pricing You can generally assume that instance cost per CPU/RAM is linear among the major cloud platforms. Option 1: fewer, larger nodes \u00b6 Pros \u00b6 If you have applications that are CPU or RAM intensive, having larger nodes can ensure your application has sufficient resources. Cons \u00b6 High availability is difficult to achieve with a minimal set of nodes. If your application has 50 pods across two nodes (25 pods per node) and a node goes down, you lose 50% of your service. Scaling: When autoscaling the cluster, the increment size becomes larger which could result in provisioning more hardware than needed. Option 2: more, smaller nodes \u00b6 Pros \u00b6 High availability is easier to maintain. If you have 50 instances with two pods per node (25 nodes) and one node goes down, you only reduce your service capacity by 4%. Cons \u00b6 More system overhead to manage all of the nodes. Possible under-utilization as the nodes might be too small to add additional services. Guidance \u00b6 For production deployments where high availability is paramount, creating a cluster with more nodes running fewer pods per node is preferable to ensure the health of your deployed service. For some applications, you can decide to size one pod per node. To determine the physical instance type needed, multiply the desired resources for each service by the number of pods per node, plus additional capacity for system overhead. Follow product guidelines to determine system requirements. Example service using 3 pods per node \u00b6 Each pod is typically deployed with 2 CPU and 4GB RAM which when multiplied by 3 yields: Minimum node requirement: 6 CPU 12 GB RAM Add 10% for system overhead For these requirements in Amazon Web Services (AWS), a c5.2xlarge type (8 CPU / 16 GB RAM) might be the instance type selected. To determine the base number of nodes required, divide the number of pods by 3 to determine your minimum cluster size. Further, you must ensure that you add definitions for cluster horizontal auto-scaling so the cluster scales in or out as needed.","title":"Sizing Kubernetes Clusters"},{"location":"deployment/k8sClusterSizing/#sizing-kubernetes-clusters","text":"When creating your Kubernetes cluster, size the nodes appropriately.","title":"Sizing Kubernetes clusters"},{"location":"deployment/k8sClusterSizing/#kubernetes-cluster-capacity","text":"When determining the capacity of your cluster, there are many ways to approach sizing the nodes. For example, if you calculated a cluster sizing of 16 CPU and 64GB RAM, you could break down the node sizing into these options: 2 nodes: 8 CPU / 32 GB RAM 4 nodes: 4 CPU / 16 GB RAM 8 nodes: 2 CPU / 8 GB RAM 16 nodes: 1 CPU / 4 GB RAM To understand which sizing option to select, consider the associated pros and cons. Instance pricing You can generally assume that instance cost per CPU/RAM is linear among the major cloud platforms.","title":"Kubernetes cluster capacity"},{"location":"deployment/k8sClusterSizing/#option-1-fewer-larger-nodes","text":"","title":"Option 1: fewer, larger nodes"},{"location":"deployment/k8sClusterSizing/#pros","text":"If you have applications that are CPU or RAM intensive, having larger nodes can ensure your application has sufficient resources.","title":"Pros"},{"location":"deployment/k8sClusterSizing/#cons","text":"High availability is difficult to achieve with a minimal set of nodes. If your application has 50 pods across two nodes (25 pods per node) and a node goes down, you lose 50% of your service. Scaling: When autoscaling the cluster, the increment size becomes larger which could result in provisioning more hardware than needed.","title":"Cons"},{"location":"deployment/k8sClusterSizing/#option-2-more-smaller-nodes","text":"","title":"Option 2: more, smaller nodes"},{"location":"deployment/k8sClusterSizing/#pros_1","text":"High availability is easier to maintain. If you have 50 instances with two pods per node (25 nodes) and one node goes down, you only reduce your service capacity by 4%.","title":"Pros"},{"location":"deployment/k8sClusterSizing/#cons_1","text":"More system overhead to manage all of the nodes. Possible under-utilization as the nodes might be too small to add additional services.","title":"Cons"},{"location":"deployment/k8sClusterSizing/#guidance","text":"For production deployments where high availability is paramount, creating a cluster with more nodes running fewer pods per node is preferable to ensure the health of your deployed service. For some applications, you can decide to size one pod per node. To determine the physical instance type needed, multiply the desired resources for each service by the number of pods per node, plus additional capacity for system overhead. Follow product guidelines to determine system requirements.","title":"Guidance"},{"location":"deployment/k8sClusterSizing/#example-service-using-3-pods-per-node","text":"Each pod is typically deployed with 2 CPU and 4GB RAM which when multiplied by 3 yields: Minimum node requirement: 6 CPU 12 GB RAM Add 10% for system overhead For these requirements in Amazon Web Services (AWS), a c5.2xlarge type (8 CPU / 16 GB RAM) might be the instance type selected. To determine the base number of nodes required, divide the number of pods by 3 to determine your minimum cluster size. Further, you must ensure that you add definitions for cluster horizontal auto-scaling so the cluster scales in or out as needed.","title":"Example service using 3 pods per node"},{"location":"deployment/pingDataEnvironmentConsiderations/","text":"Environment considerations \u00b6 Network File System (NFS) constraints \u00b6 All PingData products use the manage-extension tool for installing extensions. Due to how the tool operates, it can lead to issues when the deployment involves NFS. If your deployment uses NFS, rather than using the manage-extensions tool, unzip the extension manually and add it to the appropriate directory. The following example script, called 181-install-extensions.sh.post , loops through the extensions to unzip and then removes them from the server profile. #!/usr/bin/env sh # Loop through extensions to unzip, then remove them from the server profile PROFILE_EXTENSIONS_DIR = \" ${ PD_PROFILE } /server-sdk-extensions\" if test -d \" ${ PROFILE_EXTENSIONS_DIR } \" ; then find \" ${ PROFILE_EXTENSIONS_DIR } \" -type f -name '*.zip' -print > /tmp/_extensionList while IFS = read -r _extensionFile ; do echo \"Installing extension: ${ _extensionFile } \" unzip -q \" ${ _extensionFile } \" -d /opt/out/instance/extensions/ rm \" ${ _extensionFile } \" done < /tmp/_extensionList rm -f /tmp/_extensionList fi PingDirectory inotify watch limit requirement \u00b6 When using inotify with PingDirectory, you must set a watch limit on the host system. This value cannot be set from a docker container, and the value read within a docker container is always the host value. For more information, see Set file system event monitoring (inotify) in the PingDirectory documentation.","title":"PingData Product Considerations"},{"location":"deployment/pingDataEnvironmentConsiderations/#environment-considerations","text":"","title":"Environment considerations"},{"location":"deployment/pingDataEnvironmentConsiderations/#network-file-system-nfs-constraints","text":"All PingData products use the manage-extension tool for installing extensions. Due to how the tool operates, it can lead to issues when the deployment involves NFS. If your deployment uses NFS, rather than using the manage-extensions tool, unzip the extension manually and add it to the appropriate directory. The following example script, called 181-install-extensions.sh.post , loops through the extensions to unzip and then removes them from the server profile. #!/usr/bin/env sh # Loop through extensions to unzip, then remove them from the server profile PROFILE_EXTENSIONS_DIR = \" ${ PD_PROFILE } /server-sdk-extensions\" if test -d \" ${ PROFILE_EXTENSIONS_DIR } \" ; then find \" ${ PROFILE_EXTENSIONS_DIR } \" -type f -name '*.zip' -print > /tmp/_extensionList while IFS = read -r _extensionFile ; do echo \"Installing extension: ${ _extensionFile } \" unzip -q \" ${ _extensionFile } \" -d /opt/out/instance/extensions/ rm \" ${ _extensionFile } \" done < /tmp/_extensionList rm -f /tmp/_extensionList fi","title":"Network File System (NFS) constraints"},{"location":"deployment/pingDataEnvironmentConsiderations/#pingdirectory-inotify-watch-limit-requirement","text":"When using inotify with PingDirectory, you must set a watch limit on the host system. This value cannot be set from a docker container, and the value read within a docker container is always the host value. For more information, see Set file system event monitoring (inotify) in the PingDirectory documentation.","title":"PingDirectory inotify watch limit requirement"},{"location":"docker-builds/","text":"Build Your Own Docker Images \u00b6 This document explains the Ping Identity Docker images and how they are built. There are several image builds provided, including Dockerfile , README.md and scripts (i.e. entrypoint.sh ) for each docker build. Some images are used as foundations to build other images. Docker Image Description pingbase Base OS, default enviroment variables, volumes, healthcheck and entrypoint command defintions. This image provides a base to all Ping Identity docker images pingcommon Files and scripts used with all Ping Identity docker images pingdatacommon Files and scripts used with all Ping Identity Data docker images (i.e. PingDirectory, PingDataSync) pingfederate Product details for PingFederate pingaccess Product details for PingAccess pingdirectory Product details for PingDirectory pingauthorize Product details for PingAuthorize pingauthorizepap Product details for PingAuthorize Policy Editor pingdatasync Product details for PingDataSync ldap-sdk-tools LDAP SDK tools available of use with Ping Directory Hook Scripts Used by Docker Builds \u00b6 There are several hook scripts used by the docker builds. Full details on these hooks are included in the Docker Builds Hooks Document","title":"Build Your Own Docker Images"},{"location":"docker-builds/#build-your-own-docker-images","text":"This document explains the Ping Identity Docker images and how they are built. There are several image builds provided, including Dockerfile , README.md and scripts (i.e. entrypoint.sh ) for each docker build. Some images are used as foundations to build other images. Docker Image Description pingbase Base OS, default enviroment variables, volumes, healthcheck and entrypoint command defintions. This image provides a base to all Ping Identity docker images pingcommon Files and scripts used with all Ping Identity docker images pingdatacommon Files and scripts used with all Ping Identity Data docker images (i.e. PingDirectory, PingDataSync) pingfederate Product details for PingFederate pingaccess Product details for PingAccess pingdirectory Product details for PingDirectory pingauthorize Product details for PingAuthorize pingauthorizepap Product details for PingAuthorize Policy Editor pingdatasync Product details for PingDataSync ldap-sdk-tools LDAP SDK tools available of use with Ping Directory","title":"Build Your Own Docker Images"},{"location":"docker-builds/#hook-scripts-used-by-docker-builds","text":"There are several hook scripts used by the docker builds. Full details on these hooks are included in the Docker Builds Hooks Document","title":"Hook Scripts Used by Docker Builds"},{"location":"docker-builds/DOCKER_BUILDS_HOOKS/","text":"Docker Builds - Hooks \u00b6 Audience - Operators of DevOps Cloud environments. Not intended for Developers and admins of the Ping Identity products. Description - This document describes the many number of scripts that are called in during the lifecycle of a Ping Identity docker image from the initial entrypoint.sh script. Included with the base docker images, there is an example/stub provided for all possible hooks. It is very important that these names be used if a developer wishes to make subtle changes to their server-profile. The full ordered list of scripts that are called depending on what type of image (i.e. pingdirectory or pingdatasync) are: Hooks Details \u00b6 Details on hooks can be found within the code of each hook in the Docker-Builds Repo as well in pingidentity-devops-getting-started/docs/docker-images/<image_name>/hooks for each of the products images.","title":"Docker Builds - Hooks"},{"location":"docker-builds/DOCKER_BUILDS_HOOKS/#docker-builds-hooks","text":"Audience - Operators of DevOps Cloud environments. Not intended for Developers and admins of the Ping Identity products. Description - This document describes the many number of scripts that are called in during the lifecycle of a Ping Identity docker image from the initial entrypoint.sh script. Included with the base docker images, there is an example/stub provided for all possible hooks. It is very important that these names be used if a developer wishes to make subtle changes to their server-profile. The full ordered list of scripts that are called depending on what type of image (i.e. pingdirectory or pingdatasync) are:","title":"Docker Builds - Hooks"},{"location":"docker-builds/DOCKER_BUILDS_HOOKS/#hooks-details","text":"Details on hooks can be found within the code of each hook in the Docker-Builds Repo as well in pingidentity-devops-getting-started/docs/docker-images/<image_name>/hooks for each of the products images.","title":"Hooks Details"},{"location":"docker-images/","text":"See Using release tags for more information.","title":"Index"},{"location":"docker-images/dockerImageSecurity/","text":"Evaluation of Docker Base Image Security \u00b6 In the Center for Internet Security (CIS) Docker Benchmark v1.2.0 , one of the recommendations says, \"4.3 Ensure that unnecessary packages are not installed in the container.\" It further states, \"You should consider using a minimal base image rather than the standard Red Hat/CentOS/Debian images if you can. Some of the options available include BusyBox and Alpine.\" The following sections present security aspects of different Linux distributions compared to Alpine Docker image. This doesn't necessarily mean that one is the best for Docker base images. Other factors, such as usability and compatibility, should also be considered when choosing the most suitable Docker image for an organization. Evaluation overview \u00b6 To evaluate Alpine\u2019s security, we compared it with the following popular Linux distributions: Ubuntu, CentOS, and Red Hat Enterprise Linux 7. For this comparison, we used the latest version, as of March 12, 2020, of each distribution\u2019s Docker image and compared them in four different categories: Image size Number of packages installed by default Number of historical vulnerabilities reported on cvedetails.com Number of vulnerabilities reported by the Clair scan The following table summarizes the numbers for each distribution. Alpine Ubuntu CentOS RHEL7 Image Version alpine:3.11.3 ubuntu:18.04 centos:centos8.1.1911 rhel7:7.7-481 Image Size 5.59MB 64.2MB 237MB 205MB Number of Packages Installed 14 89 173 162 Number of Historical CVE*s 2 2007 2 662 Number of Vulnerabilities Reported by Clair 0 32 7 0 *CVE - Common Vulnerabilities and Exposures Image size \u00b6 Alpine has an advantage in image size. Although smaller size doesn\u2019t directly translate into better security, the smaller size does mean less code packed into the image, which means smaller attack surface. Number of packages installed \u00b6 Because of Alpine's smaller size, Alpine has the fewest packages out of box. Fewer packages means lesser chance of having vulnerabilities in the dependencies, which is a plus for security. Number of historical CVEs \u00b6 Alpine and CentOS both rank highest in number of historical CVEs even though CentOS has a close relationship with RHEL7, and RHEL7 has 600+ reported vulnerabilities. Number of vulnerabilities reported by Clair \u00b6 Some vulnerabilities reported by Clair might not be real issues, but their presence does mean extra overhead for developers or security teams to triage these findings. This overhead can be avoided if unnecessary dependencies are excluded from the image in the first place. Final evaluation results \u00b6 Although none of the four categories is perfect on its own for evaluating the security of a Linux distribution, in combination, Alpine presents greater advantages for use, which is why we selected it as the disribution for all of our Docker images. References \u00b6 CIS Docker Benchmarks Alpine CVEs Ubuntu CVEs CentOS CVEs Redhat Enterprise Linux CVEs Ping Identity's Docker Image Hardening Guide \u00b6 For best practices for securing your product Docker image, see Ping Identity's Hardening Guide .","title":"DevOps Image Security"},{"location":"docker-images/dockerImageSecurity/#evaluation-of-docker-base-image-security","text":"In the Center for Internet Security (CIS) Docker Benchmark v1.2.0 , one of the recommendations says, \"4.3 Ensure that unnecessary packages are not installed in the container.\" It further states, \"You should consider using a minimal base image rather than the standard Red Hat/CentOS/Debian images if you can. Some of the options available include BusyBox and Alpine.\" The following sections present security aspects of different Linux distributions compared to Alpine Docker image. This doesn't necessarily mean that one is the best for Docker base images. Other factors, such as usability and compatibility, should also be considered when choosing the most suitable Docker image for an organization.","title":"Evaluation of Docker Base Image Security"},{"location":"docker-images/dockerImageSecurity/#evaluation-overview","text":"To evaluate Alpine\u2019s security, we compared it with the following popular Linux distributions: Ubuntu, CentOS, and Red Hat Enterprise Linux 7. For this comparison, we used the latest version, as of March 12, 2020, of each distribution\u2019s Docker image and compared them in four different categories: Image size Number of packages installed by default Number of historical vulnerabilities reported on cvedetails.com Number of vulnerabilities reported by the Clair scan The following table summarizes the numbers for each distribution. Alpine Ubuntu CentOS RHEL7 Image Version alpine:3.11.3 ubuntu:18.04 centos:centos8.1.1911 rhel7:7.7-481 Image Size 5.59MB 64.2MB 237MB 205MB Number of Packages Installed 14 89 173 162 Number of Historical CVE*s 2 2007 2 662 Number of Vulnerabilities Reported by Clair 0 32 7 0 *CVE - Common Vulnerabilities and Exposures","title":"Evaluation overview"},{"location":"docker-images/dockerImageSecurity/#image-size","text":"Alpine has an advantage in image size. Although smaller size doesn\u2019t directly translate into better security, the smaller size does mean less code packed into the image, which means smaller attack surface.","title":"Image size"},{"location":"docker-images/dockerImageSecurity/#number-of-packages-installed","text":"Because of Alpine's smaller size, Alpine has the fewest packages out of box. Fewer packages means lesser chance of having vulnerabilities in the dependencies, which is a plus for security.","title":"Number of packages installed"},{"location":"docker-images/dockerImageSecurity/#number-of-historical-cves","text":"Alpine and CentOS both rank highest in number of historical CVEs even though CentOS has a close relationship with RHEL7, and RHEL7 has 600+ reported vulnerabilities.","title":"Number of historical CVEs"},{"location":"docker-images/dockerImageSecurity/#number-of-vulnerabilities-reported-by-clair","text":"Some vulnerabilities reported by Clair might not be real issues, but their presence does mean extra overhead for developers or security teams to triage these findings. This overhead can be avoided if unnecessary dependencies are excluded from the image in the first place.","title":"Number of vulnerabilities reported by Clair"},{"location":"docker-images/dockerImageSecurity/#final-evaluation-results","text":"Although none of the four categories is perfect on its own for evaluating the security of a Linux distribution, in combination, Alpine presents greater advantages for use, which is why we selected it as the disribution for all of our Docker images.","title":"Final evaluation results"},{"location":"docker-images/dockerImageSecurity/#references","text":"CIS Docker Benchmarks Alpine CVEs Ubuntu CVEs CentOS CVEs Redhat Enterprise Linux CVEs","title":"References"},{"location":"docker-images/dockerImageSecurity/#ping-identitys-docker-image-hardening-guide","text":"For best practices for securing your product Docker image, see Ping Identity's Hardening Guide .","title":"Ping Identity's Docker Image Hardening Guide"},{"location":"docker-images/dockerImagesRef/","text":"Image Information \u00b6 These documents for Ping Identity Docker images include information on: Related Docker images Ports exposed for the containers Environment variables for the image Associated deployment information Tagging methodology and support policy The image-specific documentation is generated from each new build ensuring these documents align with any changes over time.","title":"Introduction"},{"location":"docker-images/dockerImagesRef/#image-information","text":"These documents for Ping Identity Docker images include information on: Related Docker images Ports exposed for the containers Environment variables for the image Associated deployment information Tagging methodology and support policy The image-specific documentation is generated from each new build ensuring these documents align with any changes over time.","title":"Image Information"},{"location":"docker-images/imageSupport/","text":"Ping Identity Docker image support policy \u00b6 Overview \u00b6 Unlike software delivered as an archive, Docker images include: Product artifacts OS shim An optimized Java virtual machine (JVM) build Miscellaneous tools/libraries (Git, SSH, SSL) to run the software and automation scripts Because of the number of dependency updates and to ensure all patches are kept up to date, Ping Identity actively maintains product images semi-weekly (edge), releasing a stable build each month (sprint and latest). The build process retrieves the latest versions of: Operating System Shim (Alpine) Optimized JVM Product files Supporting tools/libraries Actively Maintained Product Versions \u00b6 The DevOps program actively maintains Docker images for: The two most recent feature releases (major and minor) of each product The latest patch release for each minor version Examples: If we currently maintain images for PingFederate 10.0 and 10.1, when PingFederate 10.2 is released, Docker images with PingFederate 10.0 will no longer be actively maintained. If a patch is released for 10.1, it supersedes the previous patch. In other words, if we currently maintain an image for PingFederate 10.1.2, when PingFederate 10.1.3 is released, it replaces 10.1.2. Docker Hub Images Images that have fallen out of Ping's active maintenance window will be removed from DockerHub 1 year after they were last built. Active Build Product Versions To view products and versions actively being built, see the most recent Release Notes . Supported OS shim \u00b6 The DevOps program uses Alpine as its base OS shim. For the rationale, see Evaluation of Docker Base Image Security . In rare scenarios where the consumer absolutely cannot run an Alpine based image, you can customize the base image. For more information, see Build a Docker Product Image Locally . Custom Built Images Using other Linux distributions should not cause an issue, but it cannot be guaranteed that the products will function as expected because these are not verified for compatibility. Ping Identity Support on custom images might be challenging and experience longer delays.","title":"Docker Image Support Policy"},{"location":"docker-images/imageSupport/#ping-identity-docker-image-support-policy","text":"","title":"Ping Identity Docker image support policy"},{"location":"docker-images/imageSupport/#overview","text":"Unlike software delivered as an archive, Docker images include: Product artifacts OS shim An optimized Java virtual machine (JVM) build Miscellaneous tools/libraries (Git, SSH, SSL) to run the software and automation scripts Because of the number of dependency updates and to ensure all patches are kept up to date, Ping Identity actively maintains product images semi-weekly (edge), releasing a stable build each month (sprint and latest). The build process retrieves the latest versions of: Operating System Shim (Alpine) Optimized JVM Product files Supporting tools/libraries","title":"Overview"},{"location":"docker-images/imageSupport/#actively-maintained-product-versions","text":"The DevOps program actively maintains Docker images for: The two most recent feature releases (major and minor) of each product The latest patch release for each minor version Examples: If we currently maintain images for PingFederate 10.0 and 10.1, when PingFederate 10.2 is released, Docker images with PingFederate 10.0 will no longer be actively maintained. If a patch is released for 10.1, it supersedes the previous patch. In other words, if we currently maintain an image for PingFederate 10.1.2, when PingFederate 10.1.3 is released, it replaces 10.1.2. Docker Hub Images Images that have fallen out of Ping's active maintenance window will be removed from DockerHub 1 year after they were last built. Active Build Product Versions To view products and versions actively being built, see the most recent Release Notes .","title":"Actively Maintained Product Versions"},{"location":"docker-images/imageSupport/#supported-os-shim","text":"The DevOps program uses Alpine as its base OS shim. For the rationale, see Evaluation of Docker Base Image Security . In rare scenarios where the consumer absolutely cannot run an Alpine based image, you can customize the base image. For more information, see Build a Docker Product Image Locally . Custom Built Images Using other Linux distributions should not cause an issue, but it cannot be guaranteed that the products will function as expected because these are not verified for compatibility. Ping Identity Support on custom images might be challenging and experience longer delays.","title":"Supported OS shim"},{"location":"docker-images/productVersionMatrix/","text":"Product Version, Image Release Matrix \u00b6 View the product matrix of Ping Identity product software versions and the Docker release tag they are available in. It is recommended that you use the most recent Docker release tag available for the product version you want to run. The tag used to pull the image is in the format {RELEASE}-{PRODUCT VERSION} Examples: PingFederate 10.2.5 pingidentity/pingfederate: 2108-10.2.5 PingDirectory 8.2.0.1 pingidentity/pingdirectory: 2101-8.2.0.1","title":"Product & Image Release Matrix"},{"location":"docker-images/productVersionMatrix/#product-version-image-release-matrix","text":"View the product matrix of Ping Identity product software versions and the Docker release tag they are available in. It is recommended that you use the most recent Docker release tag available for the product version you want to run. The tag used to pull the image is in the format {RELEASE}-{PRODUCT VERSION} Examples: PingFederate 10.2.5 pingidentity/pingfederate: 2108-10.2.5 PingDirectory 8.2.0.1 pingidentity/pingdirectory: 2101-8.2.0.1","title":"Product Version, Image Release Matrix"},{"location":"docker-images/releaseTags/","text":"Using Release Tags \u00b6 Ping Identity uses multiple tags for each released build image. On our Docker Hub site, you can view the available tags for each image. Multi-product deployment All product containers in a deployment should use the same release tag. Tagging Format \u00b6 To specify a release tag for stacks, use the follow format: image : pingidentity/<ping-product>:${PING_IDENTITY_DEVOPS_TAG} Where <ping-product> is the name of the product container and ${PING_IDENTITY_DEVOPS_TAG} is assigned the release tag value. The reference to the file containing the setting for ${PING_IDENTITY_DEVOPS_TAG} is ~/.pingidentity/config by default. You can also specify the release tag explicitly in the YAML file. The release tag must be the same for each container in the stack. For example: image : pingidentity/<ping-product>:edge Which Release Tag To Use \u00b6 Which tag you should use depends on what you want to accomplish. Production Stability \u00b6 For customers in production environments, stability is often the most sought after quality. For the least dependencies and the most stability: Use the digest of a full sprint tag that includes the sprint version and product version. For example: pingidentity/pingfederate:2103-10.2.2 . To pull its corresponding digest: docker pull pingidentity/pingfederate@sha256:cef3a089e941c837aa598739f385722157eae64510108e81b2064953df2e9537 Additionally, do not rely on Ping to maintain Docker images on Docker Hub. Instead pull the image of choice and maintain it in your own image registry. Common providers include: JFrog, AWS ECR, Google GCR, Azure ACR. Latest Image Features \u00b6 For demonstrations and testing latest features, use an edge based image. Even for demos and testing, it's a good practice to use a full tag variation like pingfederate:10.2.2-edge , rather than pingfederate:edge , to avoid dependency conflicts in server profiles. Evergreen Bleeding Edge \u00b6 edge is the absolute latest product version and image features, with zero guarantees for stability. Typically, this is only attractive to Ping employees or partners. Base Release Tags \u00b6 The base release tags for a build are: edge latest sprint edge \u00b6 The edge release tag refers to \"bleeding edge\", indicating a build similar to an alpha release. This sliding tag includes the absolute latest hooks and scripts, but is considered highly unstable. The edge release is characterized by: Latest product version Latest build image enhancements and fixes from our current sprint Runs on the Linux Alpine OS Example: pingidentity/pingfederate:edge , pingidentity/pingfederate:10.2.2-edge . latest \u00b6 edge is tagged as latest at the beginning of each month. The release tag indicates the latest stable release. This is a sliding tag that marks the stable release for the latest sprint. The latest release is characterized by: Latest product version All completed and qualified enhacements and fixes from the prior monthly sprint Runs on the Linux Alpine OS Example: pingfederate:latest , pingfederate:10.2.2-latest sprint \u00b6 In addition to becoming latest , edge also is tagged as a stable sprint each month. The sprint release tag is a build number indicating a stable build that won't change. The sprint number uses the YYMM format. For example, 2201 = January 2022. The latest release is characterized by: Latest product version at the time the sprint ended. All completed and qualified enhacements and fixes from the specified monthly sprint. The Docker images are generated at the end of the specified monthly sprint. Runs on the Linux Alpine OS. Example: pingfederate:2103 , pingidentity/pingfederate:2103-10.2.2 sprint (point release) \u00b6 Occasionally, a bug might be found on a stable release. To avoid changing a sprint tag, a point release would be pushed to move latest forward. Example: pingfederate:2103.1 , pingidentity/pingfederate:2103.1-10.2.2 Determine Image Product Version \u00b6 If you're unsure of the product version for the container you are running, shell into the container, then echo the $IMAGE_VERSION environment variable. For example: docker container exec -it <container id> sh echo $IMAGE_VERSION The IMAGE_VERSION variable returns the version in this format: [ product ] - [ container OS ] - [ jdk ] - [ product version ] - [ build date ] - [ git revision ] For example: IMAGE_VERSION = pingcentral-alpine-az11-1.3.0-200629-bc33 Where: Key Value Product pingcentral Container OS alpine JDK az11 Product Version 1.3.0 Build Date 200629 Git Revision bc33 Date Format Date is in YYMMDD format","title":"Release Tags"},{"location":"docker-images/releaseTags/#using-release-tags","text":"Ping Identity uses multiple tags for each released build image. On our Docker Hub site, you can view the available tags for each image. Multi-product deployment All product containers in a deployment should use the same release tag.","title":"Using Release Tags"},{"location":"docker-images/releaseTags/#tagging-format","text":"To specify a release tag for stacks, use the follow format: image : pingidentity/<ping-product>:${PING_IDENTITY_DEVOPS_TAG} Where <ping-product> is the name of the product container and ${PING_IDENTITY_DEVOPS_TAG} is assigned the release tag value. The reference to the file containing the setting for ${PING_IDENTITY_DEVOPS_TAG} is ~/.pingidentity/config by default. You can also specify the release tag explicitly in the YAML file. The release tag must be the same for each container in the stack. For example: image : pingidentity/<ping-product>:edge","title":"Tagging Format"},{"location":"docker-images/releaseTags/#which-release-tag-to-use","text":"Which tag you should use depends on what you want to accomplish.","title":"Which Release Tag To Use"},{"location":"docker-images/releaseTags/#production-stability","text":"For customers in production environments, stability is often the most sought after quality. For the least dependencies and the most stability: Use the digest of a full sprint tag that includes the sprint version and product version. For example: pingidentity/pingfederate:2103-10.2.2 . To pull its corresponding digest: docker pull pingidentity/pingfederate@sha256:cef3a089e941c837aa598739f385722157eae64510108e81b2064953df2e9537 Additionally, do not rely on Ping to maintain Docker images on Docker Hub. Instead pull the image of choice and maintain it in your own image registry. Common providers include: JFrog, AWS ECR, Google GCR, Azure ACR.","title":"Production Stability"},{"location":"docker-images/releaseTags/#latest-image-features","text":"For demonstrations and testing latest features, use an edge based image. Even for demos and testing, it's a good practice to use a full tag variation like pingfederate:10.2.2-edge , rather than pingfederate:edge , to avoid dependency conflicts in server profiles.","title":"Latest Image Features"},{"location":"docker-images/releaseTags/#evergreen-bleeding-edge","text":"edge is the absolute latest product version and image features, with zero guarantees for stability. Typically, this is only attractive to Ping employees or partners.","title":"Evergreen Bleeding Edge"},{"location":"docker-images/releaseTags/#base-release-tags","text":"The base release tags for a build are: edge latest sprint","title":"Base Release Tags"},{"location":"docker-images/releaseTags/#edge","text":"The edge release tag refers to \"bleeding edge\", indicating a build similar to an alpha release. This sliding tag includes the absolute latest hooks and scripts, but is considered highly unstable. The edge release is characterized by: Latest product version Latest build image enhancements and fixes from our current sprint Runs on the Linux Alpine OS Example: pingidentity/pingfederate:edge , pingidentity/pingfederate:10.2.2-edge .","title":"edge"},{"location":"docker-images/releaseTags/#latest","text":"edge is tagged as latest at the beginning of each month. The release tag indicates the latest stable release. This is a sliding tag that marks the stable release for the latest sprint. The latest release is characterized by: Latest product version All completed and qualified enhacements and fixes from the prior monthly sprint Runs on the Linux Alpine OS Example: pingfederate:latest , pingfederate:10.2.2-latest","title":"latest"},{"location":"docker-images/releaseTags/#sprint","text":"In addition to becoming latest , edge also is tagged as a stable sprint each month. The sprint release tag is a build number indicating a stable build that won't change. The sprint number uses the YYMM format. For example, 2201 = January 2022. The latest release is characterized by: Latest product version at the time the sprint ended. All completed and qualified enhacements and fixes from the specified monthly sprint. The Docker images are generated at the end of the specified monthly sprint. Runs on the Linux Alpine OS. Example: pingfederate:2103 , pingidentity/pingfederate:2103-10.2.2","title":"sprint"},{"location":"docker-images/releaseTags/#sprint-point-release","text":"Occasionally, a bug might be found on a stable release. To avoid changing a sprint tag, a point release would be pushed to move latest forward. Example: pingfederate:2103.1 , pingidentity/pingfederate:2103.1-10.2.2","title":"sprint (point release)"},{"location":"docker-images/releaseTags/#determine-image-product-version","text":"If you're unsure of the product version for the container you are running, shell into the container, then echo the $IMAGE_VERSION environment variable. For example: docker container exec -it <container id> sh echo $IMAGE_VERSION The IMAGE_VERSION variable returns the version in this format: [ product ] - [ container OS ] - [ jdk ] - [ product version ] - [ build date ] - [ git revision ] For example: IMAGE_VERSION = pingcentral-alpine-az11-1.3.0-200629-bc33 Where: Key Value Product pingcentral Container OS alpine JDK az11 Product Version 1.3.0 Build Date 200629 Git Revision bc33 Date Format Date is in YYMMDD format","title":"Determine Image Product Version"},{"location":"docker-images/apache-jmeter/","text":"Environment Variables \u00b6 The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} JAVA_RAM_PERCENTAGE 90.0 Percentage of the container memory to allocate to PingFederate JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container Docker Container Hook Scripts \u00b6 Please go here for details on all apache-jmeter hook scripts This document is auto-generated from apache-jmeter/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Apache JMeter"},{"location":"docker-images/apache-jmeter/#environment-variables","text":"The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} JAVA_RAM_PERCENTAGE 90.0 Percentage of the container memory to allocate to PingFederate JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container","title":"Environment Variables"},{"location":"docker-images/apache-jmeter/#docker-container-hook-scripts","text":"Please go here for details on all apache-jmeter hook scripts This document is auto-generated from apache-jmeter/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/apache-jmeter/hooks/","text":"Ping Identity DevOps apache-jmeter Hooks \u00b6 List of available hooks: * 04-check-variables.sh * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from apache-jmeter/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `apache-jmeter` Hooks"},{"location":"docker-images/apache-jmeter/hooks/#ping-identity-devops-apache-jmeter-hooks","text":"List of available hooks: * 04-check-variables.sh * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from apache-jmeter/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps apache-jmeter Hooks"},{"location":"docker-images/apache-jmeter/hooks/04-check-variables.sh/","text":"Ping Identity DevOps apache-jmeter Hook - 04-check-variables.sh \u00b6 This document is auto-generated from apache-jmeter/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `apache-jmeter` Hook - `04-check-variables.sh`"},{"location":"docker-images/apache-jmeter/hooks/04-check-variables.sh/#ping-identity-devops-apache-jmeter-hook-04-check-variablessh","text":"This document is auto-generated from apache-jmeter/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps apache-jmeter Hook - 04-check-variables.sh"},{"location":"docker-images/apache-jmeter/hooks/17-check-license.sh/","text":"Ping Identity DevOps apache-jmeter Hook - 17-check-license.sh \u00b6 This document is auto-generated from apache-jmeter/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `apache-jmeter` Hook - `17-check-license.sh`"},{"location":"docker-images/apache-jmeter/hooks/17-check-license.sh/#ping-identity-devops-apache-jmeter-hook-17-check-licensesh","text":"This document is auto-generated from apache-jmeter/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps apache-jmeter Hook - 17-check-license.sh"},{"location":"docker-images/ldap-sdk-tools/","text":"Ping Identity Docker Image - ldap-sdk-tools \u00b6 This docker image provides an alpine image with the LDAP Client SDK tools to be used against other PingDirectory instances. Related Docker Images \u00b6 openjdk:8-jre8-alpine - Alpine server to run LDAP SDK Tools from Environment Variables \u00b6 The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PATH /opt/tools:${PATH} List all available tools \u00b6 docker run -it --rm pingidentity/ldap-sdk-tools:edge ls Use LDAPSearch \u00b6 Get some help \u00b6 docker run -it --rm pingidentity/ldap-sdk-tools:edge ldapsearch --help Simple search \u00b6 docker run -it --rm pingidentity/ldap-sdk-tools:edge \\ ldapsearch \\ -b dc = example,dc = com \\ -p 1389 \"(objectClass=*)\" Save output to host file \u00b6 docker run -it --rm \\ -v /tmp:/opt/out \\ pingidentity/ldap-sdk-tools:edge \\ ldapsearch \\ --baseDN dc = example,dc = com \\ --port 1389 \\ --outputFormat json \"(objectClass=*)\" >/tmp/search-result.json Use manage-certificates \u00b6 trusting certificates \u00b6 PWD = 2FederateM0re mkdir -p /tmp/hibp docker run -it --rm \\ -v /tmp/hibp:/opt/out \\ pingidentity/ldap-sdk-tools:edge \\ manage-certificates trust-server-certificate \\ --hostname haveibeenpwned.com \\ --port 1443 \\ --keystore /opt/out/hibp-2019.jks \\ --keystore-password ${ PWD } ls -all /tmp/hibp keytool -list \\ -keystore /tmp/hibp/hibp-2019.jks \\ -storepass ${ PWD } Docker Container Hook Scripts \u00b6 Please go here for details on all ldap-sdk-tools hook scripts This document is auto-generated from ldap-sdk-tools/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"ldap-sdk-tools"},{"location":"docker-images/ldap-sdk-tools/#ping-identity-docker-image-ldap-sdk-tools","text":"This docker image provides an alpine image with the LDAP Client SDK tools to be used against other PingDirectory instances.","title":"Ping Identity Docker Image - ldap-sdk-tools"},{"location":"docker-images/ldap-sdk-tools/#related-docker-images","text":"openjdk:8-jre8-alpine - Alpine server to run LDAP SDK Tools from","title":"Related Docker Images"},{"location":"docker-images/ldap-sdk-tools/#environment-variables","text":"The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PATH /opt/tools:${PATH}","title":"Environment Variables"},{"location":"docker-images/ldap-sdk-tools/#list-all-available-tools","text":"docker run -it --rm pingidentity/ldap-sdk-tools:edge ls","title":"List all available tools"},{"location":"docker-images/ldap-sdk-tools/#use-ldapsearch","text":"","title":"Use LDAPSearch"},{"location":"docker-images/ldap-sdk-tools/#get-some-help","text":"docker run -it --rm pingidentity/ldap-sdk-tools:edge ldapsearch --help","title":"Get some help"},{"location":"docker-images/ldap-sdk-tools/#simple-search","text":"docker run -it --rm pingidentity/ldap-sdk-tools:edge \\ ldapsearch \\ -b dc = example,dc = com \\ -p 1389 \"(objectClass=*)\"","title":"Simple search"},{"location":"docker-images/ldap-sdk-tools/#save-output-to-host-file","text":"docker run -it --rm \\ -v /tmp:/opt/out \\ pingidentity/ldap-sdk-tools:edge \\ ldapsearch \\ --baseDN dc = example,dc = com \\ --port 1389 \\ --outputFormat json \"(objectClass=*)\" >/tmp/search-result.json","title":"Save output to host file"},{"location":"docker-images/ldap-sdk-tools/#use-manage-certificates","text":"","title":"Use manage-certificates"},{"location":"docker-images/ldap-sdk-tools/#trusting-certificates","text":"PWD = 2FederateM0re mkdir -p /tmp/hibp docker run -it --rm \\ -v /tmp/hibp:/opt/out \\ pingidentity/ldap-sdk-tools:edge \\ manage-certificates trust-server-certificate \\ --hostname haveibeenpwned.com \\ --port 1443 \\ --keystore /opt/out/hibp-2019.jks \\ --keystore-password ${ PWD } ls -all /tmp/hibp keytool -list \\ -keystore /tmp/hibp/hibp-2019.jks \\ -storepass ${ PWD }","title":"trusting certificates"},{"location":"docker-images/ldap-sdk-tools/#docker-container-hook-scripts","text":"Please go here for details on all ldap-sdk-tools hook scripts This document is auto-generated from ldap-sdk-tools/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/ldap-sdk-tools/hooks/","text":"Ping Identity DevOps ldap-sdk-tools Hooks \u00b6 There are no default hooks defined for the ldap-sdk-tools image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `ldap-sdk-tools` Hooks"},{"location":"docker-images/ldap-sdk-tools/hooks/#ping-identity-devops-ldap-sdk-tools-hooks","text":"There are no default hooks defined for the ldap-sdk-tools image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps ldap-sdk-tools Hooks"},{"location":"docker-images/pingaccess/","text":"Ping Identity DevOps Docker Image - pingaccess \u00b6 This docker image includes the Ping Identity PingAccess product binaries and associated hook scripts to create and run both PingAccess Admin and Engine nodes. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingAccess Ping product name LICENSE_DIR ${SERVER_ROOT_DIR}/conf License directory LICENSE_FILE_NAME pingaccess.lic Name of license file LICENSE_SHORT_NAME PA Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server PA_ADMIN_PASSWORD ${INITIAL_ADMIN_PASSWORD} OPERATIONAL_MODE STANDALONE PA_ADMIN_PASSWORD_INITIAL 2Access Change non-default password at startup by including this and PING_IDENTITY_PASSWORD STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/log/pingaccess.log Files tailed once container has started PA_ADMIN_PORT 9000 JAVA_RAM_PERCENTAGE 60.0 Percentage of the container memory to allocate to PingAccess JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate FIPS_MODE_ON false Turns on FIPS mode (currently with the Bouncy Castle FIPS provider) set to exactly \"true\" lowercase to turn on set to anything else to turn off SHOW_LIBS_VER true Defines a variable to allow showing library versions in the output at startup default to true SHOW_LIBS_VER_PRE_PATCH false Defines a variable to allow showing library version prior to patches being applied default to false This is helpful to ensure that the patch process updates all libraries affected PA_ENGINE_PORT 3000 PING_IDENTITY_PASSWORD ${PA_ADMIN_PASSWORD} Specify a password for administrator user for interaction with admin API Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${PA_ADMIN_PORT} ${PA_ENGINE_PORT} ${HTTPS_PORT} Running a PingAccess container \u00b6 To run a PingAccess container: docker run \\ --name pingaccess \\ --publish 9000 :9000 \\ --publish 443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingaccess \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingaccess:edge Follow Docker logs with: docker logs -f pingaccess If using the command above with the embedded server profile , log in with: https://localhost:9000 Username: Administrator Password: 2FederateM0re Docker Container Hook Scripts \u00b6 Please go here for details on all pingaccess hook scripts This document is auto-generated from pingaccess/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingAccess"},{"location":"docker-images/pingaccess/#ping-identity-devops-docker-image-pingaccess","text":"This docker image includes the Ping Identity PingAccess product binaries and associated hook scripts to create and run both PingAccess Admin and Engine nodes.","title":"Ping Identity DevOps Docker Image - pingaccess"},{"location":"docker-images/pingaccess/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingaccess/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingAccess Ping product name LICENSE_DIR ${SERVER_ROOT_DIR}/conf License directory LICENSE_FILE_NAME pingaccess.lic Name of license file LICENSE_SHORT_NAME PA Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server PA_ADMIN_PASSWORD ${INITIAL_ADMIN_PASSWORD} OPERATIONAL_MODE STANDALONE PA_ADMIN_PASSWORD_INITIAL 2Access Change non-default password at startup by including this and PING_IDENTITY_PASSWORD STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/log/pingaccess.log Files tailed once container has started PA_ADMIN_PORT 9000 JAVA_RAM_PERCENTAGE 60.0 Percentage of the container memory to allocate to PingAccess JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate FIPS_MODE_ON false Turns on FIPS mode (currently with the Bouncy Castle FIPS provider) set to exactly \"true\" lowercase to turn on set to anything else to turn off SHOW_LIBS_VER true Defines a variable to allow showing library versions in the output at startup default to true SHOW_LIBS_VER_PRE_PATCH false Defines a variable to allow showing library version prior to patches being applied default to false This is helpful to ensure that the patch process updates all libraries affected PA_ENGINE_PORT 3000 PING_IDENTITY_PASSWORD ${PA_ADMIN_PASSWORD} Specify a password for administrator user for interaction with admin API","title":"Environment Variables"},{"location":"docker-images/pingaccess/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${PA_ADMIN_PORT} ${PA_ENGINE_PORT} ${HTTPS_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingaccess/#running-a-pingaccess-container","text":"To run a PingAccess container: docker run \\ --name pingaccess \\ --publish 9000 :9000 \\ --publish 443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingaccess \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingaccess:edge Follow Docker logs with: docker logs -f pingaccess If using the command above with the embedded server profile , log in with: https://localhost:9000 Username: Administrator Password: 2FederateM0re","title":"Running a PingAccess container"},{"location":"docker-images/pingaccess/#docker-container-hook-scripts","text":"Please go here for details on all pingaccess hook scripts This document is auto-generated from pingaccess/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingaccess/hooks/","text":"Ping Identity DevOps pingaccess Hooks \u00b6 List of available hooks: * 20-restart-sequence.sh.pre * 50-before-post-start.sh * 51-add-engine.sh * 80-post-start.sh * 81-after-start-process.sh * 83-change-password.sh * 85-import-configuration.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingaccess/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hooks"},{"location":"docker-images/pingaccess/hooks/#ping-identity-devops-pingaccess-hooks","text":"List of available hooks: * 20-restart-sequence.sh.pre * 50-before-post-start.sh * 51-add-engine.sh * 80-post-start.sh * 81-after-start-process.sh * 83-change-password.sh * 85-import-configuration.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingaccess/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hooks"},{"location":"docker-images/pingaccess/hooks/20-restart-sequence.sh.pre/","text":"Ping Identity DevOps pingaccess Hook - 20-restart-sequence.sh.pre \u00b6 This document is auto-generated from pingaccess/opt/staging/hooks/20-restart-sequence.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `20-restart-sequence.sh.pre`"},{"location":"docker-images/pingaccess/hooks/20-restart-sequence.sh.pre/#ping-identity-devops-pingaccess-hook-20-restart-sequenceshpre","text":"This document is auto-generated from pingaccess/opt/staging/hooks/20-restart-sequence.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 20-restart-sequence.sh.pre"},{"location":"docker-images/pingaccess/hooks/50-before-post-start.sh/","text":"Ping Identity DevOps pingaccess Hook - 50-before-post-start.sh \u00b6 This is called after the start or restart sequence has finished and before the server within the container starts This document is auto-generated from pingaccess/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `50-before-post-start.sh`"},{"location":"docker-images/pingaccess/hooks/50-before-post-start.sh/#ping-identity-devops-pingaccess-hook-50-before-post-startsh","text":"This is called after the start or restart sequence has finished and before the server within the container starts This document is auto-generated from pingaccess/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 50-before-post-start.sh"},{"location":"docker-images/pingaccess/hooks/51-add-engine.sh/","text":"Ping Identity DevOps pingaccess Hook - 51-add-engine.sh \u00b6 This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document is auto-generated from pingaccess/opt/staging/hooks/51-add-engine.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `51-add-engine.sh`"},{"location":"docker-images/pingaccess/hooks/51-add-engine.sh/#ping-identity-devops-pingaccess-hook-51-add-enginesh","text":"This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document is auto-generated from pingaccess/opt/staging/hooks/51-add-engine.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 51-add-engine.sh"},{"location":"docker-images/pingaccess/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingaccess Hook - 80-post-start.sh \u00b6 This script is used to import any configurations that are needed after PingAccess starts This document is auto-generated from pingaccess/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `80-post-start.sh`"},{"location":"docker-images/pingaccess/hooks/80-post-start.sh/#ping-identity-devops-pingaccess-hook-80-post-startsh","text":"This script is used to import any configurations that are needed after PingAccess starts This document is auto-generated from pingaccess/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 80-post-start.sh"},{"location":"docker-images/pingaccess/hooks/81-after-start-process.sh/","text":"Ping Identity DevOps pingaccess Hook - 81-after-start-process.sh \u00b6 This document is auto-generated from pingaccess/opt/staging/hooks/81-after-start-process.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `81-after-start-process.sh`"},{"location":"docker-images/pingaccess/hooks/81-after-start-process.sh/#ping-identity-devops-pingaccess-hook-81-after-start-processsh","text":"This document is auto-generated from pingaccess/opt/staging/hooks/81-after-start-process.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 81-after-start-process.sh"},{"location":"docker-images/pingaccess/hooks/81-import-initial-configuration.sh/","text":"Ping Identity DevOps pingaccess Hook - 81-import-initial-configuration.sh \u00b6 This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document auto-generated from pingaccess/hooks/81-import-initial-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `81-import-initial-configuration.sh`"},{"location":"docker-images/pingaccess/hooks/81-import-initial-configuration.sh/#ping-identity-devops-pingaccess-hook-81-import-initial-configurationsh","text":"This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document auto-generated from pingaccess/hooks/81-import-initial-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 81-import-initial-configuration.sh"},{"location":"docker-images/pingaccess/hooks/83-change-password.sh/","text":"Ping Identity DevOps pingaccess Hook - 83-change-password.sh \u00b6 This document is auto-generated from pingaccess/opt/staging/hooks/83-change-password.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `83-change-password.sh`"},{"location":"docker-images/pingaccess/hooks/83-change-password.sh/#ping-identity-devops-pingaccess-hook-83-change-passwordsh","text":"This document is auto-generated from pingaccess/opt/staging/hooks/83-change-password.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 83-change-password.sh"},{"location":"docker-images/pingaccess/hooks/83-create-initial-password.sh/","text":"Ping Identity DevOps pingaccess Hook - 83-create-initial-password.sh \u00b6 This document auto-generated from pingaccess/hooks/83-create-initial-password.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `83-create-initial-password.sh`"},{"location":"docker-images/pingaccess/hooks/83-create-initial-password.sh/#ping-identity-devops-pingaccess-hook-83-create-initial-passwordsh","text":"This document auto-generated from pingaccess/hooks/83-create-initial-password.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 83-create-initial-password.sh"},{"location":"docker-images/pingaccess/hooks/85-import-configuration.sh/","text":"Ping Identity DevOps pingaccess Hook - 85-import-configuration.sh \u00b6 This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document is auto-generated from pingaccess/opt/staging/hooks/85-import-configuration.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `85-import-configuration.sh`"},{"location":"docker-images/pingaccess/hooks/85-import-configuration.sh/#ping-identity-devops-pingaccess-hook-85-import-configurationsh","text":"This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document is auto-generated from pingaccess/opt/staging/hooks/85-import-configuration.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 85-import-configuration.sh"},{"location":"docker-images/pingaccess/hooks/85-import-initial-configuration.sh/","text":"Ping Identity DevOps pingaccess Hook - 85-import-initial-configuration.sh \u00b6 This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document auto-generated from pingaccess/hooks/85-import-initial-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingaccess` Hook - `85-import-initial-configuration.sh`"},{"location":"docker-images/pingaccess/hooks/85-import-initial-configuration.sh/#ping-identity-devops-pingaccess-hook-85-import-initial-configurationsh","text":"This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document auto-generated from pingaccess/hooks/85-import-initial-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingaccess Hook - 85-import-initial-configuration.sh"},{"location":"docker-images/pingauthorize/","text":"Ping Identity DevOps Docker Image - pingauthorize \u00b6 This docker image includes the Ping Identity PingAuthorize product binaries and associated hook scripts to create and run a PingAuthorize instance or instances. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} --shm-size 256m \\ IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingAuthorize Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase dockerfile LICENSE_FILE_NAME PingAuthorize.lic Name of license file LICENSE_SHORT_NAME PingAuthorize Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 1g Minimal Heap size required for PingAuthorize STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ENCRYPTION_PASSWORD_FILE Location of file with the passphrase for setting up encryption Defaults to /SECRETS_DIR/encryption-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/trace ${SERVER_ROOT_DIR}/logs/policy-decision ${SERVER_ROOT_DIR}/logs/ldap-access Files tailed once container has started PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check. Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT} Running a PingAuthorize container \u00b6 The easiest way to test a simple standalone image of PingAuthorize is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingauthorize \\ --publish 1389 :1389 \\ --publish 8443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingauthorize \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorize:edge You can view the Docker logs with the command: docker logs -f pingauthorize You should see the ouptut from a PingAuthorize install and configuration, ending with a message the the PingAuthorize has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs. Stopping/Removing the container \u00b6 To stop the container: docker container stop pingauthorize To remove the container: docker container rm -f pingauthorize Docker Container Hook Scripts \u00b6 Please go here for details on all pingauthorize hook scripts This document is auto-generated from pingauthorize/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingAuthorize"},{"location":"docker-images/pingauthorize/#ping-identity-devops-docker-image-pingauthorize","text":"This docker image includes the Ping Identity PingAuthorize product binaries and associated hook scripts to create and run a PingAuthorize instance or instances.","title":"Ping Identity DevOps Docker Image - pingauthorize"},{"location":"docker-images/pingauthorize/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingauthorize/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} --shm-size 256m \\ IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingAuthorize Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase dockerfile LICENSE_FILE_NAME PingAuthorize.lic Name of license file LICENSE_SHORT_NAME PingAuthorize Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 1g Minimal Heap size required for PingAuthorize STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ENCRYPTION_PASSWORD_FILE Location of file with the passphrase for setting up encryption Defaults to /SECRETS_DIR/encryption-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/trace ${SERVER_ROOT_DIR}/logs/policy-decision ${SERVER_ROOT_DIR}/logs/ldap-access Files tailed once container has started PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check.","title":"Environment Variables"},{"location":"docker-images/pingauthorize/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingauthorize/#running-a-pingauthorize-container","text":"The easiest way to test a simple standalone image of PingAuthorize is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingauthorize \\ --publish 1389 :1389 \\ --publish 8443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingauthorize \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorize:edge You can view the Docker logs with the command: docker logs -f pingauthorize You should see the ouptut from a PingAuthorize install and configuration, ending with a message the the PingAuthorize has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs.","title":"Running a PingAuthorize container"},{"location":"docker-images/pingauthorize/#stoppingremoving-the-container","text":"To stop the container: docker container stop pingauthorize To remove the container: docker container rm -f pingauthorize","title":"Stopping/Removing the container"},{"location":"docker-images/pingauthorize/#docker-container-hook-scripts","text":"Please go here for details on all pingauthorize hook scripts This document is auto-generated from pingauthorize/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingauthorize/hooks/","text":"Ping Identity DevOps pingauthorize Hooks \u00b6 There are no default hooks defined for the pingauthorize image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorize` Hooks"},{"location":"docker-images/pingauthorize/hooks/#ping-identity-devops-pingauthorize-hooks","text":"There are no default hooks defined for the pingauthorize image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorize Hooks"},{"location":"docker-images/pingauthorizepap/","text":"Ping Identity DevOps Docker Image - pingauthorizepap \u00b6 This docker image includes the Ping Identity PingAuthorize Policy Editor product binaries and associated hook scripts to create and run a PingAuthorize Policy Editor instance. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingAuthorize-PAP Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase dockerfile LICENSE_FILE_NAME PingAuthorize.lic Name of license File LICENSE_SHORT_NAME PingAuthorize Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 384m Minimal Heap size required for PingAuthorize Policy Editor STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\" or \"pkcs12\". If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/pingauthorize-pap.log ${SERVER_ROOT_DIR}/logs/setup.log ${SERVER_ROOT_DIR}/logs/start-server.log ${SERVER_ROOT_DIR}/logs/stop-server.log Files tailed once container has started REST_API_HOSTNAME localhost Hostname used for the REST API (deprecated, use PING_EXTERNAL_BASE_URL instead) DECISION_POINT_SHARED_SECRET 2FederateM0re Define shared secret between PAZ and the Policy Editor PING_ENABLE_API_HTTP_CACHE true When set to false , disables default HTTP API caching in the Policy Manager, Trust Framework and Test Suite Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${HTTPS_PORT} Running a PingAuthorize Policy Editor container \u00b6 A PingAuthorize Policy Editor may be set up in one of two modes: Demo mode : Uses insecure username/password authentication. OIDC mode : Uses an OpenID Connect provider for authentication. To run a PingAuthorize Policy Editor container in demo mode: docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorizepap:edge Log in with: https://my-pap-hostname:8443/ Username: admin Password: password123 To run a PingAuthorize Policy Editor container in OpenID Connect mode, specify the PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID environment variables: docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pe-hostname:8443 \\ --env PING_OIDC_CONFIGURATION_ENDPOINT = https://my-oidc-provider/.well-known/openid-configuration \\ --env PING_CLIENT_ID = b1929abc-e108-4b4f-83d467059fa1 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorizepap:edge Note: If both PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID are not specified, then the PingAuthorize Policy Editor will be set up in demo mode. Log in with: https://my-pap-hostname:8443/ Provide credentials as prompted by the OIDC provider Follow Docker logs with: docker logs -f pingauthorizepap Specifying the external hostname and port \u00b6 The Policy Editor consists of a client-side application that runs in the user's web browser and a backend REST API service that runs within the container. So that the client-side application can successfully make API calls to the backend, the Policy Editor must be configured with an externally accessible hostname:port. If the Policy Editor is configured in OIDC mode, then the external hostname:port pair is also needed so that the Policy Editor can correctly generate its OIDC redirect URI. Use the PING_EXTERNAL_BASE_URL environment variable to specify the Policy Editor's external hostname and port using the form hostname[:port] , where hostname is the hostname of the Docker host and port is the Policy Editor container's published port. If the published port is 443, then it should be omitted. For example: docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorizepap:edge Changing the default periodic database backup schedule and location \u00b6 The PAP performs periodic backups of the policy database. The results are placed in the policy-backup directory underneath the instance root. Use the PING_BACKUP_SCHEDULE environment variable to specify the PAP's periodic database backup schedule in the form of a cron expression. The cron expression will be evaluated against the container timezone, UTC. Use the PING_H2_BACKUP_DIR environment variable to change the backup output directory. For example, to perform backups daily at UTC noon and place backups in /opt/out/backup : docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --env PING_BACKUP_SCHEDULE = \"0 0 12 * * ?\" \\ --env PING_H2_BACKUP_DIR = /opt/out/backup \\ --publish 8443 :1443 \\ --detach \\ pingidentity/pingauthorizepap:edge Docker Container Hook Scripts \u00b6 Please go here for details on all pingauthorizepap hook scripts This document is auto-generated from pingauthorizepap/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingAuthorize PAP"},{"location":"docker-images/pingauthorizepap/#ping-identity-devops-docker-image-pingauthorizepap","text":"This docker image includes the Ping Identity PingAuthorize Policy Editor product binaries and associated hook scripts to create and run a PingAuthorize Policy Editor instance.","title":"Ping Identity DevOps Docker Image - pingauthorizepap"},{"location":"docker-images/pingauthorizepap/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingauthorizepap/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingAuthorize-PAP Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase dockerfile LICENSE_FILE_NAME PingAuthorize.lic Name of license File LICENSE_SHORT_NAME PingAuthorize Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 384m Minimal Heap size required for PingAuthorize Policy Editor STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\" or \"pkcs12\". If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/pingauthorize-pap.log ${SERVER_ROOT_DIR}/logs/setup.log ${SERVER_ROOT_DIR}/logs/start-server.log ${SERVER_ROOT_DIR}/logs/stop-server.log Files tailed once container has started REST_API_HOSTNAME localhost Hostname used for the REST API (deprecated, use PING_EXTERNAL_BASE_URL instead) DECISION_POINT_SHARED_SECRET 2FederateM0re Define shared secret between PAZ and the Policy Editor PING_ENABLE_API_HTTP_CACHE true When set to false , disables default HTTP API caching in the Policy Manager, Trust Framework and Test Suite","title":"Environment Variables"},{"location":"docker-images/pingauthorizepap/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${HTTPS_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingauthorizepap/#running-a-pingauthorize-policy-editor-container","text":"A PingAuthorize Policy Editor may be set up in one of two modes: Demo mode : Uses insecure username/password authentication. OIDC mode : Uses an OpenID Connect provider for authentication. To run a PingAuthorize Policy Editor container in demo mode: docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorizepap:edge Log in with: https://my-pap-hostname:8443/ Username: admin Password: password123 To run a PingAuthorize Policy Editor container in OpenID Connect mode, specify the PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID environment variables: docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pe-hostname:8443 \\ --env PING_OIDC_CONFIGURATION_ENDPOINT = https://my-oidc-provider/.well-known/openid-configuration \\ --env PING_CLIENT_ID = b1929abc-e108-4b4f-83d467059fa1 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorizepap:edge Note: If both PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID are not specified, then the PingAuthorize Policy Editor will be set up in demo mode. Log in with: https://my-pap-hostname:8443/ Provide credentials as prompted by the OIDC provider Follow Docker logs with: docker logs -f pingauthorizepap","title":"Running a PingAuthorize Policy Editor container"},{"location":"docker-images/pingauthorizepap/#specifying-the-external-hostname-and-port","text":"The Policy Editor consists of a client-side application that runs in the user's web browser and a backend REST API service that runs within the container. So that the client-side application can successfully make API calls to the backend, the Policy Editor must be configured with an externally accessible hostname:port. If the Policy Editor is configured in OIDC mode, then the external hostname:port pair is also needed so that the Policy Editor can correctly generate its OIDC redirect URI. Use the PING_EXTERNAL_BASE_URL environment variable to specify the Policy Editor's external hostname and port using the form hostname[:port] , where hostname is the hostname of the Docker host and port is the Policy Editor container's published port. If the published port is 443, then it should be omitted. For example: docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingauthorizepap:edge","title":"Specifying the external hostname and port"},{"location":"docker-images/pingauthorizepap/#changing-the-default-periodic-database-backup-schedule-and-location","text":"The PAP performs periodic backups of the policy database. The results are placed in the policy-backup directory underneath the instance root. Use the PING_BACKUP_SCHEDULE environment variable to specify the PAP's periodic database backup schedule in the form of a cron expression. The cron expression will be evaluated against the container timezone, UTC. Use the PING_H2_BACKUP_DIR environment variable to change the backup output directory. For example, to perform backups daily at UTC noon and place backups in /opt/out/backup : docker run \\ --name pingauthorizepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --env PING_BACKUP_SCHEDULE = \"0 0 12 * * ?\" \\ --env PING_H2_BACKUP_DIR = /opt/out/backup \\ --publish 8443 :1443 \\ --detach \\ pingidentity/pingauthorizepap:edge","title":"Changing the default periodic database backup schedule and location"},{"location":"docker-images/pingauthorizepap/#docker-container-hook-scripts","text":"Please go here for details on all pingauthorizepap hook scripts This document is auto-generated from pingauthorizepap/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingauthorizepap/hooks/","text":"Ping Identity DevOps pingauthorizepap Hooks \u00b6 List of available hooks: * 18-setup-sequence.sh * 183-run-setup.sh * 80-post-start.sh * 81-install-policies.sh * pingauthorizepap.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingauthorizepap/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorizepap` Hooks"},{"location":"docker-images/pingauthorizepap/hooks/#ping-identity-devops-pingauthorizepap-hooks","text":"List of available hooks: * 18-setup-sequence.sh * 183-run-setup.sh * 80-post-start.sh * 81-install-policies.sh * pingauthorizepap.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingauthorizepap/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorizepap Hooks"},{"location":"docker-images/pingauthorizepap/hooks/18-setup-sequence.sh/","text":"Ping Identity DevOps pingauthorizepap Hook - 18-setup-sequence.sh \u00b6 Quarterbacks all the scripts associated with the setup of a PingData product This document is auto-generated from pingauthorizepap/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorizepap` Hook - `18-setup-sequence.sh`"},{"location":"docker-images/pingauthorizepap/hooks/18-setup-sequence.sh/#ping-identity-devops-pingauthorizepap-hook-18-setup-sequencesh","text":"Quarterbacks all the scripts associated with the setup of a PingData product This document is auto-generated from pingauthorizepap/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorizepap Hook - 18-setup-sequence.sh"},{"location":"docker-images/pingauthorizepap/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingauthorizepap Hook - 183-run-setup.sh \u00b6 This document is auto-generated from pingauthorizepap/opt/staging/hooks/183-run-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorizepap` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingauthorizepap/hooks/183-run-setup.sh/#ping-identity-devops-pingauthorizepap-hook-183-run-setupsh","text":"This document is auto-generated from pingauthorizepap/opt/staging/hooks/183-run-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorizepap Hook - 183-run-setup.sh"},{"location":"docker-images/pingauthorizepap/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingauthorizepap Hook - 80-post-start.sh \u00b6 This script is used to import any configurations that are needed after PingAuthorize Policy Editor starts This document is auto-generated from pingauthorizepap/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorizepap` Hook - `80-post-start.sh`"},{"location":"docker-images/pingauthorizepap/hooks/80-post-start.sh/#ping-identity-devops-pingauthorizepap-hook-80-post-startsh","text":"This script is used to import any configurations that are needed after PingAuthorize Policy Editor starts This document is auto-generated from pingauthorizepap/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorizepap Hook - 80-post-start.sh"},{"location":"docker-images/pingauthorizepap/hooks/81-install-policies.sh/","text":"Ping Identity DevOps pingauthorizepap Hook - 81-install-policies.sh \u00b6 This document is auto-generated from pingauthorizepap/opt/staging/hooks/81-install-policies.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorizepap` Hook - `81-install-policies.sh`"},{"location":"docker-images/pingauthorizepap/hooks/81-install-policies.sh/#ping-identity-devops-pingauthorizepap-hook-81-install-policiessh","text":"This document is auto-generated from pingauthorizepap/opt/staging/hooks/81-install-policies.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorizepap Hook - 81-install-policies.sh"},{"location":"docker-images/pingauthorizepap/hooks/pingauthorizepap.lib.sh/","text":"Ping Identity DevOps pingauthorizepap Hook - pingauthorizepap.lib.sh \u00b6 This document is auto-generated from pingauthorizepap/opt/staging/hooks/pingauthorizepap.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingauthorizepap` Hook - `pingauthorizepap.lib.sh`"},{"location":"docker-images/pingauthorizepap/hooks/pingauthorizepap.lib.sh/#ping-identity-devops-pingauthorizepap-hook-pingauthorizepaplibsh","text":"This document is auto-generated from pingauthorizepap/opt/staging/hooks/pingauthorizepap.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingauthorizepap Hook - pingauthorizepap.lib.sh"},{"location":"docker-images/pingbase/","text":"Ping Identity Docker Image - pingbase \u00b6 This docker image provides a base image for all Ping Identity DevOps product images. Environment Variables \u00b6 The following environment ENV variables can be used with this image. ENV Variable Default Description BASE ${BASE:-/opt} Location of the top level directory where everything is located in image/container ROOT_USER administrator the default administrative user for PingData JAVA_HOME /opt/java STAGING_DIR ${BASE}/staging Path to the staging area where the remote and local server profiles can be merged OUT_DIR ${BASE}/out Path to the runtime volume SERVER_ROOT_DIR ${OUT_DIR}/instance Path from which the runtime executes IN_DIR ${BASE}/in Location of a local server-profile volume SERVER_BITS_DIR ${BASE}/server Path to the server bits BAK_DIR ${BASE}/backup Path to a volume generically used to export or backup data LOGS_DIR ${BASE}/logs Path to a volume generically used for logging PING_IDENTITY_ACCEPT_EULA NO Must be set to 'YES' for the container to start PING_IDENTITY_DEVOPS_FILE devops-secret File name for devops-creds passed as a Docker secret STAGING_MANIFEST ${BASE}/staging-manifest.txt Path to a manifest of files expected in the staging dir on first image startup CLEAN_STAGING_DIR false Whether to clean the staging dir when the image starts SECRETS_DIR /run/secrets Default path to the secrets TOPOLOGY_FILE ${STAGING_DIR}/topology.json Path to the topology file HOOKS_DIR ${STAGING_DIR}/hooks Path where all the hooks scripts are stored CONTAINER_ENV ${STAGING_DIR}/.env Environment Property file use to share variables between scripts in container SERVER_PROFILE_DIR /tmp/server-profile Path where the remote server profile is checked out or cloned before being staged prior to being applied on the runtime SERVER_PROFILE_URL A valid git HTTPS URL (not ssh) SERVER_PROFILE_URL_REDACT true When set to \"true\", the server profile git URL will not be printed to container output. SERVER_PROFILE_BRANCH A valid git branch (optional) SERVER_PROFILE_PATH The subdirectory in the git repo SERVER_PROFILE_UPDATE false Whether to update the server profile upon container restart SECURITY_CHECKS_STRICT false Requires strict checks on security SECURITY_CHECKS_FILENAME .jwk .pin Perform a check for filenames that may violate security (i.e. secret material) UNSAFE_CONTINUE_ON_ERROR If this is set to true, then the container will provide a hard warning and continue. LICENSE_DIR ${SERVER_ROOT_DIR} License directory PD_LICENSE_DIR ${STAGING_DIR}/pd.profile/server-root/pre-setup PD License directory. Separating from above LICENSE_DIR to differentiate for different products STARTUP_COMMAND The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container PING_IDENTITY_DEVOPS_KEY_REDACT true TAIL_LOG_FILES A whitespace separated list of log files to tail to the container standard output - DO NOT USE WILDCARDS like /path/to/logs/*.log COLORIZE_LOGS true If 'true', the output logs will be colorized with GREENs and REDs, otherwise, no colorization will be done. This is good for tools that monitor logs and colorization gets in the way. LOCATION Docker Location default value LOCATION_VALIDATION true Any string denoting a logical/physical location MAX_HEAP_SIZE 384m Heap size (for java products) JVM_TUNING AGGRESSIVE JAVA_RAM_PERCENTAGE 75.0 Percentage of the container memory to allocate to PingFederate JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate VERBOSE false Triggers verbose messages in scripts using the set -x option. PING_DEBUG false Set the server in debug mode, with increased output PING_PRODUCT The name of Ping product. Should be overridden by child images. PING_PRODUCT_VALIDATION true i.e. PingFederate,PingDirectory ADDITIONAL_SETUP_ARGS List of setup arguments passed to Ping Data setup-arguments.txt file LDAP_PORT 1389 Port over which to communicate for LDAP LDAPS_PORT 1636 Port over which to communicate for LDAPS HTTPS_PORT 1443 Port over which to communicate for HTTPS JMX_PORT 1689 Port for monitoring over JMX protocol ORCHESTRATION_TYPE The type of orchestration tool used to run the container, normally set in the deployment (.yaml) file. Expected values include: - compose - swarm - kubernetes Defaults to blank (i.e. No type is set) USER_BASE_DN dc=example,dc=com Base DN for user data DOLLAR '$' Variable with a literal value of '$', to avoid unwanted variable substitution PD_ENGINE_PUBLIC_HOSTNAME localhost PD (PingDirectory) public hostname that may be used in redirects PD_ENGINE_PRIVATE_HOSTNAME pingdirectory PD (PingDirectory) private hostname PDP_ENGINE_PUBLIC_HOSTNAME localhost PDP (PingDirectoryProxy) public hostname that may be used in redirects PDP_ENGINE_PRIVATE_HOSTNAME pingdirectoryproxy PDP (PingDirectoryProxy) private hostname PDS_ENGINE_PUBLIC_HOSTNAME localhost PDS (PingDataSync) public hostname that may be used in redirects PDS_ENGINE_PRIVATE_HOSTNAME pingdatasync PDS (PingDataSync) private hostname PAZ_ENGINE_PUBLIC_HOSTNAME localhost PAZ (PingAuthorize) public hostname that may be used in redirects PAZ_ENGINE_PRIVATE_HOSTNAME pingauthorize PAZ (PingAuthorize) private hostname PAZP_ENGINE_PUBLIC_HOSTNAME localhost PAZP (PingAuthorize-PAP) public hostname that may be used in redirects PAZP_ENGINE_PRIVATE_HOSTNAME pingauthorizepap PAZP (PingAuthorize-PAP) private hostname PF_ENGINE_PUBLIC_HOSTNAME localhost PF (PingFederate) engine public hostname that may be used in redirects PF_ENGINE_PRIVATE_HOSTNAME pingfederate PF (PingFederate) engine private hostname PF_ADMIN_PUBLIC_BASEURL https://localhost:9999 PF (PingFederate) admin public baseurl that may be used in redirects PF_ADMIN_PUBLIC_HOSTNAME localhost PF (PingFederate) admin public hostname that may be used in redirects PF_ADMIN_PRIVATE_HOSTNAME pingfederate-admin PF (PingFederate) admin private hostname PA_ENGINE_PUBLIC_HOSTNAME localhost PA (PingAccess) engine public hostname that may be used in redirects PA_ENGINE_PRIVATE_HOSTNAME pingaccess PA (PingAccess) engine private hostname PA_ADMIN_PUBLIC_HOSTNAME localhost PA (PingAccess) admin public hostname that may be used in redirects PA_ADMIN_PRIVATE_HOSTNAME pingaccess-admin PA (PingAccess) admin private hostname ROOT_USER_DN cn=${ROOT_USER} DN of the server root user ENV ${BASE}/.profile MOTD_URL https://raw.githubusercontent.com/pingidentity/pingidentity-devops-getting-started/master/motd/motd.json Instructs the image to pull the MOTD json from the following URL. If this MOTD_URL variable is empty, then no motd will be downloaded. The format of this MOTD file must match the example provided in the url: https://raw.githubusercontent.com/pingidentity/pingidentity-devops-getting-started/master/motd/motd.json PS1 \\${PING_PRODUCT}:\\h:\\w\\n> Default shell prompt (i.e. productName:hostname:workingDir) PATH ${JAVA_HOME}/bin:${BASE}:${SERVER_ROOT_DIR}/bin:${PATH} PATH used by the container Docker Container Hook Scripts \u00b6 Please go here for details on all pingbase hook scripts This document is auto-generated from pingbase/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingBase"},{"location":"docker-images/pingbase/#ping-identity-docker-image-pingbase","text":"This docker image provides a base image for all Ping Identity DevOps product images.","title":"Ping Identity Docker Image - pingbase"},{"location":"docker-images/pingbase/#environment-variables","text":"The following environment ENV variables can be used with this image. ENV Variable Default Description BASE ${BASE:-/opt} Location of the top level directory where everything is located in image/container ROOT_USER administrator the default administrative user for PingData JAVA_HOME /opt/java STAGING_DIR ${BASE}/staging Path to the staging area where the remote and local server profiles can be merged OUT_DIR ${BASE}/out Path to the runtime volume SERVER_ROOT_DIR ${OUT_DIR}/instance Path from which the runtime executes IN_DIR ${BASE}/in Location of a local server-profile volume SERVER_BITS_DIR ${BASE}/server Path to the server bits BAK_DIR ${BASE}/backup Path to a volume generically used to export or backup data LOGS_DIR ${BASE}/logs Path to a volume generically used for logging PING_IDENTITY_ACCEPT_EULA NO Must be set to 'YES' for the container to start PING_IDENTITY_DEVOPS_FILE devops-secret File name for devops-creds passed as a Docker secret STAGING_MANIFEST ${BASE}/staging-manifest.txt Path to a manifest of files expected in the staging dir on first image startup CLEAN_STAGING_DIR false Whether to clean the staging dir when the image starts SECRETS_DIR /run/secrets Default path to the secrets TOPOLOGY_FILE ${STAGING_DIR}/topology.json Path to the topology file HOOKS_DIR ${STAGING_DIR}/hooks Path where all the hooks scripts are stored CONTAINER_ENV ${STAGING_DIR}/.env Environment Property file use to share variables between scripts in container SERVER_PROFILE_DIR /tmp/server-profile Path where the remote server profile is checked out or cloned before being staged prior to being applied on the runtime SERVER_PROFILE_URL A valid git HTTPS URL (not ssh) SERVER_PROFILE_URL_REDACT true When set to \"true\", the server profile git URL will not be printed to container output. SERVER_PROFILE_BRANCH A valid git branch (optional) SERVER_PROFILE_PATH The subdirectory in the git repo SERVER_PROFILE_UPDATE false Whether to update the server profile upon container restart SECURITY_CHECKS_STRICT false Requires strict checks on security SECURITY_CHECKS_FILENAME .jwk .pin Perform a check for filenames that may violate security (i.e. secret material) UNSAFE_CONTINUE_ON_ERROR If this is set to true, then the container will provide a hard warning and continue. LICENSE_DIR ${SERVER_ROOT_DIR} License directory PD_LICENSE_DIR ${STAGING_DIR}/pd.profile/server-root/pre-setup PD License directory. Separating from above LICENSE_DIR to differentiate for different products STARTUP_COMMAND The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container PING_IDENTITY_DEVOPS_KEY_REDACT true TAIL_LOG_FILES A whitespace separated list of log files to tail to the container standard output - DO NOT USE WILDCARDS like /path/to/logs/*.log COLORIZE_LOGS true If 'true', the output logs will be colorized with GREENs and REDs, otherwise, no colorization will be done. This is good for tools that monitor logs and colorization gets in the way. LOCATION Docker Location default value LOCATION_VALIDATION true Any string denoting a logical/physical location MAX_HEAP_SIZE 384m Heap size (for java products) JVM_TUNING AGGRESSIVE JAVA_RAM_PERCENTAGE 75.0 Percentage of the container memory to allocate to PingFederate JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate VERBOSE false Triggers verbose messages in scripts using the set -x option. PING_DEBUG false Set the server in debug mode, with increased output PING_PRODUCT The name of Ping product. Should be overridden by child images. PING_PRODUCT_VALIDATION true i.e. PingFederate,PingDirectory ADDITIONAL_SETUP_ARGS List of setup arguments passed to Ping Data setup-arguments.txt file LDAP_PORT 1389 Port over which to communicate for LDAP LDAPS_PORT 1636 Port over which to communicate for LDAPS HTTPS_PORT 1443 Port over which to communicate for HTTPS JMX_PORT 1689 Port for monitoring over JMX protocol ORCHESTRATION_TYPE The type of orchestration tool used to run the container, normally set in the deployment (.yaml) file. Expected values include: - compose - swarm - kubernetes Defaults to blank (i.e. No type is set) USER_BASE_DN dc=example,dc=com Base DN for user data DOLLAR '$' Variable with a literal value of '$', to avoid unwanted variable substitution PD_ENGINE_PUBLIC_HOSTNAME localhost PD (PingDirectory) public hostname that may be used in redirects PD_ENGINE_PRIVATE_HOSTNAME pingdirectory PD (PingDirectory) private hostname PDP_ENGINE_PUBLIC_HOSTNAME localhost PDP (PingDirectoryProxy) public hostname that may be used in redirects PDP_ENGINE_PRIVATE_HOSTNAME pingdirectoryproxy PDP (PingDirectoryProxy) private hostname PDS_ENGINE_PUBLIC_HOSTNAME localhost PDS (PingDataSync) public hostname that may be used in redirects PDS_ENGINE_PRIVATE_HOSTNAME pingdatasync PDS (PingDataSync) private hostname PAZ_ENGINE_PUBLIC_HOSTNAME localhost PAZ (PingAuthorize) public hostname that may be used in redirects PAZ_ENGINE_PRIVATE_HOSTNAME pingauthorize PAZ (PingAuthorize) private hostname PAZP_ENGINE_PUBLIC_HOSTNAME localhost PAZP (PingAuthorize-PAP) public hostname that may be used in redirects PAZP_ENGINE_PRIVATE_HOSTNAME pingauthorizepap PAZP (PingAuthorize-PAP) private hostname PF_ENGINE_PUBLIC_HOSTNAME localhost PF (PingFederate) engine public hostname that may be used in redirects PF_ENGINE_PRIVATE_HOSTNAME pingfederate PF (PingFederate) engine private hostname PF_ADMIN_PUBLIC_BASEURL https://localhost:9999 PF (PingFederate) admin public baseurl that may be used in redirects PF_ADMIN_PUBLIC_HOSTNAME localhost PF (PingFederate) admin public hostname that may be used in redirects PF_ADMIN_PRIVATE_HOSTNAME pingfederate-admin PF (PingFederate) admin private hostname PA_ENGINE_PUBLIC_HOSTNAME localhost PA (PingAccess) engine public hostname that may be used in redirects PA_ENGINE_PRIVATE_HOSTNAME pingaccess PA (PingAccess) engine private hostname PA_ADMIN_PUBLIC_HOSTNAME localhost PA (PingAccess) admin public hostname that may be used in redirects PA_ADMIN_PRIVATE_HOSTNAME pingaccess-admin PA (PingAccess) admin private hostname ROOT_USER_DN cn=${ROOT_USER} DN of the server root user ENV ${BASE}/.profile MOTD_URL https://raw.githubusercontent.com/pingidentity/pingidentity-devops-getting-started/master/motd/motd.json Instructs the image to pull the MOTD json from the following URL. If this MOTD_URL variable is empty, then no motd will be downloaded. The format of this MOTD file must match the example provided in the url: https://raw.githubusercontent.com/pingidentity/pingidentity-devops-getting-started/master/motd/motd.json PS1 \\${PING_PRODUCT}:\\h:\\w\\n> Default shell prompt (i.e. productName:hostname:workingDir) PATH ${JAVA_HOME}/bin:${BASE}:${SERVER_ROOT_DIR}/bin:${PATH} PATH used by the container","title":"Environment Variables"},{"location":"docker-images/pingbase/#docker-container-hook-scripts","text":"Please go here for details on all pingbase hook scripts This document is auto-generated from pingbase/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingbase/hooks/","text":"Ping Identity DevOps pingbase Hooks \u00b6 There are no default hooks defined for the pingbase image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingbase` Hooks"},{"location":"docker-images/pingbase/hooks/#ping-identity-devops-pingbase-hooks","text":"There are no default hooks defined for the pingbase image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingbase Hooks"},{"location":"docker-images/pingcentral/","text":"Ping Identity DevOps Docker Image - pingcentral \u00b6 This docker image includes the Ping Identity PingCentral product binaries and associated hook scripts to create and run PingCentral in a container. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_CENTRAL_SERVER_PORT 9022 PING_PRODUCT PingCentral Ping product name LICENSE_DIR ${SERVER_ROOT_DIR}/conf License directory LICENSE_FILE_NAME pingcentral.lic Name of license file LICENSE_SHORT_NAME PC Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/log/application.log Files tailed once container has started PING_CENTRAL_LOG_LEVEL INFO PING_CENTRAL_BLIND_TRUST false PING_CENTRAL_VERIFY_HOSTNAME true Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container 9022 Running a PingCentral container \u00b6 To run a PingCentral container with your devops configuration file: ```shell docker run -Pt \\ --name pingcentral \\ --env-file ~/.pingidentity/devops \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingcentral:edge or with long options in the background: ```shell docker run \\ --name pingcentral \\ --publish 9022:9022 \\ --detach \\ --env-file ~/.pingidentity/devops \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingcentral:edge or if you want to specify everything yourself: docker run \\ --name pingcentral \\ --publish 9022 :9022 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingcentral:edge Follow Docker logs with: docker logs -f pingcentral If using the command above with the embedded server profile , log in with: * https://localhost:9022/ * Username: Administrator * Password: 2Federate Docker Container Hook Scripts \u00b6 Please go here for details on all pingcentral hook scripts This document is auto-generated from pingcentral/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingCentral"},{"location":"docker-images/pingcentral/#ping-identity-devops-docker-image-pingcentral","text":"This docker image includes the Ping Identity PingCentral product binaries and associated hook scripts to create and run PingCentral in a container.","title":"Ping Identity DevOps Docker Image - pingcentral"},{"location":"docker-images/pingcentral/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingcentral/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_CENTRAL_SERVER_PORT 9022 PING_PRODUCT PingCentral Ping product name LICENSE_DIR ${SERVER_ROOT_DIR}/conf License directory LICENSE_FILE_NAME pingcentral.lic Name of license file LICENSE_SHORT_NAME PC Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/log/application.log Files tailed once container has started PING_CENTRAL_LOG_LEVEL INFO PING_CENTRAL_BLIND_TRUST false PING_CENTRAL_VERIFY_HOSTNAME true","title":"Environment Variables"},{"location":"docker-images/pingcentral/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container 9022","title":"Ports Exposed"},{"location":"docker-images/pingcentral/#running-a-pingcentral-container","text":"To run a PingCentral container with your devops configuration file: ```shell docker run -Pt \\ --name pingcentral \\ --env-file ~/.pingidentity/devops \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingcentral:edge or with long options in the background: ```shell docker run \\ --name pingcentral \\ --publish 9022:9022 \\ --detach \\ --env-file ~/.pingidentity/devops \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingcentral:edge or if you want to specify everything yourself: docker run \\ --name pingcentral \\ --publish 9022 :9022 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingcentral:edge Follow Docker logs with: docker logs -f pingcentral If using the command above with the embedded server profile , log in with: * https://localhost:9022/ * Username: Administrator * Password: 2Federate","title":"Running a PingCentral container"},{"location":"docker-images/pingcentral/#docker-container-hook-scripts","text":"Please go here for details on all pingcentral hook scripts This document is auto-generated from pingcentral/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingcentral/hooks/","text":"Ping Identity DevOps pingcentral Hooks \u00b6 There are no default hooks defined for the pingcentral image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcentral` Hooks"},{"location":"docker-images/pingcentral/hooks/#ping-identity-devops-pingcentral-hooks","text":"There are no default hooks defined for the pingcentral image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcentral Hooks"},{"location":"docker-images/pingcommon/","text":"Ping Identity Docker Image - pingcommon \u00b6 This docker image provides a busybox image to house the base hook scripts and default entrypoint.sh used throughout the Ping Identity DevOps product images. Docker Container Hook Scripts \u00b6 Please go here for details on all pingcommon hook scripts This document is auto-generated from pingcommon/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingCommon"},{"location":"docker-images/pingcommon/#ping-identity-docker-image-pingcommon","text":"This docker image provides a busybox image to house the base hook scripts and default entrypoint.sh used throughout the Ping Identity DevOps product images.","title":"Ping Identity Docker Image - pingcommon"},{"location":"docker-images/pingcommon/#docker-container-hook-scripts","text":"Please go here for details on all pingcommon hook scripts This document is auto-generated from pingcommon/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingcommon/hooks/","text":"Ping Identity DevOps pingcommon Hooks \u00b6 List of available hooks: * 01-start-server.sh * 02-get-remote-server-profile.sh * 03-build-run-plan.sh * 04-check-variables.sh * 05-expand-templates.sh * 06-copy-product-bits.sh * 07-apply-server-profile.sh * 09-build-motd.sh * 10-start-sequence.sh * 17-check-license.sh * 18-setup-sequence.sh * 20-restart-sequence.sh * 50-before-post-start.sh * 90-shutdown-sequence.sh * pingcommon.lib.sh * pingsecrets.lib.sh * pingstate.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingcommon/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hooks"},{"location":"docker-images/pingcommon/hooks/#ping-identity-devops-pingcommon-hooks","text":"List of available hooks: * 01-start-server.sh * 02-get-remote-server-profile.sh * 03-build-run-plan.sh * 04-check-variables.sh * 05-expand-templates.sh * 06-copy-product-bits.sh * 07-apply-server-profile.sh * 09-build-motd.sh * 10-start-sequence.sh * 17-check-license.sh * 18-setup-sequence.sh * 20-restart-sequence.sh * 50-before-post-start.sh * 90-shutdown-sequence.sh * pingcommon.lib.sh * pingsecrets.lib.sh * pingstate.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingcommon/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hooks"},{"location":"docker-images/pingcommon/hooks/01-start-server.sh/","text":"Ping Identity DevOps pingcommon Hook - 01-start-server.sh \u00b6 This document is auto-generated from pingcommon/opt/staging/hooks/01-start-server.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `01-start-server.sh`"},{"location":"docker-images/pingcommon/hooks/01-start-server.sh/#ping-identity-devops-pingcommon-hook-01-start-serversh","text":"This document is auto-generated from pingcommon/opt/staging/hooks/01-start-server.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 01-start-server.sh"},{"location":"docker-images/pingcommon/hooks/02-get-remote-server-profile.sh/","text":"Ping Identity DevOps pingcommon Hook - 02-get-remote-server-profile.sh \u00b6 This hook will get bits from a git repo based on SERVER_PROFILE_* variables passed to the container. If no SERVER_PROFILES are passed, then nothing will occur when running this hook. These bits will be placed into the STAGING_DIR location (defaults to ${BASE_DIR}/staging). Server Profiles may be layered to copy in profiles from a parent/ancestor server profile. An example might be a layer of profiles that look like: - Dev Environment Configs (DEV_CONFIG) - Dev Certificates (DEV_CERT) - Base Configs (BASE) This would result in a set of SERVER_PROFILE variables that looks like: - SERVER_PROFILE_URL=...git url of DEV_CONFIG... - SERVER_PROFILE_PARENT=DEV_CERT - SERVER_PROFILE_DEV_CERT_URL=...git url of DEV_CERT... - SERVER_PROFILE_DEV_CERT_PARENT=BASE - SERVER_PROFILE_BASE_URL=...git url of BASE... In this example, the bits for BASE would be pulled, followed by DEV_CERT, followed by DEV_CONFIG If other source maintenance repositories are used (i.e. bitbucket, s3, ...) then this hook could be overridden by a different hook This document is auto-generated from pingcommon/opt/staging/hooks/02-get-remote-server-profile.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `02-get-remote-server-profile.sh`"},{"location":"docker-images/pingcommon/hooks/02-get-remote-server-profile.sh/#ping-identity-devops-pingcommon-hook-02-get-remote-server-profilesh","text":"This hook will get bits from a git repo based on SERVER_PROFILE_* variables passed to the container. If no SERVER_PROFILES are passed, then nothing will occur when running this hook. These bits will be placed into the STAGING_DIR location (defaults to ${BASE_DIR}/staging). Server Profiles may be layered to copy in profiles from a parent/ancestor server profile. An example might be a layer of profiles that look like: - Dev Environment Configs (DEV_CONFIG) - Dev Certificates (DEV_CERT) - Base Configs (BASE) This would result in a set of SERVER_PROFILE variables that looks like: - SERVER_PROFILE_URL=...git url of DEV_CONFIG... - SERVER_PROFILE_PARENT=DEV_CERT - SERVER_PROFILE_DEV_CERT_URL=...git url of DEV_CERT... - SERVER_PROFILE_DEV_CERT_PARENT=BASE - SERVER_PROFILE_BASE_URL=...git url of BASE... In this example, the bits for BASE would be pulled, followed by DEV_CERT, followed by DEV_CONFIG If other source maintenance repositories are used (i.e. bitbucket, s3, ...) then this hook could be overridden by a different hook This document is auto-generated from pingcommon/opt/staging/hooks/02-get-remote-server-profile.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 02-get-remote-server-profile.sh"},{"location":"docker-images/pingcommon/hooks/03-build-run-plan.sh/","text":"Ping Identity DevOps pingcommon Hook - 03-build-run-plan.sh \u00b6 This script will building a run plan for the server as it starts up Options for the RUN_PLAN and the PD_STATE are as follows: RUN_PLAN (Initially set to UNKNOWN) START - Instructs the container to start from scratch. This is primarily because a STARTUP_COMMAND (i.e. /opt/out/instance/bin/run.sh) isn't present. RESTART - Instructs the container to restart. This is primarily because the STARTUP_COMMAND (i.e. /opt/out/instance/bin/run.sh) is present and typically signifies that the server bits have been copied and run before NOTE: It will be common for products to override this hook to provide RUN_PLAN directions based on product specifics. This document is auto-generated from pingcommon/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `03-build-run-plan.sh`"},{"location":"docker-images/pingcommon/hooks/03-build-run-plan.sh/#ping-identity-devops-pingcommon-hook-03-build-run-plansh","text":"This script will building a run plan for the server as it starts up Options for the RUN_PLAN and the PD_STATE are as follows: RUN_PLAN (Initially set to UNKNOWN) START - Instructs the container to start from scratch. This is primarily because a STARTUP_COMMAND (i.e. /opt/out/instance/bin/run.sh) isn't present. RESTART - Instructs the container to restart. This is primarily because the STARTUP_COMMAND (i.e. /opt/out/instance/bin/run.sh) is present and typically signifies that the server bits have been copied and run before NOTE: It will be common for products to override this hook to provide RUN_PLAN directions based on product specifics. This document is auto-generated from pingcommon/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 03-build-run-plan.sh"},{"location":"docker-images/pingcommon/hooks/04-check-variables.sh/","text":"Ping Identity DevOps pingcommon Hook - 04-check-variables.sh \u00b6 This document is auto-generated from pingcommon/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `04-check-variables.sh`"},{"location":"docker-images/pingcommon/hooks/04-check-variables.sh/#ping-identity-devops-pingcommon-hook-04-check-variablessh","text":"This document is auto-generated from pingcommon/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 04-check-variables.sh"},{"location":"docker-images/pingcommon/hooks/05-expand-templates.sh/","text":"Ping Identity DevOps pingcommon Hook - 05-expand-templates.sh \u00b6 Using the envsubst command, this will look through any files in the STAGING_DIR that end in .subst or .subst.default and substitute any variables the files with the the value of those variables, if the variable is set. Variables may come from (in order of precedence): - The '.env' file from the profiles and intra container env variables - The environment variables or env-file passed to container on startup - The container's os If a .zip file ends with .zip.subst (especially useful for pingfederate for example with data.zip) then: - file will be unzipped - any files ending in .subst will be processed to substitute variables - zipped back up in to the same file without the .subst suffix If a file ends with .subst.default (intended to only be expanded as a default if the file is not found) then it will be substituted: - If the RUN_PLAN==START and the file is not found in staging - If the RUN_PLAN==RESTART and the file is found in staging or the OUT_DIR Note: If a string of $name should be ignored during a substitution, then A special variable ${ DOLLAR } should be used. This is not required any longer and deprecated, but available for any older server-profile versions. Example: ${ DOLLAR }{username} ==> ${username} This document is auto-generated from pingcommon/opt/staging/hooks/05-expand-templates.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `05-expand-templates.sh`"},{"location":"docker-images/pingcommon/hooks/05-expand-templates.sh/#ping-identity-devops-pingcommon-hook-05-expand-templatessh","text":"Using the envsubst command, this will look through any files in the STAGING_DIR that end in .subst or .subst.default and substitute any variables the files with the the value of those variables, if the variable is set. Variables may come from (in order of precedence): - The '.env' file from the profiles and intra container env variables - The environment variables or env-file passed to container on startup - The container's os If a .zip file ends with .zip.subst (especially useful for pingfederate for example with data.zip) then: - file will be unzipped - any files ending in .subst will be processed to substitute variables - zipped back up in to the same file without the .subst suffix If a file ends with .subst.default (intended to only be expanded as a default if the file is not found) then it will be substituted: - If the RUN_PLAN==START and the file is not found in staging - If the RUN_PLAN==RESTART and the file is found in staging or the OUT_DIR Note: If a string of $name should be ignored during a substitution, then A special variable ${ DOLLAR } should be used. This is not required any longer and deprecated, but available for any older server-profile versions. Example: ${ DOLLAR }{username} ==> ${username} This document is auto-generated from pingcommon/opt/staging/hooks/05-expand-templates.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 05-expand-templates.sh"},{"location":"docker-images/pingcommon/hooks/06-copy-product-bits.sh/","text":"Ping Identity DevOps pingcommon Hook - 06-copy-product-bits.sh \u00b6 Copies the server bits from the image into the SERVER_ROOT_DIR if it is a new fresh container. This document is auto-generated from pingcommon/opt/staging/hooks/06-copy-product-bits.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `06-copy-product-bits.sh`"},{"location":"docker-images/pingcommon/hooks/06-copy-product-bits.sh/#ping-identity-devops-pingcommon-hook-06-copy-product-bitssh","text":"Copies the server bits from the image into the SERVER_ROOT_DIR if it is a new fresh container. This document is auto-generated from pingcommon/opt/staging/hooks/06-copy-product-bits.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 06-copy-product-bits.sh"},{"location":"docker-images/pingcommon/hooks/07-apply-server-profile.sh/","text":"Ping Identity DevOps pingcommon Hook - 07-apply-server-profile.sh \u00b6 The server-profiles from: * remote (i.e. git) and * local (i.e. /opt/in) have been merged into the ${STAGING_DIR}/instance (ie. /opt/staging/instance). This is a candidate to be installed or overwritten into the ${SERVER_ROOT_DIR} if one of the following items are true: * Start of a new server (i.e. RUN_PLAN=START) * Restart of a server with SERVER_PROFILE_UPDATE==true To force the overwrite of files on a restart, ensure that the variable: SERVER_PROFILE_UPDATE=true is passed. This document is auto-generated from pingcommon/opt/staging/hooks/07-apply-server-profile.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `07-apply-server-profile.sh`"},{"location":"docker-images/pingcommon/hooks/07-apply-server-profile.sh/#ping-identity-devops-pingcommon-hook-07-apply-server-profilesh","text":"The server-profiles from: * remote (i.e. git) and * local (i.e. /opt/in) have been merged into the ${STAGING_DIR}/instance (ie. /opt/staging/instance). This is a candidate to be installed or overwritten into the ${SERVER_ROOT_DIR} if one of the following items are true: * Start of a new server (i.e. RUN_PLAN=START) * Restart of a server with SERVER_PROFILE_UPDATE==true To force the overwrite of files on a restart, ensure that the variable: SERVER_PROFILE_UPDATE=true is passed. This document is auto-generated from pingcommon/opt/staging/hooks/07-apply-server-profile.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 07-apply-server-profile.sh"},{"location":"docker-images/pingcommon/hooks/08-get-secrets.sh/","text":"Ping Identity DevOps pingcommon Hook - 08-get-secrets.sh \u00b6 Gets secrets from secret management solution * Hashicorp Vault This document auto-generated from pingcommon/opt/staging/hooks/08-get-secrets.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `08-get-secrets.sh`"},{"location":"docker-images/pingcommon/hooks/08-get-secrets.sh/#ping-identity-devops-pingcommon-hook-08-get-secretssh","text":"Gets secrets from secret management solution * Hashicorp Vault This document auto-generated from pingcommon/opt/staging/hooks/08-get-secrets.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 08-get-secrets.sh"},{"location":"docker-images/pingcommon/hooks/09-build-motd.sh/","text":"Ping Identity DevOps pingcommon Hook - 09-build-motd.sh \u00b6 Creates a message of the day (MOTD) file based on information provided by: * Docker Variables * Github MOTD file from PingIdentity Devops Repo * Server-Profile motd file This document is auto-generated from pingcommon/opt/staging/hooks/09-build-motd.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `09-build-motd.sh`"},{"location":"docker-images/pingcommon/hooks/09-build-motd.sh/#ping-identity-devops-pingcommon-hook-09-build-motdsh","text":"Creates a message of the day (MOTD) file based on information provided by: * Docker Variables * Github MOTD file from PingIdentity Devops Repo * Server-Profile motd file This document is auto-generated from pingcommon/opt/staging/hooks/09-build-motd.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 09-build-motd.sh"},{"location":"docker-images/pingcommon/hooks/10-start-sequence.sh/","text":"Ping Identity DevOps pingcommon Hook - 10-start-sequence.sh \u00b6 This document is auto-generated from pingcommon/opt/staging/hooks/10-start-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `10-start-sequence.sh`"},{"location":"docker-images/pingcommon/hooks/10-start-sequence.sh/#ping-identity-devops-pingcommon-hook-10-start-sequencesh","text":"This document is auto-generated from pingcommon/opt/staging/hooks/10-start-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 10-start-sequence.sh"},{"location":"docker-images/pingcommon/hooks/11-before-copying-bits.sh/","text":"Ping Identity DevOps pingcommon Hook - 11-before-copying-bits.sh \u00b6 This script may be implemented to do some house keeping on the product bits before they are copied over to the runtime location This document auto-generated from pingcommon/hooks/11-before-copying-bits.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `11-before-copying-bits.sh`"},{"location":"docker-images/pingcommon/hooks/11-before-copying-bits.sh/#ping-identity-devops-pingcommon-hook-11-before-copying-bitssh","text":"This script may be implemented to do some house keeping on the product bits before they are copied over to the runtime location This document auto-generated from pingcommon/hooks/11-before-copying-bits.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 11-before-copying-bits.sh"},{"location":"docker-images/pingcommon/hooks/12-before-applying-server-profile.sh/","text":"Ping Identity DevOps pingcommon Hook - 12-before-applying-server-profile.sh \u00b6 This script is called after the product bits have been copied over to the runtime location and before the remote server profile gets applied on to the staging area if the remote server profile is to be layered over a local sever profile provided via the ${IN_DIR} volume mount, you could use this hook to manipulate the local server profile in the staging area to avoid certain file from being overridden for example This document auto-generated from pingcommon/hooks/12-before-applying-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `12-before-applying-server-profile.sh`"},{"location":"docker-images/pingcommon/hooks/12-before-applying-server-profile.sh/#ping-identity-devops-pingcommon-hook-12-before-applying-server-profilesh","text":"This script is called after the product bits have been copied over to the runtime location and before the remote server profile gets applied on to the staging area if the remote server profile is to be layered over a local sever profile provided via the ${IN_DIR} volume mount, you could use this hook to manipulate the local server profile in the staging area to avoid certain file from being overridden for example This document auto-generated from pingcommon/hooks/12-before-applying-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 12-before-applying-server-profile.sh"},{"location":"docker-images/pingcommon/hooks/14-get-remote-server-profile.sh/","text":"Ping Identity DevOps pingcommon Hook - 14-get-remote-server-profile.sh \u00b6 This hook will get bits from a git repo based on SERVER_PROFILE_* variables passed to the container. If no SERVER_PROFILES are passed, then nothing will occur when running this hook. These bits will be placed into the STAGING_DIR location (defaults to ${BASE_DIR}/staging). Server Profiles may be layered to copy in profils from a parent/ancestor server profile. An example might be a layer of profiles that look like: Dev Environment Configs (DEV_CONFIG) Dev Certificates (DEV_CERT) Base Configs (BASE) This would result in a set of SERVER_PROFILE variables that looks like: - SERVER_PROFILE_URL=...git url of DEV_CONFIG... - SERVER_PROFILE_PARENT=DEV_CERT - SERVER_PROFILE_DEV_CERT_URL=...git url of DEV_CERT... - SERVER_PROFILE_DEV_CERT_PARENT=BASE - SERVER_PROFILE_BASE_URL=...git url of BASE... In this example, the bits for BASE would be pulled, followed by DEV_CERT, followed by DEV_CONFIG If other source maintenance repositories are used (i.e. bitbucket, s3, ...) then this hook could be overridden by a different hook This document auto-generated from pingcommon/hooks/14-get-remote-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `14-get-remote-server-profile.sh`"},{"location":"docker-images/pingcommon/hooks/14-get-remote-server-profile.sh/#ping-identity-devops-pingcommon-hook-14-get-remote-server-profilesh","text":"This hook will get bits from a git repo based on SERVER_PROFILE_* variables passed to the container. If no SERVER_PROFILES are passed, then nothing will occur when running this hook. These bits will be placed into the STAGING_DIR location (defaults to ${BASE_DIR}/staging). Server Profiles may be layered to copy in profils from a parent/ancestor server profile. An example might be a layer of profiles that look like: Dev Environment Configs (DEV_CONFIG) Dev Certificates (DEV_CERT) Base Configs (BASE) This would result in a set of SERVER_PROFILE variables that looks like: - SERVER_PROFILE_URL=...git url of DEV_CONFIG... - SERVER_PROFILE_PARENT=DEV_CERT - SERVER_PROFILE_DEV_CERT_URL=...git url of DEV_CERT... - SERVER_PROFILE_DEV_CERT_PARENT=BASE - SERVER_PROFILE_BASE_URL=...git url of BASE... In this example, the bits for BASE would be pulled, followed by DEV_CERT, followed by DEV_CONFIG If other source maintenance repositories are used (i.e. bitbucket, s3, ...) then this hook could be overridden by a different hook This document auto-generated from pingcommon/hooks/14-get-remote-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 14-get-remote-server-profile.sh"},{"location":"docker-images/pingcommon/hooks/15-expand-templates.sh/","text":"Ping Identity DevOps pingcommon Hook - 15-expand-templates.sh \u00b6 Using the envsubst command, this will look through any files that end in subst and substitute any variables the files with the the value of those variables. Variables may come from (in order of precedence): - The 'env_vars' file from the profiles - The environment variables or env-file passed to continaer on startup - The container's os Note: If a string of $name is sould be ignored during a substitution, then A special vabiable ${ DOLLAR } should be used. Example: ${ DOLLAR }{username} ==> ${username} If a .zip file ends with .zip.subst then: - file will be unzipped - any files ending in .subst will be processed to substiture variables - zipped back up in to the same file without the .subst suffix This is especially useful for pingfederate for example with data.zip This document auto-generated from pingcommon/hooks/15-expand-templates.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `15-expand-templates.sh`"},{"location":"docker-images/pingcommon/hooks/15-expand-templates.sh/#ping-identity-devops-pingcommon-hook-15-expand-templatessh","text":"Using the envsubst command, this will look through any files that end in subst and substitute any variables the files with the the value of those variables. Variables may come from (in order of precedence): - The 'env_vars' file from the profiles - The environment variables or env-file passed to continaer on startup - The container's os Note: If a string of $name is sould be ignored during a substitution, then A special vabiable ${ DOLLAR } should be used. Example: ${ DOLLAR }{username} ==> ${username} If a .zip file ends with .zip.subst then: - file will be unzipped - any files ending in .subst will be processed to substiture variables - zipped back up in to the same file without the .subst suffix This is especially useful for pingfederate for example with data.zip This document auto-generated from pingcommon/hooks/15-expand-templates.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 15-expand-templates.sh"},{"location":"docker-images/pingcommon/hooks/16-apply-server-profile.sh/","text":"Ping Identity DevOps pingcommon Hook - 16-apply-server-profile.sh \u00b6 Once both the remote (i.e. git) and local server-profiles have been merged then we can push that out to the instance. This will override any files found in the ${OUT_DIR}/instance directory. This document auto-generated from pingcommon/hooks/16-apply-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `16-apply-server-profile.sh`"},{"location":"docker-images/pingcommon/hooks/16-apply-server-profile.sh/#ping-identity-devops-pingcommon-hook-16-apply-server-profilesh","text":"Once both the remote (i.e. git) and local server-profiles have been merged then we can push that out to the instance. This will override any files found in the ${OUT_DIR}/instance directory. This document auto-generated from pingcommon/hooks/16-apply-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 16-apply-server-profile.sh"},{"location":"docker-images/pingcommon/hooks/17-check-license.sh/","text":"Ping Identity DevOps pingcommon Hook - 17-check-license.sh \u00b6 Check for license file - If LICENSE_FILE found make call to check-license api unless MUTE_LICENSE_VERIFICATION set to true - If LICENSE_FILE not found and PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY defined make call to obtain a license from license server This document is auto-generated from pingcommon/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `17-check-license.sh`"},{"location":"docker-images/pingcommon/hooks/17-check-license.sh/#ping-identity-devops-pingcommon-hook-17-check-licensesh","text":"Check for license file - If LICENSE_FILE found make call to check-license api unless MUTE_LICENSE_VERIFICATION set to true - If LICENSE_FILE not found and PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY defined make call to obtain a license from license server This document is auto-generated from pingcommon/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 17-check-license.sh"},{"location":"docker-images/pingcommon/hooks/18-setup-sequence.sh/","text":"Ping Identity DevOps pingcommon Hook - 18-setup-sequence.sh \u00b6 This hook may be used to set the server if there is a setup procedure Note: The PingData (i.e. Directory, DataSync, PingAuthorize, DirectoryProxy) products will all provide this This document is auto-generated from pingcommon/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `18-setup-sequence.sh`"},{"location":"docker-images/pingcommon/hooks/18-setup-sequence.sh/#ping-identity-devops-pingcommon-hook-18-setup-sequencesh","text":"This hook may be used to set the server if there is a setup procedure Note: The PingData (i.e. Directory, DataSync, PingAuthorize, DirectoryProxy) products will all provide this This document is auto-generated from pingcommon/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 18-setup-sequence.sh"},{"location":"docker-images/pingcommon/hooks/20-restart-sequence.sh/","text":"Ping Identity DevOps pingcommon Hook - 20-restart-sequence.sh \u00b6 This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingcommon/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `20-restart-sequence.sh`"},{"location":"docker-images/pingcommon/hooks/20-restart-sequence.sh/#ping-identity-devops-pingcommon-hook-20-restart-sequencesh","text":"This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingcommon/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 20-restart-sequence.sh"},{"location":"docker-images/pingcommon/hooks/21-update-server-profile.sh/","text":"Ping Identity DevOps pingcommon Hook - 21-update-server-profile.sh \u00b6 This document auto-generated from pingcommon/opt/staging/hooks/21-update-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `21-update-server-profile.sh`"},{"location":"docker-images/pingcommon/hooks/21-update-server-profile.sh/#ping-identity-devops-pingcommon-hook-21-update-server-profilesh","text":"This document auto-generated from pingcommon/opt/staging/hooks/21-update-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 21-update-server-profile.sh"},{"location":"docker-images/pingcommon/hooks/50-before-post-start.sh/","text":"Ping Identity DevOps pingcommon Hook - 50-before-post-start.sh \u00b6 This is called after the start or restart sequence has finished and before the server within the container starts This document is auto-generated from pingcommon/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `50-before-post-start.sh`"},{"location":"docker-images/pingcommon/hooks/50-before-post-start.sh/#ping-identity-devops-pingcommon-hook-50-before-post-startsh","text":"This is called after the start or restart sequence has finished and before the server within the container starts This document is auto-generated from pingcommon/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 50-before-post-start.sh"},{"location":"docker-images/pingcommon/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingcommon Hook - 80-post-start.sh \u00b6 This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document is auto-generated from pingcommon/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `80-post-start.sh`"},{"location":"docker-images/pingcommon/hooks/80-post-start.sh/#ping-identity-devops-pingcommon-hook-80-post-startsh","text":"This script is started in the background immediately before the server within the container is started This is useful to implement any logic that needs to occur after the server is up and running For example, enabling replication in PingDirectory, initializing Sync Pipes in PingDataSync or issuing admin API calls to PingFederate or PingAccess This document is auto-generated from pingcommon/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 80-post-start.sh"},{"location":"docker-images/pingcommon/hooks/90-shutdown-sequence.sh/","text":"Ping Identity DevOps pingcommon Hook - 90-shutdown-sequence.sh \u00b6 This script may be implemented to gracefully shutdown the container Note: this is most useful in Kubernetes but can be called arbitrarily by by control/config frameworks This document is auto-generated from pingcommon/opt/staging/hooks/90-shutdown-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `90-shutdown-sequence.sh`"},{"location":"docker-images/pingcommon/hooks/90-shutdown-sequence.sh/#ping-identity-devops-pingcommon-hook-90-shutdown-sequencesh","text":"This script may be implemented to gracefully shutdown the container Note: this is most useful in Kubernetes but can be called arbitrarily by by control/config frameworks This document is auto-generated from pingcommon/opt/staging/hooks/90-shutdown-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - 90-shutdown-sequence.sh"},{"location":"docker-images/pingcommon/hooks/pingcommon.lib.sh/","text":"Ping Identity DevOps pingcommon Hook - pingcommon.lib.sh \u00b6 This document is auto-generated from pingcommon/opt/staging/hooks/pingcommon.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `pingcommon.lib.sh`"},{"location":"docker-images/pingcommon/hooks/pingcommon.lib.sh/#ping-identity-devops-pingcommon-hook-pingcommonlibsh","text":"This document is auto-generated from pingcommon/opt/staging/hooks/pingcommon.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - pingcommon.lib.sh"},{"location":"docker-images/pingcommon/hooks/pingsecrets.lib.sh/","text":"Ping Identity DevOps pingcommon Hook - pingsecrets.lib.sh \u00b6 This document is auto-generated from pingcommon/opt/staging/hooks/pingsecrets.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `pingsecrets.lib.sh`"},{"location":"docker-images/pingcommon/hooks/pingsecrets.lib.sh/#ping-identity-devops-pingcommon-hook-pingsecretslibsh","text":"This document is auto-generated from pingcommon/opt/staging/hooks/pingsecrets.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - pingsecrets.lib.sh"},{"location":"docker-images/pingcommon/hooks/pingstate.lib.sh/","text":"Ping Identity DevOps pingcommon Hook - pingstate.lib.sh \u00b6 This document is auto-generated from pingcommon/opt/staging/hooks/pingstate.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingcommon` Hook - `pingstate.lib.sh`"},{"location":"docker-images/pingcommon/hooks/pingstate.lib.sh/#ping-identity-devops-pingcommon-hook-pingstatelibsh","text":"This document is auto-generated from pingcommon/opt/staging/hooks/pingstate.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingcommon Hook - pingstate.lib.sh"},{"location":"docker-images/pingdatacommon/","text":"Ping Identity Docker Image - pingdatacommon \u00b6 This docker image provides a busybox image based off of pingidentity/pingcommon to house the base hook scripts used throughout the Ping Identity DevOps PingData product images. Related Docker Images \u00b6 pingidentity/pingcommon - Parent Image Environment Variables \u00b6 The following environment ENV variables can be used with this image. ENV Variable Default Description REGENERATE_JAVA_PROPERTIES false Flag to force a run of dsjavaproperties --initialize. When this is false, the java.properties file will only be regenerated on a restart when there is a change in JVM or a change in the product-specific java options, such as changing the MAX_HEAP_SIZE value. Docker Container Hook Scripts \u00b6 Please go here for details on all pingdatacommon hook scripts This document is auto-generated from pingdatacommon/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDataCommon"},{"location":"docker-images/pingdatacommon/#ping-identity-docker-image-pingdatacommon","text":"This docker image provides a busybox image based off of pingidentity/pingcommon to house the base hook scripts used throughout the Ping Identity DevOps PingData product images.","title":"Ping Identity Docker Image - pingdatacommon"},{"location":"docker-images/pingdatacommon/#related-docker-images","text":"pingidentity/pingcommon - Parent Image","title":"Related Docker Images"},{"location":"docker-images/pingdatacommon/#environment-variables","text":"The following environment ENV variables can be used with this image. ENV Variable Default Description REGENERATE_JAVA_PROPERTIES false Flag to force a run of dsjavaproperties --initialize. When this is false, the java.properties file will only be regenerated on a restart when there is a change in JVM or a change in the product-specific java options, such as changing the MAX_HEAP_SIZE value.","title":"Environment Variables"},{"location":"docker-images/pingdatacommon/#docker-container-hook-scripts","text":"Please go here for details on all pingdatacommon hook scripts This document is auto-generated from pingdatacommon/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdatacommon/hooks/","text":"Ping Identity DevOps pingdatacommon Hooks \u00b6 List of available hooks: * 03-build-run-plan.sh * 18-setup-sequence.sh * 181-install-extensions.sh * 183-run-setup.sh * 185-apply-tools-properties.sh * 20-restart-sequence.sh * pingdata.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdatacommon/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hooks"},{"location":"docker-images/pingdatacommon/hooks/#ping-identity-devops-pingdatacommon-hooks","text":"List of available hooks: * 03-build-run-plan.sh * 18-setup-sequence.sh * 181-install-extensions.sh * 183-run-setup.sh * 185-apply-tools-properties.sh * 20-restart-sequence.sh * pingdata.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdatacommon/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hooks"},{"location":"docker-images/pingdatacommon/hooks/03-build-run-plan.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 03-build-run-plan.sh \u00b6 This scrip is called to check if there is an existing server and if so, it will return a 1, else 0 This document is auto-generated from pingdatacommon/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `03-build-run-plan.sh`"},{"location":"docker-images/pingdatacommon/hooks/03-build-run-plan.sh/#ping-identity-devops-pingdatacommon-hook-03-build-run-plansh","text":"This scrip is called to check if there is an existing server and if so, it will return a 1, else 0 This document is auto-generated from pingdatacommon/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 03-build-run-plan.sh"},{"location":"docker-images/pingdatacommon/hooks/18-setup-sequence.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 18-setup-sequence.sh \u00b6 Quarterbacks all the scripts associated with the setup of a PingData product This document is auto-generated from pingdatacommon/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `18-setup-sequence.sh`"},{"location":"docker-images/pingdatacommon/hooks/18-setup-sequence.sh/#ping-identity-devops-pingdatacommon-hook-18-setup-sequencesh","text":"Quarterbacks all the scripts associated with the setup of a PingData product This document is auto-generated from pingdatacommon/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 18-setup-sequence.sh"},{"location":"docker-images/pingdatacommon/hooks/181-install-extensions.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 181-install-extensions.sh \u00b6 This document is auto-generated from pingdatacommon/opt/staging/hooks/181-install-extensions.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `181-install-extensions.sh`"},{"location":"docker-images/pingdatacommon/hooks/181-install-extensions.sh/#ping-identity-devops-pingdatacommon-hook-181-install-extensionssh","text":"This document is auto-generated from pingdatacommon/opt/staging/hooks/181-install-extensions.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 181-install-extensions.sh"},{"location":"docker-images/pingdatacommon/hooks/182-template-to-ldif.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 182-template-to-ldif.sh \u00b6 This hook will import data into the PingDirectory if there are data files included in the server profile data directory. If a .template file is provided, then makeldif will be run to create the .ldif file to be imported. To be implemented by the downstream product (i.e. pingdirectory) This document auto-generated from pingdatacommon/hooks/182-template-to-ldif.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `182-template-to-ldif.sh`"},{"location":"docker-images/pingdatacommon/hooks/182-template-to-ldif.sh/#ping-identity-devops-pingdatacommon-hook-182-template-to-ldifsh","text":"This hook will import data into the PingDirectory if there are data files included in the server profile data directory. If a .template file is provided, then makeldif will be run to create the .ldif file to be imported. To be implemented by the downstream product (i.e. pingdirectory) This document auto-generated from pingdatacommon/hooks/182-template-to-ldif.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 182-template-to-ldif.sh"},{"location":"docker-images/pingdatacommon/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 183-run-setup.sh \u00b6 This document is auto-generated from pingdatacommon/opt/staging/hooks/183-run-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingdatacommon/hooks/183-run-setup.sh/#ping-identity-devops-pingdatacommon-hook-183-run-setupsh","text":"This document is auto-generated from pingdatacommon/opt/staging/hooks/183-run-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 183-run-setup.sh"},{"location":"docker-images/pingdatacommon/hooks/184-generate-topology-descriptor.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 184-generate-topology-descriptor.sh \u00b6 This document auto-generated from pingdatacommon/hooks/184-generate-topology-descriptor.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `184-generate-topology-descriptor.sh`"},{"location":"docker-images/pingdatacommon/hooks/184-generate-topology-descriptor.sh/#ping-identity-devops-pingdatacommon-hook-184-generate-topology-descriptorsh","text":"This document auto-generated from pingdatacommon/hooks/184-generate-topology-descriptor.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 184-generate-topology-descriptor.sh"},{"location":"docker-images/pingdatacommon/hooks/185-apply-tools-properties.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 185-apply-tools-properties.sh \u00b6 This document is auto-generated from pingdatacommon/opt/staging/hooks/185-apply-tools-properties.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `185-apply-tools-properties.sh`"},{"location":"docker-images/pingdatacommon/hooks/185-apply-tools-properties.sh/#ping-identity-devops-pingdatacommon-hook-185-apply-tools-propertiessh","text":"This document is auto-generated from pingdatacommon/opt/staging/hooks/185-apply-tools-properties.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 185-apply-tools-properties.sh"},{"location":"docker-images/pingdatacommon/hooks/186-install-extensions.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 186-install-extensions.sh \u00b6 This document auto-generated from pingdatacommon/hooks/186-install-extensions.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `186-install-extensions.sh`"},{"location":"docker-images/pingdatacommon/hooks/186-install-extensions.sh/#ping-identity-devops-pingdatacommon-hook-186-install-extensionssh","text":"This document auto-generated from pingdatacommon/hooks/186-install-extensions.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 186-install-extensions.sh"},{"location":"docker-images/pingdatacommon/hooks/187-before-configuration.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 187-before-configuration.sh \u00b6 This document auto-generated from pingdatacommon/hooks/187-before-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `187-before-configuration.sh`"},{"location":"docker-images/pingdatacommon/hooks/187-before-configuration.sh/#ping-identity-devops-pingdatacommon-hook-187-before-configurationsh","text":"This document auto-generated from pingdatacommon/hooks/187-before-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 187-before-configuration.sh"},{"location":"docker-images/pingdatacommon/hooks/188-apply-configuration.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 188-apply-configuration.sh \u00b6 This document auto-generated from pingdatacommon/hooks/188-apply-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `188-apply-configuration.sh`"},{"location":"docker-images/pingdatacommon/hooks/188-apply-configuration.sh/#ping-identity-devops-pingdatacommon-hook-188-apply-configurationsh","text":"This document auto-generated from pingdatacommon/hooks/188-apply-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 188-apply-configuration.sh"},{"location":"docker-images/pingdatacommon/hooks/189-import-data.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 189-import-data.sh \u00b6 This document auto-generated from pingdatacommon/hooks/189-import-data.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `189-import-data.sh`"},{"location":"docker-images/pingdatacommon/hooks/189-import-data.sh/#ping-identity-devops-pingdatacommon-hook-189-import-datash","text":"This document auto-generated from pingdatacommon/hooks/189-import-data.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 189-import-data.sh"},{"location":"docker-images/pingdatacommon/hooks/20-restart-sequence.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 20-restart-sequence.sh \u00b6 This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingdatacommon/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `20-restart-sequence.sh`"},{"location":"docker-images/pingdatacommon/hooks/20-restart-sequence.sh/#ping-identity-devops-pingdatacommon-hook-20-restart-sequencesh","text":"This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingdatacommon/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 20-restart-sequence.sh"},{"location":"docker-images/pingdatacommon/hooks/21-update-server-profile.sh/","text":"Ping Identity DevOps pingdatacommon Hook - 21-update-server-profile.sh \u00b6 This document auto-generated from pingdatacommon/opt/staging/hooks/21-update-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `21-update-server-profile.sh`"},{"location":"docker-images/pingdatacommon/hooks/21-update-server-profile.sh/#ping-identity-devops-pingdatacommon-hook-21-update-server-profilesh","text":"This document auto-generated from pingdatacommon/opt/staging/hooks/21-update-server-profile.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - 21-update-server-profile.sh"},{"location":"docker-images/pingdatacommon/hooks/pingdata.lib.sh/","text":"Ping Identity DevOps pingdatacommon Hook - pingdata.lib.sh \u00b6 This document is auto-generated from pingdatacommon/opt/staging/hooks/pingdata.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatacommon` Hook - `pingdata.lib.sh`"},{"location":"docker-images/pingdatacommon/hooks/pingdata.lib.sh/#ping-identity-devops-pingdatacommon-hook-pingdatalibsh","text":"This document is auto-generated from pingdatacommon/opt/staging/hooks/pingdata.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatacommon Hook - pingdata.lib.sh"},{"location":"docker-images/pingdataconsole/","text":"Ping Identity Docker Image - pingdataconsole \u00b6 This docker image provides a tomcat image with the PingDataConsole deployed to be used in configuration of the PingData products. Related Docker Images \u00b6 tomcat:9-jre8 - Tomcat engine to serve PingDataConsole .war file Environment Variables \u00b6 The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} HTTP_PORT 8080 PingDataConsole HTTP listen port HTTPS_PORT 8443 PingDataConsole HTTPS listen port STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/catalina.sh The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS run The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS start The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/console.log Files tailed once container has started Run \u00b6 To run a PingDataConsole container: docker run \\ --name pingdataconsole \\ --publish ${ HTTPS_PORT } : ${ HTTPS_PORT } \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdataconsole:edge Follow Docker logs with: docker logs -f pingdataconsole If using the command above with the embedded server profile , log in with: * http://localhost:${HTTPS_PORT}/console/login Server: pingdirectory:1636 Username: administrator Password: 2FederateM0re make sure you have a PingDirectory running Docker Container Hook Scripts \u00b6 Please go here for details on all pingdataconsole hook scripts This document is auto-generated from pingdataconsole/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDataConsole"},{"location":"docker-images/pingdataconsole/#ping-identity-docker-image-pingdataconsole","text":"This docker image provides a tomcat image with the PingDataConsole deployed to be used in configuration of the PingData products.","title":"Ping Identity Docker Image - pingdataconsole"},{"location":"docker-images/pingdataconsole/#related-docker-images","text":"tomcat:9-jre8 - Tomcat engine to serve PingDataConsole .war file","title":"Related Docker Images"},{"location":"docker-images/pingdataconsole/#environment-variables","text":"The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} HTTP_PORT 8080 PingDataConsole HTTP listen port HTTPS_PORT 8443 PingDataConsole HTTPS listen port STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/catalina.sh The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS run The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS start The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/console.log Files tailed once container has started","title":"Environment Variables"},{"location":"docker-images/pingdataconsole/#run","text":"To run a PingDataConsole container: docker run \\ --name pingdataconsole \\ --publish ${ HTTPS_PORT } : ${ HTTPS_PORT } \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdataconsole:edge Follow Docker logs with: docker logs -f pingdataconsole If using the command above with the embedded server profile , log in with: * http://localhost:${HTTPS_PORT}/console/login Server: pingdirectory:1636 Username: administrator Password: 2FederateM0re make sure you have a PingDirectory running","title":"Run"},{"location":"docker-images/pingdataconsole/#docker-container-hook-scripts","text":"Please go here for details on all pingdataconsole hook scripts This document is auto-generated from pingdataconsole/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdataconsole/hooks/","text":"Ping Identity DevOps pingdataconsole Hooks \u00b6 List of available hooks: * 02-get-remote-server-profile.sh.post * 04-check-variables.sh * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdataconsole/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdataconsole` Hooks"},{"location":"docker-images/pingdataconsole/hooks/#ping-identity-devops-pingdataconsole-hooks","text":"List of available hooks: * 02-get-remote-server-profile.sh.post * 04-check-variables.sh * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdataconsole/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdataconsole Hooks"},{"location":"docker-images/pingdataconsole/hooks/02-get-remote-server-profile.sh.post/","text":"Ping Identity DevOps pingdataconsole Hook - 02-get-remote-server-profile.sh.post \u00b6 This hook provides final steps to setup Ping Data Console. This document is auto-generated from pingdataconsole/opt/staging/hooks/02-get-remote-server-profile.sh.post Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdataconsole` Hook - `02-get-remote-server-profile.sh.post`"},{"location":"docker-images/pingdataconsole/hooks/02-get-remote-server-profile.sh.post/#ping-identity-devops-pingdataconsole-hook-02-get-remote-server-profileshpost","text":"This hook provides final steps to setup Ping Data Console. This document is auto-generated from pingdataconsole/opt/staging/hooks/02-get-remote-server-profile.sh.post Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdataconsole Hook - 02-get-remote-server-profile.sh.post"},{"location":"docker-images/pingdataconsole/hooks/04-check-variables.sh/","text":"Ping Identity DevOps pingdataconsole Hook - 04-check-variables.sh \u00b6 This document is auto-generated from pingdataconsole/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdataconsole` Hook - `04-check-variables.sh`"},{"location":"docker-images/pingdataconsole/hooks/04-check-variables.sh/#ping-identity-devops-pingdataconsole-hook-04-check-variablessh","text":"This document is auto-generated from pingdataconsole/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdataconsole Hook - 04-check-variables.sh"},{"location":"docker-images/pingdataconsole/hooks/17-check-license.sh/","text":"Ping Identity DevOps pingdataconsole Hook - 17-check-license.sh \u00b6 This document is auto-generated from pingdataconsole/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdataconsole` Hook - `17-check-license.sh`"},{"location":"docker-images/pingdataconsole/hooks/17-check-license.sh/#ping-identity-devops-pingdataconsole-hook-17-check-licensesh","text":"This document is auto-generated from pingdataconsole/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdataconsole Hook - 17-check-license.sh"},{"location":"docker-images/pingdatagovernance/","text":"Ping Identity DevOps Docker Image - pingdatagovernance \u00b6 This docker image includes the Ping Identity PingDataGovernance product binaries and associated hook scripts to create and run a PingDataGovernance instance or instances. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts) Introducing PingAuthorize\u2122 \u00b6 Starting with the 8.3 release, PingDataGovernance has been renamed to PingAuthorize. Customers are increasingly applying the product to general, externalized, and dynamic authorization use cases, beyond the original privacy and data protection use cases of PingDataGovernance, and Ping Identity has updated the name to reflect the growing trend and application of Dynamic Authorization. Please click here to view the PingAuthorize Docker Image Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT PingDataGovernance Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase docker file LICENSE_FILE_NAME PingDataGovernance.lic Name of license file LICENSE_SHORT_NAME PG Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 1g Minimal Heap size required for Ping DataGovernance STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ENCRYPTION_PASSWORD_FILE Location of file with the passphrase for setting up encryption Defaults to /SECRETS_DIR/encryption-password TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/trace ${SERVER_ROOT_DIR}/logs/policy-decision ${SERVER_ROOT_DIR}/logs/ldap-access Files tailed once container has started PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT} Running a PingDataGovernance container \u00b6 The easiest way to test a simple standalone image of PingDataGovernance is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingdatagovernance \\ --publish 1389 :1389 \\ --publish 8443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingdatagovernance \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernance:edge You can view the Docker logs with the command: docker logs -f pingdatagovernance You should see the output from a PingDataGovernance install and configuration, ending with a message the the PingDataGovernance has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs. Stopping/Removing the container \u00b6 To stop the container: docker container stop pingdatagovernance To remove the container: docker container rm -f pingdatagovernance Docker Container Hook Scripts \u00b6 Please go here for details on all pingdatagovernance hook scripts This document is auto-generated from pingdatagovernance/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDataGovernance"},{"location":"docker-images/pingdatagovernance/#ping-identity-devops-docker-image-pingdatagovernance","text":"This docker image includes the Ping Identity PingDataGovernance product binaries and associated hook scripts to create and run a PingDataGovernance instance or instances.","title":"Ping Identity DevOps Docker Image - pingdatagovernance"},{"location":"docker-images/pingdatagovernance/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingdatagovernance/#introducing-pingauthorizetm","text":"Starting with the 8.3 release, PingDataGovernance has been renamed to PingAuthorize. Customers are increasingly applying the product to general, externalized, and dynamic authorization use cases, beyond the original privacy and data protection use cases of PingDataGovernance, and Ping Identity has updated the name to reflect the growing trend and application of Dynamic Authorization. Please click here to view the PingAuthorize Docker Image","title":"Introducing PingAuthorize\u2122"},{"location":"docker-images/pingdatagovernance/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT PingDataGovernance Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase docker file LICENSE_FILE_NAME PingDataGovernance.lic Name of license file LICENSE_SHORT_NAME PG Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 1g Minimal Heap size required for Ping DataGovernance STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ENCRYPTION_PASSWORD_FILE Location of file with the passphrase for setting up encryption Defaults to /SECRETS_DIR/encryption-password TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/trace ${SERVER_ROOT_DIR}/logs/policy-decision ${SERVER_ROOT_DIR}/logs/ldap-access Files tailed once container has started PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool","title":"Environment Variables"},{"location":"docker-images/pingdatagovernance/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingdatagovernance/#running-a-pingdatagovernance-container","text":"The easiest way to test a simple standalone image of PingDataGovernance is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingdatagovernance \\ --publish 1389 :1389 \\ --publish 8443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingdatagovernance \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernance:edge You can view the Docker logs with the command: docker logs -f pingdatagovernance You should see the output from a PingDataGovernance install and configuration, ending with a message the the PingDataGovernance has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs.","title":"Running a PingDataGovernance container"},{"location":"docker-images/pingdatagovernance/#stoppingremoving-the-container","text":"To stop the container: docker container stop pingdatagovernance To remove the container: docker container rm -f pingdatagovernance","title":"Stopping/Removing the container"},{"location":"docker-images/pingdatagovernance/#docker-container-hook-scripts","text":"Please go here for details on all pingdatagovernance hook scripts This document is auto-generated from pingdatagovernance/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdatagovernance/hooks/","text":"Ping Identity DevOps pingdatagovernance Hooks \u00b6 There are no default hooks defined for the pingdatagovernance image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernance` Hooks"},{"location":"docker-images/pingdatagovernance/hooks/#ping-identity-devops-pingdatagovernance-hooks","text":"There are no default hooks defined for the pingdatagovernance image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernance Hooks"},{"location":"docker-images/pingdatagovernance/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingdatagovernance Hook - 183-run-setup.sh \u00b6 This document auto-generated from pingdatagovernance/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernance` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingdatagovernance/hooks/183-run-setup.sh/#ping-identity-devops-pingdatagovernance-hook-183-run-setupsh","text":"This document auto-generated from pingdatagovernance/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernance Hook - 183-run-setup.sh"},{"location":"docker-images/pingdatagovernancepap/","text":"Ping Identity DevOps Docker Image - pingdatagovernancepap \u00b6 This docker image includes the Ping Identity PingDataGovernance PAP product binaries and associated hook scripts to create and run a PingDataGovernance PAP instance. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts) Introducing PingAuthorize\u2122 \u00b6 Starting with the 8.3 release, PingDataGovernance has been renamed to PingAuthorize. Customers are increasingly applying the product to general, externalized, and dynamic authorization use cases, beyond the original privacy and data protection use cases of PingDataGovernance, and Ping Identity has updated the name to reflect the growing trend and application of Dynamic Authorization. Please click here to view the PingAuthorize PAP Docker Image Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT PingDataGovernance-PAP Ping product name LICENSE_FILE_NAME PingDataGovernance.lic Name of license File LICENSE_SHORT_NAME PG Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 384m Minimal Heap size required for Ping DataGovernance PAP STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/datagovernance-pap.log ${SERVER_ROOT_DIR}/logs/setup.log ${SERVER_ROOT_DIR}/logs/start-server.log ${SERVER_ROOT_DIR}/logs/stop-server.log Files tailed once container has started REST_API_HOSTNAME localhost Hostname used for the REST API (deprecated, use PING_EXTERNAL_BASE_URL instead) DECISION_POINT_SHARED_SECRET 2FederateM0re Define shared secret between PDG and PAP Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${HTTPS_PORT} Running a PingDataGovernance PAP container \u00b6 A PingDataGovernance PAP may be set up in one of two modes: Demo mode : Uses insecure username/password authentication. OIDC mode : Uses an OpenID Connect provider for authentication. To run a PingDataGovernance PAP container in demo mode: docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernancepap:edge Log in with: https://my-pap-hostname:8443/ Username: admin Password: password123 To run a PingDataGovernance PAP container in OpenID Connect mode, specify the PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID environment variables: docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --env PING_OIDC_CONFIGURATION_ENDPOINT = https://my-oidc-provider/.well-known/openid-configuration \\ --env PING_CLIENT_ID = b1929abc-e108-4b4f-83d467059fa1 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernancepap:edge Note: If both PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID are not specified, then the PAP will be set up in demo mode. Log in with: https://my-pap-hostname:8443/ Provide credentials as prompted by the OIDC provider Follow Docker logs with: docker logs -f pingdatagovernancepap Specifying the external hostname and port \u00b6 The PAP consists of a client-side application that runs in the user's web browser and a backend REST API service that runs within the container. So that the client-side application can successfully make API calls to the backend, the PAP must be configured with an externally accessible hostname:port. If the PAP is configured in OIDC mode, then the external hostname:port pair is also needed so that the PAP can correctly generate its OIDC redirect URI. Use the PING_EXTERNAL_BASE_URL environment variable to specify the PAP's external hostname and port using the form hostname[:port] , where hostname is the hostname of the Docker host and port is the PAP container's published port. If the published port is 443, then it should be omitted. For example: docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernancepap:edge Changing the default periodic database backup schedule and location \u00b6 The PAP performs periodic backups of the policy database. The results are placed in the policy-backup directory underneath the instance root. Use the PING_BACKUP_SCHEDULE environment variable to specify the PAP's periodic database backup schedule in the form of a cron expression. The cron expression will be evaluated against the container timezone, UTC. Use the PING_H2_BACKUP_DIR environment variable to change the backup output directory. For example, to perform backups daily at UTC noon and place backups in /opt/out/backup : docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --env PING_BACKUP_SCHEDULE = \"0 0 12 * * ?\" \\ --env PING_H2_BACKUP_DIR = /opt/out/backup \\ --publish 8443 :1443 \\ --detach \\ pingidentity/pingdatagovernancepap:edge Docker Container Hook Scripts \u00b6 Please go here for details on all pingdatagovernancepap hook scripts This document is auto-generated from pingdatagovernancepap/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDataGovernance PAP"},{"location":"docker-images/pingdatagovernancepap/#ping-identity-devops-docker-image-pingdatagovernancepap","text":"This docker image includes the Ping Identity PingDataGovernance PAP product binaries and associated hook scripts to create and run a PingDataGovernance PAP instance.","title":"Ping Identity DevOps Docker Image - pingdatagovernancepap"},{"location":"docker-images/pingdatagovernancepap/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingdatagovernancepap/#introducing-pingauthorizetm","text":"Starting with the 8.3 release, PingDataGovernance has been renamed to PingAuthorize. Customers are increasingly applying the product to general, externalized, and dynamic authorization use cases, beyond the original privacy and data protection use cases of PingDataGovernance, and Ping Identity has updated the name to reflect the growing trend and application of Dynamic Authorization. Please click here to view the PingAuthorize PAP Docker Image","title":"Introducing PingAuthorize\u2122"},{"location":"docker-images/pingdatagovernancepap/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT PingDataGovernance-PAP Ping product name LICENSE_FILE_NAME PingDataGovernance.lic Name of license File LICENSE_SHORT_NAME PG Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server MAX_HEAP_SIZE 384m Minimal Heap size required for Ping DataGovernance PAP STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/datagovernance-pap.log ${SERVER_ROOT_DIR}/logs/setup.log ${SERVER_ROOT_DIR}/logs/start-server.log ${SERVER_ROOT_DIR}/logs/stop-server.log Files tailed once container has started REST_API_HOSTNAME localhost Hostname used for the REST API (deprecated, use PING_EXTERNAL_BASE_URL instead) DECISION_POINT_SHARED_SECRET 2FederateM0re Define shared secret between PDG and PAP","title":"Environment Variables"},{"location":"docker-images/pingdatagovernancepap/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${HTTPS_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingdatagovernancepap/#running-a-pingdatagovernance-pap-container","text":"A PingDataGovernance PAP may be set up in one of two modes: Demo mode : Uses insecure username/password authentication. OIDC mode : Uses an OpenID Connect provider for authentication. To run a PingDataGovernance PAP container in demo mode: docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernancepap:edge Log in with: https://my-pap-hostname:8443/ Username: admin Password: password123 To run a PingDataGovernance PAP container in OpenID Connect mode, specify the PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID environment variables: docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --env PING_OIDC_CONFIGURATION_ENDPOINT = https://my-oidc-provider/.well-known/openid-configuration \\ --env PING_CLIENT_ID = b1929abc-e108-4b4f-83d467059fa1 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernancepap:edge Note: If both PING_OIDC_CONFIGURATION_ENDPOINT and PING_CLIENT_ID are not specified, then the PAP will be set up in demo mode. Log in with: https://my-pap-hostname:8443/ Provide credentials as prompted by the OIDC provider Follow Docker logs with: docker logs -f pingdatagovernancepap","title":"Running a PingDataGovernance PAP container"},{"location":"docker-images/pingdatagovernancepap/#specifying-the-external-hostname-and-port","text":"The PAP consists of a client-side application that runs in the user's web browser and a backend REST API service that runs within the container. So that the client-side application can successfully make API calls to the backend, the PAP must be configured with an externally accessible hostname:port. If the PAP is configured in OIDC mode, then the external hostname:port pair is also needed so that the PAP can correctly generate its OIDC redirect URI. Use the PING_EXTERNAL_BASE_URL environment variable to specify the PAP's external hostname and port using the form hostname[:port] , where hostname is the hostname of the Docker host and port is the PAP container's published port. If the published port is 443, then it should be omitted. For example: docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --publish 8443 :1443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatagovernancepap:edge","title":"Specifying the external hostname and port"},{"location":"docker-images/pingdatagovernancepap/#changing-the-default-periodic-database-backup-schedule-and-location","text":"The PAP performs periodic backups of the policy database. The results are placed in the policy-backup directory underneath the instance root. Use the PING_BACKUP_SCHEDULE environment variable to specify the PAP's periodic database backup schedule in the form of a cron expression. The cron expression will be evaluated against the container timezone, UTC. Use the PING_H2_BACKUP_DIR environment variable to change the backup output directory. For example, to perform backups daily at UTC noon and place backups in /opt/out/backup : docker run \\ --name pingdatagovernancepap \\ --env PING_EXTERNAL_BASE_URL = my-pap-hostname:8443 \\ --env PING_BACKUP_SCHEDULE = \"0 0 12 * * ?\" \\ --env PING_H2_BACKUP_DIR = /opt/out/backup \\ --publish 8443 :1443 \\ --detach \\ pingidentity/pingdatagovernancepap:edge","title":"Changing the default periodic database backup schedule and location"},{"location":"docker-images/pingdatagovernancepap/#docker-container-hook-scripts","text":"Please go here for details on all pingdatagovernancepap hook scripts This document is auto-generated from pingdatagovernancepap/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdatagovernancepap/hooks/","text":"Ping Identity DevOps pingdatagovernancepap Hooks \u00b6 List of available hooks: * 18-setup-sequence.sh * 183-run-setup.sh * 80-post-start.sh * 81-install-policies.sh * pingdatagovernancepap.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdatagovernancepap/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernancepap` Hooks"},{"location":"docker-images/pingdatagovernancepap/hooks/#ping-identity-devops-pingdatagovernancepap-hooks","text":"List of available hooks: * 18-setup-sequence.sh * 183-run-setup.sh * 80-post-start.sh * 81-install-policies.sh * pingdatagovernancepap.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdatagovernancepap/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernancepap Hooks"},{"location":"docker-images/pingdatagovernancepap/hooks/18-setup-sequence.sh/","text":"Ping Identity DevOps pingdatagovernancepap Hook - 18-setup-sequence.sh \u00b6 Quarterbacks all the scripts associated with the setup of a PingData product This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernancepap` Hook - `18-setup-sequence.sh`"},{"location":"docker-images/pingdatagovernancepap/hooks/18-setup-sequence.sh/#ping-identity-devops-pingdatagovernancepap-hook-18-setup-sequencesh","text":"Quarterbacks all the scripts associated with the setup of a PingData product This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/18-setup-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernancepap Hook - 18-setup-sequence.sh"},{"location":"docker-images/pingdatagovernancepap/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingdatagovernancepap Hook - 183-run-setup.sh \u00b6 This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/183-run-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernancepap` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingdatagovernancepap/hooks/183-run-setup.sh/#ping-identity-devops-pingdatagovernancepap-hook-183-run-setupsh","text":"This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/183-run-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernancepap Hook - 183-run-setup.sh"},{"location":"docker-images/pingdatagovernancepap/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingdatagovernancepap Hook - 80-post-start.sh \u00b6 This script is used to import any configurations that are needed after PingDataGovernance-PAP starts This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernancepap` Hook - `80-post-start.sh`"},{"location":"docker-images/pingdatagovernancepap/hooks/80-post-start.sh/#ping-identity-devops-pingdatagovernancepap-hook-80-post-startsh","text":"This script is used to import any configurations that are needed after PingDataGovernance-PAP starts This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernancepap Hook - 80-post-start.sh"},{"location":"docker-images/pingdatagovernancepap/hooks/81-install-policies.sh/","text":"Ping Identity DevOps pingdatagovernancepap Hook - 81-install-policies.sh \u00b6 This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/81-install-policies.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernancepap` Hook - `81-install-policies.sh`"},{"location":"docker-images/pingdatagovernancepap/hooks/81-install-policies.sh/#ping-identity-devops-pingdatagovernancepap-hook-81-install-policiessh","text":"This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/81-install-policies.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernancepap Hook - 81-install-policies.sh"},{"location":"docker-images/pingdatagovernancepap/hooks/pingdatagovernancepap.lib.sh/","text":"Ping Identity DevOps pingdatagovernancepap Hook - pingdatagovernancepap.lib.sh \u00b6 This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/pingdatagovernancepap.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatagovernancepap` Hook - `pingdatagovernancepap.lib.sh`"},{"location":"docker-images/pingdatagovernancepap/hooks/pingdatagovernancepap.lib.sh/#ping-identity-devops-pingdatagovernancepap-hook-pingdatagovernancepaplibsh","text":"This document is auto-generated from pingdatagovernancepap/opt/staging/hooks/pingdatagovernancepap.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatagovernancepap Hook - pingdatagovernancepap.lib.sh"},{"location":"docker-images/pingdatasync/","text":"Ping Identity DevOps Docker Image - pingdatasync \u00b6 This docker image includes the Ping Identity PingDataSync product binaries and associated hook scripts to create and run a PingDataSync instance. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/sync Files tailed once container has started LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase docker file LICENSE_FILE_NAME PingDirectory.lic Name of license file LICENSE_SHORT_NAME PD Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server PING_PRODUCT PingDataSync Ping product name STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container RETRY_TIMEOUT_SECONDS 180 The default retry timeout in seconds for manage-topology and remove-defunct-server ADMIN_USER_NAME admin Failover administrative user ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ADMIN_USER_PASSWORD_FILE Location of file with the admin password, used as the password replication admin Defaults to /SECRETS_DIR/admin-user-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check. Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT} Running a PingDataSync container \u00b6 docker run \\ --name pingdatasync \\ --publish 1389:1389 \\ --publish 8443:1443 \\ --detach \\ --env SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH=simple-sync/pingdatasync \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatasync:edge Docker Container Hook Scripts \u00b6 Please go here for details on all pingdatasync hook scripts This document is auto-generated from pingdatasync/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDataSync"},{"location":"docker-images/pingdatasync/#ping-identity-devops-docker-image-pingdatasync","text":"This docker image includes the Ping Identity PingDataSync product binaries and associated hook scripts to create and run a PingDataSync instance.","title":"Ping Identity DevOps Docker Image - pingdatasync"},{"location":"docker-images/pingdatasync/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingdatasync/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/sync Files tailed once container has started LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase docker file LICENSE_FILE_NAME PingDirectory.lic Name of license file LICENSE_SHORT_NAME PD Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server PING_PRODUCT PingDataSync Ping product name STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container RETRY_TIMEOUT_SECONDS 180 The default retry timeout in seconds for manage-topology and remove-defunct-server ADMIN_USER_NAME admin Failover administrative user ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ADMIN_USER_PASSWORD_FILE Location of file with the admin password, used as the password replication admin Defaults to /SECRETS_DIR/admin-user-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check.","title":"Environment Variables"},{"location":"docker-images/pingdatasync/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingdatasync/#running-a-pingdatasync-container","text":"docker run \\ --name pingdatasync \\ --publish 1389:1389 \\ --publish 8443:1443 \\ --detach \\ --env SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH=simple-sync/pingdatasync \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdatasync:edge","title":"Running a PingDataSync container"},{"location":"docker-images/pingdatasync/#docker-container-hook-scripts","text":"Please go here for details on all pingdatasync hook scripts This document is auto-generated from pingdatasync/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdatasync/hooks/","text":"Ping Identity DevOps pingdatasync Hooks \u00b6 List of available hooks: * 03-build-run-plan.sh * 20-restart-sequence.sh * 80-post-start.sh * 90-shutdown-sequence.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdatasync/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatasync` Hooks"},{"location":"docker-images/pingdatasync/hooks/#ping-identity-devops-pingdatasync-hooks","text":"List of available hooks: * 03-build-run-plan.sh * 20-restart-sequence.sh * 80-post-start.sh * 90-shutdown-sequence.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdatasync/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatasync Hooks"},{"location":"docker-images/pingdatasync/hooks/03-build-run-plan.sh/","text":"Ping Identity DevOps pingdatasync Hook - 03-build-run-plan.sh \u00b6 This script is called to determine the plan for the server as it starts up. This document is auto-generated from pingdatasync/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatasync` Hook - `03-build-run-plan.sh`"},{"location":"docker-images/pingdatasync/hooks/03-build-run-plan.sh/#ping-identity-devops-pingdatasync-hook-03-build-run-plansh","text":"This script is called to determine the plan for the server as it starts up. This document is auto-generated from pingdatasync/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatasync Hook - 03-build-run-plan.sh"},{"location":"docker-images/pingdatasync/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingdatasync Hook - 183-run-setup.sh \u00b6 This document auto-generated from pingdatasync/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatasync` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingdatasync/hooks/183-run-setup.sh/#ping-identity-devops-pingdatasync-hook-183-run-setupsh","text":"This document auto-generated from pingdatasync/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatasync Hook - 183-run-setup.sh"},{"location":"docker-images/pingdatasync/hooks/20-restart-sequence.sh/","text":"Ping Identity DevOps pingdatasync Hook - 20-restart-sequence.sh \u00b6 This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingdatasync/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatasync` Hook - `20-restart-sequence.sh`"},{"location":"docker-images/pingdatasync/hooks/20-restart-sequence.sh/#ping-identity-devops-pingdatasync-hook-20-restart-sequencesh","text":"This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingdatasync/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatasync Hook - 20-restart-sequence.sh"},{"location":"docker-images/pingdatasync/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingdatasync Hook - 80-post-start.sh \u00b6 This script is mostly the same as the 80-post-start.sh hook in the * Enabling PingDataSync failover This document is auto-generated from pingdatasync/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatasync` Hook - `80-post-start.sh`"},{"location":"docker-images/pingdatasync/hooks/80-post-start.sh/#ping-identity-devops-pingdatasync-hook-80-post-startsh","text":"This script is mostly the same as the 80-post-start.sh hook in the * Enabling PingDataSync failover This document is auto-generated from pingdatasync/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatasync Hook - 80-post-start.sh"},{"location":"docker-images/pingdatasync/hooks/90-shutdown-sequence.sh/","text":"Ping Identity DevOps pingdatasync Hook - 90-shutdown-sequence.sh \u00b6 This script handles removing the server from the topology during a shutdown. This document is auto-generated from pingdatasync/opt/staging/hooks/90-shutdown-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdatasync` Hook - `90-shutdown-sequence.sh`"},{"location":"docker-images/pingdatasync/hooks/90-shutdown-sequence.sh/#ping-identity-devops-pingdatasync-hook-90-shutdown-sequencesh","text":"This script handles removing the server from the topology during a shutdown. This document is auto-generated from pingdatasync/opt/staging/hooks/90-shutdown-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdatasync Hook - 90-shutdown-sequence.sh"},{"location":"docker-images/pingdelegator/","text":"Ping Identity Docker Image - pingdelegator \u00b6 This docker image provides an NGINX instance with PingDelegator that can be used in administering PingDirectory Users/Groups. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PD_DELEGATOR_PUBLIC_HOSTNAME localhost PD_DELEGATOR_HTTP_PORT 6080 PD_DELEGATOR_HTTPS_PORT 6443 PF_ENGINE_PUBLIC_HOSTNAME localhost The hostname for the public Ping Federate instance used for SSO. PF_ENGINE_PUBLIC_PORT 9031 The port for the public Ping Federate instance used for SSO. NOTE: If using port 443 along with a base URL with no specified port, set to an empty string. PF_DELEGATOR_CLIENTID dadmin The client id that was set up with Ping Federate for Ping Delegator. PD_ENGINE_PUBLIC_HOSTNAME localhost The hostname for the DS instance the app will be interfacing with. PD_ENGINE_PUBLIC_PORT 1443 The HTTPS port for the DS instance the app will be interfacing with. PD_DELEGATOR_TIMEOUT_LENGTH_MINS 30 The length of time (in minutes) until the session will require a new login attempt PD_DELEGATOR_HEADER_BAR_LOGO The filename used as the logo in the header bar, relative to this application's build directory. Note about logos: The size of the image will be scaled down to fit 22px of height and a max-width of 150px. For best results, it is advised to make the image close to this height and width ratio as well as to crop out any blank spacing around the logo to maximize its presentation. e.g. '${SERVER_ROOT_DIR}/html/delegator/images/my_company_logo.png' PD_DELEGATOR_DADMIN_API_NAMESPACE The namespace for the Delegated Admin API on the DS instance. In most cases, this does not need to be set here. e.g. 'dadmin/v2' PD_DELEGATOR_PROFILE_SCOPE_ENABLED false Set to true if the \"profile\" scope is supported for the Delegated Admin OIDC client on PingFederate and you wish to use it to show the current user's name in the navigation. NGINX_WORKER_PROCESSES auto The number of NginX worker processes -- Default: auto NGINX_WORKER_CONNECTIONS 1024 The number of NginX worker connections -- Default: 1024 STARTUP_COMMAND nginx The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS -c ${SERVER_ROOT_DIR}/etc/nginx.conf The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS ${STARTUP_FOREGROUND_OPTS} The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container Run \u00b6 To run a PingDelegator container with HTTPS_PORT=6443 (6443 is simply a convention for PingDelegator so conflicts are reduced with other container HTTPS ports): docker run \\ --name pingdelegator \\ --publish 6443 :6443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdelegator:edge PingDelegator does require running instances of PingFederate/PingDirectory. To run the an example deployment of PingDelegator in docker-compose, the ping-devops tool can be used: ping-devops docker start simplestack Docker Container Hook Scripts \u00b6 Please go here for details on all pingdelegator hook scripts This document is auto-generated from pingdelegator/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDelegator"},{"location":"docker-images/pingdelegator/#ping-identity-docker-image-pingdelegator","text":"This docker image provides an NGINX instance with PingDelegator that can be used in administering PingDirectory Users/Groups.","title":"Ping Identity Docker Image - pingdelegator"},{"location":"docker-images/pingdelegator/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingdelegator/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PD_DELEGATOR_PUBLIC_HOSTNAME localhost PD_DELEGATOR_HTTP_PORT 6080 PD_DELEGATOR_HTTPS_PORT 6443 PF_ENGINE_PUBLIC_HOSTNAME localhost The hostname for the public Ping Federate instance used for SSO. PF_ENGINE_PUBLIC_PORT 9031 The port for the public Ping Federate instance used for SSO. NOTE: If using port 443 along with a base URL with no specified port, set to an empty string. PF_DELEGATOR_CLIENTID dadmin The client id that was set up with Ping Federate for Ping Delegator. PD_ENGINE_PUBLIC_HOSTNAME localhost The hostname for the DS instance the app will be interfacing with. PD_ENGINE_PUBLIC_PORT 1443 The HTTPS port for the DS instance the app will be interfacing with. PD_DELEGATOR_TIMEOUT_LENGTH_MINS 30 The length of time (in minutes) until the session will require a new login attempt PD_DELEGATOR_HEADER_BAR_LOGO The filename used as the logo in the header bar, relative to this application's build directory. Note about logos: The size of the image will be scaled down to fit 22px of height and a max-width of 150px. For best results, it is advised to make the image close to this height and width ratio as well as to crop out any blank spacing around the logo to maximize its presentation. e.g. '${SERVER_ROOT_DIR}/html/delegator/images/my_company_logo.png' PD_DELEGATOR_DADMIN_API_NAMESPACE The namespace for the Delegated Admin API on the DS instance. In most cases, this does not need to be set here. e.g. 'dadmin/v2' PD_DELEGATOR_PROFILE_SCOPE_ENABLED false Set to true if the \"profile\" scope is supported for the Delegated Admin OIDC client on PingFederate and you wish to use it to show the current user's name in the navigation. NGINX_WORKER_PROCESSES auto The number of NginX worker processes -- Default: auto NGINX_WORKER_CONNECTIONS 1024 The number of NginX worker connections -- Default: 1024 STARTUP_COMMAND nginx The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS -c ${SERVER_ROOT_DIR}/etc/nginx.conf The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS ${STARTUP_FOREGROUND_OPTS} The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container","title":"Environment Variables"},{"location":"docker-images/pingdelegator/#run","text":"To run a PingDelegator container with HTTPS_PORT=6443 (6443 is simply a convention for PingDelegator so conflicts are reduced with other container HTTPS ports): docker run \\ --name pingdelegator \\ --publish 6443 :6443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdelegator:edge PingDelegator does require running instances of PingFederate/PingDirectory. To run the an example deployment of PingDelegator in docker-compose, the ping-devops tool can be used: ping-devops docker start simplestack","title":"Run"},{"location":"docker-images/pingdelegator/#docker-container-hook-scripts","text":"Please go here for details on all pingdelegator hook scripts This document is auto-generated from pingdelegator/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdelegator/hooks/","text":"Ping Identity DevOps pingdelegator Hooks \u00b6 List of available hooks: * 02-get-remote-server-profile.sh.post * 04-check-variables.sh * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdelegator/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdelegator` Hooks"},{"location":"docker-images/pingdelegator/hooks/#ping-identity-devops-pingdelegator-hooks","text":"List of available hooks: * 02-get-remote-server-profile.sh.post * 04-check-variables.sh * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdelegator/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdelegator Hooks"},{"location":"docker-images/pingdelegator/hooks/02-get-remote-server-profile.sh.post/","text":"Ping Identity DevOps pingdelegator Hook - 02-get-remote-server-profile.sh.post \u00b6 This hook may be used to set the server if there is a setup procedure Note: The PingData (i.e. Directory, DataSync, PingAuthorize, DirectoryProxy) products will all provide this This document is auto-generated from pingdelegator/opt/staging/hooks/02-get-remote-server-profile.sh.post Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdelegator` Hook - `02-get-remote-server-profile.sh.post`"},{"location":"docker-images/pingdelegator/hooks/02-get-remote-server-profile.sh.post/#ping-identity-devops-pingdelegator-hook-02-get-remote-server-profileshpost","text":"This hook may be used to set the server if there is a setup procedure Note: The PingData (i.e. Directory, DataSync, PingAuthorize, DirectoryProxy) products will all provide this This document is auto-generated from pingdelegator/opt/staging/hooks/02-get-remote-server-profile.sh.post Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdelegator Hook - 02-get-remote-server-profile.sh.post"},{"location":"docker-images/pingdelegator/hooks/04-check-variables.sh/","text":"Ping Identity DevOps pingdelegator Hook - 04-check-variables.sh \u00b6 This document is auto-generated from pingdelegator/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdelegator` Hook - `04-check-variables.sh`"},{"location":"docker-images/pingdelegator/hooks/04-check-variables.sh/#ping-identity-devops-pingdelegator-hook-04-check-variablessh","text":"This document is auto-generated from pingdelegator/opt/staging/hooks/04-check-variables.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdelegator Hook - 04-check-variables.sh"},{"location":"docker-images/pingdelegator/hooks/17-check-license.sh/","text":"Ping Identity DevOps pingdelegator Hook - 17-check-license.sh \u00b6 This document is auto-generated from pingdelegator/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdelegator` Hook - `17-check-license.sh`"},{"location":"docker-images/pingdelegator/hooks/17-check-license.sh/#ping-identity-devops-pingdelegator-hook-17-check-licensesh","text":"This document is auto-generated from pingdelegator/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdelegator Hook - 17-check-license.sh"},{"location":"docker-images/pingdelegator/hooks/50-before-post-start.sh/","text":"Ping Identity DevOps pingdelegator Hook - 50-before-post-start.sh \u00b6 This is called after the start or restart sequence has finished and before the server within the container starts This document is auto-generated from pingdelegator/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdelegator` Hook - `50-before-post-start.sh`"},{"location":"docker-images/pingdelegator/hooks/50-before-post-start.sh/#ping-identity-devops-pingdelegator-hook-50-before-post-startsh","text":"This is called after the start or restart sequence has finished and before the server within the container starts This document is auto-generated from pingdelegator/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdelegator Hook - 50-before-post-start.sh"},{"location":"docker-images/pingdirectory/","text":"Ping Identity DevOps Docker Image - pingdirectory \u00b6 This docker image includes the Ping Identity PingDirectory product binaries and associated hook scripts to create and run a PingDirectory instance or instances. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingDirectory Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase docker file LICENSE_FILE_NAME PingDirectory.lic Name of license File LICENSE_SHORT_NAME PD Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server REPLICATION_PORT 8989 Default PingDirectory Replication Port ADMIN_USER_NAME admin Replication administrative user STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container PD_DELEGATOR_PUBLIC_HOSTNAME localhost Public hostname of the DA app STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ADMIN_USER_PASSWORD_FILE Location of file with the admin password, used as the password replication admin Defaults to /SECRETS_DIR/admin-user-password ENCRYPTION_PASSWORD_FILE Location of file with the passphrase for setting up encryption Defaults to /SECRETS_DIR/encryption-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/access ${SERVER_ROOT_DIR}/logs/errors ${SERVER_ROOT_DIR}/logs/failed-ops ${SERVER_ROOT_DIR}/logs/config-audit.log ${SERVER_ROOT_DIR}/logs/debug-trace ${SERVER_ROOT_DIR}/logs/debug-aci ${SERVER_ROOT_DIR}/logs/tools/ .log ${SERVER_BITS_DIR}/logs/tools/ .log Files tailed once container has started MAKELDIF_USERS 0 Number of users to auto-populate using make-ldif templates RETRY_TIMEOUT_SECONDS 180 The default retry timeout in seconds for dsreplication and remove-defunct-server PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool FIPS_MODE_ON false Turns on FIPS mode (currently with the Bouncy Castle FIPS provider) set to exactly \"true\" lowercase to turn on set to anything else to turn off FIPS_PROVIDER BCFIPS BCFIPS is the only provider currently supported -- do not edit PD_REBUILD_ON_RESTART false Force a rebuild (replace-profile) of a PingDirectoy on restart. Used when changes are made outside of the PD_PROFILE UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check. REPLICATION_BASE_DNS Base DNs to include when enabling replication, in addition to the always-included USER_BASE_DN. Multiple base DNs can be specified here, separated by a ; character Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT} Running a PingDirectory container \u00b6 The easiest way to test test a simple standalone image of PingDirectory is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingdirectory \\ --publish 1389:1389 \\ --publish 8443:1443 \\ --detach \\ --env SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH=getting-started/pingdirectory \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdirectory:edge You can view the Docker logs with the command: docker logs -f pingdirectory You should see the ouptut from a PingDirectory install and configuration, ending with a message the the PingDirectory has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs. Running a sample 100/sec search rate test \u00b6 With the PingDirectory running from the previous section, you can run a searchrate job that will send load to the directory at a rate if 100/sec using the following command. docker exec -it pingdirectory \\ /opt/out/instance/bin/searchrate \\ -b dc=example,dc=com \\ --scope sub \\ --filter \"(uid=user.[1-9])\" \\ --attribute mail \\ --numThreads 2 \\ --ratePerSecond 100 Connecting with an LDAP Client \u00b6 Connect an LDAP Client (such as Apache Directory Studio) to this container using the default ports and credentials LDAP Port 1389 LDAP Base DN dc=example,dc=com Root Username cn=administrator Root Password 2FederateM0re Stopping/Removing the container \u00b6 To stop the container: docker container stop pingdirectory To remove the container: docker container rm -f pingdirectory Docker Container Hook Scripts \u00b6 Please go here for details on all pingdirectory hook scripts This document is auto-generated from pingdirectory/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDirectory"},{"location":"docker-images/pingdirectory/#ping-identity-devops-docker-image-pingdirectory","text":"This docker image includes the Ping Identity PingDirectory product binaries and associated hook scripts to create and run a PingDirectory instance or instances.","title":"Ping Identity DevOps Docker Image - pingdirectory"},{"location":"docker-images/pingdirectory/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingdirectory/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingDirectory Ping product name LICENSE_DIR ${PD_LICENSE_DIR} PD License directory. This value is set from the pingbase docker file LICENSE_FILE_NAME PingDirectory.lic Name of license File LICENSE_SHORT_NAME PD Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server REPLICATION_PORT 8989 Default PingDirectory Replication Port ADMIN_USER_NAME admin Replication administrative user STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container PD_DELEGATOR_PUBLIC_HOSTNAME localhost Public hostname of the DA app STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password ADMIN_USER_PASSWORD_FILE Location of file with the admin password, used as the password replication admin Defaults to /SECRETS_DIR/admin-user-password ENCRYPTION_PASSWORD_FILE Location of file with the passphrase for setting up encryption Defaults to /SECRETS_DIR/encryption-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/access ${SERVER_ROOT_DIR}/logs/errors ${SERVER_ROOT_DIR}/logs/failed-ops ${SERVER_ROOT_DIR}/logs/config-audit.log ${SERVER_ROOT_DIR}/logs/debug-trace ${SERVER_ROOT_DIR}/logs/debug-aci ${SERVER_ROOT_DIR}/logs/tools/ .log ${SERVER_BITS_DIR}/logs/tools/ .log Files tailed once container has started MAKELDIF_USERS 0 Number of users to auto-populate using make-ldif templates RETRY_TIMEOUT_SECONDS 180 The default retry timeout in seconds for dsreplication and remove-defunct-server PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool FIPS_MODE_ON false Turns on FIPS mode (currently with the Bouncy Castle FIPS provider) set to exactly \"true\" lowercase to turn on set to anything else to turn off FIPS_PROVIDER BCFIPS BCFIPS is the only provider currently supported -- do not edit PD_REBUILD_ON_RESTART false Force a rebuild (replace-profile) of a PingDirectoy on restart. Used when changes are made outside of the PD_PROFILE UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check. REPLICATION_BASE_DNS Base DNs to include when enabling replication, in addition to the always-included USER_BASE_DN. Multiple base DNs can be specified here, separated by a ; character","title":"Environment Variables"},{"location":"docker-images/pingdirectory/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingdirectory/#running-a-pingdirectory-container","text":"The easiest way to test test a simple standalone image of PingDirectory is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingdirectory \\ --publish 1389:1389 \\ --publish 8443:1443 \\ --detach \\ --env SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH=getting-started/pingdirectory \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdirectory:edge You can view the Docker logs with the command: docker logs -f pingdirectory You should see the ouptut from a PingDirectory install and configuration, ending with a message the the PingDirectory has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs.","title":"Running a PingDirectory container"},{"location":"docker-images/pingdirectory/#running-a-sample-100sec-search-rate-test","text":"With the PingDirectory running from the previous section, you can run a searchrate job that will send load to the directory at a rate if 100/sec using the following command. docker exec -it pingdirectory \\ /opt/out/instance/bin/searchrate \\ -b dc=example,dc=com \\ --scope sub \\ --filter \"(uid=user.[1-9])\" \\ --attribute mail \\ --numThreads 2 \\ --ratePerSecond 100","title":"Running a sample 100/sec search rate test"},{"location":"docker-images/pingdirectory/#connecting-with-an-ldap-client","text":"Connect an LDAP Client (such as Apache Directory Studio) to this container using the default ports and credentials LDAP Port 1389 LDAP Base DN dc=example,dc=com Root Username cn=administrator Root Password 2FederateM0re","title":"Connecting with an LDAP Client"},{"location":"docker-images/pingdirectory/#stoppingremoving-the-container","text":"To stop the container: docker container stop pingdirectory To remove the container: docker container rm -f pingdirectory","title":"Stopping/Removing the container"},{"location":"docker-images/pingdirectory/#docker-container-hook-scripts","text":"Please go here for details on all pingdirectory hook scripts This document is auto-generated from pingdirectory/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdirectory/hooks/","text":"Ping Identity DevOps pingdirectory Hooks \u00b6 List of available hooks: * 03-build-run-plan.sh * 07-apply-server-profile.sh * 182-pre-setup.sh * 20-restart-sequence.sh * 80-post-start.sh * 90-shutdown-sequence.sh * pingdirectory.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdirectory/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hooks"},{"location":"docker-images/pingdirectory/hooks/#ping-identity-devops-pingdirectory-hooks","text":"List of available hooks: * 03-build-run-plan.sh * 07-apply-server-profile.sh * 182-pre-setup.sh * 20-restart-sequence.sh * 80-post-start.sh * 90-shutdown-sequence.sh * pingdirectory.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingdirectory/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hooks"},{"location":"docker-images/pingdirectory/hooks/03-build-run-plan.sh/","text":"Ping Identity DevOps pingdirectory Hook - 03-build-run-plan.sh \u00b6 This script is called to determine the plan for the server as it starts up. This document is auto-generated from pingdirectory/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `03-build-run-plan.sh`"},{"location":"docker-images/pingdirectory/hooks/03-build-run-plan.sh/#ping-identity-devops-pingdirectory-hook-03-build-run-plansh","text":"This script is called to determine the plan for the server as it starts up. This document is auto-generated from pingdirectory/opt/staging/hooks/03-build-run-plan.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 03-build-run-plan.sh"},{"location":"docker-images/pingdirectory/hooks/07-apply-server-profile.sh/","text":"Ping Identity DevOps pingdirectory Hook - 07-apply-server-profile.sh \u00b6 The server-profiles from: * remote (i.e. git) and * local (i.e. /opt/in) have been merged into the ${STAGING_DIR}/instance (ie. /opt/staging/instance). These files will be installed or overwritten into the ${SERVER_ROOT_DIR}. This document is auto-generated from pingdirectory/opt/staging/hooks/07-apply-server-profile.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `07-apply-server-profile.sh`"},{"location":"docker-images/pingdirectory/hooks/07-apply-server-profile.sh/#ping-identity-devops-pingdirectory-hook-07-apply-server-profilesh","text":"The server-profiles from: * remote (i.e. git) and * local (i.e. /opt/in) have been merged into the ${STAGING_DIR}/instance (ie. /opt/staging/instance). These files will be installed or overwritten into the ${SERVER_ROOT_DIR}. This document is auto-generated from pingdirectory/opt/staging/hooks/07-apply-server-profile.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 07-apply-server-profile.sh"},{"location":"docker-images/pingdirectory/hooks/15-expand-templates.sh/","text":"Ping Identity DevOps pingdirectory Hook - 15-expand-templates.sh \u00b6 This will short circut the upper level pingcommon This document auto-generated from pingdirectory/hooks/15-expand-templates.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `15-expand-templates.sh`"},{"location":"docker-images/pingdirectory/hooks/15-expand-templates.sh/#ping-identity-devops-pingdirectory-hook-15-expand-templatessh","text":"This will short circut the upper level pingcommon This document auto-generated from pingdirectory/hooks/15-expand-templates.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 15-expand-templates.sh"},{"location":"docker-images/pingdirectory/hooks/182-pre-setup.sh/","text":"Ping Identity DevOps pingdirectory Hook - 182-pre-setup.sh \u00b6 This document is auto-generated from pingdirectory/opt/staging/hooks/182-pre-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `182-pre-setup.sh`"},{"location":"docker-images/pingdirectory/hooks/182-pre-setup.sh/#ping-identity-devops-pingdirectory-hook-182-pre-setupsh","text":"This document is auto-generated from pingdirectory/opt/staging/hooks/182-pre-setup.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 182-pre-setup.sh"},{"location":"docker-images/pingdirectory/hooks/182-template-to-ldif.sh/","text":"Ping Identity DevOps pingdirectory Hook - 182-template-to-ldif.sh \u00b6 This hook will make-ldif from templates to ldif file in the same directory that will be used during the manage-profile setup This document auto-generated from pingdirectory/hooks/182-template-to-ldif.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `182-template-to-ldif.sh`"},{"location":"docker-images/pingdirectory/hooks/182-template-to-ldif.sh/#ping-identity-devops-pingdirectory-hook-182-template-to-ldifsh","text":"This hook will make-ldif from templates to ldif file in the same directory that will be used during the manage-profile setup This document auto-generated from pingdirectory/hooks/182-template-to-ldif.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 182-template-to-ldif.sh"},{"location":"docker-images/pingdirectory/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingdirectory Hook - 183-run-setup.sh \u00b6 This document auto-generated from pingdirectory/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingdirectory/hooks/183-run-setup.sh/#ping-identity-devops-pingdirectory-hook-183-run-setupsh","text":"This document auto-generated from pingdirectory/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 183-run-setup.sh"},{"location":"docker-images/pingdirectory/hooks/186-install-extensions.sh/","text":"Ping Identity DevOps pingdirectory Hook - 186-install-extensions.sh \u00b6 This document auto-generated from pingdirectory/hooks/186-install-extensions.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `186-install-extensions.sh`"},{"location":"docker-images/pingdirectory/hooks/186-install-extensions.sh/#ping-identity-devops-pingdirectory-hook-186-install-extensionssh","text":"This document auto-generated from pingdirectory/hooks/186-install-extensions.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 186-install-extensions.sh"},{"location":"docker-images/pingdirectory/hooks/188-apply-configuration.sh/","text":"Ping Identity DevOps pingdirectory Hook - 188-apply-configuration.sh \u00b6 This document auto-generated from pingdirectory/opt/staging/hooks/188-apply-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `188-apply-configuration.sh`"},{"location":"docker-images/pingdirectory/hooks/188-apply-configuration.sh/#ping-identity-devops-pingdirectory-hook-188-apply-configurationsh","text":"This document auto-generated from pingdirectory/opt/staging/hooks/188-apply-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 188-apply-configuration.sh"},{"location":"docker-images/pingdirectory/hooks/189-import-data.sh/","text":"Ping Identity DevOps pingdirectory Hook - 189-import-data.sh \u00b6 This hook will import data into the PingDirectory if there are data files included in the server profile data directory. If a .template file is provided, then makeldif will be run to create the .ldif file to be imported. If there are any skipped or rejected entries, an error message will be printed and the container will exit, unless the environment variable PD_IMPORT_CONTINUE_ON_ERROR=true is provided when the container is run. This document auto-generated from pingdirectory/hooks/189-import-data.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `189-import-data.sh`"},{"location":"docker-images/pingdirectory/hooks/189-import-data.sh/#ping-identity-devops-pingdirectory-hook-189-import-datash","text":"This hook will import data into the PingDirectory if there are data files included in the server profile data directory. If a .template file is provided, then makeldif will be run to create the .ldif file to be imported. If there are any skipped or rejected entries, an error message will be printed and the container will exit, unless the environment variable PD_IMPORT_CONTINUE_ON_ERROR=true is provided when the container is run. This document auto-generated from pingdirectory/hooks/189-import-data.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 189-import-data.sh"},{"location":"docker-images/pingdirectory/hooks/20-restart-sequence.sh/","text":"Ping Identity DevOps pingdirectory Hook - 20-restart-sequence.sh \u00b6 This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingdirectory/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `20-restart-sequence.sh`"},{"location":"docker-images/pingdirectory/hooks/20-restart-sequence.sh/#ping-identity-devops-pingdirectory-hook-20-restart-sequencesh","text":"This hook is called when the container has been built in a prior startup and a configuration has been found. This document is auto-generated from pingdirectory/opt/staging/hooks/20-restart-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 20-restart-sequence.sh"},{"location":"docker-images/pingdirectory/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingdirectory Hook - 80-post-start.sh \u00b6 This hook configures pingdirectory replication * Enabling Replication * Get the new current topology * Initialize replication This document is auto-generated from pingdirectory/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `80-post-start.sh`"},{"location":"docker-images/pingdirectory/hooks/80-post-start.sh/#ping-identity-devops-pingdirectory-hook-80-post-startsh","text":"This hook configures pingdirectory replication * Enabling Replication * Get the new current topology * Initialize replication This document is auto-generated from pingdirectory/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 80-post-start.sh"},{"location":"docker-images/pingdirectory/hooks/81-generate-topology-json.sh/","text":"Ping Identity DevOps pingdirectory Hook - 81-generate-topology-json.sh \u00b6 This document auto-generated from pingdirectory/hooks/81-generate-topology-json.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `81-generate-topology-json.sh`"},{"location":"docker-images/pingdirectory/hooks/81-generate-topology-json.sh/#ping-identity-devops-pingdirectory-hook-81-generate-topology-jsonsh","text":"This document auto-generated from pingdirectory/hooks/81-generate-topology-json.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 81-generate-topology-json.sh"},{"location":"docker-images/pingdirectory/hooks/81-repair-topology.sh/","text":"Ping Identity DevOps pingdirectory Hook - 81-repair-topology.sh \u00b6 This document auto-generated from pingdirectory/hooks/81-repair-topology.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `81-repair-topology.sh`"},{"location":"docker-images/pingdirectory/hooks/81-repair-topology.sh/#ping-identity-devops-pingdirectory-hook-81-repair-topologysh","text":"This document auto-generated from pingdirectory/hooks/81-repair-topology.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 81-repair-topology.sh"},{"location":"docker-images/pingdirectory/hooks/90-shutdown-sequence.sh/","text":"Ping Identity DevOps pingdirectory Hook - 90-shutdown-sequence.sh \u00b6 This script handles removing the server from the topology during a shutdown. This document is auto-generated from pingdirectory/opt/staging/hooks/90-shutdown-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `90-shutdown-sequence.sh`"},{"location":"docker-images/pingdirectory/hooks/90-shutdown-sequence.sh/#ping-identity-devops-pingdirectory-hook-90-shutdown-sequencesh","text":"This script handles removing the server from the topology during a shutdown. This document is auto-generated from pingdirectory/opt/staging/hooks/90-shutdown-sequence.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - 90-shutdown-sequence.sh"},{"location":"docker-images/pingdirectory/hooks/pingdirectory.lib.sh/","text":"Ping Identity DevOps pingdirectory Hook - pingdirectory.lib.sh \u00b6 This document is auto-generated from pingdirectory/opt/staging/hooks/pingdirectory.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectory` Hook - `pingdirectory.lib.sh`"},{"location":"docker-images/pingdirectory/hooks/pingdirectory.lib.sh/#ping-identity-devops-pingdirectory-hook-pingdirectorylibsh","text":"This document is auto-generated from pingdirectory/opt/staging/hooks/pingdirectory.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectory Hook - pingdirectory.lib.sh"},{"location":"docker-images/pingdirectoryproxy/","text":"Ping Identity DevOps Docker Image - pingdirectoryproxy \u00b6 This docker image includes the Ping Identity PingDirectoryProxy product binaries and associated hook scripts to create and run a PingDirectoryProxy instance or instances. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)\\ Environment Variables \u00b6 The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingDirectoryProxy Ping product name LICENSE_FILE_NAME PingDirectory.lic Name of license File LICENSE_SHORT_NAME PD Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server ADMIN_USER_NAME admin Replication administrative user STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container PD_DELEGATOR_PUBLIC_HOSTNAME localhost Public hostname of the DA app STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/access ${SERVER_ROOT_DIR}/logs/errors ${SERVER_ROOT_DIR}/logs/failed-ops ${SERVER_ROOT_DIR}/logs/config-audit.log ${SERVER_ROOT_DIR}/logs/tools/ .log ${SERVER_BITS_DIR}/logs/tools/ .log Files tailed once container has started PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check. Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT} Running a PingDirectoryProxy container \u00b6 The easiest way to test test a simple standalone image of PingDirectoryProxy is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingdirectoryproxy \\ --publish 1389:1389 \\ --publish 8443:1443 \\ --detach \\ --env SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH=baseline/pingdirectoryproxy \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdirectoryproxy:edge You can view the Docker logs with the command: docker logs -f pingdirectoryproxy You should see the output from a PingDirectoryProxy install and configuration, ending with a message the the PingDirectoryProxy has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs. Running a sample 100/sec search rate test \u00b6 With the PingDirectoryProxy running from the previous section, you can run a searchrate job that will send load to the directory at a rate if 100/sec using the following command. docker exec -it pingdirectoryproxy \\ /opt/out/instance/bin/searchrate \\ -b dc=example,dc=com \\ --scope sub \\ --filter \"(uid=user.[1-9])\" \\ --attribute mail \\ --numThreads 2 \\ --ratePerSecond 100 Connecting with an LDAP Client \u00b6 Connect an LDAP Client (such as Apache Directory Studio) to this container using the default ports and credentials LDAP Port 1389 LDAP Base DN dc=example,dc=com Root Username cn=administrator Root Password 2FederateM0re Stopping/Removing the container \u00b6 To stop the container: docker container stop pingdirectoryproxy To remove the container: docker container rm -f pingdirectoryproxy Docker Container Hook Scripts \u00b6 Please go here for details on all pingdirectoryproxy hook scripts This document is auto-generated from pingdirectoryproxy/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingDirectoryProxy"},{"location":"docker-images/pingdirectoryproxy/#ping-identity-devops-docker-image-pingdirectoryproxy","text":"This docker image includes the Ping Identity PingDirectoryProxy product binaries and associated hook scripts to create and run a PingDirectoryProxy instance or instances.","title":"Ping Identity DevOps Docker Image - pingdirectoryproxy"},{"location":"docker-images/pingdirectoryproxy/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingdatacommon - Common Ping files (i.e. hook scripts)\\","title":"Related Docker Images"},{"location":"docker-images/pingdirectoryproxy/#environment-variables","text":"The following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingDirectoryProxy Ping product name LICENSE_FILE_NAME PingDirectory.lic Name of license File LICENSE_SHORT_NAME PD Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server ADMIN_USER_NAME admin Replication administrative user STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start-server The command that the entrypoint will execute in the foreground to instantiate the container PD_DELEGATOR_PUBLIC_HOSTNAME localhost Public hostname of the DA app STARTUP_FOREGROUND_OPTS --nodetach The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE Location of file with the root user password (i.e. cn=directory manager). Defaults to /SECRETS_DIR/root-user-password KEYSTORE_FILE Location of the keystore file containing the server certificate. If left undefined, the SECRETS_DIR will be checked for a keystore. If that keystore does not exist, the server will generate a self-signed certificate. KEYSTORE_PIN_FILE Location of the pin file for the keystore defined in KEYSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a self-signed certificate. KEYSTORE_TYPE Format of the keystore defined in KEYSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the keystore format will be inferred based on the file extension of the KEYSTORE_FILE, defaulting to \"jks\". TRUSTSTORE_FILE Location of the truststore file for the server. If left undefined, the SECRETS_DIR will be checked for a truststore. If that truststore does not exist, the server will generate a truststore, containing its own certificate. TRUSTSTORE_PIN_FILE Location of the pin file for the truststore defined in TRUSTSTORE_FILE. If left undefined, the SECRETS_DIR will be checked for a pin file. This value does not need to be defined when allowing the server to generate a truststore. TRUSTSTORE_TYPE Format of the truststore defined in TRUSTSTORE_FILE. One of \"jks\", \"pkcs12\", \"pem\", or \"bcfks\" (in FIPS mode). If not defined, the truststore format will be inferred based on the file extension of the TRUSTSTORE_FILE, defaulting to \"jks\". TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/access ${SERVER_ROOT_DIR}/logs/errors ${SERVER_ROOT_DIR}/logs/failed-ops ${SERVER_ROOT_DIR}/logs/config-audit.log ${SERVER_ROOT_DIR}/logs/tools/ .log ${SERVER_BITS_DIR}/logs/tools/ .log Files tailed once container has started PD_PROFILE ${STAGING_DIR}/pd.profile Directory for the profile used by the PingData manage-profile tool UNBOUNDID_SKIP_START_PRECHECK_NODETACH true Setting this variable to true speeds up server startup time by skipping an unnecessary JVM check.","title":"Environment Variables"},{"location":"docker-images/pingdirectoryproxy/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container ${LDAP_PORT} ${LDAPS_PORT} ${HTTPS_PORT} ${JMX_PORT}","title":"Ports Exposed"},{"location":"docker-images/pingdirectoryproxy/#running-a-pingdirectoryproxy-container","text":"The easiest way to test test a simple standalone image of PingDirectoryProxy is to cut/paste the following command into a terminal on a machine with docker. docker run \\ --name pingdirectoryproxy \\ --publish 1389:1389 \\ --publish 8443:1443 \\ --detach \\ --env SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH=baseline/pingdirectoryproxy \\ --env PING_IDENTITY_ACCEPT_EULA=YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingdirectoryproxy:edge You can view the Docker logs with the command: docker logs -f pingdirectoryproxy You should see the output from a PingDirectoryProxy install and configuration, ending with a message the the PingDirectoryProxy has started. After it starts, you will see some typical access logs. Simply Ctrl-C after to stop tailing the logs.","title":"Running a PingDirectoryProxy container"},{"location":"docker-images/pingdirectoryproxy/#running-a-sample-100sec-search-rate-test","text":"With the PingDirectoryProxy running from the previous section, you can run a searchrate job that will send load to the directory at a rate if 100/sec using the following command. docker exec -it pingdirectoryproxy \\ /opt/out/instance/bin/searchrate \\ -b dc=example,dc=com \\ --scope sub \\ --filter \"(uid=user.[1-9])\" \\ --attribute mail \\ --numThreads 2 \\ --ratePerSecond 100","title":"Running a sample 100/sec search rate test"},{"location":"docker-images/pingdirectoryproxy/#connecting-with-an-ldap-client","text":"Connect an LDAP Client (such as Apache Directory Studio) to this container using the default ports and credentials LDAP Port 1389 LDAP Base DN dc=example,dc=com Root Username cn=administrator Root Password 2FederateM0re","title":"Connecting with an LDAP Client"},{"location":"docker-images/pingdirectoryproxy/#stoppingremoving-the-container","text":"To stop the container: docker container stop pingdirectoryproxy To remove the container: docker container rm -f pingdirectoryproxy","title":"Stopping/Removing the container"},{"location":"docker-images/pingdirectoryproxy/#docker-container-hook-scripts","text":"Please go here for details on all pingdirectoryproxy hook scripts This document is auto-generated from pingdirectoryproxy/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingdirectoryproxy/hooks/","text":"Ping Identity DevOps pingdirectoryproxy Hooks \u00b6 There are no default hooks defined for the pingdirectoryproxy image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hooks"},{"location":"docker-images/pingdirectoryproxy/hooks/#ping-identity-devops-pingdirectoryproxy-hooks","text":"There are no default hooks defined for the pingdirectoryproxy image. Hooks defined by parent images (i.e. pingcommon/pingdatacommon) will be inherited by this image. Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hooks"},{"location":"docker-images/pingdirectoryproxy/hooks/03-build-run-plan.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 03-build-run-plan.sh \u00b6 This script is called to check if there is an existing server and if so, it will return a 1, else 0 Goal of building a run plan is to provide a plan for the server as it starts up Options for the RUN_PLAN and the PD_STATE are as follows: RUN_PLAN (Initially set to UNKNOWN) START - Instructs the container to start from scratch. This is primarily because a server.uuid file is not present. RESTART - Instructs the container to restart an existing directory. This is primarily because an existing server.uuid file is prsent. PD_STATE (Initially set to UNKNOWN) SETUP - Specifies that the server should be setup UPDATE - Specifies that the server should be updated GENISIS - A very special case when the server is determined to be the SEED Server and initial server should be setup and data imported This document auto-generated from pingdirectoryproxy/hooks/03-build-run-plan.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `03-build-run-plan.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/03-build-run-plan.sh/#ping-identity-devops-pingdirectoryproxy-hook-03-build-run-plansh","text":"This script is called to check if there is an existing server and if so, it will return a 1, else 0 Goal of building a run plan is to provide a plan for the server as it starts up Options for the RUN_PLAN and the PD_STATE are as follows: RUN_PLAN (Initially set to UNKNOWN) START - Instructs the container to start from scratch. This is primarily because a server.uuid file is not present. RESTART - Instructs the container to restart an existing directory. This is primarily because an existing server.uuid file is prsent. PD_STATE (Initially set to UNKNOWN) SETUP - Specifies that the server should be setup UPDATE - Specifies that the server should be updated GENISIS - A very special case when the server is determined to be the SEED Server and initial server should be setup and data imported This document auto-generated from pingdirectoryproxy/hooks/03-build-run-plan.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 03-build-run-plan.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/183-run-setup.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 183-run-setup.sh \u00b6 This document auto-generated from pingdirectoryproxy/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `183-run-setup.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/183-run-setup.sh/#ping-identity-devops-pingdirectoryproxy-hook-183-run-setupsh","text":"This document auto-generated from pingdirectoryproxy/hooks/183-run-setup.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 183-run-setup.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/188-apply-configuration.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 188-apply-configuration.sh \u00b6 This document auto-generated from pingdirectoryproxy/hooks/188-apply-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `188-apply-configuration.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/188-apply-configuration.sh/#ping-identity-devops-pingdirectoryproxy-hook-188-apply-configurationsh","text":"This document auto-generated from pingdirectoryproxy/hooks/188-apply-configuration.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 188-apply-configuration.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/20-restart-sequence.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 20-restart-sequence.sh \u00b6 This hook is called when the container has been built in a prior startup and a configuration has been found. This document auto-generated from pingdirectoryproxy/hooks/20-restart-sequence.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `20-restart-sequence.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/20-restart-sequence.sh/#ping-identity-devops-pingdirectoryproxy-hook-20-restart-sequencesh","text":"This hook is called when the container has been built in a prior startup and a configuration has been found. This document auto-generated from pingdirectoryproxy/hooks/20-restart-sequence.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 20-restart-sequence.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 80-post-start.sh \u00b6 This hook runs through the followig phases: * Ensures the PingDirectoryProxy service has been started an accepts queries. * Updates the Server Instance hostname/ldaps-port This document auto-generated from pingdirectoryproxy/hooks/80-post-start.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `80-post-start.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/80-post-start.sh/#ping-identity-devops-pingdirectoryproxy-hook-80-post-startsh","text":"This hook runs through the followig phases: * Ensures the PingDirectoryProxy service has been started an accepts queries. * Updates the Server Instance hostname/ldaps-port This document auto-generated from pingdirectoryproxy/hooks/80-post-start.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 80-post-start.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/81-generate-topology-json.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 81-generate-topology-json.sh \u00b6 This document auto-generated from pingdirectoryproxy/hooks/81-generate-topology-json.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `81-generate-topology-json.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/81-generate-topology-json.sh/#ping-identity-devops-pingdirectoryproxy-hook-81-generate-topology-jsonsh","text":"This document auto-generated from pingdirectoryproxy/hooks/81-generate-topology-json.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 81-generate-topology-json.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/81-repair-topology.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - 81-repair-topology.sh \u00b6 This document auto-generated from pingdirectoryproxy/hooks/81-repair-topology.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `81-repair-topology.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/81-repair-topology.sh/#ping-identity-devops-pingdirectoryproxy-hook-81-repair-topologysh","text":"This document auto-generated from pingdirectoryproxy/hooks/81-repair-topology.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - 81-repair-topology.sh"},{"location":"docker-images/pingdirectoryproxy/hooks/pingdirectory.lib.sh/","text":"Ping Identity DevOps pingdirectoryproxy Hook - pingdirectory.lib.sh \u00b6 This document auto-generated from pingdirectoryproxy/hooks/pingdirectory.lib.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingdirectoryproxy` Hook - `pingdirectory.lib.sh`"},{"location":"docker-images/pingdirectoryproxy/hooks/pingdirectory.lib.sh/#ping-identity-devops-pingdirectoryproxy-hook-pingdirectorylibsh","text":"This document auto-generated from pingdirectoryproxy/hooks/pingdirectory.lib.sh Copyright (c) 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingdirectoryproxy Hook - pingdirectory.lib.sh"},{"location":"docker-images/pingfederate/","text":"Ping Identity DevOps Docker Image - pingfederate \u00b6 This docker image includes the Ping Identity PingFederate product binaries and associated hook scripts to create and run both PingFederate Admin and Engine nodes. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingFederate Ping product name LICENSE_DIR ${SERVER_ROOT_DIR}/server/default/conf License directory LICENSE_FILE_NAME pingfederate.lic Name of license file LICENSE_SHORT_NAME PF Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/log/server.log Files tailed once container has started PF_LOG_SIZE_MAX 10000 KB Defines the log file size max for ALL appenders PF_LOG_NUMBER 2 Defines the maximum of log files to retain upon rotation PF_LOG_LEVEL INFO General log level -- provide custom log4j2.xml in profile for more detailed control valid values are OFF, ERROR, WARN, INFO, DEBUG PF_ADMIN_PORT 9999 Defines the port on which the PingFederate administrative console and API runs. PF_ENGINE_PORT 9031 Defines the port on which PingFederate listens for encrypted HTTPS (SSL/TLS) traffic. PF_ENGINE_DEBUG false Flag to turn on PingFederate Engine debugging Used in run.sh PF_ADMIN_DEBUG false Flag to turn on PingFederate Admin debugging Used in run.sh PF_DEBUG_PORT 9030 Defines the port on which PingFederate opens up a java debugging port. Used in run.sh SHOW_LIBS_VER true Defines a variable to allow showing library versions in the output at startup default to true SHOW_LIBS_VER_PRE_PATCH false Defines a variable to allow showing library version prior to patches being applied default to false This is helpful to ensure that the patch process updates all libraries affected OPERATIONAL_MODE STANDALONE Operational Mode Indicates the operational mode of the runtime server in run.properties Options include STANDALONE, CLUSTERED_CONSOLE, CLUSTERED_ENGINE. PF_CONSOLE_AUTHENTICATION Defines mechanism for console authentication in run.properties. Options include none, native, LDAP, cert, RADIUS, OIDC. If not set, default is native. PF_ADMIN_API_AUTHENTICATION Defines mechanism for admin api authentication in run.properties. Options include none, native, LDAP, cert, RADIUS, OIDC. If not set, default is native. HSM_MODE OFF Hardware Security Module Mode in run.properties Options include OFF, AWSCLOUDHSM, NCIPHER, LUNA, BCFIPS. PF_BC_FIPS_APPROVED_ONLY false Defines a variable that allows instantiating non-FIPS crypto/random PF_HSM_HYBRID false Hardware Security Module Hybrid Mode When PF is in Hybrid mode, certs/keys can be created either on the local trust store or on the HSM. This can used as a migration strategy towards an HSM setup. PF_LDAP_USERNAME This is the username for an account within the LDAP Directory Server that can be used to perform user lookups for authentication and other user level search operations. Set if PF_CONSOLE_AUTHENTICATION or PF_ADMIN_API_AUTHENTICATION=LDAP PF_LDAP_PASSWORD This is the password for the Username specified above. This property should be obfuscated using the 'obfuscate.sh' utility. Set if PF_CONSOLE_AUTHENTICATION or PF_ADMIN_API_AUTHENTICATION=LDAP CLUSTER_BIND_ADDRESS NON_LOOPBACK IP address for cluster communication. Set to NON_LOOPBACK to allow the system to choose an available non-loopback IP address. PF_PROVISIONER_MODE OFF Provisioner Mode in run.properties Options include OFF, STANDALONE, FAILOVER. PF_PROVISIONER_NODE_ID 1 Provisioner Node ID in run.properties Initial active provisioning server node ID is 1 PF_PROVISIONER_GRACE_PERIOD 600 Provisioner Failover Grace Period in run.properties Grace period, in seconds. Default 600 seconds PF_JETTY_THREADS_MIN Override the default value for the minimum size of the Jetty thread pool Leave unset to let the container automatically tune the value according to available resources PF_JETTY_THREADS_MAX Override the default value for the maximum size of the Jetty thread pool Leave unset to let the container automatically tune the value according to available resources PF_ACCEPT_QUEUE_SIZE 512 The size of the accept queue. There is generally no reason to tune this but please refer to the performance tuning guide for further tuning guidance. PF_PINGONE_REGION The region of the PingOne tenant PingFederate should connect with. Valid values are \"com\", \"eu\" and \"asia\" PF_PINGONE_ENV_ID The PingOne environment ID to use PF_CONSOLE_TITLE Docker PingFederate The title featured in the administration console -- this is generally used to easily distinguish between environments PF_NODE_TAGS This property defines the tags associated with this PingFederate node. Configuration is optional. When configured, PingFederate takes this property into consideration when processing requests. For example, tags may be used to determine the data store location that this PingFederate node communicates with. Administrators may also use tags in conjunction with authentication selectors and policies to define authentication requirements. Administrators may define one tag or a list of space-separated tags. Each tag cannot contain any spaces. Other characters are allowed. Example 1: PF_NODE_TAGS=north Example 1 defines one tag: 'north' Example 2: PF_NODE_TAGS=1 123 test Example 2 defines three tags: '1', '123' and 'test' Example 3: PF_NODE_TAGS= Example 3 is also valid because the PF_NODE_TAGS property is optional. PF_CONSOLE_ENV This property defines the name of the PingFederate environment that will be displayed in the administrative console, used to make separate environments easily identifiable. JAVA_RAM_PERCENTAGE 75.0 Percentage of the container memory to allocate to PingFederate JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate BULK_CONFIG_DIR ${OUT_DIR}/instance/bulk-config BULK_CONFIG_FILE data.json Ports Exposed \u00b6 The following ports are exposed from the container. If a variable is used, then it may come from a parent container 9031 9999 Running a PingFederate container \u00b6 To run a PingFederate container: docker run \\ --name pingfederate \\ --publish 9999 :9999 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingfederate \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingfederate:edge Follow Docker logs with: docker logs -f pingfederate If using the command above with the embedded server profile , log in with: * https://localhost:9999/pingfederate/app * Username: Administrator * Password: 2FederateM0re Docker Container Hook Scripts \u00b6 Please go here for details on all pingfederate hook scripts This document is auto-generated from pingfederate/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingFederate"},{"location":"docker-images/pingfederate/#ping-identity-devops-docker-image-pingfederate","text":"This docker image includes the Ping Identity PingFederate product binaries and associated hook scripts to create and run both PingFederate Admin and Engine nodes.","title":"Ping Identity DevOps Docker Image - pingfederate"},{"location":"docker-images/pingfederate/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingfederate/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingFederate Ping product name LICENSE_DIR ${SERVER_ROOT_DIR}/server/default/conf License directory LICENSE_FILE_NAME pingfederate.lic Name of license file LICENSE_SHORT_NAME PF Short name used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/run.sh The command that the entrypoint will execute in the foreground to instantiate the container TAIL_LOG_FILES ${SERVER_ROOT_DIR}/log/server.log Files tailed once container has started PF_LOG_SIZE_MAX 10000 KB Defines the log file size max for ALL appenders PF_LOG_NUMBER 2 Defines the maximum of log files to retain upon rotation PF_LOG_LEVEL INFO General log level -- provide custom log4j2.xml in profile for more detailed control valid values are OFF, ERROR, WARN, INFO, DEBUG PF_ADMIN_PORT 9999 Defines the port on which the PingFederate administrative console and API runs. PF_ENGINE_PORT 9031 Defines the port on which PingFederate listens for encrypted HTTPS (SSL/TLS) traffic. PF_ENGINE_DEBUG false Flag to turn on PingFederate Engine debugging Used in run.sh PF_ADMIN_DEBUG false Flag to turn on PingFederate Admin debugging Used in run.sh PF_DEBUG_PORT 9030 Defines the port on which PingFederate opens up a java debugging port. Used in run.sh SHOW_LIBS_VER true Defines a variable to allow showing library versions in the output at startup default to true SHOW_LIBS_VER_PRE_PATCH false Defines a variable to allow showing library version prior to patches being applied default to false This is helpful to ensure that the patch process updates all libraries affected OPERATIONAL_MODE STANDALONE Operational Mode Indicates the operational mode of the runtime server in run.properties Options include STANDALONE, CLUSTERED_CONSOLE, CLUSTERED_ENGINE. PF_CONSOLE_AUTHENTICATION Defines mechanism for console authentication in run.properties. Options include none, native, LDAP, cert, RADIUS, OIDC. If not set, default is native. PF_ADMIN_API_AUTHENTICATION Defines mechanism for admin api authentication in run.properties. Options include none, native, LDAP, cert, RADIUS, OIDC. If not set, default is native. HSM_MODE OFF Hardware Security Module Mode in run.properties Options include OFF, AWSCLOUDHSM, NCIPHER, LUNA, BCFIPS. PF_BC_FIPS_APPROVED_ONLY false Defines a variable that allows instantiating non-FIPS crypto/random PF_HSM_HYBRID false Hardware Security Module Hybrid Mode When PF is in Hybrid mode, certs/keys can be created either on the local trust store or on the HSM. This can used as a migration strategy towards an HSM setup. PF_LDAP_USERNAME This is the username for an account within the LDAP Directory Server that can be used to perform user lookups for authentication and other user level search operations. Set if PF_CONSOLE_AUTHENTICATION or PF_ADMIN_API_AUTHENTICATION=LDAP PF_LDAP_PASSWORD This is the password for the Username specified above. This property should be obfuscated using the 'obfuscate.sh' utility. Set if PF_CONSOLE_AUTHENTICATION or PF_ADMIN_API_AUTHENTICATION=LDAP CLUSTER_BIND_ADDRESS NON_LOOPBACK IP address for cluster communication. Set to NON_LOOPBACK to allow the system to choose an available non-loopback IP address. PF_PROVISIONER_MODE OFF Provisioner Mode in run.properties Options include OFF, STANDALONE, FAILOVER. PF_PROVISIONER_NODE_ID 1 Provisioner Node ID in run.properties Initial active provisioning server node ID is 1 PF_PROVISIONER_GRACE_PERIOD 600 Provisioner Failover Grace Period in run.properties Grace period, in seconds. Default 600 seconds PF_JETTY_THREADS_MIN Override the default value for the minimum size of the Jetty thread pool Leave unset to let the container automatically tune the value according to available resources PF_JETTY_THREADS_MAX Override the default value for the maximum size of the Jetty thread pool Leave unset to let the container automatically tune the value according to available resources PF_ACCEPT_QUEUE_SIZE 512 The size of the accept queue. There is generally no reason to tune this but please refer to the performance tuning guide for further tuning guidance. PF_PINGONE_REGION The region of the PingOne tenant PingFederate should connect with. Valid values are \"com\", \"eu\" and \"asia\" PF_PINGONE_ENV_ID The PingOne environment ID to use PF_CONSOLE_TITLE Docker PingFederate The title featured in the administration console -- this is generally used to easily distinguish between environments PF_NODE_TAGS This property defines the tags associated with this PingFederate node. Configuration is optional. When configured, PingFederate takes this property into consideration when processing requests. For example, tags may be used to determine the data store location that this PingFederate node communicates with. Administrators may also use tags in conjunction with authentication selectors and policies to define authentication requirements. Administrators may define one tag or a list of space-separated tags. Each tag cannot contain any spaces. Other characters are allowed. Example 1: PF_NODE_TAGS=north Example 1 defines one tag: 'north' Example 2: PF_NODE_TAGS=1 123 test Example 2 defines three tags: '1', '123' and 'test' Example 3: PF_NODE_TAGS= Example 3 is also valid because the PF_NODE_TAGS property is optional. PF_CONSOLE_ENV This property defines the name of the PingFederate environment that will be displayed in the administrative console, used to make separate environments easily identifiable. JAVA_RAM_PERCENTAGE 75.0 Percentage of the container memory to allocate to PingFederate JVM DO NOT set to 100% or your JVM will exit with OutOfMemory errors and the container will terminate BULK_CONFIG_DIR ${OUT_DIR}/instance/bulk-config BULK_CONFIG_FILE data.json","title":"Environment Variables"},{"location":"docker-images/pingfederate/#ports-exposed","text":"The following ports are exposed from the container. If a variable is used, then it may come from a parent container 9031 9999","title":"Ports Exposed"},{"location":"docker-images/pingfederate/#running-a-pingfederate-container","text":"To run a PingFederate container: docker run \\ --name pingfederate \\ --publish 9999 :9999 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingfederate \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER \\ --env PING_IDENTITY_DEVOPS_KEY \\ --tmpfs /run/secrets \\ pingidentity/pingfederate:edge Follow Docker logs with: docker logs -f pingfederate If using the command above with the embedded server profile , log in with: * https://localhost:9999/pingfederate/app * Username: Administrator * Password: 2FederateM0re","title":"Running a PingFederate container"},{"location":"docker-images/pingfederate/#docker-container-hook-scripts","text":"Please go here for details on all pingfederate hook scripts This document is auto-generated from pingfederate/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingfederate/hooks/","text":"Ping Identity DevOps pingfederate Hooks \u00b6 List of available hooks: * 05-expand-templates.sh.pre * 20-restart-sequence.sh.pre * 80-post-start.sh * 81-after-start-process.sh * 83-configure-admin.sh * 85-import-configuration.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingfederate/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hooks"},{"location":"docker-images/pingfederate/hooks/#ping-identity-devops-pingfederate-hooks","text":"List of available hooks: * 05-expand-templates.sh.pre * 20-restart-sequence.sh.pre * 80-post-start.sh * 81-after-start-process.sh * 83-configure-admin.sh * 85-import-configuration.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingfederate/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hooks"},{"location":"docker-images/pingfederate/hooks/05-expand-templates.sh.pre/","text":"Ping Identity DevOps pingfederate Hook - 05-expand-templates.sh.pre \u00b6 This document is auto-generated from pingfederate/opt/staging/hooks/05-expand-templates.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hook - `05-expand-templates.sh.pre`"},{"location":"docker-images/pingfederate/hooks/05-expand-templates.sh.pre/#ping-identity-devops-pingfederate-hook-05-expand-templatesshpre","text":"This document is auto-generated from pingfederate/opt/staging/hooks/05-expand-templates.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hook - 05-expand-templates.sh.pre"},{"location":"docker-images/pingfederate/hooks/20-restart-sequence.sh.pre/","text":"Ping Identity DevOps pingfederate Hook - 20-restart-sequence.sh.pre \u00b6 This document is auto-generated from pingfederate/opt/staging/hooks/20-restart-sequence.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hook - `20-restart-sequence.sh.pre`"},{"location":"docker-images/pingfederate/hooks/20-restart-sequence.sh.pre/#ping-identity-devops-pingfederate-hook-20-restart-sequenceshpre","text":"This document is auto-generated from pingfederate/opt/staging/hooks/20-restart-sequence.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hook - 20-restart-sequence.sh.pre"},{"location":"docker-images/pingfederate/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingfederate Hook - 80-post-start.sh \u00b6 This script is used to import any configurations that are needed after PingFederate starts This document is auto-generated from pingfederate/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hook - `80-post-start.sh`"},{"location":"docker-images/pingfederate/hooks/80-post-start.sh/#ping-identity-devops-pingfederate-hook-80-post-startsh","text":"This script is used to import any configurations that are needed after PingFederate starts This document is auto-generated from pingfederate/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hook - 80-post-start.sh"},{"location":"docker-images/pingfederate/hooks/81-after-start-process.sh/","text":"Ping Identity DevOps pingfederate Hook - 81-after-start-process.sh \u00b6 This document is auto-generated from pingfederate/opt/staging/hooks/81-after-start-process.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hook - `81-after-start-process.sh`"},{"location":"docker-images/pingfederate/hooks/81-after-start-process.sh/#ping-identity-devops-pingfederate-hook-81-after-start-processsh","text":"This document is auto-generated from pingfederate/opt/staging/hooks/81-after-start-process.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hook - 81-after-start-process.sh"},{"location":"docker-images/pingfederate/hooks/83-configure-admin.sh/","text":"Ping Identity DevOps pingfederate Hook - 83-configure-admin.sh \u00b6 This document is auto-generated from pingfederate/opt/staging/hooks/83-configure-admin.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hook - `83-configure-admin.sh`"},{"location":"docker-images/pingfederate/hooks/83-configure-admin.sh/#ping-identity-devops-pingfederate-hook-83-configure-adminsh","text":"This document is auto-generated from pingfederate/opt/staging/hooks/83-configure-admin.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hook - 83-configure-admin.sh"},{"location":"docker-images/pingfederate/hooks/85-import-configuration.sh/","text":"Ping Identity DevOps pingfederate Hook - 85-import-configuration.sh \u00b6 This document is auto-generated from pingfederate/opt/staging/hooks/85-import-configuration.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingfederate` Hook - `85-import-configuration.sh`"},{"location":"docker-images/pingfederate/hooks/85-import-configuration.sh/#ping-identity-devops-pingfederate-hook-85-import-configurationsh","text":"This document is auto-generated from pingfederate/opt/staging/hooks/85-import-configuration.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingfederate Hook - 85-import-configuration.sh"},{"location":"docker-images/pingintelligence/","text":"Ping Identity DevOps Docker Image - pingintelligence-ase \u00b6 This docker image includes the Ping Identity PingIntelligence API Security Enforcer product binaries and associated hook scripts to create and run PingIntelligence ASE instances. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingIntelligence_ASE Ping product name LICENSE_FILE_NAME PingIntelligence.lic Name of license File LICENSE_DIR ${SERVER_ROOT_DIR}/config License directory LICENSE_SHORT_NAME pingintelligence Shortname used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start_ase.sh The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE ADMIN_USER_PASSWORD_FILE ENCRYPTION_PASSWORD_FILE PING_INTELLIGENCE_ADMIN_USER admin PingIntelligence global variables PingIntelligence default administrative user (this should probably not be changed) PING_INTELLIGENCE_ADMIN_PASSWORD 2FederateM0re PingIntelligence default administrative user credentials (this should be changed) PING_INTELLIGENCE_ASE_HTTP_PORT 8000 The ASE HTTP listener port PING_INTELLIGENCE_ASE_HTTPS_PORT 8443 The ASE HTTPS listener port PING_INTELLIGENCE_ASE_MGMT_PORT 8010 the ASE management port PING_INTELLIGENCE_ASE_TIMEZONE utc The timezone the ASE container is operating in PING_INTELLIGENCE_ASE_ABS_PUBLISH true Whether the ASE should poll the ABS service that publishes discovered APIs PING_INTELLIGENCE_ASE_ABS_PUBLISH_REQUEST_MINUTES 10 The interval in minute to poll the API discovery list PING_INTELLIGENCE_ASE_MODE sideband Defines running mode for API Security Enforcer (Allowed values are inline or sideband). PING_INTELLIGENCE_ASE_ENABLE_SIDEBAND_AUTHENTICATION false Enable client-side authentication with tokens in sideband mode PING_INTELLIGENCE_ASE_HOSTNAME_REWRITE false PING_INTELLIGENCE_ASE_KEYSTORE_PASSWORD OBF:AES:sRNp0W7sSi1zrReXeHodKQ:lXcvbBhKZgDTrjQOfOkzR2mpca4bTUcwPAuerMPwvM4 PING_INTELLIGENCE_ASE_ADMIN_LOG_LEVEL 4 For controller.log and balancer.log only 1-5 (FATAL, ERROR, WARNING, INFO, DEBUG) PING_INTELLIGENCE_ASE_ENABLE_CLUSTER false enable cluster PING_INTELLIGENCE_ASE_SYSLOG_SERVER Syslog server PING_INTELLIGENCE_ASE_CA_CERT_PATH Path the to CA certificate PING_INTELLIGENCE_ASE_ENABLE_HEALTH false enable the ASE health check service PING_INTELLIGENCE_ASE_ENABLE_ABS true Set this value to true, to allow API Security Enforcer to send logs to ABS. PING_INTELLIGENCE_ASE_ENABLE_ABS_ATTACK_LIST_RETRIEVAL true Toggle ABS attack list retrieval PING_INTELLIGENCE_ASE_BLOCK_AUTODETECTED_ATTACKS false Toggle whether ASE blocks auto-detected attacks PING_INTELLIGENCE_ASE_ATTACK_LIST_REFRESH_MINUTES 10 ABS attack list retieval frequency in minutes PING_INTELLIGENCE_ASE_HOSTNAME_REFRESH_SECONDS 60 Hostname refresh interval in seconds PING_INTELLIGENCE_ASE_DECOY_ALERT_INTERVAL_MINUTES 180 Alert interval for teh decoy services PING_INTELLIGENCE_ASE_ENABLE_XFORWARDED_FOR false Toggle X-Forwarded-For PING_INTELLIGENCE_ASE_ENABLE_FIREWALL true Toggle ASE Firewall PING_INTELLIGENCE_ASE_ENABLE_SIDEBAND_KEEPALIVE false Enable connection keepalive for requests from gateway to ASE in sideband mode When enabled, ASE sends 'Connection: keep-alive' header in response When disabled, ASE sends 'Connection: close' header in response PING_INTELLIGENCE_ASE_ENABLE_GOOGLE_PUBSUB false Enable Google Pub/Sub PING_INTELLIGENCE_ASE_ENABLE_ACCESS_LOG true Toggle the access log PING_INTELLIGENCE_ASE_ENABLE_AUDIT false Toggle audit logging PING_INTELLIGENCE_ASE_FLUSH_LOG_IMMEDIATELY true Toggle whether logs are flushed to disk immediately PING_INTELLIGENCE_ASE_HTTP_PROCESS 1 The number of processes for HTTP requests PING_INTELLIGENCE_ASE_HTTPS_PROCESS 1 The number of processes for HTTPS requests PING_INTELLIGENCE_ASE_ENABLE_SSL_V3 false Toggle SSLv3 -- this should absolutely stay disabled PING_INTELLIGENCE_TCP_SEND_BUFFER_BYTES 212992 Kernel TCP send buffer size in bytes PING_INTELLIGENCE_TCP_RECEIVE_BUFFER_BYTES 212992 enrel TCP receive buffer size in bytes PING_INTELLIGENCE_ASE_ATTACK_LIST_MEMORY 128MB PING_INTELLIGENCE_CLUSTER_PEER_NODE_CSV_LIST a comma-separated list of hostname:cluster_manager_port or IPv4_address:cluster_manager_port the ASE will try to connect to each server peer in the list PING_INTELLIGENCE_CLUSTER_ID ase_cluster The ASE cluster ID -- this must be unique PING_INTELLIGENCE_CLUSTER_MGMT_PORT 8020 The ASE cluster management port PING_INTELLIGENCE_CLUSTER_SECRET_KEY OBF:AES:nPJOh3wXQWK/BOHrtKu3G2SGiAEElOSvOFYEiWfIVSdummoFwSR8rDh2bBnhTDdJ:7LFcqXQlqkW9kldQoFg0nJoLSojnzHDbD3iAy84pT84 Secret key required to join the cluster PING_INTELLIGENCE_ABS_ENDPOINT a comma-separated list of abs nodes having hostname:port or ipv4:port as an address. PING_INTELLIGENCE_ABS_ACCESS_KEY access key for ase to authenticate with abs node PING_INTELLIGENCE_ABS_SECRET_KEY secret key for ase to authenticate with abs node PING_INTELLIGENCE_ABS_ENABLE_SSL true Setting this value to true will enable encrypted communication with ABS. PING_INTELLIGENCE_ABS_CA_CERT_PATH Configure the location of ABS's trusted CA certificates. PING_INTELLIGENCE_ABS_DEPLOYMENT_TYPE cloud Default deployment type -- Supported values (onprem/cloud) PING_INTELLIGENCE_ABS_DEPLOYMENT_TYPE_VALIDATION true Must be either cloud or onprem PING_INTELLIGENCE_GATEWAY_CREDENTIALS Obtain the appropriate JWT token in PinOne under Connections->PingIntelligence PING_INTELLIGENCE_GATEWAY_CREDENTIALS_REDACT true PING_STARTUP_TIMEOUT 8 The amount of time to wait for ASE to start before exiting TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/ access .log Files tailed once container has started Other potentially useful log file to tail for debug purposes are logs/controller.log and logs/balancer.log Running a PingIntelligence container \u00b6 To run a PingIntelligence container: docker run \\ --name pingintellgence \\ --publish 8443 :8443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER = user@pingone.com \\ --env PING_IDENTITY_DEVOPS_KEY = <edvops key here> \\ --env PING_INTELLIGENCE_GATEWAY_CREDENTIALS = <PingIntelligence App JWT here> \\ --ulimit nofile = 65536 :65536 \\ pingidentity/pingintelligence:edge Follow Docker logs with: docker logs -f pingintelligence If using the command above, use cli.sh with: * Username: admin * Password: 2FederateM0re Docker Container Hook Scripts \u00b6 Please go here for details on all pingintelligence hook scripts This document is auto-generated from pingintelligence/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingIntelligence"},{"location":"docker-images/pingintelligence/#ping-identity-devops-docker-image-pingintelligence-ase","text":"This docker image includes the Ping Identity PingIntelligence API Security Enforcer product binaries and associated hook scripts to create and run PingIntelligence ASE instances.","title":"Ping Identity DevOps Docker Image - pingintelligence-ase"},{"location":"docker-images/pingintelligence/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingintelligence/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingIntelligence_ASE Ping product name LICENSE_FILE_NAME PingIntelligence.lic Name of license File LICENSE_DIR ${SERVER_ROOT_DIR}/config License directory LICENSE_SHORT_NAME pingintelligence Shortname used when retrieving license from License Server LICENSE_VERSION ${LICENSE_VERSION} Version used when retrieving license from License Server STARTUP_COMMAND ${SERVER_ROOT_DIR}/bin/start_ase.sh The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container STARTUP_BACKGROUND_OPTS The command-line options to provide to the the startup command when the container starts with the server in the background. This is the debug start flow for the container ROOT_USER_PASSWORD_FILE ADMIN_USER_PASSWORD_FILE ENCRYPTION_PASSWORD_FILE PING_INTELLIGENCE_ADMIN_USER admin PingIntelligence global variables PingIntelligence default administrative user (this should probably not be changed) PING_INTELLIGENCE_ADMIN_PASSWORD 2FederateM0re PingIntelligence default administrative user credentials (this should be changed) PING_INTELLIGENCE_ASE_HTTP_PORT 8000 The ASE HTTP listener port PING_INTELLIGENCE_ASE_HTTPS_PORT 8443 The ASE HTTPS listener port PING_INTELLIGENCE_ASE_MGMT_PORT 8010 the ASE management port PING_INTELLIGENCE_ASE_TIMEZONE utc The timezone the ASE container is operating in PING_INTELLIGENCE_ASE_ABS_PUBLISH true Whether the ASE should poll the ABS service that publishes discovered APIs PING_INTELLIGENCE_ASE_ABS_PUBLISH_REQUEST_MINUTES 10 The interval in minute to poll the API discovery list PING_INTELLIGENCE_ASE_MODE sideband Defines running mode for API Security Enforcer (Allowed values are inline or sideband). PING_INTELLIGENCE_ASE_ENABLE_SIDEBAND_AUTHENTICATION false Enable client-side authentication with tokens in sideband mode PING_INTELLIGENCE_ASE_HOSTNAME_REWRITE false PING_INTELLIGENCE_ASE_KEYSTORE_PASSWORD OBF:AES:sRNp0W7sSi1zrReXeHodKQ:lXcvbBhKZgDTrjQOfOkzR2mpca4bTUcwPAuerMPwvM4 PING_INTELLIGENCE_ASE_ADMIN_LOG_LEVEL 4 For controller.log and balancer.log only 1-5 (FATAL, ERROR, WARNING, INFO, DEBUG) PING_INTELLIGENCE_ASE_ENABLE_CLUSTER false enable cluster PING_INTELLIGENCE_ASE_SYSLOG_SERVER Syslog server PING_INTELLIGENCE_ASE_CA_CERT_PATH Path the to CA certificate PING_INTELLIGENCE_ASE_ENABLE_HEALTH false enable the ASE health check service PING_INTELLIGENCE_ASE_ENABLE_ABS true Set this value to true, to allow API Security Enforcer to send logs to ABS. PING_INTELLIGENCE_ASE_ENABLE_ABS_ATTACK_LIST_RETRIEVAL true Toggle ABS attack list retrieval PING_INTELLIGENCE_ASE_BLOCK_AUTODETECTED_ATTACKS false Toggle whether ASE blocks auto-detected attacks PING_INTELLIGENCE_ASE_ATTACK_LIST_REFRESH_MINUTES 10 ABS attack list retieval frequency in minutes PING_INTELLIGENCE_ASE_HOSTNAME_REFRESH_SECONDS 60 Hostname refresh interval in seconds PING_INTELLIGENCE_ASE_DECOY_ALERT_INTERVAL_MINUTES 180 Alert interval for teh decoy services PING_INTELLIGENCE_ASE_ENABLE_XFORWARDED_FOR false Toggle X-Forwarded-For PING_INTELLIGENCE_ASE_ENABLE_FIREWALL true Toggle ASE Firewall PING_INTELLIGENCE_ASE_ENABLE_SIDEBAND_KEEPALIVE false Enable connection keepalive for requests from gateway to ASE in sideband mode When enabled, ASE sends 'Connection: keep-alive' header in response When disabled, ASE sends 'Connection: close' header in response PING_INTELLIGENCE_ASE_ENABLE_GOOGLE_PUBSUB false Enable Google Pub/Sub PING_INTELLIGENCE_ASE_ENABLE_ACCESS_LOG true Toggle the access log PING_INTELLIGENCE_ASE_ENABLE_AUDIT false Toggle audit logging PING_INTELLIGENCE_ASE_FLUSH_LOG_IMMEDIATELY true Toggle whether logs are flushed to disk immediately PING_INTELLIGENCE_ASE_HTTP_PROCESS 1 The number of processes for HTTP requests PING_INTELLIGENCE_ASE_HTTPS_PROCESS 1 The number of processes for HTTPS requests PING_INTELLIGENCE_ASE_ENABLE_SSL_V3 false Toggle SSLv3 -- this should absolutely stay disabled PING_INTELLIGENCE_TCP_SEND_BUFFER_BYTES 212992 Kernel TCP send buffer size in bytes PING_INTELLIGENCE_TCP_RECEIVE_BUFFER_BYTES 212992 enrel TCP receive buffer size in bytes PING_INTELLIGENCE_ASE_ATTACK_LIST_MEMORY 128MB PING_INTELLIGENCE_CLUSTER_PEER_NODE_CSV_LIST a comma-separated list of hostname:cluster_manager_port or IPv4_address:cluster_manager_port the ASE will try to connect to each server peer in the list PING_INTELLIGENCE_CLUSTER_ID ase_cluster The ASE cluster ID -- this must be unique PING_INTELLIGENCE_CLUSTER_MGMT_PORT 8020 The ASE cluster management port PING_INTELLIGENCE_CLUSTER_SECRET_KEY OBF:AES:nPJOh3wXQWK/BOHrtKu3G2SGiAEElOSvOFYEiWfIVSdummoFwSR8rDh2bBnhTDdJ:7LFcqXQlqkW9kldQoFg0nJoLSojnzHDbD3iAy84pT84 Secret key required to join the cluster PING_INTELLIGENCE_ABS_ENDPOINT a comma-separated list of abs nodes having hostname:port or ipv4:port as an address. PING_INTELLIGENCE_ABS_ACCESS_KEY access key for ase to authenticate with abs node PING_INTELLIGENCE_ABS_SECRET_KEY secret key for ase to authenticate with abs node PING_INTELLIGENCE_ABS_ENABLE_SSL true Setting this value to true will enable encrypted communication with ABS. PING_INTELLIGENCE_ABS_CA_CERT_PATH Configure the location of ABS's trusted CA certificates. PING_INTELLIGENCE_ABS_DEPLOYMENT_TYPE cloud Default deployment type -- Supported values (onprem/cloud) PING_INTELLIGENCE_ABS_DEPLOYMENT_TYPE_VALIDATION true Must be either cloud or onprem PING_INTELLIGENCE_GATEWAY_CREDENTIALS Obtain the appropriate JWT token in PinOne under Connections->PingIntelligence PING_INTELLIGENCE_GATEWAY_CREDENTIALS_REDACT true PING_STARTUP_TIMEOUT 8 The amount of time to wait for ASE to start before exiting TAIL_LOG_FILES ${SERVER_ROOT_DIR}/logs/ access .log Files tailed once container has started Other potentially useful log file to tail for debug purposes are logs/controller.log and logs/balancer.log","title":"Environment Variables"},{"location":"docker-images/pingintelligence/#running-a-pingintelligence-container","text":"To run a PingIntelligence container: docker run \\ --name pingintellgence \\ --publish 8443 :8443 \\ --detach \\ --env PING_IDENTITY_ACCEPT_EULA = YES \\ --env PING_IDENTITY_DEVOPS_USER = user@pingone.com \\ --env PING_IDENTITY_DEVOPS_KEY = <edvops key here> \\ --env PING_INTELLIGENCE_GATEWAY_CREDENTIALS = <PingIntelligence App JWT here> \\ --ulimit nofile = 65536 :65536 \\ pingidentity/pingintelligence:edge Follow Docker logs with: docker logs -f pingintelligence If using the command above, use cli.sh with: * Username: admin * Password: 2FederateM0re","title":"Running a PingIntelligence container"},{"location":"docker-images/pingintelligence/#docker-container-hook-scripts","text":"Please go here for details on all pingintelligence hook scripts This document is auto-generated from pingintelligence/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingintelligence/hooks/","text":"Ping Identity DevOps pingintelligence Hooks \u00b6 List of available hooks: * 01-start-server.sh.pre * 04-check-variables.sh.post * 50-before-post-start.sh * 80-post-start.sh * pingintelligence.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingintelligence/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingintelligence` Hooks"},{"location":"docker-images/pingintelligence/hooks/#ping-identity-devops-pingintelligence-hooks","text":"List of available hooks: * 01-start-server.sh.pre * 04-check-variables.sh.post * 50-before-post-start.sh * 80-post-start.sh * pingintelligence.lib.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingintelligence/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingintelligence Hooks"},{"location":"docker-images/pingintelligence/hooks/01-start-server.sh.pre/","text":"Ping Identity DevOps pingintelligence Hook - 01-start-server.sh.pre \u00b6 This document is auto-generated from pingintelligence/opt/staging/hooks/01-start-server.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingintelligence` Hook - `01-start-server.sh.pre`"},{"location":"docker-images/pingintelligence/hooks/01-start-server.sh.pre/#ping-identity-devops-pingintelligence-hook-01-start-servershpre","text":"This document is auto-generated from pingintelligence/opt/staging/hooks/01-start-server.sh.pre Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingintelligence Hook - 01-start-server.sh.pre"},{"location":"docker-images/pingintelligence/hooks/04-check-variables.sh.post/","text":"Ping Identity DevOps pingintelligence Hook - 04-check-variables.sh.post \u00b6 This document is auto-generated from pingintelligence/opt/staging/hooks/04-check-variables.sh.post Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingintelligence` Hook - `04-check-variables.sh.post`"},{"location":"docker-images/pingintelligence/hooks/04-check-variables.sh.post/#ping-identity-devops-pingintelligence-hook-04-check-variablesshpost","text":"This document is auto-generated from pingintelligence/opt/staging/hooks/04-check-variables.sh.post Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingintelligence Hook - 04-check-variables.sh.post"},{"location":"docker-images/pingintelligence/hooks/50-before-post-start.sh/","text":"Ping Identity DevOps pingintelligence Hook - 50-before-post-start.sh \u00b6 This document is auto-generated from pingintelligence/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingintelligence` Hook - `50-before-post-start.sh`"},{"location":"docker-images/pingintelligence/hooks/50-before-post-start.sh/#ping-identity-devops-pingintelligence-hook-50-before-post-startsh","text":"This document is auto-generated from pingintelligence/opt/staging/hooks/50-before-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingintelligence Hook - 50-before-post-start.sh"},{"location":"docker-images/pingintelligence/hooks/80-post-start.sh/","text":"Ping Identity DevOps pingintelligence Hook - 80-post-start.sh \u00b6 This hook may be used to set the server if there is a setup procedure Note: The PingData (i.e. Directory, DataSync, PingAuthorize, DirectoryProxy) products will all provide this This document is auto-generated from pingintelligence/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingintelligence` Hook - `80-post-start.sh`"},{"location":"docker-images/pingintelligence/hooks/80-post-start.sh/#ping-identity-devops-pingintelligence-hook-80-post-startsh","text":"This hook may be used to set the server if there is a setup procedure Note: The PingData (i.e. Directory, DataSync, PingAuthorize, DirectoryProxy) products will all provide this This document is auto-generated from pingintelligence/opt/staging/hooks/80-post-start.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingintelligence Hook - 80-post-start.sh"},{"location":"docker-images/pingintelligence/hooks/pingintelligence.lib.sh/","text":"Ping Identity DevOps pingintelligence Hook - pingintelligence.lib.sh \u00b6 This document is auto-generated from pingintelligence/opt/staging/hooks/pingintelligence.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingintelligence` Hook - `pingintelligence.lib.sh`"},{"location":"docker-images/pingintelligence/hooks/pingintelligence.lib.sh/#ping-identity-devops-pingintelligence-hook-pingintelligencelibsh","text":"This document is auto-generated from pingintelligence/opt/staging/hooks/pingintelligence.lib.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingintelligence Hook - pingintelligence.lib.sh"},{"location":"docker-images/pingtoolkit/","text":"Ping Identity DevOps Docker Image - pingtoolkit \u00b6 This docker image includes the Ping Identity PingToolkit and associated hook scripts to create a container that can pull in a SERVER_PROFILE run scripts. The typical use case of this image would be an init container or a pod/container to perform tasks aside a running set of pods/containers. Related Docker Images \u00b6 pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts) Environment Variables \u00b6 In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingToolkit Ping product name STARTUP_COMMAND tail The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS -f /dev/null The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container Docker Container Hook Scripts \u00b6 Please go here for details on all pingtoolkit hook scripts This document is auto-generated from pingtoolkit/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"PingToolkit"},{"location":"docker-images/pingtoolkit/#ping-identity-devops-docker-image-pingtoolkit","text":"This docker image includes the Ping Identity PingToolkit and associated hook scripts to create a container that can pull in a SERVER_PROFILE run scripts. The typical use case of this image would be an init container or a pod/container to perform tasks aside a running set of pods/containers.","title":"Ping Identity DevOps Docker Image - pingtoolkit"},{"location":"docker-images/pingtoolkit/#related-docker-images","text":"pingidentity/pingbase - Parent Image This image inherits, and can use, Environment Variables from pingidentity/pingbase pingidentity/pingcommon - Common Ping files (i.e. hook scripts)","title":"Related Docker Images"},{"location":"docker-images/pingtoolkit/#environment-variables","text":"In addition to environment variables inherited from pingidentity/pingbase , the following environment ENV variables can be used with this image. ENV Variable Default Description SHIM ${SHIM} IMAGE_VERSION ${IMAGE_VERSION} IMAGE_GIT_REV ${IMAGE_GIT_REV} PING_PRODUCT_VERSION ${VERSION} PING_PRODUCT PingToolkit Ping product name STARTUP_COMMAND tail The command that the entrypoint will execute in the foreground to instantiate the container STARTUP_FOREGROUND_OPTS -f /dev/null The command-line options to provide to the the startup command when the container starts with the server in the foreground. This is the normal start flow for the container","title":"Environment Variables"},{"location":"docker-images/pingtoolkit/#docker-container-hook-scripts","text":"Please go here for details on all pingtoolkit hook scripts This document is auto-generated from pingtoolkit/Dockerfile Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Docker Container Hook Scripts"},{"location":"docker-images/pingtoolkit/hooks/","text":"Ping Identity DevOps pingtoolkit Hooks \u00b6 List of available hooks: * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingtoolkit/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingtoolkit` Hooks"},{"location":"docker-images/pingtoolkit/hooks/#ping-identity-devops-pingtoolkit-hooks","text":"List of available hooks: * 17-check-license.sh These hooks will replace hooks defined by parent images (i.e. pingcommon/pingdatacommon) This document is auto-generated from pingtoolkit/opt/staging/hooks Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingtoolkit Hooks"},{"location":"docker-images/pingtoolkit/hooks/17-check-license.sh/","text":"Ping Identity DevOps pingtoolkit Hook - 17-check-license.sh \u00b6 This document is auto-generated from pingtoolkit/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps `pingtoolkit` Hook - `17-check-license.sh`"},{"location":"docker-images/pingtoolkit/hooks/17-check-license.sh/#ping-identity-devops-pingtoolkit-hook-17-check-licensesh","text":"This document is auto-generated from pingtoolkit/opt/staging/hooks/17-check-license.sh Copyright \u00a9 2021 Ping Identity Corporation. All rights reserved.","title":"Ping Identity DevOps pingtoolkit Hook - 17-check-license.sh"},{"location":"get-started/configVars/","text":"Configuration & Environment Variables \u00b6 Configuration and Environment variables allow users to cache secure and repetitive settings into a pingctl config file. The default location of the file is ~/.pingidentity/config . You can specify a given configuration item in one of three ways: the pingctl config file, the user's current environment variables, or through command line arguments. The order of priority (highest to lowest) is: Command-Line argument overrides (when available) pingctl config file Environment variable overrides PingOne Variables \u00b6 The standard PingOne variables used by pingctl are as follows: Variable Description PINGONE_API_URL PingOne API URL (i.e. api.pingone.com/v1) PINGONE_AUTH_URL PingOne Auth URL (i.e. auth.pingone.com, auth.pingone.eu, auth.pingone.asia) PINGONE_ENVIRONMENT_ID PingOne Environment ID GUID PINGONE_WORKER_APP_CLIENT_ID PingOne Worker App ID GUID with access to PingOne Environment PINGONE_WORKER_APP_GRANT_TYPE PingOne Worker App Grant Type to use. Should be one of authorization_code, implicit or client_credential PINGONE_WORKER_APP_REDIRECT_URI PingOne Worker App available redirect_uri. Defaults to http://localhost:8000 PINGONE_WORKER_APP_CLIENT_SECRET PingOne Worker App Secret providing authentication to PingOne Worker App ID GUID Legacy ping-devops Variables \u00b6 Prior to the pingctl CLI tool, ping-devops was used to help with the management of docker, docker-console, and kustomize deployments (this utility has been deprecated). In configuring the legacy tool, several variables were used when deploying docker images into different environments. The legacy variables still supported and managed by pingctl are as follows: Variable Description PING_IDENTITY_ACCEPT_EULA Specify YES or NO to accept Ping Identity EULA PING_IDENTITY_DEVOPS_USER Ping DevOps User PING_IDENTITY_DEVOPS_KEY Ping DevOps Key PING_IDENTITY_DEVOPS_HOME Home directory/path of your DevOps projects PING_IDENTITY_DEVOPS_REGISTRY Default Docker registry from which to pull images PING_IDENTITY_DEVOPS_TAG Default DevOps tag to use for deployments (i.e. 2205) pingctl Variables \u00b6 Additional variables honored by pingctl are: Variable Description PINGCTL_CONFIG Location of the pingctl configuration file. Set as an environment variable only. Default: ~/.pingidentity/config PINGCTL_DEFAULT_OUTPUT Specifies default format of data returned. Command-Line arg -o . Default: table PINGCTL_DEFAULT_POPULATION Specifies default population to use for PingOne commands. Command-Line arg -p . Default: Default PINGCTL_OUTPUT_COLUMNS_{resource_type} Specify custom format of table csv data to be returned. Command-Line arg -c . See more detail below PINGCTL_OUTPUT_SORT_{resource_type} Specify column to use for sorting data. Command-Line arg -s . See more detail below PINGCTL_OUTPUT_COLUMNS \u00b6 There are two classes of variables provided by PINGCTL_OUTPUT : PINGCTL_OUTPUT_COLUMNS_{resource} - Specifies the columns to display whenever a pingctl pingone get {resource} command is used. Same as the -c option on the command-line (see pingctl pingone get command). Format of value should be constructed with HeadingName:jsonName,HeadingName:jsonName . The best way to understand is by looking at the example of the default USERS resource: Example PINGCTL_OUTPUT_COLUMNS_USERS setting and output PINGCTL_OUTPUT_COLUMNS_USERS=LastName:name.family,FirstName:name.given Setting the above will generate output similar to: ``` $ pingctl pingone get users LastName FirstName -------- --------- Badham Antonik Agn\u00e8s Enterle -- 2 'USERS' returned ``` Alternatively, you can use the `-c` option as a command-line argument: ``` $ pingctl pingone get users -c \"LastName:name.family,FirstName:name.given,Username:username\" LastName FirstName Username -------- --------- -------- Badham Antonik antonik_adham Agn\u00e8s Enterle enterle_agn\u00e8s -- 2 'USERS' returned ``` PINGCTL_OUTPUT_SORT \u00b6 PINGCTL_OUTPUT_SORT_{resource} - specifies the column on which to sort. Same as the -s option on the command-line (see pingctl pingone get command). Format of the value should be constructed with jsonName . The name must be one of the entries in PINGCTL_OUTPUT_COLUMNS_{resource} . Example PINGCTL_OUTPUT_SORT_USERS setting and output PINGCTL_OUTPUT_SORT_USERS=name.family Setting the above will generate output similar to the following (note that the LastName (name.family) is sorted): $ pingctl pingone get users LastName FirstName -------- --------- Agn\u00e8s Enterle Badham Antonik -- 2 'USERS' returned Alternatively, you can use the -s option as a command-line argument: $ pingctl pingone get users -s \"name.given\" LastName FirstName Username -------- --------- -------- Agn\u00e8s Enterle enterle_agn\u00e8s Badham Antonik antonik_badham -- 2 'USERS' returned","title":"Environment Configuration"},{"location":"get-started/configVars/#configuration-environment-variables","text":"Configuration and Environment variables allow users to cache secure and repetitive settings into a pingctl config file. The default location of the file is ~/.pingidentity/config . You can specify a given configuration item in one of three ways: the pingctl config file, the user's current environment variables, or through command line arguments. The order of priority (highest to lowest) is: Command-Line argument overrides (when available) pingctl config file Environment variable overrides","title":"Configuration &amp; Environment Variables"},{"location":"get-started/configVars/#pingone-variables","text":"The standard PingOne variables used by pingctl are as follows: Variable Description PINGONE_API_URL PingOne API URL (i.e. api.pingone.com/v1) PINGONE_AUTH_URL PingOne Auth URL (i.e. auth.pingone.com, auth.pingone.eu, auth.pingone.asia) PINGONE_ENVIRONMENT_ID PingOne Environment ID GUID PINGONE_WORKER_APP_CLIENT_ID PingOne Worker App ID GUID with access to PingOne Environment PINGONE_WORKER_APP_GRANT_TYPE PingOne Worker App Grant Type to use. Should be one of authorization_code, implicit or client_credential PINGONE_WORKER_APP_REDIRECT_URI PingOne Worker App available redirect_uri. Defaults to http://localhost:8000 PINGONE_WORKER_APP_CLIENT_SECRET PingOne Worker App Secret providing authentication to PingOne Worker App ID GUID","title":"PingOne Variables"},{"location":"get-started/configVars/#legacy-ping-devops-variables","text":"Prior to the pingctl CLI tool, ping-devops was used to help with the management of docker, docker-console, and kustomize deployments (this utility has been deprecated). In configuring the legacy tool, several variables were used when deploying docker images into different environments. The legacy variables still supported and managed by pingctl are as follows: Variable Description PING_IDENTITY_ACCEPT_EULA Specify YES or NO to accept Ping Identity EULA PING_IDENTITY_DEVOPS_USER Ping DevOps User PING_IDENTITY_DEVOPS_KEY Ping DevOps Key PING_IDENTITY_DEVOPS_HOME Home directory/path of your DevOps projects PING_IDENTITY_DEVOPS_REGISTRY Default Docker registry from which to pull images PING_IDENTITY_DEVOPS_TAG Default DevOps tag to use for deployments (i.e. 2205)","title":"Legacy ping-devops Variables"},{"location":"get-started/configVars/#pingctl-variables","text":"Additional variables honored by pingctl are: Variable Description PINGCTL_CONFIG Location of the pingctl configuration file. Set as an environment variable only. Default: ~/.pingidentity/config PINGCTL_DEFAULT_OUTPUT Specifies default format of data returned. Command-Line arg -o . Default: table PINGCTL_DEFAULT_POPULATION Specifies default population to use for PingOne commands. Command-Line arg -p . Default: Default PINGCTL_OUTPUT_COLUMNS_{resource_type} Specify custom format of table csv data to be returned. Command-Line arg -c . See more detail below PINGCTL_OUTPUT_SORT_{resource_type} Specify column to use for sorting data. Command-Line arg -s . See more detail below","title":"pingctl Variables"},{"location":"get-started/configVars/#pingctl_output_columns","text":"There are two classes of variables provided by PINGCTL_OUTPUT : PINGCTL_OUTPUT_COLUMNS_{resource} - Specifies the columns to display whenever a pingctl pingone get {resource} command is used. Same as the -c option on the command-line (see pingctl pingone get command). Format of value should be constructed with HeadingName:jsonName,HeadingName:jsonName . The best way to understand is by looking at the example of the default USERS resource: Example PINGCTL_OUTPUT_COLUMNS_USERS setting and output PINGCTL_OUTPUT_COLUMNS_USERS=LastName:name.family,FirstName:name.given Setting the above will generate output similar to: ``` $ pingctl pingone get users LastName FirstName -------- --------- Badham Antonik Agn\u00e8s Enterle -- 2 'USERS' returned ``` Alternatively, you can use the `-c` option as a command-line argument: ``` $ pingctl pingone get users -c \"LastName:name.family,FirstName:name.given,Username:username\" LastName FirstName Username -------- --------- -------- Badham Antonik antonik_adham Agn\u00e8s Enterle enterle_agn\u00e8s -- 2 'USERS' returned ```","title":"PINGCTL_OUTPUT_COLUMNS"},{"location":"get-started/configVars/#pingctl_output_sort","text":"PINGCTL_OUTPUT_SORT_{resource} - specifies the column on which to sort. Same as the -s option on the command-line (see pingctl pingone get command). Format of the value should be constructed with jsonName . The name must be one of the entries in PINGCTL_OUTPUT_COLUMNS_{resource} . Example PINGCTL_OUTPUT_SORT_USERS setting and output PINGCTL_OUTPUT_SORT_USERS=name.family Setting the above will generate output similar to the following (note that the LastName (name.family) is sorted): $ pingctl pingone get users LastName FirstName -------- --------- Agn\u00e8s Enterle Badham Antonik -- 2 'USERS' returned Alternatively, you can use the -s option as a command-line argument: $ pingctl pingone get users -s \"name.given\" LastName FirstName Username -------- --------- -------- Agn\u00e8s Enterle enterle_agn\u00e8s Badham Antonik antonik_badham -- 2 'USERS' returned","title":"PINGCTL_OUTPUT_SORT"},{"location":"get-started/getStartedExample/","text":"Deploy an Example Stack \u00b6 Orchestration note In the past, Docker Compose was used for many of our product container examples. We are no longer maintaining or supporting Docker Compose, and recommend the use of the Ping Helm charts for working with Ping products in a containerized model. Networking This example was written using Docker Desktop with Kubernetes enabled. As such, there is no ingress controller deployed, so for accessing the consoles, a kubectl port-forward is used. See the Kubernetes documentation for more details on the port-forward command. The Ping Identity Helm Getting Started page has instructions on getting your environment configured for using the Ping Helm charts. For more examples, see Helm Chart Example Configurations . For more information on Helm with Ping products, see Ping Identity DevOps Helm Charts . What You Will Do \u00b6 After using Git to clone the pingidentity-devops-getting-started repository, you will use Helm to deploy a sample stack to a Kubernetes cluster. Prerequisites \u00b6 Register for the Ping DevOps program and install/configure pingctl with your User and Key Install Git Follow the instructions on the helm Getting Started page up through updating to the latest charts to ensure you have the latest version of our charts Access to a Kubernetes cluster. You can enable Kubernetes in Docker Desktop for a simple cluster, which was the cluster used for this guide (on the Mac platform). Clone the getting-started repository \u00b6 Clone the pingidentity-devops-getting-started repository to your local ${PING_IDENTITY_DEVOPS_HOME} directory. The ${PING_IDENTITY_DEVOPS_HOME} environment variable was set by running pingctl config . cd \" ${ PING_IDENTITY_DEVOPS_HOME } \" git clone \\ https://github.com/pingidentity/pingidentity-devops-getting-started.git Deploy the example stack \u00b6 Deploy the example stack of our product containers. Initial Deployment For this guide, avoid making changes to the everything.yaml file to ensure a successful first-time deployment. Create a namespace for running the stack in your Kubernetes cluster. # Create the namespace kubectl create ns pinghelm # Set the kubectl context to the namespace kubectl config set-context --current --namespace = pinghelm # Confirm kubectl config view --minify | grep namespace: Create a secret in the namespace you will be using to run the example using the pingctl utility. This secret will obtain an evaluation license based on your Ping DevOps username and key: pingctl k8s generate devops-secret | kubectl apply -f - To install the chart, go to your local \"${PING_IDENTITY_DEVOPS_HOME}\"/pingidentity-devops-getting-started/30-helm directory and run the command shown here. In this example, the release (deployment into Kubernetes by Helm) is called demo , forming the prefix for all objects created: helm install demo pingidentity/ping-devops -f everything.yaml The product Docker images are automatically pulled if they have not previously been pulled from Docker Hub . Sample output: NAME: demo LAST DEPLOYED: Wed Jun 29 14:10:53 2022 NAMESPACE: helm STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: #------------------------------------------------------------------------------------- # Ping DevOps # # Description: Ping Identity helm charts - 06/02/22 #------------------------------------------------------------------------------------- # # Product tag typ # cpu R/L mem R/L Ing # --------------------- ------- --- -- --------- --------- --- # global 2205 0/0 0/0 # # \u221a pingaccess-admin 2205 / / # \u221a pingaccess-engine 2205 / / # \u221a pingauthorize 2205 / / # pingauthorizepap # pingcentral # \u221a pingdataconsole 2205 / / # pingdatagovernance # pingdatagovernancepap # pingdatasync # pingdelegator # \u221a pingdirectory 2205 / / # pingdirectoryproxy # \u221a pingfederate-admin 2205 / / # \u221a pingfederate-engine 2205 / / # # ldap-sdk-tools # pd-replication-timing # pingtoolkit # #------------------------------------------------------------------------------------- # To see values info, simply set one of the following on your helm install/upgrade # # --set help.values=all # Provides all (i.e. .Values, .Release, .Chart, ...) yaml # --set help.values=global # Provides global values # --set help.values={ image } # Provides image values merged with global #------------------------------------------------------------------------------------- As you can see, PingAccess Admin and Engine, PingData Console, PingDirectory, and the PingFederate Admin and Engine are deployed from the provided everything.yaml values file. It will take several minutes for all components to become operational. To display the status of the deployed components, you can use k9s or issue the corresponding commands shown here: Display the services (endpoints for connecting) by running kubectl get service --selector=app.kubernetes.io/instance=demo NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE demo-pingaccess-admin ClusterIP 10.96.234.72 <none> 9090/TCP,9000/TCP 15m demo-pingaccess-admin-cluster ClusterIP None <none> <none> 15m demo-pingaccess-engine ClusterIP 10.106.190.217 <none> 3000/TCP 15m demo-pingauthorize ClusterIP 10.104.246.123 <none> 443/TCP 15m demo-pingauthorize-cluster ClusterIP None <none> 1636/TCP 15m demo-pingdataconsole ClusterIP 10.96.166.28 <none> 8443/TCP 15m demo-pingdirectory ClusterIP 10.107.42.8 <none> 443/TCP,389/TCP,636/TCP 15m demo-pingdirectory-cluster ClusterIP None <none> 1636/TCP 15m demo-pingfederate-admin ClusterIP 10.105.26.94 <none> 9999/TCP 15m demo-pingfederate-cluster ClusterIP None <none> 7600/TCP,7700/TCP 15m demo-pingfederate-engine ClusterIP 10.99.223.48 <none> 9031/TCP 15m To view the pods, run kubectl get pods --selector=app.kubernetes.io/instance=demo - you will need to run this at intervals until all pods have started ( Running status): NAME READY STATUS RESTARTS AGE demo-pingaccess-admin-0 1/1 Running 0 7m29s demo-pingaccess-engine-cf9987bb5-npspz 1/1 Running 0 7m52s demo-pingauthorize-8bdfd4fd8-j82zg 1/1 Running 0 7m43s demo-pingdataconsole-7c875985d4-mfjbq 1/1 Running 0 17m demo-pingdirectory-0 1/1 Running 0 7m38s demo-pingfederate-admin-5786787dfd-5b5s5 1/1 Running 0 7m36s demo-pingfederate-engine-5ff6546f4f-7jfnt 1/1 Running 0 7m31s To see everything tied to the helm release run kubectl get all --selector=app.kubernetes.io/instance=demo : NAME READY STATUS RESTARTS AGE pod/demo-pingaccess-admin-0 1/1 Running 0 107m pod/demo-pingaccess-engine-cf9987bb5-npspz 1/1 Running 0 107m pod/demo-pingauthorize-8bdfd4fd8-j82zg 1/1 Running 0 107m pod/demo-pingdataconsole-7c875985d4-mfjbq 1/1 Running 0 116m pod/demo-pingdirectory-0 1/1 Running 0 107m pod/demo-pingfederate-admin-5786787dfd-5b5s5 1/1 Running 0 107m pod/demo-pingfederate-engine-5ff6546f4f-7jfnt 1/1 Running 0 107m NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/demo-pingaccess-admin ClusterIP 10.96.234.72 <none> 9090/TCP,9000/TCP 116m service/demo-pingaccess-admin-cluster ClusterIP None <none> <none> 116m service/demo-pingaccess-engine ClusterIP 10.106.190.217 <none> 3000/TCP 116m service/demo-pingauthorize ClusterIP 10.104.246.123 <none> 443/TCP 116m service/demo-pingauthorize-cluster ClusterIP None <none> 1636/TCP 116m service/demo-pingdataconsole ClusterIP 10.96.166.28 <none> 8443/TCP 116m service/demo-pingdirectory ClusterIP 10.107.42.8 <none> 443/TCP,389/TCP,636/TCP 116m service/demo-pingdirectory-cluster ClusterIP None <none> 1636/TCP 116m service/demo-pingfederate-admin ClusterIP 10.105.26.94 <none> 9999/TCP 116m service/demo-pingfederate-cluster ClusterIP None <none> 7600/TCP,7700/TCP 116m service/demo-pingfederate-engine ClusterIP 10.99.223.48 <none> 9031/TCP 116m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/demo-pingaccess-engine 1/1 1 1 116m deployment.apps/demo-pingauthorize 1/1 1 1 116m deployment.apps/demo-pingdataconsole 1/1 1 1 116m deployment.apps/demo-pingfederate-admin 1/1 1 1 116m deployment.apps/demo-pingfederate-engine 1/1 1 1 116m NAME DESIRED CURRENT READY AGE replicaset.apps/demo-pingaccess-engine-cf9987bb5 1 1 1 116m replicaset.apps/demo-pingauthorize-8bdfd4fd8 1 1 1 116m replicaset.apps/demo-pingdataconsole-7c875985d4 1 1 1 116m replicaset.apps/demo-pingfederate-admin-5786787dfd 1 1 1 116m replicaset.apps/demo-pingfederate-engine-5ff6546f4f 1 1 1 116m NAME READY AGE statefulset.apps/demo-pingaccess-admin 1/1 116m statefulset.apps/demo-pingdirectory 1/1 116m To view logs, look at the logs for the deployment of the product in question. For example: kubectl logs -f deployment/demo-pingfederate-admin These are the URLs and credentials to sign on to the management consoles for the products. Access to Kubernetes services The default networking type for services in the chart is ClusterIP . This type is internal-only to the Kubernetes cluster. For production environments, or if your cluster has an ingress controller configured, refer to the ingress.yaml file in the 30-helm directory of this repository to enable outside access to services in the cluster. For this guide, there is no ingress in place on Docker Desktop, so a kubectl port-forward command is required. This command provides a tunnel into the cluster from your local machine to the given service. The syntax is kubectl port-forward <service name> <localport>:<service port> For example, the services output in the previous step indicates that the PingFederate Admin console service (demo-pingfederate-admin) is listening on port 9999. To access it from your local system, run the following command and then navigate to https://localhost:9999 in your browser: kubectl port-forward svc/demo-pingfederate-admin 9999 :9999 Certificates This example uses self-signed certificates that will have to be accepted in your browser or added to your keystore. While the local port does not have to match the service port, it is recommended for simplicity. If you use a different local port, adjust the URLS below accordingly. With the appropriate port-forward in place, you can access the products at these defaults. Product Connection Details PingFederate URL: https://localhost:9999/pingfederate/app Username: administrator Password: 2FederateM0re PingDirectory URL: https://localhost:8443/console Server: ldaps://demo-pingdirectory-cluster:1636 Username: administrator Password: 2FederateM0re PingAccess URL: https://localhost:9000 Username: administrator Password: 2FederateM0re PingAuthorize URL: https://localhost:8443/console Server: ldaps://demo-pingauthorize-cluster:1636 Username: administrator Password: 2FederateM0re When you are finished, you can remove the demonstration components by running the uninstall command for helm: helm uninstall demo Next Steps \u00b6 Now that you have deployed a set of our product images using the provided chart, you can move on to deployments using configurations that more closely reflect use cases to be explored. Refer to the helm examples ) page for other typical deployments.","title":"Deploy Example Stack"},{"location":"get-started/getStartedExample/#deploy-an-example-stack","text":"Orchestration note In the past, Docker Compose was used for many of our product container examples. We are no longer maintaining or supporting Docker Compose, and recommend the use of the Ping Helm charts for working with Ping products in a containerized model. Networking This example was written using Docker Desktop with Kubernetes enabled. As such, there is no ingress controller deployed, so for accessing the consoles, a kubectl port-forward is used. See the Kubernetes documentation for more details on the port-forward command. The Ping Identity Helm Getting Started page has instructions on getting your environment configured for using the Ping Helm charts. For more examples, see Helm Chart Example Configurations . For more information on Helm with Ping products, see Ping Identity DevOps Helm Charts .","title":"Deploy an Example Stack"},{"location":"get-started/getStartedExample/#what-you-will-do","text":"After using Git to clone the pingidentity-devops-getting-started repository, you will use Helm to deploy a sample stack to a Kubernetes cluster.","title":"What You Will Do"},{"location":"get-started/getStartedExample/#prerequisites","text":"Register for the Ping DevOps program and install/configure pingctl with your User and Key Install Git Follow the instructions on the helm Getting Started page up through updating to the latest charts to ensure you have the latest version of our charts Access to a Kubernetes cluster. You can enable Kubernetes in Docker Desktop for a simple cluster, which was the cluster used for this guide (on the Mac platform).","title":"Prerequisites"},{"location":"get-started/getStartedExample/#clone-the-getting-started-repository","text":"Clone the pingidentity-devops-getting-started repository to your local ${PING_IDENTITY_DEVOPS_HOME} directory. The ${PING_IDENTITY_DEVOPS_HOME} environment variable was set by running pingctl config . cd \" ${ PING_IDENTITY_DEVOPS_HOME } \" git clone \\ https://github.com/pingidentity/pingidentity-devops-getting-started.git","title":"Clone the getting-started repository"},{"location":"get-started/getStartedExample/#deploy-the-example-stack","text":"Deploy the example stack of our product containers. Initial Deployment For this guide, avoid making changes to the everything.yaml file to ensure a successful first-time deployment. Create a namespace for running the stack in your Kubernetes cluster. # Create the namespace kubectl create ns pinghelm # Set the kubectl context to the namespace kubectl config set-context --current --namespace = pinghelm # Confirm kubectl config view --minify | grep namespace: Create a secret in the namespace you will be using to run the example using the pingctl utility. This secret will obtain an evaluation license based on your Ping DevOps username and key: pingctl k8s generate devops-secret | kubectl apply -f - To install the chart, go to your local \"${PING_IDENTITY_DEVOPS_HOME}\"/pingidentity-devops-getting-started/30-helm directory and run the command shown here. In this example, the release (deployment into Kubernetes by Helm) is called demo , forming the prefix for all objects created: helm install demo pingidentity/ping-devops -f everything.yaml The product Docker images are automatically pulled if they have not previously been pulled from Docker Hub . Sample output: NAME: demo LAST DEPLOYED: Wed Jun 29 14:10:53 2022 NAMESPACE: helm STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: #------------------------------------------------------------------------------------- # Ping DevOps # # Description: Ping Identity helm charts - 06/02/22 #------------------------------------------------------------------------------------- # # Product tag typ # cpu R/L mem R/L Ing # --------------------- ------- --- -- --------- --------- --- # global 2205 0/0 0/0 # # \u221a pingaccess-admin 2205 / / # \u221a pingaccess-engine 2205 / / # \u221a pingauthorize 2205 / / # pingauthorizepap # pingcentral # \u221a pingdataconsole 2205 / / # pingdatagovernance # pingdatagovernancepap # pingdatasync # pingdelegator # \u221a pingdirectory 2205 / / # pingdirectoryproxy # \u221a pingfederate-admin 2205 / / # \u221a pingfederate-engine 2205 / / # # ldap-sdk-tools # pd-replication-timing # pingtoolkit # #------------------------------------------------------------------------------------- # To see values info, simply set one of the following on your helm install/upgrade # # --set help.values=all # Provides all (i.e. .Values, .Release, .Chart, ...) yaml # --set help.values=global # Provides global values # --set help.values={ image } # Provides image values merged with global #------------------------------------------------------------------------------------- As you can see, PingAccess Admin and Engine, PingData Console, PingDirectory, and the PingFederate Admin and Engine are deployed from the provided everything.yaml values file. It will take several minutes for all components to become operational. To display the status of the deployed components, you can use k9s or issue the corresponding commands shown here: Display the services (endpoints for connecting) by running kubectl get service --selector=app.kubernetes.io/instance=demo NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE demo-pingaccess-admin ClusterIP 10.96.234.72 <none> 9090/TCP,9000/TCP 15m demo-pingaccess-admin-cluster ClusterIP None <none> <none> 15m demo-pingaccess-engine ClusterIP 10.106.190.217 <none> 3000/TCP 15m demo-pingauthorize ClusterIP 10.104.246.123 <none> 443/TCP 15m demo-pingauthorize-cluster ClusterIP None <none> 1636/TCP 15m demo-pingdataconsole ClusterIP 10.96.166.28 <none> 8443/TCP 15m demo-pingdirectory ClusterIP 10.107.42.8 <none> 443/TCP,389/TCP,636/TCP 15m demo-pingdirectory-cluster ClusterIP None <none> 1636/TCP 15m demo-pingfederate-admin ClusterIP 10.105.26.94 <none> 9999/TCP 15m demo-pingfederate-cluster ClusterIP None <none> 7600/TCP,7700/TCP 15m demo-pingfederate-engine ClusterIP 10.99.223.48 <none> 9031/TCP 15m To view the pods, run kubectl get pods --selector=app.kubernetes.io/instance=demo - you will need to run this at intervals until all pods have started ( Running status): NAME READY STATUS RESTARTS AGE demo-pingaccess-admin-0 1/1 Running 0 7m29s demo-pingaccess-engine-cf9987bb5-npspz 1/1 Running 0 7m52s demo-pingauthorize-8bdfd4fd8-j82zg 1/1 Running 0 7m43s demo-pingdataconsole-7c875985d4-mfjbq 1/1 Running 0 17m demo-pingdirectory-0 1/1 Running 0 7m38s demo-pingfederate-admin-5786787dfd-5b5s5 1/1 Running 0 7m36s demo-pingfederate-engine-5ff6546f4f-7jfnt 1/1 Running 0 7m31s To see everything tied to the helm release run kubectl get all --selector=app.kubernetes.io/instance=demo : NAME READY STATUS RESTARTS AGE pod/demo-pingaccess-admin-0 1/1 Running 0 107m pod/demo-pingaccess-engine-cf9987bb5-npspz 1/1 Running 0 107m pod/demo-pingauthorize-8bdfd4fd8-j82zg 1/1 Running 0 107m pod/demo-pingdataconsole-7c875985d4-mfjbq 1/1 Running 0 116m pod/demo-pingdirectory-0 1/1 Running 0 107m pod/demo-pingfederate-admin-5786787dfd-5b5s5 1/1 Running 0 107m pod/demo-pingfederate-engine-5ff6546f4f-7jfnt 1/1 Running 0 107m NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/demo-pingaccess-admin ClusterIP 10.96.234.72 <none> 9090/TCP,9000/TCP 116m service/demo-pingaccess-admin-cluster ClusterIP None <none> <none> 116m service/demo-pingaccess-engine ClusterIP 10.106.190.217 <none> 3000/TCP 116m service/demo-pingauthorize ClusterIP 10.104.246.123 <none> 443/TCP 116m service/demo-pingauthorize-cluster ClusterIP None <none> 1636/TCP 116m service/demo-pingdataconsole ClusterIP 10.96.166.28 <none> 8443/TCP 116m service/demo-pingdirectory ClusterIP 10.107.42.8 <none> 443/TCP,389/TCP,636/TCP 116m service/demo-pingdirectory-cluster ClusterIP None <none> 1636/TCP 116m service/demo-pingfederate-admin ClusterIP 10.105.26.94 <none> 9999/TCP 116m service/demo-pingfederate-cluster ClusterIP None <none> 7600/TCP,7700/TCP 116m service/demo-pingfederate-engine ClusterIP 10.99.223.48 <none> 9031/TCP 116m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/demo-pingaccess-engine 1/1 1 1 116m deployment.apps/demo-pingauthorize 1/1 1 1 116m deployment.apps/demo-pingdataconsole 1/1 1 1 116m deployment.apps/demo-pingfederate-admin 1/1 1 1 116m deployment.apps/demo-pingfederate-engine 1/1 1 1 116m NAME DESIRED CURRENT READY AGE replicaset.apps/demo-pingaccess-engine-cf9987bb5 1 1 1 116m replicaset.apps/demo-pingauthorize-8bdfd4fd8 1 1 1 116m replicaset.apps/demo-pingdataconsole-7c875985d4 1 1 1 116m replicaset.apps/demo-pingfederate-admin-5786787dfd 1 1 1 116m replicaset.apps/demo-pingfederate-engine-5ff6546f4f 1 1 1 116m NAME READY AGE statefulset.apps/demo-pingaccess-admin 1/1 116m statefulset.apps/demo-pingdirectory 1/1 116m To view logs, look at the logs for the deployment of the product in question. For example: kubectl logs -f deployment/demo-pingfederate-admin These are the URLs and credentials to sign on to the management consoles for the products. Access to Kubernetes services The default networking type for services in the chart is ClusterIP . This type is internal-only to the Kubernetes cluster. For production environments, or if your cluster has an ingress controller configured, refer to the ingress.yaml file in the 30-helm directory of this repository to enable outside access to services in the cluster. For this guide, there is no ingress in place on Docker Desktop, so a kubectl port-forward command is required. This command provides a tunnel into the cluster from your local machine to the given service. The syntax is kubectl port-forward <service name> <localport>:<service port> For example, the services output in the previous step indicates that the PingFederate Admin console service (demo-pingfederate-admin) is listening on port 9999. To access it from your local system, run the following command and then navigate to https://localhost:9999 in your browser: kubectl port-forward svc/demo-pingfederate-admin 9999 :9999 Certificates This example uses self-signed certificates that will have to be accepted in your browser or added to your keystore. While the local port does not have to match the service port, it is recommended for simplicity. If you use a different local port, adjust the URLS below accordingly. With the appropriate port-forward in place, you can access the products at these defaults. Product Connection Details PingFederate URL: https://localhost:9999/pingfederate/app Username: administrator Password: 2FederateM0re PingDirectory URL: https://localhost:8443/console Server: ldaps://demo-pingdirectory-cluster:1636 Username: administrator Password: 2FederateM0re PingAccess URL: https://localhost:9000 Username: administrator Password: 2FederateM0re PingAuthorize URL: https://localhost:8443/console Server: ldaps://demo-pingauthorize-cluster:1636 Username: administrator Password: 2FederateM0re When you are finished, you can remove the demonstration components by running the uninstall command for helm: helm uninstall demo","title":"Deploy the example stack"},{"location":"get-started/getStartedExample/#next-steps","text":"Now that you have deployed a set of our product images using the provided chart, you can move on to deployments using configurations that more closely reflect use cases to be explored. Refer to the helm examples ) page for other typical deployments.","title":"Next Steps"},{"location":"get-started/introduction/","text":"Introduction \u00b6 This section outlines ways to easily deploy Ping products with pre-defined configurations. After you have successfully deployed using this example, you can try other provided examples or move on to customizing the products to fit your needs and environment. You will need to register for the Ping DevOps program in order to obtain trial licenses for evaluating or testing with our products. After registering at the link above, you will be provided a username and key. These credentials provide a temporary license for your evaluation. See using your DevOps User and Key for instructions on use. Finally, to manage PingOne resources using credentials other than your own, you are required to have a PingOne Worker App. See this configuration page for more details on configuration.","title":"Introduction"},{"location":"get-started/introduction/#introduction","text":"This section outlines ways to easily deploy Ping products with pre-defined configurations. After you have successfully deployed using this example, you can try other provided examples or move on to customizing the products to fit your needs and environment. You will need to register for the Ping DevOps program in order to obtain trial licenses for evaluating or testing with our products. After registering at the link above, you will be provided a username and key. These credentials provide a temporary license for your evaluation. See using your DevOps User and Key for instructions on use. Finally, to manage PingOne resources using credentials other than your own, you are required to have a PingOne Worker App. See this configuration page for more details on configuration.","title":"Introduction"},{"location":"get-started/prereqs/","text":"Prerequisites \u00b6 In order to use our resources, you will need the following components, software, or other information. Product license \u00b6 You must have a product license to run our images. You may either use an evaluation license or existing license. Evaluation License \u00b6 Generate an evaluation license obtained with a valid DevOps user key . When you register for Ping Identity's DevOps program, you are issued credentials that automate the process of retrieving an evaluation product license. DevOps User and Key For more information about using your DevOps program user and key in various ways (including Kubernetes and with stand-alone containers) see this how-to guide: Using Your Devops User and Key Evaluation License Evaluation licenses are short-lived (30 days) and must not be used in production deployments. Evaluation licenses can only be used with images published in the last 90 days. If you want to continue to use an image that was published more than 90 days ago, you must obtain a product license. Existing License \u00b6 If you possess a product license for the product, you can use it with supported versions of the image (including those over 90 days old mentioned above) by following these instructions to mount the product license . Mount paths The mount points and name of the license file vary by product. The link above provides the proper location and name for these files. Local runtime environment \u00b6 The initial example uses Kubernetes under Docker Desktop because it does not require a lot of configuration. In order to try Ping products in a manner most similar to typical production installations, you should consider using a Kubernetes environment. Kind ( K ubernetes in D ocker) provides a platform to get started with local Kubernetes development. Instructions for setting up a Kind cluster are here . Other local Kubernetes environments include Rancher Desktop , Docker Desktop with Kubernetes enabled, and minikube . Rancher Desktop Rancher Desktop is compatible with Linux, MacOS, and Windows (using WSL). It also supports the docker container runtime , which provides support for running docker commands without installing individual docker components or Docker Desktop. For running Docker Compose deployments of single products, any Docker Desktop installation or Linux system with Docker and docker compose installed can be used. Applications / Utilities \u00b6 Helm cli kubectl Homebrew for package installation and management. Homebrew can be used to install k9s, kubectl, helm, and other programs. /bin/bash -c \" $( curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh ) \" pingctl brew install pingidentity/tap/pingctl Recommended Additional Utilities \u00b6 k9s brew install derailed/k9s/k9s kubectx brew install kubectx docker-compose brew install docker-compose Info Installing docker-compose is only necessary to deploy Docker containers when using Docker with Rancher Desktop. It is included with the Docker Desktop installation. See Rancher preferences to switch from containerd to dockerd (moby). Configure the Environment \u00b6 Open a terminal and create a local DevOps directory named ${HOME}/projects/devops . Info ${HOME}/projects/devops is the parent directory for all examples referenced in our documentation. Configure the environment as follows. pingctl config Respond to all configuration questions, accepting the defaults if uncertain. Settings for custom variables aren't needed initially but may be necessary for additional capabilities. All responses are captured in your local ~/.pingidentity/config file. Allow the configuration script to source this file in your shell profile (for example, ~/.bash_profile in a bash shell). [Optional] Export configured pingctl variables as environment variables Modify your shell profile (for example, ~/.bash_profile in a bash shell) so that the generated source ~/.pingidentity/config command is surrounded by set -a and set +a statements. set -a # Ping Identity - Added with 'pingctl config' on Fri Apr 22 13:57:04 MDT 2022 test -f '${HOME}/.pingidentity/config' && source '${HOME}/.pingidentity/config' set +a Verify configured variables are exported in your environment. 1. Restart your shell or source your shell profile . 2. Run ` env | grep ' PING '` To display your environment settings, run: pingctl info For more information on the options available for pingctl see Configuration & Environment Variables .","title":"Prerequisites"},{"location":"get-started/prereqs/#prerequisites","text":"In order to use our resources, you will need the following components, software, or other information.","title":"Prerequisites"},{"location":"get-started/prereqs/#product-license","text":"You must have a product license to run our images. You may either use an evaluation license or existing license.","title":"Product license"},{"location":"get-started/prereqs/#evaluation-license","text":"Generate an evaluation license obtained with a valid DevOps user key . When you register for Ping Identity's DevOps program, you are issued credentials that automate the process of retrieving an evaluation product license. DevOps User and Key For more information about using your DevOps program user and key in various ways (including Kubernetes and with stand-alone containers) see this how-to guide: Using Your Devops User and Key Evaluation License Evaluation licenses are short-lived (30 days) and must not be used in production deployments. Evaluation licenses can only be used with images published in the last 90 days. If you want to continue to use an image that was published more than 90 days ago, you must obtain a product license.","title":"Evaluation License"},{"location":"get-started/prereqs/#existing-license","text":"If you possess a product license for the product, you can use it with supported versions of the image (including those over 90 days old mentioned above) by following these instructions to mount the product license . Mount paths The mount points and name of the license file vary by product. The link above provides the proper location and name for these files.","title":"Existing License"},{"location":"get-started/prereqs/#local-runtime-environment","text":"The initial example uses Kubernetes under Docker Desktop because it does not require a lot of configuration. In order to try Ping products in a manner most similar to typical production installations, you should consider using a Kubernetes environment. Kind ( K ubernetes in D ocker) provides a platform to get started with local Kubernetes development. Instructions for setting up a Kind cluster are here . Other local Kubernetes environments include Rancher Desktop , Docker Desktop with Kubernetes enabled, and minikube . Rancher Desktop Rancher Desktop is compatible with Linux, MacOS, and Windows (using WSL). It also supports the docker container runtime , which provides support for running docker commands without installing individual docker components or Docker Desktop. For running Docker Compose deployments of single products, any Docker Desktop installation or Linux system with Docker and docker compose installed can be used.","title":"Local runtime environment"},{"location":"get-started/prereqs/#applications-utilities","text":"Helm cli kubectl Homebrew for package installation and management. Homebrew can be used to install k9s, kubectl, helm, and other programs. /bin/bash -c \" $( curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh ) \" pingctl brew install pingidentity/tap/pingctl","title":"Applications / Utilities"},{"location":"get-started/prereqs/#recommended-additional-utilities","text":"k9s brew install derailed/k9s/k9s kubectx brew install kubectx docker-compose brew install docker-compose Info Installing docker-compose is only necessary to deploy Docker containers when using Docker with Rancher Desktop. It is included with the Docker Desktop installation. See Rancher preferences to switch from containerd to dockerd (moby).","title":"Recommended Additional Utilities"},{"location":"get-started/prereqs/#configure-the-environment","text":"Open a terminal and create a local DevOps directory named ${HOME}/projects/devops . Info ${HOME}/projects/devops is the parent directory for all examples referenced in our documentation. Configure the environment as follows. pingctl config Respond to all configuration questions, accepting the defaults if uncertain. Settings for custom variables aren't needed initially but may be necessary for additional capabilities. All responses are captured in your local ~/.pingidentity/config file. Allow the configuration script to source this file in your shell profile (for example, ~/.bash_profile in a bash shell). [Optional] Export configured pingctl variables as environment variables Modify your shell profile (for example, ~/.bash_profile in a bash shell) so that the generated source ~/.pingidentity/config command is surrounded by set -a and set +a statements. set -a # Ping Identity - Added with 'pingctl config' on Fri Apr 22 13:57:04 MDT 2022 test -f '${HOME}/.pingidentity/config' && source '${HOME}/.pingidentity/config' set +a Verify configured variables are exported in your environment. 1. Restart your shell or source your shell profile . 2. Run ` env | grep ' PING '` To display your environment settings, run: pingctl info For more information on the options available for pingctl see Configuration & Environment Variables .","title":"Configure the Environment"},{"location":"home/3rdPartySoftware/","text":"Third-Party Software \u00b6 Ping Identity Docker images bundle various third-party tools to enable product functionality. For more details, click on the links below: OpenJDK : GNU General Public License version 2.0 OpenSSH : Based on BSD licensing Git : GNU General Public License version 2.0 Gettext : GNU General Public License version 2.0 Curl : Based on MIT/X license ca-certificates : GNU General Public License version 2.0 Jq : MIT licensing Gnupg : GNU General Public License","title":"Third-Party Software"},{"location":"home/3rdPartySoftware/#third-party-software","text":"Ping Identity Docker images bundle various third-party tools to enable product functionality. For more details, click on the links below: OpenJDK : GNU General Public License version 2.0 OpenSSH : Based on BSD licensing Git : GNU General Public License version 2.0 Gettext : GNU General Public License version 2.0 Curl : Based on MIT/X license ca-certificates : GNU General Public License version 2.0 Jq : MIT licensing Gnupg : GNU General Public License","title":"Third-Party Software"},{"location":"home/disclaimer/","text":"Disclaimer \u00b6 Every effort is made by Ping Identity\u2019s DevOps team to provide supporting documents and examples for our products. However, Ping Identity cannot support custom scripts or template technology. For further support, please contact your Ping Identity representative. Copyright (C) 2022 Ping Identity Corporation All rights reserved. Ping Identity Corporation 1099 18th St Suite 2950 Denver, CO 80202 303.468.2900 http://www.pingidentity.com Disclaimer Of Warranties \u00b6 THE SOFTWARE PROVIDED HEREUNDER IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT ANY WARRANTIES OR REPRESENTATIONS EXPRESS, IMPLIED OR STATUTORY; INCLUDING, WITHOUT LIMITATION, WARRANTIES OF QUALITY, PERFORMANCE, NONINFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. NOR ARE THERE ANY WARRANTIES CREATED BY A COURSE OR DEALING, COURSE OF PERFORMANCE OR TRADE USAGE. FURTHERMORE, THERE ARE NO WARRANTIES THAT THE SOFTWARE WILL MEET YOUR NEEDS OR BE FREE FROM ERRORS, OR THAT THE OPERATION OF THE SOFTWARE WILL BE UNINTERRUPTED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","title":"Disclaimer"},{"location":"home/disclaimer/#disclaimer","text":"Every effort is made by Ping Identity\u2019s DevOps team to provide supporting documents and examples for our products. However, Ping Identity cannot support custom scripts or template technology. For further support, please contact your Ping Identity representative. Copyright (C) 2022 Ping Identity Corporation All rights reserved. Ping Identity Corporation 1099 18th St Suite 2950 Denver, CO 80202 303.468.2900 http://www.pingidentity.com","title":"Disclaimer"},{"location":"home/disclaimer/#disclaimer-of-warranties","text":"THE SOFTWARE PROVIDED HEREUNDER IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT ANY WARRANTIES OR REPRESENTATIONS EXPRESS, IMPLIED OR STATUTORY; INCLUDING, WITHOUT LIMITATION, WARRANTIES OF QUALITY, PERFORMANCE, NONINFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. NOR ARE THERE ANY WARRANTIES CREATED BY A COURSE OR DEALING, COURSE OF PERFORMANCE OR TRADE USAGE. FURTHERMORE, THERE ARE NO WARRANTIES THAT THE SOFTWARE WILL MEET YOUR NEEDS OR BE FREE FROM ERRORS, OR THAT THE OPERATION OF THE SOFTWARE WILL BE UNINTERRUPTED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","title":"Disclaimer Of Warranties"},{"location":"home/license/","text":"License \u00b6 Apache License Version 2.0, January 2004 http://www.apache.org/licenses/ TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION Definitions. \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document. \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License. \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity. \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License. \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files. \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types. \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below). \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof. \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\" \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions: (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and (b) You must cause any modified files to carry prominent notices stating that You changed the files; and (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License. You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability. END OF TERMS AND CONDITIONS APPENDIX: How to apply the Apache License to your work. To apply the Apache License to your work, attach the following boilerplate notice, with the fields enclosed by brackets \"[]\" replaced with your own identifying information. (Don't include the brackets!) The text should be enclosed in the appropriate comment syntax for the file format. We also recommend that a file or class name and description of purpose be included on the same \"printed page\" as the copyright notice for easier identification within third-party archives. Copyright 2022 Ping Identity Corp. Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.","title":"License"},{"location":"home/license/#license","text":"Apache License Version 2.0, January 2004 http://www.apache.org/licenses/ TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION Definitions. \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document. \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License. \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity. \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License. \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files. \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types. \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below). \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof. \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\" \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions: (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and (b) You must cause any modified files to carry prominent notices stating that You changed the files; and (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License. You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability. END OF TERMS AND CONDITIONS APPENDIX: How to apply the Apache License to your work. To apply the Apache License to your work, attach the following boilerplate notice, with the fields enclosed by brackets \"[]\" replaced with your own identifying information. (Don't include the brackets!) The text should be enclosed in the appropriate comment syntax for the file format. We also recommend that a file or class name and description of purpose be included on the same \"printed page\" as the copyright notice for easier identification within third-party archives. Copyright 2022 Ping Identity Corp. Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.","title":"License"},{"location":"home/portalUpdates/","text":"Recent portal updates \u00b6 This page provides details on recent significant changes to this portal. July 2022 \u00b6 Removal of Docker Compose examples \u00b6 With the focus of using Helm to provision to Kubernetes as the recommended practice, the multi-product Docker Compose examples were no longer maintained or supported and have been removed. The only examples that remain are for single-product deployments. For orchestrating multiple products, see the Helm examples . Removal of Kubernetes Kustomize examples \u00b6 Kustomize was the former method for for Kubernetes orchestration. As most of those examples were replaced by Helm, the Kustomize guides and files were also removed from this portal. Confirmation of Documentation \u00b6 We received reports in recent weeks that some of examples were not working due to changes in Kubernetes version support, files that had been removed from this repository, and other reasons. All examples and guides on this portal have been reviewed and should work as written.","title":"Recent portal updates"},{"location":"home/portalUpdates/#recent-portal-updates","text":"This page provides details on recent significant changes to this portal.","title":"Recent portal updates"},{"location":"home/portalUpdates/#july-2022","text":"","title":"July 2022"},{"location":"home/portalUpdates/#removal-of-docker-compose-examples","text":"With the focus of using Helm to provision to Kubernetes as the recommended practice, the multi-product Docker Compose examples were no longer maintained or supported and have been removed. The only examples that remain are for single-product deployments. For orchestrating multiple products, see the Helm examples .","title":"Removal of Docker Compose examples"},{"location":"home/portalUpdates/#removal-of-kubernetes-kustomize-examples","text":"Kustomize was the former method for for Kubernetes orchestration. As most of those examples were replaced by Helm, the Kustomize guides and files were also removed from this portal.","title":"Removal of Kubernetes Kustomize examples"},{"location":"home/portalUpdates/#confirmation-of-documentation","text":"We received reports in recent weeks that some of examples were not working due to changes in Kubernetes version support, files that had been removed from this repository, and other reasons. All examples and guides on this portal have been reviewed and should work as written.","title":"Confirmation of Documentation"},{"location":"home/supportPolicy/","text":"Ping Identity DevOps Support Policy \u00b6 This DevOps Support Policy is an extension of the Ping Identity Support Policy . This Ping Identity Corporation (\"Ping Identity\") DevOps Support Policy (this \"Policy\") encompasses all support obligations that Ping Identity has toward you as Ping Identity\u2019s Customer (\"Customer\"). Included in Support: \u00b6 Providing base images for Ping Identity products to Customers Providing documentation and basic examples for Helm deployments using Ping Identity's Helm charts Providing the Customer with DevOps tooling, such as config_export and pingctl Providing the Customer direction in using Server Profile to achieve the following: Deployment Customization Saving Configuration Layering Environment Substitution Private Github repos Supported orchestration tools \u00b6 Tool Description Kubernetes Also known as K8s, Kubernetes is an open-source system for automating deployment, scaling, and management of containerized software. Helm charts Helm is the easiest way to deploy Ping Identity software images in a Kubernetes environment. Docker images Docker images are maintained by Ping Identity and are a collection of preconfigured environments for Ping Identity products. GitHub repositories These repositories provide all of the components to build Docker images for your own development, testing and deployments. Resources \u00b6 Ping Identity customers can create a case in the Ping Identity Support Portal . Non-Ping Identity customers can use the PingDevOps Community .","title":"Support Policy"},{"location":"home/supportPolicy/#ping-identity-devops-support-policy","text":"This DevOps Support Policy is an extension of the Ping Identity Support Policy . This Ping Identity Corporation (\"Ping Identity\") DevOps Support Policy (this \"Policy\") encompasses all support obligations that Ping Identity has toward you as Ping Identity\u2019s Customer (\"Customer\").","title":"Ping Identity DevOps Support Policy"},{"location":"home/supportPolicy/#included-in-support","text":"Providing base images for Ping Identity products to Customers Providing documentation and basic examples for Helm deployments using Ping Identity's Helm charts Providing the Customer with DevOps tooling, such as config_export and pingctl Providing the Customer direction in using Server Profile to achieve the following: Deployment Customization Saving Configuration Layering Environment Substitution Private Github repos","title":"Included in Support:"},{"location":"home/supportPolicy/#supported-orchestration-tools","text":"Tool Description Kubernetes Also known as K8s, Kubernetes is an open-source system for automating deployment, scaling, and management of containerized software. Helm charts Helm is the easiest way to deploy Ping Identity software images in a Kubernetes environment. Docker images Docker images are maintained by Ping Identity and are a collection of preconfigured environments for Ping Identity products. GitHub repositories These repositories provide all of the components to build Docker images for your own development, testing and deployments.","title":"Supported orchestration tools"},{"location":"home/supportPolicy/#resources","text":"Ping Identity customers can create a case in the Ping Identity Support Portal . Non-Ping Identity customers can use the PingDevOps Community .","title":"Resources"},{"location":"how-to/buildPingDirectoryProfile/","text":"Building a profile from your current deployment \u00b6 PingDirectory is built for GitOps through native tools for building profiles . To find the latest tools and profiles, search for \"DevOps\" in PingDirectory Docs. You can find details of the server profile structure there. A well-formed PingDirectory profile includes all the configuration details needed for starting up a server in a new or existing replication topology as a representation of what is actually running. Use this guide to build a PingDirectory profile from a running instance. Before you begin \u00b6 You must: Complete Get Started Have a running PingDirectory instance of 8.0.0.0 or later with shell access on the machine or in the container Understand Product Container Anatomy You should: Review Customizing Server Profiles Start Building \u00b6 Generating a profile \u00b6 To generate a profile, run manage-profile generate-profile . This can be called on a running container in Kubernetes like so: ## kubectl exec -it <pod-name> \\ ## -- manage-profile generate-profile \\ ## --profileRoot /tmp/pd.profile kubectl exec -it pingdirectory-0 \\ -- manage-profile generate-profile \\ --profileRoot /tmp/pd.profile The Name Matters Although you don't have to name your profile pd.profile , the default location (the variable PD_PROFILE ) that PingDirectory looks at is PD_PROFILE=\"/opt/staging/pd.profile\" . Sample Output: Defaulted container \"pingdirectory\" out of: pingdirectory, telegraf, vault-agent-init (init) Generating server profile ... Variables such as PING_INSTANCE_NAME in setup-arguments.txt and in any other files in the profile will need to be provided through environment variables or through a profile variables file when using the generated profile with the manage-profile tool. The PING_SERVER_ROOT and PING_PROFILE_ROOT variables are provided by manage-profile Some changes may need to be made to the generated profile. Any desired LDIF files will need to be added to the profile. Any additional server root files, server SDK extensions, and dsconfig commands can be manually added, and variables-ignore.txt can be updated to ignore certain files during variable substitution. See the README file at /tmp/pd.profile/misc-files/README for more information on the manual steps that must be taken for the generated profile to be used with the manage-profile tool The following files and directories in the server root were excluded from the generated profile, and can be manually added if necessary. These files can also be included by generate-profile with the --includePath argument: config/truststore config/ads-truststore config/encryption-settings.pin config/tools.properties.orig config/encryption-settings/encryption-settings-db config/keystore.p12 config/tools.properties config/encryption-settings/encryption-settings-db.old config/keystore.pin config/keystore config/ads-truststore.pin config/truststore.p12 config/truststore.pin The generated profile can be found at /tmp/pd.profile Note other paths that are not included The manage-profile generate-profile command outputs valuable information about what is and isn't included in the generated profile. Don't put secrets in your profile! Secrets should not be included in your profile, so they are not included in the profile generation by default. However, if you have not already added encryption secrets or keystores to your environment, you can use the --includePath argument to collect items from the running server. These items should then be provided to the server on its next restart through some secrets management tool. Extracting the generated profile \u00b6 Following the Kubernetes example, you can copy out the generated profile with: kubectl cp pingdirectory-0:/tmp/pd.profile pd.profile Sample output: % tree . \u2514\u2500\u2500 pd.profile \u251c\u2500\u2500 dsconfig \u2502 \u2514\u2500\u2500 00 -config.dsconfig \u251c\u2500\u2500 ldif \u2502 \u2514\u2500\u2500 userRoot \u251c\u2500\u2500 misc-files \u2502 \u2514\u2500\u2500 README \u251c\u2500\u2500 server-root \u2502 \u251c\u2500\u2500 post-setup \u2502 \u2514\u2500\u2500 pre-setup \u2502 \u251c\u2500\u2500 PingDirectory.lic \u2502 \u251c\u2500\u2500 README.md \u2502 \u2514\u2500\u2500 config \u2502 \u251c\u2500\u2500 encryption-settings.pin ## Added via --includePath \u2502 \u251c\u2500\u2500 keystore.pin ## Added via --includePath \u2502 \u2514\u2500\u2500 schema \u2502 \u251c\u2500\u2500 80 -format-counter-metrics.ldif \u2502 \u251c\u2500\u2500 87 -local-identities.ldif \u2502 \u251c\u2500\u2500 88 -grants.ldif \u2502 \u251c\u2500\u2500 89 -sessions.ldif \u2502 \u2514\u2500\u2500 90 -oauth-clients.ldif \u251c\u2500\u2500 server-sdk-extensions \u251c\u2500\u2500 setup-arguments.txt ## REMOVE this \u2514\u2500\u2500 variables-ignore.txt 11 directories, 13 files setup-arguments.txt is generated by our Docker image at startup and isn't needed in the profile, so you should remove it from the profile. rm pd.profile/setup-arguments.txt userRoot data is not included You might notice that userRoot data (i.e. users) isn't included. Profiles should contain configuration only, not data. Storing a profile \u00b6 To store the profile, at the root of your profile : Choose from: For an unmounted profile, add to pd.profile . For a mounted profile, add to /opt/in/pd.profile . Including other files \u00b6 In addition to what's generated with manage-profile generate-profile , you might want to include other files. These files should be siblings to pd.profile at the root of the profile. For an example structure, see baseline . Profile structure \u00b6 \"A good PingDirectory profile includes all the configuration needed for starting up a server in a new or existing replication topology.\" Review the following elements to see what to include in your profile. dsconfig commands Because this is how the PingDirectory server is configured, dsconfig commands belong in your profile. manage-profile generate-profile outputs all of the dsconfig commands of a running server into one file: 00-config.dsconfig . Keeping dsconfig commands in one file makes sense because they are ingested together but run in order by the server's inherent dependency knowledge of itself. You can work on PingDirectory in a dev environment and make many changes while working toward your desired configuration. generate-profile exports a representation of your work. Multiple files You might see multiple files containing dsconfig commands in our profiles, which serves to show logical separation in our demos. Additionally, our demos might be built of multiple layers coming form different repositories so this prevents overwriting. users Data is expected to change at runtime, so this information does not belong in your profile structure. There is built-in protection to enforce this. ldif/userRoot/* is only imported on GENESIS - The first start of the first PingDirectory in a topology. The exceptions to this rule are ephemeral dev and demo environments. This is why you see user files in our sample profiles. These files are intended for bootstrapping demo and test instances. If you are in this category and wanted to include users, you could use: kubectl exec -it pingdirectory-0 \\ -- export-ldif \\ --backendID userRoot \\ --ldifFile /tmp/userRoot.ldif \\ --doNotEncrypt kubectl cp pingdirectory-0:/tmp/userRoot.ldif \\ pd.profile/ldif/userRoot/00-users.ldif schema Schema belongs in your profile strcuture because you might want to manage your schema as code, and pd.profile/server-root/pre-setup/config/schema is where to do that. encryption keys, keystores, truststores, and other secrets Any and all secrets should be provided by some sort of secrets management (Vault, bitnami sealed secrets, or at least kubernetes secrets), and as such, these do not belong in your profile structure. PingDirectory allows you to define file paths to secrets so they don't need to be in the profile.","title":"PingDirectory Profile"},{"location":"how-to/buildPingDirectoryProfile/#building-a-profile-from-your-current-deployment","text":"PingDirectory is built for GitOps through native tools for building profiles . To find the latest tools and profiles, search for \"DevOps\" in PingDirectory Docs. You can find details of the server profile structure there. A well-formed PingDirectory profile includes all the configuration details needed for starting up a server in a new or existing replication topology as a representation of what is actually running. Use this guide to build a PingDirectory profile from a running instance.","title":"Building a profile from your current deployment"},{"location":"how-to/buildPingDirectoryProfile/#before-you-begin","text":"You must: Complete Get Started Have a running PingDirectory instance of 8.0.0.0 or later with shell access on the machine or in the container Understand Product Container Anatomy You should: Review Customizing Server Profiles","title":"Before you begin"},{"location":"how-to/buildPingDirectoryProfile/#start-building","text":"","title":"Start Building"},{"location":"how-to/buildPingDirectoryProfile/#generating-a-profile","text":"To generate a profile, run manage-profile generate-profile . This can be called on a running container in Kubernetes like so: ## kubectl exec -it <pod-name> \\ ## -- manage-profile generate-profile \\ ## --profileRoot /tmp/pd.profile kubectl exec -it pingdirectory-0 \\ -- manage-profile generate-profile \\ --profileRoot /tmp/pd.profile The Name Matters Although you don't have to name your profile pd.profile , the default location (the variable PD_PROFILE ) that PingDirectory looks at is PD_PROFILE=\"/opt/staging/pd.profile\" . Sample Output: Defaulted container \"pingdirectory\" out of: pingdirectory, telegraf, vault-agent-init (init) Generating server profile ... Variables such as PING_INSTANCE_NAME in setup-arguments.txt and in any other files in the profile will need to be provided through environment variables or through a profile variables file when using the generated profile with the manage-profile tool. The PING_SERVER_ROOT and PING_PROFILE_ROOT variables are provided by manage-profile Some changes may need to be made to the generated profile. Any desired LDIF files will need to be added to the profile. Any additional server root files, server SDK extensions, and dsconfig commands can be manually added, and variables-ignore.txt can be updated to ignore certain files during variable substitution. See the README file at /tmp/pd.profile/misc-files/README for more information on the manual steps that must be taken for the generated profile to be used with the manage-profile tool The following files and directories in the server root were excluded from the generated profile, and can be manually added if necessary. These files can also be included by generate-profile with the --includePath argument: config/truststore config/ads-truststore config/encryption-settings.pin config/tools.properties.orig config/encryption-settings/encryption-settings-db config/keystore.p12 config/tools.properties config/encryption-settings/encryption-settings-db.old config/keystore.pin config/keystore config/ads-truststore.pin config/truststore.p12 config/truststore.pin The generated profile can be found at /tmp/pd.profile Note other paths that are not included The manage-profile generate-profile command outputs valuable information about what is and isn't included in the generated profile. Don't put secrets in your profile! Secrets should not be included in your profile, so they are not included in the profile generation by default. However, if you have not already added encryption secrets or keystores to your environment, you can use the --includePath argument to collect items from the running server. These items should then be provided to the server on its next restart through some secrets management tool.","title":"Generating a profile"},{"location":"how-to/buildPingDirectoryProfile/#extracting-the-generated-profile","text":"Following the Kubernetes example, you can copy out the generated profile with: kubectl cp pingdirectory-0:/tmp/pd.profile pd.profile Sample output: % tree . \u2514\u2500\u2500 pd.profile \u251c\u2500\u2500 dsconfig \u2502 \u2514\u2500\u2500 00 -config.dsconfig \u251c\u2500\u2500 ldif \u2502 \u2514\u2500\u2500 userRoot \u251c\u2500\u2500 misc-files \u2502 \u2514\u2500\u2500 README \u251c\u2500\u2500 server-root \u2502 \u251c\u2500\u2500 post-setup \u2502 \u2514\u2500\u2500 pre-setup \u2502 \u251c\u2500\u2500 PingDirectory.lic \u2502 \u251c\u2500\u2500 README.md \u2502 \u2514\u2500\u2500 config \u2502 \u251c\u2500\u2500 encryption-settings.pin ## Added via --includePath \u2502 \u251c\u2500\u2500 keystore.pin ## Added via --includePath \u2502 \u2514\u2500\u2500 schema \u2502 \u251c\u2500\u2500 80 -format-counter-metrics.ldif \u2502 \u251c\u2500\u2500 87 -local-identities.ldif \u2502 \u251c\u2500\u2500 88 -grants.ldif \u2502 \u251c\u2500\u2500 89 -sessions.ldif \u2502 \u2514\u2500\u2500 90 -oauth-clients.ldif \u251c\u2500\u2500 server-sdk-extensions \u251c\u2500\u2500 setup-arguments.txt ## REMOVE this \u2514\u2500\u2500 variables-ignore.txt 11 directories, 13 files setup-arguments.txt is generated by our Docker image at startup and isn't needed in the profile, so you should remove it from the profile. rm pd.profile/setup-arguments.txt userRoot data is not included You might notice that userRoot data (i.e. users) isn't included. Profiles should contain configuration only, not data.","title":"Extracting the generated profile"},{"location":"how-to/buildPingDirectoryProfile/#storing-a-profile","text":"To store the profile, at the root of your profile : Choose from: For an unmounted profile, add to pd.profile . For a mounted profile, add to /opt/in/pd.profile .","title":"Storing a profile"},{"location":"how-to/buildPingDirectoryProfile/#including-other-files","text":"In addition to what's generated with manage-profile generate-profile , you might want to include other files. These files should be siblings to pd.profile at the root of the profile. For an example structure, see baseline .","title":"Including other files"},{"location":"how-to/buildPingDirectoryProfile/#profile-structure","text":"\"A good PingDirectory profile includes all the configuration needed for starting up a server in a new or existing replication topology.\" Review the following elements to see what to include in your profile. dsconfig commands Because this is how the PingDirectory server is configured, dsconfig commands belong in your profile. manage-profile generate-profile outputs all of the dsconfig commands of a running server into one file: 00-config.dsconfig . Keeping dsconfig commands in one file makes sense because they are ingested together but run in order by the server's inherent dependency knowledge of itself. You can work on PingDirectory in a dev environment and make many changes while working toward your desired configuration. generate-profile exports a representation of your work. Multiple files You might see multiple files containing dsconfig commands in our profiles, which serves to show logical separation in our demos. Additionally, our demos might be built of multiple layers coming form different repositories so this prevents overwriting. users Data is expected to change at runtime, so this information does not belong in your profile structure. There is built-in protection to enforce this. ldif/userRoot/* is only imported on GENESIS - The first start of the first PingDirectory in a topology. The exceptions to this rule are ephemeral dev and demo environments. This is why you see user files in our sample profiles. These files are intended for bootstrapping demo and test instances. If you are in this category and wanted to include users, you could use: kubectl exec -it pingdirectory-0 \\ -- export-ldif \\ --backendID userRoot \\ --ldifFile /tmp/userRoot.ldif \\ --doNotEncrypt kubectl cp pingdirectory-0:/tmp/userRoot.ldif \\ pd.profile/ldif/userRoot/00-users.ldif schema Schema belongs in your profile strcuture because you might want to manage your schema as code, and pd.profile/server-root/pre-setup/config/schema is where to do that. encryption keys, keystores, truststores, and other secrets Any and all secrets should be provided by some sort of secrets management (Vault, bitnami sealed secrets, or at least kubernetes secrets), and as such, these do not belong in your profile structure. PingDirectory allows you to define file paths to secrets so they don't need to be in the profile.","title":"Profile structure"},{"location":"how-to/buildPingFederateProfile/","text":"Build a PingFederate profile from your current deployment \u00b6 The term \"profile\" can vary in many instances. Here we will focus on two types of profiles for PingFederate: configuration archive, and bulk export. We will discuss the similarities and differences between two as well as how to build either from a running PingFederate environment. Before you begin \u00b6 You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products Understand our Product Container Anatomy You should: Review Customizing Server Profiles Overview of profile methods \u00b6 There are two file-based profile methods that we cover: Bulk API Export The resulting .json from the admin API at /bulk/export Typically saved as data.json Configuration Archive Pulled either from the admin UI - Server > Configuration Archive or from the admin API at /configArchive We call the result of this output data.zip or the /data folder A file-based profile means a \"complete profile\" looks like a subset of files that you would typically find in a running PingFederate filesystem. This subset of files represents the minimal number of files needed to achieve your PingFederate configuration. All additional files that are not specific to your configuration should be left out because the PingFederate Docker image fills them in. For more information, see Container Anatomy . Familiarity with the PingFederate filesystem will help you achieve the optimal profile. For more information, see profile structures . Save files You should save every file outside of pingfederate/server/default/data that you've edited. Additionally, all files that are included in the profile should also be environment agnostic. This typically means turning hostnames and secrets into variables that can be delivered from the Orchestration Layer . The Bulk API Export Profile Method \u00b6 About this method \u00b6 You will: Export a data.json from /bulk/export Configure and run bulkconfig tool Export Key Pairs base64 encode exported key pairs Add data.json.subst to your profile at instance/bulk-config/data.json.subst In this guide, we will look at the above steps in detail to understand the purpose and flow. Use the steps for reference as needed. A PingFederate Admin Console imports a data.json on startup if it finds it in instance/bulk-config/data.json . The PF admin API /bulk/export endpoint outputs a large .json blob that is representative of the entire pingfederate/server/default/data folder, PingFederate 'core config', or a representation of anything you would configure from the PingFedera0te UI. This file can be considered as \"the configuration archive in .json format\". Steps \u00b6 On a running PingFederate instance or pod, run: curl \\ --location \\ --request GET 'https://pingfederate-admin.ping-devops.com/pf-admin-api/v1/bulk/export' \\ --header 'X-XSRF-Header: PingFederate' \\ --user \"administrator: ${ passsword } \" > data.json Save data.json into a profile at instance/bulk-config/data.json . Delete everything except pf.jwk in instance/server/default/data . Result \u00b6 You have a bulk API export \"profile\". This file is useful because the entire config is in a single file and if you store it in source control, then you only have to compare differences in one file. However, there is more value than being in one file. Making the bulk API export \"profile-worthy\" \u00b6 By default, the resulting data.json from the export contains encrypted values, and to import this file, your PingFederate needs to have the corresponding master key ( pf.jwk ) in pingfederate/server/default/data . Encrypted values in single file In the DevOps world, we call this folder instance/server/default/data . However, each of the encrypted values also have the option to be replaced with an unencrypted form and, when required, a corresponding password. Example \u00b6 The SSL Server Certificate from the PingFederate Baseline Profile when exported to data.json has the following syntax: { \"resourceType\" : \"/keyPairs/sslServer\" , \"operationType\" : \"SAVE\" , \"items\" : [ { \"id\" : \"sslservercert\" , \"fileData\" : \"MIIRBwIBAzCCEMAGCSqGSIb3DQEHAaCCELEEghCtMIIQqTCCCeUGCSqGSIb3DQEHAaCCCdYEggnSMIIJzjCCCcoGCyqGSIb3DQEMCgECoIIJezCCCXcwKQYKKoZIhvcNAQwBAzAbBBQu6vDERQZX3uujWa7v_q3sYN4Q0gIDAMNQBIIJSFtdWbvLhzYrTqeKKiJqiqROgE0E4mkVvmEC6NwhhPbcH37IDNvVLu0umm--CDZnEmlyPpUucO345-U-6z-cskw4TbsjYIzM10MwS6JdsyYFTC3GwqioqndVgBUzDh8xGnfzx52zEehX8d-ig1F6xYsbEc01gTbh4lF5MA7E7VfoTa4hWqtceV8PQeqzJNarlZyDSaS5BLn1J6G9BYUze-M1xGhATz7F2l-aAt6foi0mwIBlc2fwsdEPuAALZgdG-q_V4gOJW2K0ONnmWhMgMLpCL42cmSb ... more encrypted text ... Yxpzp_srpy4LHNdgHqhVBhqtDrjeKJDRfc1yk21P5PpfEBxn5MD4wITAJBgUrDgMCGgUABBQLBpq8y79Pq1TzG1Xf6OAjZzBZaQQUC4kD4CkcrH-WTQhJHud850ddn08CAwGGoA==\" , \"encryptedPassword\" : \"eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2Iiwia2lkIjoiRW1JY1UxOVdueSIsInZlcnNpb24iOiIxMC4xLjEuMCJ9..l6PJ55nSSvKHl0vSWTpkOA.i7hpnnu2yIByhyq_aGBCdaqS3u050yG8eMRGnLRx2Yk.Mo4WSkbbJyLISHq6i4nlVA\" } ] } You can convert this master key dependent form to: { \"operationType\" : \"SAVE\" , \"items\" : [{ \"password\" : \"2FederateM0re\" , \"fileData\" : \"MIIRCQIBAzCCEM8GCSqGSIb3DQEHAaCCEMAEghC8MIIQuDCCC28GCSqGSIb3DQEHBqCCC2AwggtcAgEAMIILVQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIjXWLRGuGNIQCAggAgIILKOgCQ9onDqBPQsshsaS50OjWtj\\/7s47BUYal1YhO70fBup1a82WGHGhAvb\\/SY1yOhqQR+TloEBOPI5cExoGN\\/Gvw2Mw5\\/wkQZZMSHqxjz68KhN4B0hrsOf4rqShB7jsz9ebSml3r2w0sUZWR73GBtBt1Y3wIlXLS2WtqdtHra9VnUqp1eOk+xenjuWM+u2ndDD43GgKB3n8mNBSSVBqx6ne7aSRJRuAUd+HAzLvSeXjTPMObI1Jod2F+7 ... more base64 encoded exported .p12 ... 5QJ15OJp2iEoVBWxogKf64s2F0iIYPoo6yjNvlidZCevP564FwknWrHoD7R8cIBrhlCJQbEOpOhPg66r4MK1CeJ2poaKRlMS8HGcMRaTpaqD+pIlgmUS6xFw49vr9Kwfb7KteRsTkNR+I8A7HjUpuCMSUwIwYJKoZIhvcNAQkVMRYEFOb7g1xwDka5fJ4sqngEvzTyuWnpMDEwITAJBgUrDgMCGgUABBRlJ+D+FR\\/vQbaTGbKDFiBK\\/xDbqQQIAjLc+GgRg44CAggA\" , \"id\" : \"sslservercert\" }], \"resourceType\" : \"/keyPairs/sslServer\" } The process: You exported the private key+cert of the server cert with alias sslservercert . When exported, a password is requested and 2FederateM0re was used. This action results in the download of a password protected .p12 file. The data.json key name encryptedPassword converted to simply password . The value for fileData is replaced with a base64 encoded version of the exported .p12 file. This process can be used for all encrypted items and environment specific items: Key Pairs (.p12) Trusted Certs (x509) Admin Password Data Store Passwords Integration Kit Properties Hostnames Leaving these confidential items as unencrypted text in source control is unacceptable. The next logical step is to abstract the unencrypted values and replace them with variables. By doing this, the values can be stored in a secrets management tool (such as Hashicorp Vault) and the variablized file can be in source control. Converting each of the encrypted keys for their unencrypted counterparts and hostnames with variables is cumbersome and can be automated. As we know in DevOps, if it can be automated, it must be automated. For more information, see Using Bulk Config Tool . A variablized data.json.subst is a good candidate for committing to source control after removing any unencrypted text. Using Bulk Config Tool \u00b6 The ping-bulkconfig-tool reads your data.json and can optionally: Search and replace (e.g. hostnames) Clean, add, and remove json members as required. Tokenize the configuration and maintain environment variables. The bulk export tool can process a bulk data.json export according to a configuration file with functions above. After running the tool, you are left with a data.json.subst and a list of environment variables waiting to be filled. The data.json.subst form of our previous example will look like: { \"operationType\" : \"SAVE\" , \"items\" : [{ \"password\" : \"${keyPairs_sslServer_items_sslservercert_sslservercert_password}\" , \"fileData\" : \"${keyPairs_sslServer_items_sslservercert_sslservercert_fileData}\" , \"id\" : \"sslservercert\" }], \"resourceType\" : \"/keyPairs/sslServer\" } Bulk Config Tool Limitations The bulk config tool can manipulate data.json but it cannot populate the resulting password or fileData variables because there is no API available on PingFederate to extract these. These variables can be filled using with externally generated certs and keys using tools like openssl , but that is out of scope for this document. The resulting env_vars file can be used as a guideline for secrets that should be managed externally and only delivered to the container/image as needed for its specific environment. Prerequisites \u00b6 The bulk export utility comes in pre-compiled source code. Build a Docker image by running: docker build -t ping-bulkexport-tools:latest . Copy the data.json to: pingidentity-devops-getting-started/99-helper-scripts/ping-bulkconfigtool/shared/data.json Example \u00b6 A sample command of the ping-bulkconfig-tool docker run --rm -v $PWD/shared:/shared ping-bulkexport-tools:latest /shared/pf-config.json /shared/data.json /shared/env_vars /shared/data.json.subst > ./shared/convert.log Where: -v $PWD/shared:/shared - bind mounts ping-bulkconfigtool/shared folder to /shared in the container /shared/pf-config.json - input path to config file which defines how to process the bulk export data.json file from PingFederate. /shared/data.json - input path to data.json result of /pf-admin-api/v1/bulk/export PingFederate API endpoint. /shared/env_vars - output path to store environment variables generated from processing /shared/data.json.subst - output path to processed data.json After running the above command, you will see env_vars and data.json.subst in the ping-bulkconfigtool/shared folder. Configure Bulk Tool \u00b6 Instructions to the bulk config tool are sent by the pf-config.json file. When using the pf-config.json file, any unused functions will require an empty array in the file. For example, notice the add-config block at the top of this sample: { \"add-config\" : [] , \"config-aliases\" : [ ] , \"expose-parameters\" : [ ] , \"remove-config\" : [ { \"key\" : \"id\" , \"value\" : \"ProvisionerDS\" } ] } In this file, available commands include: search-replace \u00b6 A utility to search and replace string values in a bulk config json file. Can expose environment variables. Example: replacing an expected base hostname with a substitution: \"search-replace\":[ { \"search\": \"data-holder.local\", \"replace\": \"${BASE_HOSTNAME}\", \"apply-env-file\": false } ] change-value \u00b6 Searches for elements with a matching identifier, and updates a parameter with a new value. Example: update keyPairId against an element with name=ENGINE: \"change-value\":[ { \"matching-identifier\": { \"id-name\": \"name\", \"id-value\": \"ENGINE\" }, \"parameter-name\": \"keyPairId\", \"new-value\": 8 } ] remove-config \u00b6 Remove configuration objects from the bulk export Example: To remove the ProvisionerDS data store: \"remove-config\":[ { \"key\": \"id\", \"value\": \"ProvisionerDS\" } ] Example: To remove all SP Connections: \"remove-config\":[ { \"key\": \"resourceType\", \"value\": \"/idp/spConnections\" } ] add-config \u00b6 Add configurations to the bulk export. This tool works with both PingFederate and PingAccess. This example adds the CONFIG QUERY http listener in PingAccess: \"add-config\":[ { \"resourceType\": \"httpsListeners\", \"item\": { \"id\": 4, \"name\": \"CONFIG QUERY\", \"keyPairId\": 5, \"useServerCipherSuiteOrder\": true, \"restartRequired\": false } } ] Example: Add an SP connection: \"add-config\":[ { \"resourceType\": \"/idp/spConnections\", \"item\": { \"name\": \"httpbin3.org\", \"active\": false, ... } } ] expose-parameters \u00b6 Navigates through the JSON and exchanges values for substitions. Exposed substition names will be automatically created based on the json path. E.g. ${oauth_clients_items_clientAuth_testclient_secret} Can convert encrypted/obfuscated values into clear text inputs (e.g. \"encryptedValue\" to \"value\") prior to substituting it. Doing so enables the injection of values in their raw form. Example: replace the \"encryptedPassword\" member with a substitution-enabled \"password\" member for any elements with \"id\" or \"username\" members. The following will remove \"encryptedPassword\" and create \"password\": \"${...}\": { \"parameter-name\": \"encryptedPassword\", \"replace-name\": \"password\", \"unique-identifiers\": [ \"id\", \"username\" ] } config-aliases \u00b6 The bulk config tool generates substitution names. However, there might be times you wish to simplify them or reuse existing environment variables. Example: Rename the Administrator's substitution name using the PING_IDENTITY_PASSWORD environment variable: \"config-aliases\":[ { \"config-names\":[ \"administrativeAccounts_items_Administrator_password\" ], \"replace-name\": \"PING_IDENTITY_PASSWORD\", \"is-apply-envfile\": false } ] sort-arrays \u00b6 Configure the array members that need to be sorted. This function ensures the array is created consistently, simplifying git diff analysis. Example: Sort the roles and scopes arrays: \"sort-arrays\":[ \"roles\",\"scopes\" ] Additional Notes \u00b6 The bulk API export is intended to be used as a bulk import. The /bulk/import endpoint is destructive and overwrites the entire current admin config. If you are in a clustered environment, the PingFederate image imports the data.json and replicates the configuration to engines in the cluster. Your data.json.subst \"metadata\": {\"pfVersion\": \"10.1.2.0\"} should match the PingFederate profile version. The Configuration Archive Profiles Method \u00b6 About configuration archive-based profiles \u00b6 You should weigh the pros and cons of configuration archive-based profiles compared to bulk API export profiles. While not fully aligning with pur DevOps principles, many users prefer using bulk API export profiles in most scenarios. Pros: * The /data folder, as opposed to a data.json file, is better for profile layering . * Configuration is available on engines at startup, which: * lowers dependency on the admin at initial cluster startup * enables mixed configurations in a single cluster. You can perform a canary-like \"roll-out\" instead of having the same configuration pushed to all engines at once. Cons: The /data folder contains key pairs in a .jks file , which makes externally managing keys very difficult. Encrypted data is scattered throughout the folder, creating a dependency on the master encryption key. About this method \u00b6 You will: Export a data.zip archive Optionally, variablize Replace the data folder Installing PingFederate Integration Kits \u00b6 By default, PingFederate is shipped with a handful of integration kits and adapters. If you need other integration kits or adapters in the deployment, manually download them and place them inside the server/default/deploy directory of the server profile. You can find these resources in the product download page here .","title":"PingFederate Profile"},{"location":"how-to/buildPingFederateProfile/#build-a-pingfederate-profile-from-your-current-deployment","text":"The term \"profile\" can vary in many instances. Here we will focus on two types of profiles for PingFederate: configuration archive, and bulk export. We will discuss the similarities and differences between two as well as how to build either from a running PingFederate environment.","title":"Build a PingFederate profile from your current deployment"},{"location":"how-to/buildPingFederateProfile/#before-you-begin","text":"You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products Understand our Product Container Anatomy You should: Review Customizing Server Profiles","title":"Before you begin"},{"location":"how-to/buildPingFederateProfile/#overview-of-profile-methods","text":"There are two file-based profile methods that we cover: Bulk API Export The resulting .json from the admin API at /bulk/export Typically saved as data.json Configuration Archive Pulled either from the admin UI - Server > Configuration Archive or from the admin API at /configArchive We call the result of this output data.zip or the /data folder A file-based profile means a \"complete profile\" looks like a subset of files that you would typically find in a running PingFederate filesystem. This subset of files represents the minimal number of files needed to achieve your PingFederate configuration. All additional files that are not specific to your configuration should be left out because the PingFederate Docker image fills them in. For more information, see Container Anatomy . Familiarity with the PingFederate filesystem will help you achieve the optimal profile. For more information, see profile structures . Save files You should save every file outside of pingfederate/server/default/data that you've edited. Additionally, all files that are included in the profile should also be environment agnostic. This typically means turning hostnames and secrets into variables that can be delivered from the Orchestration Layer .","title":"Overview of profile methods"},{"location":"how-to/buildPingFederateProfile/#the-bulk-api-export-profile-method","text":"","title":"The Bulk API Export Profile Method"},{"location":"how-to/buildPingFederateProfile/#about-this-method","text":"You will: Export a data.json from /bulk/export Configure and run bulkconfig tool Export Key Pairs base64 encode exported key pairs Add data.json.subst to your profile at instance/bulk-config/data.json.subst In this guide, we will look at the above steps in detail to understand the purpose and flow. Use the steps for reference as needed. A PingFederate Admin Console imports a data.json on startup if it finds it in instance/bulk-config/data.json . The PF admin API /bulk/export endpoint outputs a large .json blob that is representative of the entire pingfederate/server/default/data folder, PingFederate 'core config', or a representation of anything you would configure from the PingFedera0te UI. This file can be considered as \"the configuration archive in .json format\".","title":"About this method"},{"location":"how-to/buildPingFederateProfile/#steps","text":"On a running PingFederate instance or pod, run: curl \\ --location \\ --request GET 'https://pingfederate-admin.ping-devops.com/pf-admin-api/v1/bulk/export' \\ --header 'X-XSRF-Header: PingFederate' \\ --user \"administrator: ${ passsword } \" > data.json Save data.json into a profile at instance/bulk-config/data.json . Delete everything except pf.jwk in instance/server/default/data .","title":"Steps"},{"location":"how-to/buildPingFederateProfile/#result","text":"You have a bulk API export \"profile\". This file is useful because the entire config is in a single file and if you store it in source control, then you only have to compare differences in one file. However, there is more value than being in one file.","title":"Result"},{"location":"how-to/buildPingFederateProfile/#making-the-bulk-api-export-profile-worthy","text":"By default, the resulting data.json from the export contains encrypted values, and to import this file, your PingFederate needs to have the corresponding master key ( pf.jwk ) in pingfederate/server/default/data . Encrypted values in single file In the DevOps world, we call this folder instance/server/default/data . However, each of the encrypted values also have the option to be replaced with an unencrypted form and, when required, a corresponding password.","title":"Making the bulk API export \"profile-worthy\""},{"location":"how-to/buildPingFederateProfile/#example","text":"The SSL Server Certificate from the PingFederate Baseline Profile when exported to data.json has the following syntax: { \"resourceType\" : \"/keyPairs/sslServer\" , \"operationType\" : \"SAVE\" , \"items\" : [ { \"id\" : \"sslservercert\" , \"fileData\" : \"MIIRBwIBAzCCEMAGCSqGSIb3DQEHAaCCELEEghCtMIIQqTCCCeUGCSqGSIb3DQEHAaCCCdYEggnSMIIJzjCCCcoGCyqGSIb3DQEMCgECoIIJezCCCXcwKQYKKoZIhvcNAQwBAzAbBBQu6vDERQZX3uujWa7v_q3sYN4Q0gIDAMNQBIIJSFtdWbvLhzYrTqeKKiJqiqROgE0E4mkVvmEC6NwhhPbcH37IDNvVLu0umm--CDZnEmlyPpUucO345-U-6z-cskw4TbsjYIzM10MwS6JdsyYFTC3GwqioqndVgBUzDh8xGnfzx52zEehX8d-ig1F6xYsbEc01gTbh4lF5MA7E7VfoTa4hWqtceV8PQeqzJNarlZyDSaS5BLn1J6G9BYUze-M1xGhATz7F2l-aAt6foi0mwIBlc2fwsdEPuAALZgdG-q_V4gOJW2K0ONnmWhMgMLpCL42cmSb ... more encrypted text ... Yxpzp_srpy4LHNdgHqhVBhqtDrjeKJDRfc1yk21P5PpfEBxn5MD4wITAJBgUrDgMCGgUABBQLBpq8y79Pq1TzG1Xf6OAjZzBZaQQUC4kD4CkcrH-WTQhJHud850ddn08CAwGGoA==\" , \"encryptedPassword\" : \"eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2Iiwia2lkIjoiRW1JY1UxOVdueSIsInZlcnNpb24iOiIxMC4xLjEuMCJ9..l6PJ55nSSvKHl0vSWTpkOA.i7hpnnu2yIByhyq_aGBCdaqS3u050yG8eMRGnLRx2Yk.Mo4WSkbbJyLISHq6i4nlVA\" } ] } You can convert this master key dependent form to: { \"operationType\" : \"SAVE\" , \"items\" : [{ \"password\" : \"2FederateM0re\" , \"fileData\" : \"MIIRCQIBAzCCEM8GCSqGSIb3DQEHAaCCEMAEghC8MIIQuDCCC28GCSqGSIb3DQEHBqCCC2AwggtcAgEAMIILVQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIjXWLRGuGNIQCAggAgIILKOgCQ9onDqBPQsshsaS50OjWtj\\/7s47BUYal1YhO70fBup1a82WGHGhAvb\\/SY1yOhqQR+TloEBOPI5cExoGN\\/Gvw2Mw5\\/wkQZZMSHqxjz68KhN4B0hrsOf4rqShB7jsz9ebSml3r2w0sUZWR73GBtBt1Y3wIlXLS2WtqdtHra9VnUqp1eOk+xenjuWM+u2ndDD43GgKB3n8mNBSSVBqx6ne7aSRJRuAUd+HAzLvSeXjTPMObI1Jod2F+7 ... more base64 encoded exported .p12 ... 5QJ15OJp2iEoVBWxogKf64s2F0iIYPoo6yjNvlidZCevP564FwknWrHoD7R8cIBrhlCJQbEOpOhPg66r4MK1CeJ2poaKRlMS8HGcMRaTpaqD+pIlgmUS6xFw49vr9Kwfb7KteRsTkNR+I8A7HjUpuCMSUwIwYJKoZIhvcNAQkVMRYEFOb7g1xwDka5fJ4sqngEvzTyuWnpMDEwITAJBgUrDgMCGgUABBRlJ+D+FR\\/vQbaTGbKDFiBK\\/xDbqQQIAjLc+GgRg44CAggA\" , \"id\" : \"sslservercert\" }], \"resourceType\" : \"/keyPairs/sslServer\" } The process: You exported the private key+cert of the server cert with alias sslservercert . When exported, a password is requested and 2FederateM0re was used. This action results in the download of a password protected .p12 file. The data.json key name encryptedPassword converted to simply password . The value for fileData is replaced with a base64 encoded version of the exported .p12 file. This process can be used for all encrypted items and environment specific items: Key Pairs (.p12) Trusted Certs (x509) Admin Password Data Store Passwords Integration Kit Properties Hostnames Leaving these confidential items as unencrypted text in source control is unacceptable. The next logical step is to abstract the unencrypted values and replace them with variables. By doing this, the values can be stored in a secrets management tool (such as Hashicorp Vault) and the variablized file can be in source control. Converting each of the encrypted keys for their unencrypted counterparts and hostnames with variables is cumbersome and can be automated. As we know in DevOps, if it can be automated, it must be automated. For more information, see Using Bulk Config Tool . A variablized data.json.subst is a good candidate for committing to source control after removing any unencrypted text.","title":"Example"},{"location":"how-to/buildPingFederateProfile/#using-bulk-config-tool","text":"The ping-bulkconfig-tool reads your data.json and can optionally: Search and replace (e.g. hostnames) Clean, add, and remove json members as required. Tokenize the configuration and maintain environment variables. The bulk export tool can process a bulk data.json export according to a configuration file with functions above. After running the tool, you are left with a data.json.subst and a list of environment variables waiting to be filled. The data.json.subst form of our previous example will look like: { \"operationType\" : \"SAVE\" , \"items\" : [{ \"password\" : \"${keyPairs_sslServer_items_sslservercert_sslservercert_password}\" , \"fileData\" : \"${keyPairs_sslServer_items_sslservercert_sslservercert_fileData}\" , \"id\" : \"sslservercert\" }], \"resourceType\" : \"/keyPairs/sslServer\" } Bulk Config Tool Limitations The bulk config tool can manipulate data.json but it cannot populate the resulting password or fileData variables because there is no API available on PingFederate to extract these. These variables can be filled using with externally generated certs and keys using tools like openssl , but that is out of scope for this document. The resulting env_vars file can be used as a guideline for secrets that should be managed externally and only delivered to the container/image as needed for its specific environment.","title":"Using Bulk Config Tool"},{"location":"how-to/buildPingFederateProfile/#prerequisites","text":"The bulk export utility comes in pre-compiled source code. Build a Docker image by running: docker build -t ping-bulkexport-tools:latest . Copy the data.json to: pingidentity-devops-getting-started/99-helper-scripts/ping-bulkconfigtool/shared/data.json","title":"Prerequisites"},{"location":"how-to/buildPingFederateProfile/#example_1","text":"A sample command of the ping-bulkconfig-tool docker run --rm -v $PWD/shared:/shared ping-bulkexport-tools:latest /shared/pf-config.json /shared/data.json /shared/env_vars /shared/data.json.subst > ./shared/convert.log Where: -v $PWD/shared:/shared - bind mounts ping-bulkconfigtool/shared folder to /shared in the container /shared/pf-config.json - input path to config file which defines how to process the bulk export data.json file from PingFederate. /shared/data.json - input path to data.json result of /pf-admin-api/v1/bulk/export PingFederate API endpoint. /shared/env_vars - output path to store environment variables generated from processing /shared/data.json.subst - output path to processed data.json After running the above command, you will see env_vars and data.json.subst in the ping-bulkconfigtool/shared folder.","title":"Example"},{"location":"how-to/buildPingFederateProfile/#configure-bulk-tool","text":"Instructions to the bulk config tool are sent by the pf-config.json file. When using the pf-config.json file, any unused functions will require an empty array in the file. For example, notice the add-config block at the top of this sample: { \"add-config\" : [] , \"config-aliases\" : [ ] , \"expose-parameters\" : [ ] , \"remove-config\" : [ { \"key\" : \"id\" , \"value\" : \"ProvisionerDS\" } ] } In this file, available commands include:","title":"Configure Bulk Tool"},{"location":"how-to/buildPingFederateProfile/#search-replace","text":"A utility to search and replace string values in a bulk config json file. Can expose environment variables. Example: replacing an expected base hostname with a substitution: \"search-replace\":[ { \"search\": \"data-holder.local\", \"replace\": \"${BASE_HOSTNAME}\", \"apply-env-file\": false } ]","title":"search-replace"},{"location":"how-to/buildPingFederateProfile/#change-value","text":"Searches for elements with a matching identifier, and updates a parameter with a new value. Example: update keyPairId against an element with name=ENGINE: \"change-value\":[ { \"matching-identifier\": { \"id-name\": \"name\", \"id-value\": \"ENGINE\" }, \"parameter-name\": \"keyPairId\", \"new-value\": 8 } ]","title":"change-value"},{"location":"how-to/buildPingFederateProfile/#remove-config","text":"Remove configuration objects from the bulk export Example: To remove the ProvisionerDS data store: \"remove-config\":[ { \"key\": \"id\", \"value\": \"ProvisionerDS\" } ] Example: To remove all SP Connections: \"remove-config\":[ { \"key\": \"resourceType\", \"value\": \"/idp/spConnections\" } ]","title":"remove-config"},{"location":"how-to/buildPingFederateProfile/#add-config","text":"Add configurations to the bulk export. This tool works with both PingFederate and PingAccess. This example adds the CONFIG QUERY http listener in PingAccess: \"add-config\":[ { \"resourceType\": \"httpsListeners\", \"item\": { \"id\": 4, \"name\": \"CONFIG QUERY\", \"keyPairId\": 5, \"useServerCipherSuiteOrder\": true, \"restartRequired\": false } } ] Example: Add an SP connection: \"add-config\":[ { \"resourceType\": \"/idp/spConnections\", \"item\": { \"name\": \"httpbin3.org\", \"active\": false, ... } } ]","title":"add-config"},{"location":"how-to/buildPingFederateProfile/#expose-parameters","text":"Navigates through the JSON and exchanges values for substitions. Exposed substition names will be automatically created based on the json path. E.g. ${oauth_clients_items_clientAuth_testclient_secret} Can convert encrypted/obfuscated values into clear text inputs (e.g. \"encryptedValue\" to \"value\") prior to substituting it. Doing so enables the injection of values in their raw form. Example: replace the \"encryptedPassword\" member with a substitution-enabled \"password\" member for any elements with \"id\" or \"username\" members. The following will remove \"encryptedPassword\" and create \"password\": \"${...}\": { \"parameter-name\": \"encryptedPassword\", \"replace-name\": \"password\", \"unique-identifiers\": [ \"id\", \"username\" ] }","title":"expose-parameters"},{"location":"how-to/buildPingFederateProfile/#config-aliases","text":"The bulk config tool generates substitution names. However, there might be times you wish to simplify them or reuse existing environment variables. Example: Rename the Administrator's substitution name using the PING_IDENTITY_PASSWORD environment variable: \"config-aliases\":[ { \"config-names\":[ \"administrativeAccounts_items_Administrator_password\" ], \"replace-name\": \"PING_IDENTITY_PASSWORD\", \"is-apply-envfile\": false } ]","title":"config-aliases"},{"location":"how-to/buildPingFederateProfile/#sort-arrays","text":"Configure the array members that need to be sorted. This function ensures the array is created consistently, simplifying git diff analysis. Example: Sort the roles and scopes arrays: \"sort-arrays\":[ \"roles\",\"scopes\" ]","title":"sort-arrays"},{"location":"how-to/buildPingFederateProfile/#additional-notes","text":"The bulk API export is intended to be used as a bulk import. The /bulk/import endpoint is destructive and overwrites the entire current admin config. If you are in a clustered environment, the PingFederate image imports the data.json and replicates the configuration to engines in the cluster. Your data.json.subst \"metadata\": {\"pfVersion\": \"10.1.2.0\"} should match the PingFederate profile version.","title":"Additional Notes"},{"location":"how-to/buildPingFederateProfile/#the-configuration-archive-profiles-method","text":"","title":"The Configuration Archive Profiles Method"},{"location":"how-to/buildPingFederateProfile/#about-configuration-archive-based-profiles","text":"You should weigh the pros and cons of configuration archive-based profiles compared to bulk API export profiles. While not fully aligning with pur DevOps principles, many users prefer using bulk API export profiles in most scenarios. Pros: * The /data folder, as opposed to a data.json file, is better for profile layering . * Configuration is available on engines at startup, which: * lowers dependency on the admin at initial cluster startup * enables mixed configurations in a single cluster. You can perform a canary-like \"roll-out\" instead of having the same configuration pushed to all engines at once. Cons: The /data folder contains key pairs in a .jks file , which makes externally managing keys very difficult. Encrypted data is scattered throughout the folder, creating a dependency on the master encryption key.","title":"About configuration archive-based profiles"},{"location":"how-to/buildPingFederateProfile/#about-this-method_1","text":"You will: Export a data.zip archive Optionally, variablize Replace the data folder","title":"About this method"},{"location":"how-to/buildPingFederateProfile/#installing-pingfederate-integration-kits","text":"By default, PingFederate is shipped with a handful of integration kits and adapters. If you need other integration kits or adapters in the deployment, manually download them and place them inside the server/default/deploy directory of the server profile. You can find these resources in the product download page here .","title":"Installing PingFederate Integration Kits"},{"location":"how-to/containerAnatomy/","text":"Deployment \u00b6 Any configuration that is deployed with one of our product containers can be considered a \"server profile\". A profile typically looks like a set of files. You can use profiles in these ways: Pull at startup. Build into the image. Mount as a container volume. Pull at startup \u00b6 Pass a Github-based URL and path as environment variables that point to a server profile. Pros: Easily sharable, inherently source-controlled Cons: Adds download time at container startup For profiles pulled at startup, the image uses the following variables to clone the repo at startup and pull the profile into the container: SERVER_PROFILE_URL - The git URL with the server profile. SERVER_PROFILE_PATH - The location from the base of the URL with the specific server profile. This allows for several products server profile to be housed in the same git repo. SERVER_PROFILE_BRANCH (optional) - If other than the default branch (usually master or main), allows for specifying a different branch. Example might be a user's development branch before merging into master. Although there is additional customizable functionality, this is the most common way that profiles are provided to containers because it is easy to provide a known starting state as well as track changes over time. For more information, see Private Github Repos . Build into the image \u00b6 Build your own image from one of our Docker images and copy the profile files in. Pros: No download at startup, and no egress required Cons: Tedious to build images when making iterative changes Building a profile into the image is useful when you have no access to the Github repository or if you're often spinning containers up and down. For example, if you made a Dockerfile at this location: https://github.com/pingidentity/pingidentity-server-profiles/tree/master/baseline, the relevant entries might look similar to this: FROM: pingidentity/pingfederate:edge COPY pingfederate/. /opt/in/. Mount as a Docker volume \u00b6 Using docker-compose you can bind-mount a host file system location to a location in the container. Pros: Most iterative. There's no download time, and you can see the file system while you are working in the container. Cons: There's no great way to do this in Kubernetes or other platform orchestration tools. Mount the profile as a Docker volume when you're developing a server profile and you want to be able to quickly make changes to the profile and spin up a container against it. For example, if you have a profile in same directory as your docker-compose.yaml file, you can add a bind-mount volume to /opt/in like this: volumes: - ./pingfederate:/opt/in","title":"Deployment"},{"location":"how-to/containerAnatomy/#deployment","text":"Any configuration that is deployed with one of our product containers can be considered a \"server profile\". A profile typically looks like a set of files. You can use profiles in these ways: Pull at startup. Build into the image. Mount as a container volume.","title":"Deployment"},{"location":"how-to/containerAnatomy/#pull-at-startup","text":"Pass a Github-based URL and path as environment variables that point to a server profile. Pros: Easily sharable, inherently source-controlled Cons: Adds download time at container startup For profiles pulled at startup, the image uses the following variables to clone the repo at startup and pull the profile into the container: SERVER_PROFILE_URL - The git URL with the server profile. SERVER_PROFILE_PATH - The location from the base of the URL with the specific server profile. This allows for several products server profile to be housed in the same git repo. SERVER_PROFILE_BRANCH (optional) - If other than the default branch (usually master or main), allows for specifying a different branch. Example might be a user's development branch before merging into master. Although there is additional customizable functionality, this is the most common way that profiles are provided to containers because it is easy to provide a known starting state as well as track changes over time. For more information, see Private Github Repos .","title":"Pull at startup"},{"location":"how-to/containerAnatomy/#build-into-the-image","text":"Build your own image from one of our Docker images and copy the profile files in. Pros: No download at startup, and no egress required Cons: Tedious to build images when making iterative changes Building a profile into the image is useful when you have no access to the Github repository or if you're often spinning containers up and down. For example, if you made a Dockerfile at this location: https://github.com/pingidentity/pingidentity-server-profiles/tree/master/baseline, the relevant entries might look similar to this: FROM: pingidentity/pingfederate:edge COPY pingfederate/. /opt/in/.","title":"Build into the image"},{"location":"how-to/containerAnatomy/#mount-as-a-docker-volume","text":"Using docker-compose you can bind-mount a host file system location to a location in the container. Pros: Most iterative. There's no download time, and you can see the file system while you are working in the container. Cons: There's no great way to do this in Kubernetes or other platform orchestration tools. Mount the profile as a Docker volume when you're developing a server profile and you want to be able to quickly make changes to the profile and spin up a container against it. For example, if you have a profile in same directory as your docker-compose.yaml file, you can add a bind-mount volume to /opt/in like this: volumes: - ./pingfederate:/opt/in","title":"Mount as a Docker volume"},{"location":"how-to/devopsRegistration/","text":"Ping Identity DevOps Registration \u00b6 Registering for Ping Identity's DevOps Program provides you with credentials that enable you to easily deploy and evaluate Ping Identity products using trial licenses automatically via platforms such as Helm or Kubernetes. To register for the DevOps Program: Make sure you have a registered account with Ping Identity. If you're not sure, click the link to Sign On and follow the instructions to access your account. If you don't have an account, create one here . When signing on, select Support and Community in the Select Account list. After you're signed on, you're directed to your profile page . In the right-side menu, click REGISTER FOR DEVOPS PROGRAM . A confirmation message will be shown and the DevOps credentials will be forwarded to the email address associated with your Ping Identity account. Saving Credentials When you receive your key, follow the instructions below for saving these with the pingctl utility. Example: PING_IDENTITY_DEVOPS_USER=jsmith@example.com PING_IDENTITY_DEVOPS_KEY=e9bd26ac-17e9-4133-a981-d7a7509314b2 Saving Your DevOps User and Key \u00b6 The recommended way to save your DevOps User/Key is to use the Ping Identity DevOps utility pingctl . pingctl setup You can find installation instructions for pingctl in the pingctl Tool document. To save your DevOps credentials, run pingctl config and supply your credentials when prompted. When pingctl is installed and configured, it places your DEVOPS USER/KEY into a Ping Identity property file found at ~/.pingidentity/config with the following variable names set (see the following example). PING_IDENTITY_DEVOPS_USER=jsmith@example.com PING_IDENTITY_DEVOPS_KEY=e9bd26ac-17e9-4133-a981-d7a7509314b2 After you've configured these settings, you can view them with the pingctl info command (credential values are masked by default, use pingctl info -v to show unmasked). Resending your DevOps User and Key \u00b6 If you have misplaced or lost your DevOps User/Key, there are two convenient ways to recover it. If you have configured pingctl , the PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY can be printed by entering the following command: pingctl info -v If you did not save the credentials in the pingctl tool, you can recover your credentials by logging in to your Ping Identity account. Navigate to Sign On and follow the instructions to access your account. When signing on, select Support and Community in the Select Account list. After you're signed on, you're directed to your profile page . In the right-side menu, click RESEND DEVOPS CREDENTIALS . A confirmation message will be shown and the DevOps credentials will be resent to the email address associated with your Ping Identity account.","title":"DevOps Registration"},{"location":"how-to/devopsRegistration/#ping-identity-devops-registration","text":"Registering for Ping Identity's DevOps Program provides you with credentials that enable you to easily deploy and evaluate Ping Identity products using trial licenses automatically via platforms such as Helm or Kubernetes. To register for the DevOps Program: Make sure you have a registered account with Ping Identity. If you're not sure, click the link to Sign On and follow the instructions to access your account. If you don't have an account, create one here . When signing on, select Support and Community in the Select Account list. After you're signed on, you're directed to your profile page . In the right-side menu, click REGISTER FOR DEVOPS PROGRAM . A confirmation message will be shown and the DevOps credentials will be forwarded to the email address associated with your Ping Identity account. Saving Credentials When you receive your key, follow the instructions below for saving these with the pingctl utility. Example: PING_IDENTITY_DEVOPS_USER=jsmith@example.com PING_IDENTITY_DEVOPS_KEY=e9bd26ac-17e9-4133-a981-d7a7509314b2","title":"Ping Identity DevOps Registration"},{"location":"how-to/devopsRegistration/#saving-your-devops-user-and-key","text":"The recommended way to save your DevOps User/Key is to use the Ping Identity DevOps utility pingctl . pingctl setup You can find installation instructions for pingctl in the pingctl Tool document. To save your DevOps credentials, run pingctl config and supply your credentials when prompted. When pingctl is installed and configured, it places your DEVOPS USER/KEY into a Ping Identity property file found at ~/.pingidentity/config with the following variable names set (see the following example). PING_IDENTITY_DEVOPS_USER=jsmith@example.com PING_IDENTITY_DEVOPS_KEY=e9bd26ac-17e9-4133-a981-d7a7509314b2 After you've configured these settings, you can view them with the pingctl info command (credential values are masked by default, use pingctl info -v to show unmasked).","title":"Saving Your DevOps User and Key"},{"location":"how-to/devopsRegistration/#resending-your-devops-user-and-key","text":"If you have misplaced or lost your DevOps User/Key, there are two convenient ways to recover it. If you have configured pingctl , the PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY can be printed by entering the following command: pingctl info -v If you did not save the credentials in the pingctl tool, you can recover your credentials by logging in to your Ping Identity account. Navigate to Sign On and follow the instructions to access your account. When signing on, select Support and Community in the Select Account list. After you're signed on, you're directed to your profile page . In the right-side menu, click RESEND DEVOPS CREDENTIALS . A confirmation message will be shown and the DevOps credentials will be resent to the email address associated with your Ping Identity account.","title":"Resending your DevOps User and Key"},{"location":"how-to/devopsUserKey/","text":"Using Your Devops User and Key \u00b6 When starting one of our containers, the container attempts to find the DevOps registration information first in the DevOps property file located in ~/.pingidentity/config . This property file was created when you set up the DevOps environment (see Get Started . If the DevOps registration information isn't found there, the container checks for environment variables assigned in the docker run command for standalone containers or in the YAML file for a stack. Display Your Devops Information \u00b6 To display your current DevOps environment information, run the pingctl info command. For Kubernetes and Helm \u00b6 Our Kubernetes and Helm examples by default will look for a Kubernetes secret named devops-secret . You must create a Kubernetes secret that contains the environment variables PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY . If you don't already know your DevOps credentials, display these using the following DevOps command. pingctl info Generate the Kubernetes secret from your DevOps credentials: Choose from: Use the pingctl utility. pingctl k8s generate devops-secret | kubectl apply -f - Generate the secret manually. kubectl create secret generic devops-secret \\ --from-literal = PING_IDENTITY_DEVOPS_USER = \" ${ PING_IDENTITY_DEVOPS_USER } \" \\ --from-literal = PING_IDENTITY_DEVOPS_KEY = \" ${ PING_IDENTITY_DEVOPS_KEY } \" For Standalone Docker Containers \u00b6 When using the docker run command to start a container, you can assign the --env-file argument to the file containing your DevOps registration information, as in the following example. docker run \\ --name pingdirectory \\ --publish 1389 :1389 \\ --publish 8443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingdirectory \\ --env-file ~/.pingidentity/config \\ pingidentity/pingdirectory For Stacks \u00b6 When deploying a stack, you can use either of the following methods to assign the location of the file containing your DevOps registration information: The env_file configuration option The DevOps environment variables Pass as Env File \u00b6 Add the env_file configuration option to the YAML file for the stack. The env_file configuration option passes environment variable definitions into the container, as in the following example. ... pingdirectory: image: pingidentity/pingdirectory env_file: - ${ HOME } /.pingidentity/config environment: - SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH = getting-started/pingdirectory ... Pass as Env Variables \u00b6 Add the PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY DevOps environment variables to the YAML file for the stack, as in the following example. ... pingdirectory: image: pingidentity/pingdirectory environment: - SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH = getting-started/pingdirectory - PING_IDENTITY_ACCEPT_EULA = YES - PING_IDENTITY_DEVOPS_USER = jsmith@example.com - PING_IDENTITY_DEVOPS_KEY = e9bd26ac-17e9-4133-a981-d7a7509314b2 ...","title":"Using Your Devops User and Key"},{"location":"how-to/devopsUserKey/#using-your-devops-user-and-key","text":"When starting one of our containers, the container attempts to find the DevOps registration information first in the DevOps property file located in ~/.pingidentity/config . This property file was created when you set up the DevOps environment (see Get Started . If the DevOps registration information isn't found there, the container checks for environment variables assigned in the docker run command for standalone containers or in the YAML file for a stack.","title":"Using Your Devops User and Key"},{"location":"how-to/devopsUserKey/#display-your-devops-information","text":"To display your current DevOps environment information, run the pingctl info command.","title":"Display Your Devops Information"},{"location":"how-to/devopsUserKey/#for-kubernetes-and-helm","text":"Our Kubernetes and Helm examples by default will look for a Kubernetes secret named devops-secret . You must create a Kubernetes secret that contains the environment variables PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY . If you don't already know your DevOps credentials, display these using the following DevOps command. pingctl info Generate the Kubernetes secret from your DevOps credentials: Choose from: Use the pingctl utility. pingctl k8s generate devops-secret | kubectl apply -f - Generate the secret manually. kubectl create secret generic devops-secret \\ --from-literal = PING_IDENTITY_DEVOPS_USER = \" ${ PING_IDENTITY_DEVOPS_USER } \" \\ --from-literal = PING_IDENTITY_DEVOPS_KEY = \" ${ PING_IDENTITY_DEVOPS_KEY } \"","title":"For Kubernetes and Helm"},{"location":"how-to/devopsUserKey/#for-standalone-docker-containers","text":"When using the docker run command to start a container, you can assign the --env-file argument to the file containing your DevOps registration information, as in the following example. docker run \\ --name pingdirectory \\ --publish 1389 :1389 \\ --publish 8443 :1443 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingdirectory \\ --env-file ~/.pingidentity/config \\ pingidentity/pingdirectory","title":"For Standalone Docker Containers"},{"location":"how-to/devopsUserKey/#for-stacks","text":"When deploying a stack, you can use either of the following methods to assign the location of the file containing your DevOps registration information: The env_file configuration option The DevOps environment variables","title":"For Stacks"},{"location":"how-to/devopsUserKey/#pass-as-env-file","text":"Add the env_file configuration option to the YAML file for the stack. The env_file configuration option passes environment variable definitions into the container, as in the following example. ... pingdirectory: image: pingidentity/pingdirectory env_file: - ${ HOME } /.pingidentity/config environment: - SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH = getting-started/pingdirectory ...","title":"Pass as Env File"},{"location":"how-to/devopsUserKey/#pass-as-env-variables","text":"Add the PING_IDENTITY_DEVOPS_USER and PING_IDENTITY_DEVOPS_KEY DevOps environment variables to the YAML file for the stack, as in the following example. ... pingdirectory: image: pingidentity/pingdirectory environment: - SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH = getting-started/pingdirectory - PING_IDENTITY_ACCEPT_EULA = YES - PING_IDENTITY_DEVOPS_USER = jsmith@example.com - PING_IDENTITY_DEVOPS_KEY = e9bd26ac-17e9-4133-a981-d7a7509314b2 ...","title":"Pass as Env Variables"},{"location":"how-to/existingLicense/","text":"Mount Existing Product License \u00b6 You can pass the license file to a container via mounting to the container's /opt/in directory. Note: You do not need to do this if you are using your DevOps User/Key. If you have provided license files via the volume mount and a DevOps User/Key, it will ignore the DevOps User/Key. The /opt/in directory overlays files onto the products runtime filesystem, the license needs to be named correctly and mounted in the exact location the product checks for valid licenses. Example Mounts \u00b6 Product File Name Mount Path PingFederate pingfederate.lic /opt/in/instance/server/default/conf/pingfederate.lic PingAccess pingaccess.lic /opt/in/instance/conf/pingaccess.lic PingDirectory PingDirectory.lic /opt/staging/pd.profile/server-root/pre-setup/PingDirectory.lic PingDataSync PingDirectory.lic /opt/staging/pd.profile/server-root/pre-setup/PingDirectory.lic PingAuthorize PingAuthorize.lic /opt/staging/pd.profile/server-root/pre-setup/PingAuthorize.lic PingAuthorize PAP PingAuthorize.lic /opt/staging/pd.profile/server-root/pre-setup/PingAuthorize.lic PingCentral pingcentral.lic /opt/in/instance/conf/pingcentral.lic Volume Mount Syntax \u00b6 Docker \u00b6 Sample docker run command with mounted license: docker run \\ --name pingfederate \\ --volume <local/path/to/pingfederate.lic>:/opt/in/instance/server/default/conf/pingfederate.lic pingidentity/pingfederate:edge Sample docker-compose.yaml with mounted license: version: \"2.4\" services: pingfederate: image: pingidentity/pingfederate:edge volumes: - path/to/pingfederate.lic:/opt/in/instance/server/default/conf/pingfederate.lic Kubernetes \u00b6 Create a Kubernetes secret from the license file kubectl create secret generic pingfederate-license \\ --from-file = ./pingfederate.lic Then mount it to the pod spec: containers: - name: pingfederate image: pingidentity/pingfederate volumeMounts: - name: pingfederate-license-volume mountPath: \"/opt/in/instance/server/default/conf/pingfederate.lic\" subPath: pingfederate.lic volumes: - name: pingfederate-license-volume secret: secretName: pingfederate-license Helm \u00b6 Create a Kubernetes secret from the license file kubectl create secret generic pingfederate-license \\ --from-file = ./pingfederate.lic Add the secretVolumes within your values.yaml deployment file pingfederate-admin: ... secretVolumes: pingfederate-license: items: pingfederate.lic: /opt/in/instance/server/default/conf/pingfederate.lic","title":"Use Existing Licenses"},{"location":"how-to/existingLicense/#mount-existing-product-license","text":"You can pass the license file to a container via mounting to the container's /opt/in directory. Note: You do not need to do this if you are using your DevOps User/Key. If you have provided license files via the volume mount and a DevOps User/Key, it will ignore the DevOps User/Key. The /opt/in directory overlays files onto the products runtime filesystem, the license needs to be named correctly and mounted in the exact location the product checks for valid licenses.","title":"Mount Existing Product License"},{"location":"how-to/existingLicense/#example-mounts","text":"Product File Name Mount Path PingFederate pingfederate.lic /opt/in/instance/server/default/conf/pingfederate.lic PingAccess pingaccess.lic /opt/in/instance/conf/pingaccess.lic PingDirectory PingDirectory.lic /opt/staging/pd.profile/server-root/pre-setup/PingDirectory.lic PingDataSync PingDirectory.lic /opt/staging/pd.profile/server-root/pre-setup/PingDirectory.lic PingAuthorize PingAuthorize.lic /opt/staging/pd.profile/server-root/pre-setup/PingAuthorize.lic PingAuthorize PAP PingAuthorize.lic /opt/staging/pd.profile/server-root/pre-setup/PingAuthorize.lic PingCentral pingcentral.lic /opt/in/instance/conf/pingcentral.lic","title":"Example Mounts"},{"location":"how-to/existingLicense/#volume-mount-syntax","text":"","title":"Volume Mount Syntax"},{"location":"how-to/existingLicense/#docker","text":"Sample docker run command with mounted license: docker run \\ --name pingfederate \\ --volume <local/path/to/pingfederate.lic>:/opt/in/instance/server/default/conf/pingfederate.lic pingidentity/pingfederate:edge Sample docker-compose.yaml with mounted license: version: \"2.4\" services: pingfederate: image: pingidentity/pingfederate:edge volumes: - path/to/pingfederate.lic:/opt/in/instance/server/default/conf/pingfederate.lic","title":"Docker"},{"location":"how-to/existingLicense/#kubernetes","text":"Create a Kubernetes secret from the license file kubectl create secret generic pingfederate-license \\ --from-file = ./pingfederate.lic Then mount it to the pod spec: containers: - name: pingfederate image: pingidentity/pingfederate volumeMounts: - name: pingfederate-license-volume mountPath: \"/opt/in/instance/server/default/conf/pingfederate.lic\" subPath: pingfederate.lic volumes: - name: pingfederate-license-volume secret: secretName: pingfederate-license","title":"Kubernetes"},{"location":"how-to/existingLicense/#helm","text":"Create a Kubernetes secret from the license file kubectl create secret generic pingfederate-license \\ --from-file = ./pingfederate.lic Add the secretVolumes within your values.yaml deployment file pingfederate-admin: ... secretVolumes: pingfederate-license: items: pingfederate.lic: /opt/in/instance/server/default/conf/pingfederate.lic","title":"Helm"},{"location":"how-to/manage/","text":"Managing Deployments \u00b6 In addition to Customizing Deployments , you must maintain your deployments over time as new versions of our products are released and as you tune your deployments to better reflect your changing needs.","title":"Introduction"},{"location":"how-to/manage/#managing-deployments","text":"In addition to Customizing Deployments , you must maintain your deployments over time as new versions of our products are released and as you tune your deployments to better reflect your changing needs.","title":"Managing Deployments"},{"location":"how-to/migratingRootToUnprivileged/","text":"Migrating from privileged images to unprivileged-by-default images \u00b6 In the 2103 release , our product images were updated to run with an unprivileged user by default. Before this release, images ran as root by default. This document describes some important tips when moving from privileged to unprivileged images. Checklist before migration \u00b6 To ensure that any configuration of the pods is maintained, build and commit a server profile from your current workload into a git repository. See the Server Profile Structures page, and/or the product-specific guides for PingFederate and PingDirectory . For PingDirectory, export your user data that will be imported into the new server(s). You can include the basic DIT structure in the server profile (in the pd.profile/ldif/userRoot/ directory), but actual user data should be left out; the server profile should store configuration, not data. You can save the actual user data elsewhere and manually import it after the new pods have started. You can use the export-ldif command to export user data, or you can schedule a task via LDAP. The exported ldif file will be written to the pod filesystem. You can use the import-ldif command to import user data, or you can schedule a task via LDAP. For the import to run, the file to be imported must exist on the pod filesystem. Potential issues \u00b6 Persistent volumes \u00b6 In Kubernetes, persistent volumes created with our older containers have files owned by the root user. When the default non-privileged user attempts to use these existing volumes, there might be file permission errors. To avoid this, you can either: Create a fresh deployment that doesn't use the old volumes. Continue to run the containers as root. Additionally, the containers using persistent volume claims need to set the securityContext fsGroup to a value allowing the container can write to the PVCs. An example of setting this value in the statefulSet workload needs to include the following fsGroup setting. This example uses the same default groupId set by the image. The Ping Identity Helm Charts already provide this setting by default for the containers. spec : template : spec : securityContext : fsGroup:9999 Default ports \u00b6 In our older images, certain default ports ( LDAP_PORT , LDAPS_PORT , HTTPS_PORT , and JMX_PORT ) were set to privileged values ( 389 , 636 , 443 , and 689 , respectively). The newer images don't use these values because they run as a non-privileged user. The updated default ports are 1389 , 1636 , 1443 , and 1689 . If you need, you can maintain the old values by setting the corresponding environment variables and running the container as root. For our PingDirectory images, port changes aren't allowed on restart. If you're using a volume from an older image you may encounter an error due to changing port values. You must either: Create a fresh deployment for PingDirectory with the new images and import your data from the old deployment. Set the environment variables to match the original privileged values and continue to run the container as root. Running as root with the unprivileged-by-default images \u00b6 To run as root as mentioned in the two previous examples, you must use your container orchestrator: For pure Docker, the -u flag allows specifying the user the container should use. For Docker Compose, you can define a user: . In Kubernetes, you can set up a security context for the container to specify the user. To run as root, a user and group ID of 0:0 should be used.","title":"Migrating to Unprivileged Images"},{"location":"how-to/migratingRootToUnprivileged/#migrating-from-privileged-images-to-unprivileged-by-default-images","text":"In the 2103 release , our product images were updated to run with an unprivileged user by default. Before this release, images ran as root by default. This document describes some important tips when moving from privileged to unprivileged images.","title":"Migrating from privileged images to unprivileged-by-default images"},{"location":"how-to/migratingRootToUnprivileged/#checklist-before-migration","text":"To ensure that any configuration of the pods is maintained, build and commit a server profile from your current workload into a git repository. See the Server Profile Structures page, and/or the product-specific guides for PingFederate and PingDirectory . For PingDirectory, export your user data that will be imported into the new server(s). You can include the basic DIT structure in the server profile (in the pd.profile/ldif/userRoot/ directory), but actual user data should be left out; the server profile should store configuration, not data. You can save the actual user data elsewhere and manually import it after the new pods have started. You can use the export-ldif command to export user data, or you can schedule a task via LDAP. The exported ldif file will be written to the pod filesystem. You can use the import-ldif command to import user data, or you can schedule a task via LDAP. For the import to run, the file to be imported must exist on the pod filesystem.","title":"Checklist before migration"},{"location":"how-to/migratingRootToUnprivileged/#potential-issues","text":"","title":"Potential issues"},{"location":"how-to/migratingRootToUnprivileged/#persistent-volumes","text":"In Kubernetes, persistent volumes created with our older containers have files owned by the root user. When the default non-privileged user attempts to use these existing volumes, there might be file permission errors. To avoid this, you can either: Create a fresh deployment that doesn't use the old volumes. Continue to run the containers as root. Additionally, the containers using persistent volume claims need to set the securityContext fsGroup to a value allowing the container can write to the PVCs. An example of setting this value in the statefulSet workload needs to include the following fsGroup setting. This example uses the same default groupId set by the image. The Ping Identity Helm Charts already provide this setting by default for the containers. spec : template : spec : securityContext : fsGroup:9999","title":"Persistent volumes"},{"location":"how-to/migratingRootToUnprivileged/#default-ports","text":"In our older images, certain default ports ( LDAP_PORT , LDAPS_PORT , HTTPS_PORT , and JMX_PORT ) were set to privileged values ( 389 , 636 , 443 , and 689 , respectively). The newer images don't use these values because they run as a non-privileged user. The updated default ports are 1389 , 1636 , 1443 , and 1689 . If you need, you can maintain the old values by setting the corresponding environment variables and running the container as root. For our PingDirectory images, port changes aren't allowed on restart. If you're using a volume from an older image you may encounter an error due to changing port values. You must either: Create a fresh deployment for PingDirectory with the new images and import your data from the old deployment. Set the environment variables to match the original privileged values and continue to run the container as root.","title":"Default ports"},{"location":"how-to/migratingRootToUnprivileged/#running-as-root-with-the-unprivileged-by-default-images","text":"To run as root as mentioned in the two previous examples, you must use your container orchestrator: For pure Docker, the -u flag allows specifying the user the container should use. For Docker Compose, you can define a user: . In Kubernetes, you can set up a security context for the container to specify the user. To run as root, a user and group ID of 0:0 should be used.","title":"Running as root with the unprivileged-by-default images"},{"location":"how-to/privateRepos/","text":"Using Private Git Repositories \u00b6 In general, you do not want your server profiles to be public. Instead, you should persist your server profiles in private git repositories. To use server profiles with private repositories, you must either: Pull using HTTPS Pull using SSH For HTTPS with GitHub: Generate an access token in GitHub. Specify the access token in the URL you assign to the SERVER_PROFILE_URL environment variable in your YAML files. For SSH: Include your keys and known hosts in the image under /home/ping/.ssh . Cloning from GitHub using HTTPS \u00b6 Creating a GitHub Access Token \u00b6 In GitHub, go to Settings --> Developer Settings --> Personal access tokens . Click Generate new token and assign the token a name. Grant the token privilege to the repo group. Copy the token to a secure location. You won't be able to view the token again. At the bottom of the page, click Generate Token . Using The Token In YAML \u00b6 To use the token in your YAML file, include it in the SERVER_PROFILE_URL environment variable using this format: https:// < github-username > : < github-token > @github.com/ < your-repository > .git For example: SERVER_PROFILE_URL=https://github_user:zqb4famrbadjv39jdi6shvl1xvozut7tamd5v6eva@github.com/pingidentity/server_profile.git Using Git Credentials in Profile URL \u00b6 Typically, variables in a SERVER_PROFILE_URL string are not replaced. However, certain Git user and password variables can be replaced. To substitute for the user and password variables using values defined in your YAML files, include either or both ${SERVER_PROFILE_GIT_USER} and ${SERVER_PROFILE_GIT_PASSWORD} in your server profile URL. For example: SERVER_PROFILE_URL = https:// ${ SERVER_PROFILE_GIT_USER } : ${ SERVER_PROFILE_GIT_PASSWORD } @github.com/pingidentity/server_profile.git When using layered server profiles, each layer can use the base user and password variables, or you can define values specific to that layer. For example, for a license server profile layer, you can use the SERVER_PROFILE_LICENSE_GIT_USER and SERVER_PROFILE_LICENSE_GIT_PASSWORD variables, and substitute for those variables using values defined in your YAML files. Cloning using SSH \u00b6 To clone using SSH, you can mount the necessary keys and known hosts files using a volume at /home/ping/.ssh , the home directory of the default user in our product images. To clone from GitHub, you must add the necessary SSH keys to your account through the account settings page.","title":"Private Github Repos"},{"location":"how-to/privateRepos/#using-private-git-repositories","text":"In general, you do not want your server profiles to be public. Instead, you should persist your server profiles in private git repositories. To use server profiles with private repositories, you must either: Pull using HTTPS Pull using SSH For HTTPS with GitHub: Generate an access token in GitHub. Specify the access token in the URL you assign to the SERVER_PROFILE_URL environment variable in your YAML files. For SSH: Include your keys and known hosts in the image under /home/ping/.ssh .","title":"Using Private Git Repositories"},{"location":"how-to/privateRepos/#cloning-from-github-using-https","text":"","title":"Cloning from GitHub using HTTPS"},{"location":"how-to/privateRepos/#creating-a-github-access-token","text":"In GitHub, go to Settings --> Developer Settings --> Personal access tokens . Click Generate new token and assign the token a name. Grant the token privilege to the repo group. Copy the token to a secure location. You won't be able to view the token again. At the bottom of the page, click Generate Token .","title":"Creating a GitHub Access Token"},{"location":"how-to/privateRepos/#using-the-token-in-yaml","text":"To use the token in your YAML file, include it in the SERVER_PROFILE_URL environment variable using this format: https:// < github-username > : < github-token > @github.com/ < your-repository > .git For example: SERVER_PROFILE_URL=https://github_user:zqb4famrbadjv39jdi6shvl1xvozut7tamd5v6eva@github.com/pingidentity/server_profile.git","title":"Using The Token In YAML"},{"location":"how-to/privateRepos/#using-git-credentials-in-profile-url","text":"Typically, variables in a SERVER_PROFILE_URL string are not replaced. However, certain Git user and password variables can be replaced. To substitute for the user and password variables using values defined in your YAML files, include either or both ${SERVER_PROFILE_GIT_USER} and ${SERVER_PROFILE_GIT_PASSWORD} in your server profile URL. For example: SERVER_PROFILE_URL = https:// ${ SERVER_PROFILE_GIT_USER } : ${ SERVER_PROFILE_GIT_PASSWORD } @github.com/pingidentity/server_profile.git When using layered server profiles, each layer can use the base user and password variables, or you can define values specific to that layer. For example, for a license server profile layer, you can use the SERVER_PROFILE_LICENSE_GIT_USER and SERVER_PROFILE_LICENSE_GIT_PASSWORD variables, and substitute for those variables using values defined in your YAML files.","title":"Using Git Credentials in Profile URL"},{"location":"how-to/privateRepos/#cloning-using-ssh","text":"To clone using SSH, you can mount the necessary keys and known hosts files using a volume at /home/ping/.ssh , the home directory of the default user in our product images. To clone from GitHub, you must add the necessary SSH keys to your account through the account settings page.","title":"Cloning using SSH"},{"location":"how-to/profiles/","text":"Customizing Server Profiles \u00b6 When you deployed the full stack of product containers in Getting Started , you used the server profiles associated with each of our products. In the YAML files, you'll see entries like the following for each product instance: environment : - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=baseline/pingaccess Our pingidentity-server-profiles repository, indicated by the SERVER_PROFILE_URL environment variable, contains the server profiles we use for our DevOps deployment examples. The SERVER_PROFILE_PATH environment variable indicates the location of the product profile data to use. In the previous example, the PingAccess profile data is located in the baseline/pingaccess directory. We use environment variables for certain startup and runtime configuration settings of both standalone and orchestrated deployments. You can find environment variables that are common to all product images in the PingBase Image Directory . There are also product-specific environment variables. You can find these in the Docker Image Information for each available product. Before you begin \u00b6 You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Understand the Anatomy of the Product Containers . About this task \u00b6 You will: Add or change the environment variables used for any of our server profiles to better fit your purposes. You can find these variables in the Server Profiles Repository for each product. For example, the location for the env_vars file for PingAccess is located in the baseline/pingaccess server profile . Modify one of our server profiles to reflect an existing Ping Identity product installation in your organization. You can do this by either: Forking our server profiles repository ( https://github.com/pingidentity/pingidentity-server-profiles ) to your Github repository Using local directories Adding or Changing Environment Variables \u00b6 Select any environment variables to add from either: The product-specific environment variables in the Docker Images Information The environment variables common to all of our products in the PingBase Image Directory From the baseline , getting-started , or simple-sync directories in the Server Profiles Repository , select the product whose profile you want to modify. Open the env_vars file associated with the product and either: Add any of the environment variables you've selected. Change the existing environment variables to fit your purpose. Modifying a Server Profile \u00b6 You can modify one of our server profiles based on data from your existing Ping Identity product installation. Modify a server profile by either: Using your Github repository Using local directories Using Your Github Repository \u00b6 In this example PingFederate installation, using the Github Repository uses a server profile provided through a Github URL and assigned to the SERVER_PROFILE_PATH environment variable, such as --env SERVER_PROFILE_PATH=getting-started/pingfederate ). Export a configuration archive as a *.zip file from a PingFederate installation to a local directory. Make sure this is exported as a .zip rather than compressing it yourself. Sign on to Github and fork https://github.com/pingidentity/pingidentity-server-profiles into your own GitHub repository. Open a terminal, create a new directory, and clone your Github repository to a local directory. For example: mkdir /tmp/pf_to_docker cd /tmp/pf_to_docker git clone https://github.com/<github-username>/pingidentity-server-profiles.git Where <github-username> is the name you used to sign on to the Github account. Go to the location where you cloned your fork of our pingidentity-server-profiles repository, and replace the /data directory in getting-started/pingfederate/instance/server/default with the data directory you exported from your existing PingFederate installation. For example: cd pingidentity-server-profiles/getting-started/pingfederate/instance/server/default rm -rf data unzip -qd data <path_to_your_configuration_archive>/data.zip Where <path_to_your_configuration_archive> is the location for your exported PingFederate configuration archive. You now have a local server profile based on your existing PingFederate installation. Pushing to Github You should push to Github only what is necessary for your customizations. Our Docker images create the /opt/out directory using a product's base install and layering a profile (set of files) on top. Push your changes (your local server profile) to the Github repository where you forked our server profile repository. You now have a server profile available through a Github URL. Deploy the PingFederate container. Saving Changes To save any changes you make after the container is running, add the entry --volume <local-path>:/opt/out to the docker run command, where <local-path> is a directory you haven't already created. For more information, see Saving Your Changes . As in this example, the environment variables SERVER_PROFILE_URL and SERVER_PROFILE_PATH direct Docker to use the server profile you've modified and pushed to Github: docker run \\ --name pingfederate \\ --publish 9999 :9999 \\ --publish 9031 :9031 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/<your_username>/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingfederate \\ --env-file ~/.pingidentity/config \\ pingidentity/pingfederate:edge Private Repo If your GitHub server-profile repo is private, use the username:token format so the container can access the repository. For example, https://github.com/<your_username>:<your_access_token>/pingidentity-server-profiles.git . For more information, see Using Private Github Repositories . To display the logs as the container starts up, enter: docker container logs -f pingfederate In a browser, go to https://localhost:9999/pingfederate/app to display the PingFederate console. Using Local Directories \u00b6 This method is particularly helpful when developing locally and the configuration isn't ready to be distributed (using Github, for example). We'll use PingFederate as an example. The local directories used by our containers to persist state and data, /opt/in and /opt/out , will be bound to another local directory and mounted as Docker volumes. This is our infrastructure for modifying the server profile. Bind Mounts in Production Docker recommends that you never use bind mounts in a production environment. This method is solely for developing server profiles. For more information, see the Docker Documentation . The /opt/out directory All configurations and changes during our container runtimes (persisted data) are captured here. For example, the PingFederate image /opt/out/instance contains much of the typical PingFederate root directory: . \u251c\u2500\u2500 README.md \u251c\u2500\u2500 SNMP \u251c\u2500\u2500 bin \u251c\u2500\u2500 connection_export_examples \u251c\u2500\u2500 etc \u251c\u2500\u2500 legal \u251c\u2500\u2500 lib \u251c\u2500\u2500 log \u251c\u2500\u2500 modules \u251c\u2500\u2500 sbin \u251c\u2500\u2500 sdk \u251c\u2500\u2500 server \u251c\u2500\u2500 tools \u2514\u2500\u2500 work The /opt/in directory If a mounted opt/in directory exists, our containers reference this directory at startup for any server profile structures or other relevant files. This method is in contrast to a server profile provided using a Github URL assigned to the SERVER_PROFILE_PATH environment variable, such as, --env SERVER_PROFILE_PATH=getting-started/pingfederate . For the data each product writes to a mounted /opt/in directory, see Server profile structures . These directories are useful for building and working with local server-profiles. The /opt/in directory is particularly valuable if you don't want your containers to access Github for data (the default for our server profiles). The following example deployment uses PingFederate. Deploy PingFederate using our sample getting-started Server Profile , and mount /opt/out to a local directory: docker run \\ --name pingfederate \\ --publish 9999 :9999 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingfederate \\ --env-file ~/.pingidentity/config \\ --volume /tmp/docker/pf:/opt/out \\ pingidentity/pingfederate:edge Make sure the local directory (in this case, /tmp/docker/pf ) isn't already created. Docker needs to create this directory for the mount to /opt/out . Go to the mounted local directory (in this case, /tmp/docker/pf ), then make and save some configuration changes to PingFederate using the management console. As you save the changes, you'll be able to see the files in the mounted directory change. For PingFederate, an instance directory is created. This is a PingFederate server profile. Stop and remove the container and start a new container, adding another /tmp/docker/pf bind mounted volume, this time to /opt/in : docker container rm pingfederate docker run \\ --name pingfederate-local \\ --publish 9999 :9999 \\ --detach \\ --volume /tmp/docker/pf:/opt/out \\ --volume /tmp/docker/pf:/opt/in \\ pingidentity/pingfederate:edge The new container will now use the changes you made using the PingFederate console. In the logs, you can see where /opt/in is used: sh docker logs pingfederate-local Stop and remove the new container. Remember your /tmp/docker/pf directory will stay until you remove it (or until your machine is rebooted because this is in the /tmp directory): docker container rm pingfederate-local If you also want to remove your work, enter: rm -rf /tmp/docker/pf","title":"Customization"},{"location":"how-to/profiles/#customizing-server-profiles","text":"When you deployed the full stack of product containers in Getting Started , you used the server profiles associated with each of our products. In the YAML files, you'll see entries like the following for each product instance: environment : - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=baseline/pingaccess Our pingidentity-server-profiles repository, indicated by the SERVER_PROFILE_URL environment variable, contains the server profiles we use for our DevOps deployment examples. The SERVER_PROFILE_PATH environment variable indicates the location of the product profile data to use. In the previous example, the PingAccess profile data is located in the baseline/pingaccess directory. We use environment variables for certain startup and runtime configuration settings of both standalone and orchestrated deployments. You can find environment variables that are common to all product images in the PingBase Image Directory . There are also product-specific environment variables. You can find these in the Docker Image Information for each available product.","title":"Customizing Server Profiles"},{"location":"how-to/profiles/#before-you-begin","text":"You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Understand the Anatomy of the Product Containers .","title":"Before you begin"},{"location":"how-to/profiles/#about-this-task","text":"You will: Add or change the environment variables used for any of our server profiles to better fit your purposes. You can find these variables in the Server Profiles Repository for each product. For example, the location for the env_vars file for PingAccess is located in the baseline/pingaccess server profile . Modify one of our server profiles to reflect an existing Ping Identity product installation in your organization. You can do this by either: Forking our server profiles repository ( https://github.com/pingidentity/pingidentity-server-profiles ) to your Github repository Using local directories","title":"About this task"},{"location":"how-to/profiles/#adding-or-changing-environment-variables","text":"Select any environment variables to add from either: The product-specific environment variables in the Docker Images Information The environment variables common to all of our products in the PingBase Image Directory From the baseline , getting-started , or simple-sync directories in the Server Profiles Repository , select the product whose profile you want to modify. Open the env_vars file associated with the product and either: Add any of the environment variables you've selected. Change the existing environment variables to fit your purpose.","title":"Adding or Changing Environment Variables"},{"location":"how-to/profiles/#modifying-a-server-profile","text":"You can modify one of our server profiles based on data from your existing Ping Identity product installation. Modify a server profile by either: Using your Github repository Using local directories","title":"Modifying a Server Profile"},{"location":"how-to/profiles/#using-your-github-repository","text":"In this example PingFederate installation, using the Github Repository uses a server profile provided through a Github URL and assigned to the SERVER_PROFILE_PATH environment variable, such as --env SERVER_PROFILE_PATH=getting-started/pingfederate ). Export a configuration archive as a *.zip file from a PingFederate installation to a local directory. Make sure this is exported as a .zip rather than compressing it yourself. Sign on to Github and fork https://github.com/pingidentity/pingidentity-server-profiles into your own GitHub repository. Open a terminal, create a new directory, and clone your Github repository to a local directory. For example: mkdir /tmp/pf_to_docker cd /tmp/pf_to_docker git clone https://github.com/<github-username>/pingidentity-server-profiles.git Where <github-username> is the name you used to sign on to the Github account. Go to the location where you cloned your fork of our pingidentity-server-profiles repository, and replace the /data directory in getting-started/pingfederate/instance/server/default with the data directory you exported from your existing PingFederate installation. For example: cd pingidentity-server-profiles/getting-started/pingfederate/instance/server/default rm -rf data unzip -qd data <path_to_your_configuration_archive>/data.zip Where <path_to_your_configuration_archive> is the location for your exported PingFederate configuration archive. You now have a local server profile based on your existing PingFederate installation. Pushing to Github You should push to Github only what is necessary for your customizations. Our Docker images create the /opt/out directory using a product's base install and layering a profile (set of files) on top. Push your changes (your local server profile) to the Github repository where you forked our server profile repository. You now have a server profile available through a Github URL. Deploy the PingFederate container. Saving Changes To save any changes you make after the container is running, add the entry --volume <local-path>:/opt/out to the docker run command, where <local-path> is a directory you haven't already created. For more information, see Saving Your Changes . As in this example, the environment variables SERVER_PROFILE_URL and SERVER_PROFILE_PATH direct Docker to use the server profile you've modified and pushed to Github: docker run \\ --name pingfederate \\ --publish 9999 :9999 \\ --publish 9031 :9031 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/<your_username>/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingfederate \\ --env-file ~/.pingidentity/config \\ pingidentity/pingfederate:edge Private Repo If your GitHub server-profile repo is private, use the username:token format so the container can access the repository. For example, https://github.com/<your_username>:<your_access_token>/pingidentity-server-profiles.git . For more information, see Using Private Github Repositories . To display the logs as the container starts up, enter: docker container logs -f pingfederate In a browser, go to https://localhost:9999/pingfederate/app to display the PingFederate console.","title":"Using Your Github Repository"},{"location":"how-to/profiles/#using-local-directories","text":"This method is particularly helpful when developing locally and the configuration isn't ready to be distributed (using Github, for example). We'll use PingFederate as an example. The local directories used by our containers to persist state and data, /opt/in and /opt/out , will be bound to another local directory and mounted as Docker volumes. This is our infrastructure for modifying the server profile. Bind Mounts in Production Docker recommends that you never use bind mounts in a production environment. This method is solely for developing server profiles. For more information, see the Docker Documentation . The /opt/out directory All configurations and changes during our container runtimes (persisted data) are captured here. For example, the PingFederate image /opt/out/instance contains much of the typical PingFederate root directory: . \u251c\u2500\u2500 README.md \u251c\u2500\u2500 SNMP \u251c\u2500\u2500 bin \u251c\u2500\u2500 connection_export_examples \u251c\u2500\u2500 etc \u251c\u2500\u2500 legal \u251c\u2500\u2500 lib \u251c\u2500\u2500 log \u251c\u2500\u2500 modules \u251c\u2500\u2500 sbin \u251c\u2500\u2500 sdk \u251c\u2500\u2500 server \u251c\u2500\u2500 tools \u2514\u2500\u2500 work The /opt/in directory If a mounted opt/in directory exists, our containers reference this directory at startup for any server profile structures or other relevant files. This method is in contrast to a server profile provided using a Github URL assigned to the SERVER_PROFILE_PATH environment variable, such as, --env SERVER_PROFILE_PATH=getting-started/pingfederate . For the data each product writes to a mounted /opt/in directory, see Server profile structures . These directories are useful for building and working with local server-profiles. The /opt/in directory is particularly valuable if you don't want your containers to access Github for data (the default for our server profiles). The following example deployment uses PingFederate. Deploy PingFederate using our sample getting-started Server Profile , and mount /opt/out to a local directory: docker run \\ --name pingfederate \\ --publish 9999 :9999 \\ --detach \\ --env SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git \\ --env SERVER_PROFILE_PATH = getting-started/pingfederate \\ --env-file ~/.pingidentity/config \\ --volume /tmp/docker/pf:/opt/out \\ pingidentity/pingfederate:edge Make sure the local directory (in this case, /tmp/docker/pf ) isn't already created. Docker needs to create this directory for the mount to /opt/out . Go to the mounted local directory (in this case, /tmp/docker/pf ), then make and save some configuration changes to PingFederate using the management console. As you save the changes, you'll be able to see the files in the mounted directory change. For PingFederate, an instance directory is created. This is a PingFederate server profile. Stop and remove the container and start a new container, adding another /tmp/docker/pf bind mounted volume, this time to /opt/in : docker container rm pingfederate docker run \\ --name pingfederate-local \\ --publish 9999 :9999 \\ --detach \\ --volume /tmp/docker/pf:/opt/out \\ --volume /tmp/docker/pf:/opt/in \\ pingidentity/pingfederate:edge The new container will now use the changes you made using the PingFederate console. In the logs, you can see where /opt/in is used: sh docker logs pingfederate-local Stop and remove the new container. Remember your /tmp/docker/pf directory will stay until you remove it (or until your machine is rebooted because this is in the /tmp directory): docker container rm pingfederate-local If you also want to remove your work, enter: rm -rf /tmp/docker/pf","title":"Using Local Directories"},{"location":"how-to/profilesLayered/","text":"Layering server profiles \u00b6 One of the benefits of our Docker images is the ability to layer product configuration. By using small, discrete portions of your configuration, you can build and assemble a server profile based on multiple installations of a product. A typical organization can have multiple installations of our products, each using different configurations. By layering the server profiles, you can reuse the configurations that are common across environments, leading to fewer configurations to manage. You can have as many layers as needed. Each layer of the configuration is copied on top of the container's filesystem (not merged). Layer Precedence The profile layers are applied starting at the top layer and ending at the base layer. This ordering might not be apparent at first. Before you begin \u00b6 You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. About this task \u00b6 You will: Create a layered server profile. Assign the environment variables for the deployment. Deploy the layered server profile. Creating a layered server profile \u00b6 For this guide, PingFederate is used along with the server profile located in the pingidentity-server-profiles repository. You should fork this repository to your Github repository, then pull your Github repository to a local directory. After you have finished creating the layered profile, you can push your updates to your Github repository and reference it as an environment variable to run the deployment. You will create separate layers for: Product license Extensions (such as, Integration Kits and Connectors) OAuth Playground For this example, these layers will be applied on top of the PingFederate server profile. However, you can span configurations across multiple repositories if you want. You can find the complete working, layered server profile of the PingFederate example from this guide in the pingidentity-server-profiles/layered-profiles directory. Because PingFederate's configuration is file-based, the layering works by copying configurations on top of the PingFederate container\u2019s file system. Files Copied Files are copied, not merged. It is best practice to only layer items that will not be impacted by other configuration files. Creating the base directories \u00b6 Create a working directory named layered_profiles and within that directory create license , extensions , and oauth directories. When completed, your directory structure should be: \u2514\u2500\u2500 layered_profiles \u251c\u2500\u2500 extensions \u251c\u2500\u2500 license \u2514\u2500\u2500 oauth Constructing the license layer \u00b6 Go to the license directory and create a pingfederate subdirectory. Create the PingFederate license file directory path under the pingfederate directory. The PingFederate license file resides in the /instance/server/default/conf/ path. mkdir -p instance/server/default/conf/ Your license profile path should look like this: \u2514\u2500\u2500 license \u2514\u2500\u2500 pingfederate \u2514\u2500\u2500 instance \u2514\u2500\u2500 server \u2514\u2500\u2500 default \u2514\u2500\u2500 conf \u2514\u2500\u2500 pingfederate.lic Copy your pingfederate.lic file to license/pingfederate/instance/server/default/conf . Using the DevOps evaluation license, when the PingFederate container is running, you can find the license in the container file system /opt/out/instance/server/default/conf directory. You can copy the pingfederate.lic file from the Docker file system using the syntax: docker cp <container> <source-location> <target-location> For example: docker cp \\ pingfederate \\ /opt/in/instance/server/default/conf/pingfederate.lic \\ ${ HOME } /projects/devops/layered_profiles/license/pingfederate/instance/server/default/conf Using the ping-devops tool: ping-devops generate license pingfederate > \\ ${ HOME } /projects/devops/layered_profiles/license/pingfederate/instance/server/default/conf Building the extensions layer \u00b6 Go to the layered-profiles/extensions directory and create a pingfederate subdirectory. Create the PingFederate extensions directory path under the pingfederate directory. The PingFederate extensions reside in the /instance/server/default/deploy directory path. mkdir -p instance/server/default/deploy Copy the extensions you want to be available to PingFederate to the layered-profiles/extensions/pingfederate/instance/server/default/deploy directory . The extensions profile path should look similar to the following (extensions will vary based on your requirements): \u2514\u2500\u2500 extensions \u2514\u2500\u2500 pingfederate \u2514\u2500\u2500 instance \u2514\u2500\u2500 server \u2514\u2500\u2500 default \u2514\u2500\u2500 deploy \u251c\u2500\u2500 pf-aws-quickconnection-2.0.jar \u251c\u2500\u2500 pf-azure-ad-pcv-1.2.jar \u2514\u2500\u2500 pf-slack-quickconnection-3.0.jar Building the OAuth layer \u00b6 Go to the layered-profiles/oauth directory and create a pingfederate subdirectory. mkdir -p instance/server/default/pingfederate Copy the OAuthPlayground.war file to the layered-profiles/oauth/pingfederate/instance/server/default/deploy directory. Like other extensions, you can find the OAuth Playground for PingFederate in the /instance/server/default/deploy directory. For this example, you are building the OAuth Playground into its own layer to illustrate that it is optional for PingFederate deployments. Your OAuth profile layer should look like this: \u2514\u2500\u2500 oauth \u2514\u2500\u2500 pingfederate \u2514\u2500\u2500 instance \u2514\u2500\u2500 server \u2514\u2500\u2500 default \u2514\u2500\u2500 deploy \u2514\u2500\u2500 OAuthPlayground.war Assigning environment variables \u00b6 Although this deployment assigns the environment variables for use in a Docker Compose YAML file, you can use the following technique with any Docker or Kubernetes deployment. If you want to use your own Github repository for the deployment in the following examples, replace: SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git with: SERVER_PROFILE_URL = https://github.com/<your-username>/pingidentity-server-profiles.git Private Github Repo If your GitHub server-profile repo is private, use the username:token format so the container can access the repository. For example, https://github.com/<your_username>:<your_access_token>/pingidentity-server-profiles.git . For more information, see Using Private Github Repositories . Create a new docker-compose.yaml file. Add your license profile to the YAML file. For example: - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=layered-profiles/license/pingfederate SERVER_PROFILE supports URL , PATH , BRANCH and PARENT variables. Using SERVER_PROFILE_PARENT , instruct the container to retrieve its parent configuration by specifying the extensions profile as the parent: - SERVER_PROFILE_PARENT=EXTENSIONS SERVER_PROFILE can be extended to reference additional profiles. Because we specified the license profile's parent as EXTENSIONS , we can extend SERVER_PROFILE by referencing the EXTENSIONS profile (prior to the URL and PATH variables): - SERVER_PROFILE_EXTENSIONS_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_EXTENSIONS_PATH=layered-profiles/extensions/pingfederate Set the EXTENSIONS parent to OAUTH : - SERVER_PROFILE_EXTENSIONS_PARENT=OAUTH Then set the URL and PATH for the OAUTH profile: - SERVER_PROFILE_OAUTH_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_OAUTH_PATH=layered-profiles/oauth/pingfederate Set GETTING_STARTED as the OAUTH parent and declare the URL and PATH : - SERVER_PROFILE_OAUTH_PARENT=GETTING_STARTED - SERVER_PROFILE_GETTING_STARTED_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_GETTING_STARTED_PATH=getting-started/pingfederate Because the GETTING_STARTED profile is the last profile to add, it will not have a parent. Your environment section of the docker-compose.yaml file should look similar to this: environment : # **** SERVER PROFILES BEGIN **** # Server Profile - Product License - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=layered-profiles/license/pingfederate - SERVER_PROFILE_PARENT=EXTENSIONS # Server Profile - Extensions - SERVER_PROFILE_EXTENSIONS_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_EXTENSIONS_PATH=layered-profiles/extensions/pingfederate - SERVER_PROFILE_EXTENSIONS_PARENT=OAUTH # Server Profile - OAUTH - SERVER_PROFILE_OAUTH_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_OAUTH_PATH=layered-profiles/oauth/pingfederate - SERVER_PROFILE_OAUTH_PARENT=GETTING_STARTED # Base Server Profile - SERVER_PROFILE_GETTING_STARTED_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_GETTING_STARTED_PATH=getting-started/pingfederate # **** SERVER PROFILE END **** Deploying the layered profile \u00b6 Push your profiles and updated docker-compose.yaml file to your GitHub repository. Deploy the stack with the layered profiles. To view this example in its entirety, including the profile layers and docker-compose.yaml file, see the pingidentity-server-profiles/layered-profiles directory.","title":"Layering"},{"location":"how-to/profilesLayered/#layering-server-profiles","text":"One of the benefits of our Docker images is the ability to layer product configuration. By using small, discrete portions of your configuration, you can build and assemble a server profile based on multiple installations of a product. A typical organization can have multiple installations of our products, each using different configurations. By layering the server profiles, you can reuse the configurations that are common across environments, leading to fewer configurations to manage. You can have as many layers as needed. Each layer of the configuration is copied on top of the container's filesystem (not merged). Layer Precedence The profile layers are applied starting at the top layer and ending at the base layer. This ordering might not be apparent at first.","title":"Layering server profiles"},{"location":"how-to/profilesLayered/#before-you-begin","text":"You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products.","title":"Before you begin"},{"location":"how-to/profilesLayered/#about-this-task","text":"You will: Create a layered server profile. Assign the environment variables for the deployment. Deploy the layered server profile.","title":"About this task"},{"location":"how-to/profilesLayered/#creating-a-layered-server-profile","text":"For this guide, PingFederate is used along with the server profile located in the pingidentity-server-profiles repository. You should fork this repository to your Github repository, then pull your Github repository to a local directory. After you have finished creating the layered profile, you can push your updates to your Github repository and reference it as an environment variable to run the deployment. You will create separate layers for: Product license Extensions (such as, Integration Kits and Connectors) OAuth Playground For this example, these layers will be applied on top of the PingFederate server profile. However, you can span configurations across multiple repositories if you want. You can find the complete working, layered server profile of the PingFederate example from this guide in the pingidentity-server-profiles/layered-profiles directory. Because PingFederate's configuration is file-based, the layering works by copying configurations on top of the PingFederate container\u2019s file system. Files Copied Files are copied, not merged. It is best practice to only layer items that will not be impacted by other configuration files.","title":"Creating a layered server profile"},{"location":"how-to/profilesLayered/#creating-the-base-directories","text":"Create a working directory named layered_profiles and within that directory create license , extensions , and oauth directories. When completed, your directory structure should be: \u2514\u2500\u2500 layered_profiles \u251c\u2500\u2500 extensions \u251c\u2500\u2500 license \u2514\u2500\u2500 oauth","title":"Creating the base directories"},{"location":"how-to/profilesLayered/#constructing-the-license-layer","text":"Go to the license directory and create a pingfederate subdirectory. Create the PingFederate license file directory path under the pingfederate directory. The PingFederate license file resides in the /instance/server/default/conf/ path. mkdir -p instance/server/default/conf/ Your license profile path should look like this: \u2514\u2500\u2500 license \u2514\u2500\u2500 pingfederate \u2514\u2500\u2500 instance \u2514\u2500\u2500 server \u2514\u2500\u2500 default \u2514\u2500\u2500 conf \u2514\u2500\u2500 pingfederate.lic Copy your pingfederate.lic file to license/pingfederate/instance/server/default/conf . Using the DevOps evaluation license, when the PingFederate container is running, you can find the license in the container file system /opt/out/instance/server/default/conf directory. You can copy the pingfederate.lic file from the Docker file system using the syntax: docker cp <container> <source-location> <target-location> For example: docker cp \\ pingfederate \\ /opt/in/instance/server/default/conf/pingfederate.lic \\ ${ HOME } /projects/devops/layered_profiles/license/pingfederate/instance/server/default/conf Using the ping-devops tool: ping-devops generate license pingfederate > \\ ${ HOME } /projects/devops/layered_profiles/license/pingfederate/instance/server/default/conf","title":"Constructing the license layer"},{"location":"how-to/profilesLayered/#building-the-extensions-layer","text":"Go to the layered-profiles/extensions directory and create a pingfederate subdirectory. Create the PingFederate extensions directory path under the pingfederate directory. The PingFederate extensions reside in the /instance/server/default/deploy directory path. mkdir -p instance/server/default/deploy Copy the extensions you want to be available to PingFederate to the layered-profiles/extensions/pingfederate/instance/server/default/deploy directory . The extensions profile path should look similar to the following (extensions will vary based on your requirements): \u2514\u2500\u2500 extensions \u2514\u2500\u2500 pingfederate \u2514\u2500\u2500 instance \u2514\u2500\u2500 server \u2514\u2500\u2500 default \u2514\u2500\u2500 deploy \u251c\u2500\u2500 pf-aws-quickconnection-2.0.jar \u251c\u2500\u2500 pf-azure-ad-pcv-1.2.jar \u2514\u2500\u2500 pf-slack-quickconnection-3.0.jar","title":"Building the extensions layer"},{"location":"how-to/profilesLayered/#building-the-oauth-layer","text":"Go to the layered-profiles/oauth directory and create a pingfederate subdirectory. mkdir -p instance/server/default/pingfederate Copy the OAuthPlayground.war file to the layered-profiles/oauth/pingfederate/instance/server/default/deploy directory. Like other extensions, you can find the OAuth Playground for PingFederate in the /instance/server/default/deploy directory. For this example, you are building the OAuth Playground into its own layer to illustrate that it is optional for PingFederate deployments. Your OAuth profile layer should look like this: \u2514\u2500\u2500 oauth \u2514\u2500\u2500 pingfederate \u2514\u2500\u2500 instance \u2514\u2500\u2500 server \u2514\u2500\u2500 default \u2514\u2500\u2500 deploy \u2514\u2500\u2500 OAuthPlayground.war","title":"Building the OAuth layer"},{"location":"how-to/profilesLayered/#assigning-environment-variables","text":"Although this deployment assigns the environment variables for use in a Docker Compose YAML file, you can use the following technique with any Docker or Kubernetes deployment. If you want to use your own Github repository for the deployment in the following examples, replace: SERVER_PROFILE_URL = https://github.com/pingidentity/pingidentity-server-profiles.git with: SERVER_PROFILE_URL = https://github.com/<your-username>/pingidentity-server-profiles.git Private Github Repo If your GitHub server-profile repo is private, use the username:token format so the container can access the repository. For example, https://github.com/<your_username>:<your_access_token>/pingidentity-server-profiles.git . For more information, see Using Private Github Repositories . Create a new docker-compose.yaml file. Add your license profile to the YAML file. For example: - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=layered-profiles/license/pingfederate SERVER_PROFILE supports URL , PATH , BRANCH and PARENT variables. Using SERVER_PROFILE_PARENT , instruct the container to retrieve its parent configuration by specifying the extensions profile as the parent: - SERVER_PROFILE_PARENT=EXTENSIONS SERVER_PROFILE can be extended to reference additional profiles. Because we specified the license profile's parent as EXTENSIONS , we can extend SERVER_PROFILE by referencing the EXTENSIONS profile (prior to the URL and PATH variables): - SERVER_PROFILE_EXTENSIONS_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_EXTENSIONS_PATH=layered-profiles/extensions/pingfederate Set the EXTENSIONS parent to OAUTH : - SERVER_PROFILE_EXTENSIONS_PARENT=OAUTH Then set the URL and PATH for the OAUTH profile: - SERVER_PROFILE_OAUTH_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_OAUTH_PATH=layered-profiles/oauth/pingfederate Set GETTING_STARTED as the OAUTH parent and declare the URL and PATH : - SERVER_PROFILE_OAUTH_PARENT=GETTING_STARTED - SERVER_PROFILE_GETTING_STARTED_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_GETTING_STARTED_PATH=getting-started/pingfederate Because the GETTING_STARTED profile is the last profile to add, it will not have a parent. Your environment section of the docker-compose.yaml file should look similar to this: environment : # **** SERVER PROFILES BEGIN **** # Server Profile - Product License - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=layered-profiles/license/pingfederate - SERVER_PROFILE_PARENT=EXTENSIONS # Server Profile - Extensions - SERVER_PROFILE_EXTENSIONS_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_EXTENSIONS_PATH=layered-profiles/extensions/pingfederate - SERVER_PROFILE_EXTENSIONS_PARENT=OAUTH # Server Profile - OAUTH - SERVER_PROFILE_OAUTH_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_OAUTH_PATH=layered-profiles/oauth/pingfederate - SERVER_PROFILE_OAUTH_PARENT=GETTING_STARTED # Base Server Profile - SERVER_PROFILE_GETTING_STARTED_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_GETTING_STARTED_PATH=getting-started/pingfederate # **** SERVER PROFILE END ****","title":"Assigning environment variables"},{"location":"how-to/profilesLayered/#deploying-the-layered-profile","text":"Push your profiles and updated docker-compose.yaml file to your GitHub repository. Deploy the stack with the layered profiles. To view this example in its entirety, including the profile layers and docker-compose.yaml file, see the pingidentity-server-profiles/layered-profiles directory.","title":"Deploying the layered profile"},{"location":"how-to/profilesSubstitution/","text":"Environment Substitution \u00b6 In a typical environment, a product configuration is moved from server to server. Hostnames, endpoints, DNS information, and more need a way to be easily modified. By removing literal values and replacing them with environment variables, configurations can be deployed in multiple environments with minimal change. When templating profiles with variables that reference other products, use the conventions defined in PingBase Image Directory . All of our configuration files can be parameterized by adding variables using the syntax: ${filename.ext}.subst . Passing Values to Containers \u00b6 Within the environment section of your container definition, declare the variable and the value for the product instance. Values can be defined in many sources, such as inline, env_vars files, and Kubernetes ConfigMaps. How it Works \u00b6 A container startup is initiated. The configuration pulls a server profile from Git or from a bind mounted /opt/in volume. All files with a .subst extension are identified. The environment variables in the identified .subst files are replaced with the actual environment values. The .subst extension is removed from all the identified files. The product instance for the container is started.","title":"ENV Substitution"},{"location":"how-to/profilesSubstitution/#environment-substitution","text":"In a typical environment, a product configuration is moved from server to server. Hostnames, endpoints, DNS information, and more need a way to be easily modified. By removing literal values and replacing them with environment variables, configurations can be deployed in multiple environments with minimal change. When templating profiles with variables that reference other products, use the conventions defined in PingBase Image Directory . All of our configuration files can be parameterized by adding variables using the syntax: ${filename.ext}.subst .","title":"Environment Substitution"},{"location":"how-to/profilesSubstitution/#passing-values-to-containers","text":"Within the environment section of your container definition, declare the variable and the value for the product instance. Values can be defined in many sources, such as inline, env_vars files, and Kubernetes ConfigMaps.","title":"Passing Values to Containers"},{"location":"how-to/profilesSubstitution/#how-it-works","text":"A container startup is initiated. The configuration pulls a server profile from Git or from a bind mounted /opt/in volume. All files with a .subst extension are identified. The environment variables in the identified .subst files are replaced with the actual environment values. The .subst extension is removed from all the identified files. The product instance for the container is started.","title":"How it Works"},{"location":"how-to/saveConfigs/","text":"Saving your configuration changes \u00b6 To save any configuration changes you make when using the products in the stack, you must set up a local Docker volume to persist state and data for the stack. If you don't do this, whenever you bring the stack down, your configuration changes will be lost. Mount a Docker volume location to the Docker /opt/out directory for the container. The location must be to a directory you haven't already created. Our Docker containers use the /opt/out directory to store application data. Mounting to /opt/out Make sure the local directory isn't already created. Docker needs to create this directory for the mount to /opt/out . You can mount a Docker volume for containers in a stack or for standalone containers. Bind mounting for a stack \u00b6 Add a volumes section under the container entry for each product in the docker-compose.yaml file you're using for the stack. Under the volumes section, add a location to persist your data. For example: pingfederate : . . . volumes : - /tmp/compose/pingfederate_1:/opt/out In the environment section, comment out the SERVER_PROFILE_PATH setting. The container then uses your volumes entry to supply the product state and data, including your configuration changes. When the container starts, this mounts /tmp/compose/pingfederate_1 to the /opt/out directory in the container. You can also view the product logs and data in the /tmp/compose/pingfederate_1 directory. Repeat this process for the remaining container entries in the stack. Bind mounting for a standalone container \u00b6 Add a volume entry to the docker run command: docker run \\ --name pingfederate \\ --volume <local-path>:/opt/out \\ pingidentity/pingfederate:edge Getting started with Docker Compose mounts \u00b6 Within many of the docker-compose.yaml files in the Getting-Started repository , volume mounts to opt/out have been included to persist your configuration across container restarts. To view the list of persisted volumes, enter: docker volume list To view the contents of the /opt/out/ volume when the container is running, enter: docker container exec -it <container id> sh cd out To view the contents of the /opt/out/ volume when the container is stopped, enter: docker run --rm -i -v = <volume name>:/opt/out alpine ls To remove a volume, enter: docker volume rm <volume name> To copy files from the container to your local filesystem, enter: docker cp \\ <container id>:< source path> \\ <destination path> eg. docker cp \\ b867054293a1:/opt/out \\ ~/pingfederate/ To copy files from your local filesystem to the container, enter: docker cp \\ < source path> \\ <container id>:<destination path> eg. docker cp \\ myconnector.jar \\ bb867054293a186:/opt/out/instance/server/default/deploy/","title":"Saving Configurations"},{"location":"how-to/saveConfigs/#saving-your-configuration-changes","text":"To save any configuration changes you make when using the products in the stack, you must set up a local Docker volume to persist state and data for the stack. If you don't do this, whenever you bring the stack down, your configuration changes will be lost. Mount a Docker volume location to the Docker /opt/out directory for the container. The location must be to a directory you haven't already created. Our Docker containers use the /opt/out directory to store application data. Mounting to /opt/out Make sure the local directory isn't already created. Docker needs to create this directory for the mount to /opt/out . You can mount a Docker volume for containers in a stack or for standalone containers.","title":"Saving your configuration changes"},{"location":"how-to/saveConfigs/#bind-mounting-for-a-stack","text":"Add a volumes section under the container entry for each product in the docker-compose.yaml file you're using for the stack. Under the volumes section, add a location to persist your data. For example: pingfederate : . . . volumes : - /tmp/compose/pingfederate_1:/opt/out In the environment section, comment out the SERVER_PROFILE_PATH setting. The container then uses your volumes entry to supply the product state and data, including your configuration changes. When the container starts, this mounts /tmp/compose/pingfederate_1 to the /opt/out directory in the container. You can also view the product logs and data in the /tmp/compose/pingfederate_1 directory. Repeat this process for the remaining container entries in the stack.","title":"Bind mounting for a stack"},{"location":"how-to/saveConfigs/#bind-mounting-for-a-standalone-container","text":"Add a volume entry to the docker run command: docker run \\ --name pingfederate \\ --volume <local-path>:/opt/out \\ pingidentity/pingfederate:edge","title":"Bind mounting for a standalone container"},{"location":"how-to/saveConfigs/#getting-started-with-docker-compose-mounts","text":"Within many of the docker-compose.yaml files in the Getting-Started repository , volume mounts to opt/out have been included to persist your configuration across container restarts. To view the list of persisted volumes, enter: docker volume list To view the contents of the /opt/out/ volume when the container is running, enter: docker container exec -it <container id> sh cd out To view the contents of the /opt/out/ volume when the container is stopped, enter: docker run --rm -i -v = <volume name>:/opt/out alpine ls To remove a volume, enter: docker volume rm <volume name> To copy files from the container to your local filesystem, enter: docker cp \\ <container id>:< source path> \\ <destination path> eg. docker cp \\ b867054293a1:/opt/out \\ ~/pingfederate/ To copy files from your local filesystem to the container, enter: docker cp \\ < source path> \\ <container id>:<destination path> eg. docker cp \\ myconnector.jar \\ bb867054293a186:/opt/out/instance/server/default/deploy/","title":"Getting started with Docker Compose mounts"},{"location":"how-to/secureContainers/","text":"Securing the Containers \u00b6 Non-Privileged User by Default As of the 2103 (March 2021) release, Ping Identity Docker images run as a non-privileged user by default. The processes described on this page are necessary only for earlier versions of the images. By default, Ping Identity Docker images run as root within the container. When deploying these images into your production environment, you might want to secure them by using one of the following patterns. The patterns are shown in order of preference. Isolate Containers with a User Namespace \u00b6 Linux namespaces provide isolation for running processes, limiting their access to system resources without the running process being aware of the limitations. The best way to prevent privilege-escalation attacks from within a container is to configure your container\u2019s applications to run as unprivileged users. For containers whose processes must run as the root user within the container, you can re-map this user to a less-privileged user on the Docker host. Please view the Docker\u2019s in-depth Documentation on this pattern for more information. Inside-Out pattern \u00b6 Using the inside-out pattern, the container steps down from root to run as a non-privileged user. You can pass the User ID (UID) and Group ID (GID) for the container to run as. Overview of the bootstrap process: Start as root. Immediately check for a need to step down (PING_CONTAINER_PRIVILEGED=false). Create the group with provided group ID or 9999. Create the user with provided user ID or 9031. Strip ownership but for user:group. Step-down from root to user. This pattern has the benefit of removing permissions from anything but the specified user. Use the following environment variables to set the user and group and prevent from running as root: PING_CONTAINER_PRIVILEGED = false PING_CONTAINER_UID = <UID> ( Default: 9031 ) PING_CONTAINER_GID = <GID> ( Default: 9999 ) Pros: This pattern is more secure. Doesn't require infrastructure changes. User/group exist within the container. Recommended to be combined with namespace-Isolated containers. Cons: Implementation is vendor-specific and might require more introspection on the part of the deployer. Outside-In pattern (Kubernetes security-context) \u00b6 Using the outside-in pattern, you specify the user to run as through the Docker API (Docker Run, Compose, etc). This user must exist on the host machine if you want to mount a volume from the host into the container, and file ownership IDs need to agree. Pros: Easy, visible (accessible with docker run --user). The container runtime is never root at any point. Cons: User doesn't have a home directory, some tools will or might have issues running properly or as expected. For this pattern to work, at build time, we need to leave permissions open to the world because the user doesn't exist in /etc/password and inodes can't be tied to it at runtime. Ping Identity's Docker Image Hardening Guide \u00b6 For best practices on securing your product Docker image, see Ping Identity's Hardening Guide .","title":"Securing the Containers"},{"location":"how-to/secureContainers/#securing-the-containers","text":"Non-Privileged User by Default As of the 2103 (March 2021) release, Ping Identity Docker images run as a non-privileged user by default. The processes described on this page are necessary only for earlier versions of the images. By default, Ping Identity Docker images run as root within the container. When deploying these images into your production environment, you might want to secure them by using one of the following patterns. The patterns are shown in order of preference.","title":"Securing the Containers"},{"location":"how-to/secureContainers/#isolate-containers-with-a-user-namespace","text":"Linux namespaces provide isolation for running processes, limiting their access to system resources without the running process being aware of the limitations. The best way to prevent privilege-escalation attacks from within a container is to configure your container\u2019s applications to run as unprivileged users. For containers whose processes must run as the root user within the container, you can re-map this user to a less-privileged user on the Docker host. Please view the Docker\u2019s in-depth Documentation on this pattern for more information.","title":"Isolate Containers with a User Namespace"},{"location":"how-to/secureContainers/#inside-out-pattern","text":"Using the inside-out pattern, the container steps down from root to run as a non-privileged user. You can pass the User ID (UID) and Group ID (GID) for the container to run as. Overview of the bootstrap process: Start as root. Immediately check for a need to step down (PING_CONTAINER_PRIVILEGED=false). Create the group with provided group ID or 9999. Create the user with provided user ID or 9031. Strip ownership but for user:group. Step-down from root to user. This pattern has the benefit of removing permissions from anything but the specified user. Use the following environment variables to set the user and group and prevent from running as root: PING_CONTAINER_PRIVILEGED = false PING_CONTAINER_UID = <UID> ( Default: 9031 ) PING_CONTAINER_GID = <GID> ( Default: 9999 ) Pros: This pattern is more secure. Doesn't require infrastructure changes. User/group exist within the container. Recommended to be combined with namespace-Isolated containers. Cons: Implementation is vendor-specific and might require more introspection on the part of the deployer.","title":"Inside-Out pattern"},{"location":"how-to/secureContainers/#outside-in-pattern-kubernetes-security-context","text":"Using the outside-in pattern, you specify the user to run as through the Docker API (Docker Run, Compose, etc). This user must exist on the host machine if you want to mount a volume from the host into the container, and file ownership IDs need to agree. Pros: Easy, visible (accessible with docker run --user). The container runtime is never root at any point. Cons: User doesn't have a home directory, some tools will or might have issues running properly or as expected. For this pattern to work, at build time, we need to leave permissions open to the world because the user doesn't exist in /etc/password and inodes can't be tied to it at runtime.","title":"Outside-In pattern (Kubernetes security-context)"},{"location":"how-to/secureContainers/#ping-identitys-docker-image-hardening-guide","text":"For best practices on securing your product Docker image, see Ping Identity's Hardening Guide .","title":"Ping Identity's Docker Image Hardening Guide"},{"location":"how-to/upgradePingDirectory/","text":"Upgrading PingDirectory \u00b6 Because PingDirectory is essentially a database, in its container form, each node in a cluster has its own persisted volume. Additionally, because PingDirectory is an application that focuses on state, rolling out an upgrade isn't really the same as any other configuration update. However, the product software, and scripts in the image provide a process through which upgrades are drastically simplified. This use case focuses on a PingDirectory upgrade in a default Kubernetes environment where you upgrade a PingDirectory StatefulSet 8.0.0.1 to 8.1.0.0 using an incremental canary roll-out. Tips \u00b6 To ensure a successful upgrade process: Avoid combining configuration changes and version upgrades in the same rollout. This adds unnecessary complexity to debugging errors during an upgrade. Successfully complete an upgrade in a proper Dev/QA environment before trying anything in production. Upgrades will happen on one server at a time. Ensure you have enough resources on the remaining machines to prevent client impact. Follow a canary deployment pattern to ensure the changes will be successful before doing a full rollout. There is no good way to roll back a completed upgrade, so take any necessary steps to avoid this. Before you begin \u00b6 You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Clone or download the pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade repository to your local ${HOME}/projects/devops directory. Understand how to use our DevOps server profiles. Have access to a Kubernetes cluster and a default StorageClass. Understand how StatefulSets in Kubernetes is helpful. If you're upgrading in your own environment and using mounted licenses, have the license for the existing version in the /opt/out persisted volume and a license for the new version needs to be in /opt/in . The license locations aren't an needed if you're using our DevOps credentials in an evaluation context. About this task \u00b6 You will: Start with a base stack. Set up a partition to make changes on just one node. Deploy changes to one node and fix any errors. Rollout changes to other nodes. Upgrade process overview \u00b6 The key functionality for PingDirectory upgrades is the relationship between the image hooks and the manage-profile command in the product. The upgrade is processed as follows: When a node starts for the first time, it' i's in SETUP mode and runs manage-profile setup . When a node restarts (for whatever reason), it runs manage-profile replace-profile . This command compares the new profile to the old profile, and if there is a change, it tries standing up the server with the new profile. Errors are thrown if there's a configuration in the new profile that prevents it from being applied. If manage-profile replace-profile detects a product version difference, it takes the same approach as any other restart. It attempts to migrate PingDirectory to the new version, and if it can't, the command fails. Because there is processing that happens automatically in the container during the upgrade, you should roll the change out to a small partition first and test it thoroughly before rolling it out to all. This partition also gives us room to revert back without impacting traffic in case something is not as expected. This process in standard Kubernetes is called a Canary Rollout and is derived from Kubernetes documentation on StatefulSet update strategies . \"Canary Rollout\" in this scenario focuses only on an incremental rollout of containers, not actually separating traffic. That could be done with additional tools like Istio or standing up another service and pairing separate labels and selectors. Setting up the base stack \u00b6 The YAML configuration files for this use case are in your cloned local copy of the pingidentity-devops-getting-started repository To use the 1-initial.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to start with a PingDirectory StatefulSet using persistent volumes, enter: kubectl apply -f 1 -initial.yaml All kubectl commands for this use case need to be run from the pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory. This stands up a two directory topology, each with its own Persistent Volume Claim using the default storage class. Wait for both nodes to be healthy before continuing and then enter: kubectl get pods pingdirectory-0 and pingdirectory-1 should show 1/1 in the READY column. Setting up a partition \u00b6 To use the 2-partition.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to add a partition to StatefulSet for updateStrategy , enter: kubectl apply -f 2 -partition.yaml This partition configuration signifies that any changes to spec.template will only be applied to nodes with a cardinal value higher than the partition definition. Staging changes \u00b6 To use the 3-staging.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to stage the change, enter: kubectl apply -f 3 -staging.yaml The only actual change is to the image tag. When this change is applied: The pingdirectory-1 pod is terminated and a new one with the new image is started. The new PingDirectory container is based on a specific version of PingDirectory, found in the /opt/server volume. The manage-profile replace-profile command is eventually triggered when the container detects PingDirectory is in a RESTART state. This command identifies the difference in the database version running, based on the persisted volume attached to /opt/out , and then attempts to upgrade. Information similar to the following will be displayed: ... pingdirectory-1 Validating source and existing servers ..... Done pingdirectory-1 Updating the server version from 8.0.0.1 to 8.1.0.0. Local database backends pingdirectory-1 will be exported before the update in case a revert is necessary pingdirectory-1 Exporting backend with backendID userRoot. This may take a while ..... Done pingdirectory-1 Running the update tool ..... Done ... pingdirectory-1 Cleaning up after replace ..... Done pingdirectory-1 manage-profile replace-profile returned 0 This process requires having licenses for both server versions available and in the right location. If manage-profile replace-profile completes without error, you'll see the container continue the migration and eventually start up PingDirectory. If manage-profile replace-profile fails, an error is displayed and the container exits. The errors are because of some conflict in the server profile. The partition you set up previously provides an isolated environment for working out errors. Work through any errors until you can get manage-profile replace-profile to complete successfully before continuing. Rolling out the changes \u00b6 When you're confident your upgrade will occur smoothly: To use the 4-rollout.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to deploy the rollout to the remaining nodes, enter: kubectl apply -f 4 -rollout.yaml This removes the partition.","title":"Upgrading PingDirectory"},{"location":"how-to/upgradePingDirectory/#upgrading-pingdirectory","text":"Because PingDirectory is essentially a database, in its container form, each node in a cluster has its own persisted volume. Additionally, because PingDirectory is an application that focuses on state, rolling out an upgrade isn't really the same as any other configuration update. However, the product software, and scripts in the image provide a process through which upgrades are drastically simplified. This use case focuses on a PingDirectory upgrade in a default Kubernetes environment where you upgrade a PingDirectory StatefulSet 8.0.0.1 to 8.1.0.0 using an incremental canary roll-out.","title":"Upgrading PingDirectory"},{"location":"how-to/upgradePingDirectory/#tips","text":"To ensure a successful upgrade process: Avoid combining configuration changes and version upgrades in the same rollout. This adds unnecessary complexity to debugging errors during an upgrade. Successfully complete an upgrade in a proper Dev/QA environment before trying anything in production. Upgrades will happen on one server at a time. Ensure you have enough resources on the remaining machines to prevent client impact. Follow a canary deployment pattern to ensure the changes will be successful before doing a full rollout. There is no good way to roll back a completed upgrade, so take any necessary steps to avoid this.","title":"Tips"},{"location":"how-to/upgradePingDirectory/#before-you-begin","text":"You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Clone or download the pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade repository to your local ${HOME}/projects/devops directory. Understand how to use our DevOps server profiles. Have access to a Kubernetes cluster and a default StorageClass. Understand how StatefulSets in Kubernetes is helpful. If you're upgrading in your own environment and using mounted licenses, have the license for the existing version in the /opt/out persisted volume and a license for the new version needs to be in /opt/in . The license locations aren't an needed if you're using our DevOps credentials in an evaluation context.","title":"Before you begin"},{"location":"how-to/upgradePingDirectory/#about-this-task","text":"You will: Start with a base stack. Set up a partition to make changes on just one node. Deploy changes to one node and fix any errors. Rollout changes to other nodes.","title":"About this task"},{"location":"how-to/upgradePingDirectory/#upgrade-process-overview","text":"The key functionality for PingDirectory upgrades is the relationship between the image hooks and the manage-profile command in the product. The upgrade is processed as follows: When a node starts for the first time, it' i's in SETUP mode and runs manage-profile setup . When a node restarts (for whatever reason), it runs manage-profile replace-profile . This command compares the new profile to the old profile, and if there is a change, it tries standing up the server with the new profile. Errors are thrown if there's a configuration in the new profile that prevents it from being applied. If manage-profile replace-profile detects a product version difference, it takes the same approach as any other restart. It attempts to migrate PingDirectory to the new version, and if it can't, the command fails. Because there is processing that happens automatically in the container during the upgrade, you should roll the change out to a small partition first and test it thoroughly before rolling it out to all. This partition also gives us room to revert back without impacting traffic in case something is not as expected. This process in standard Kubernetes is called a Canary Rollout and is derived from Kubernetes documentation on StatefulSet update strategies . \"Canary Rollout\" in this scenario focuses only on an incremental rollout of containers, not actually separating traffic. That could be done with additional tools like Istio or standing up another service and pairing separate labels and selectors.","title":"Upgrade process overview"},{"location":"how-to/upgradePingDirectory/#setting-up-the-base-stack","text":"The YAML configuration files for this use case are in your cloned local copy of the pingidentity-devops-getting-started repository To use the 1-initial.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to start with a PingDirectory StatefulSet using persistent volumes, enter: kubectl apply -f 1 -initial.yaml All kubectl commands for this use case need to be run from the pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory. This stands up a two directory topology, each with its own Persistent Volume Claim using the default storage class. Wait for both nodes to be healthy before continuing and then enter: kubectl get pods pingdirectory-0 and pingdirectory-1 should show 1/1 in the READY column.","title":"Setting up the base stack"},{"location":"how-to/upgradePingDirectory/#setting-up-a-partition","text":"To use the 2-partition.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to add a partition to StatefulSet for updateStrategy , enter: kubectl apply -f 2 -partition.yaml This partition configuration signifies that any changes to spec.template will only be applied to nodes with a cardinal value higher than the partition definition.","title":"Setting up a partition"},{"location":"how-to/upgradePingDirectory/#staging-changes","text":"To use the 3-staging.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to stage the change, enter: kubectl apply -f 3 -staging.yaml The only actual change is to the image tag. When this change is applied: The pingdirectory-1 pod is terminated and a new one with the new image is started. The new PingDirectory container is based on a specific version of PingDirectory, found in the /opt/server volume. The manage-profile replace-profile command is eventually triggered when the container detects PingDirectory is in a RESTART state. This command identifies the difference in the database version running, based on the persisted volume attached to /opt/out , and then attempts to upgrade. Information similar to the following will be displayed: ... pingdirectory-1 Validating source and existing servers ..... Done pingdirectory-1 Updating the server version from 8.0.0.1 to 8.1.0.0. Local database backends pingdirectory-1 will be exported before the update in case a revert is necessary pingdirectory-1 Exporting backend with backendID userRoot. This may take a while ..... Done pingdirectory-1 Running the update tool ..... Done ... pingdirectory-1 Cleaning up after replace ..... Done pingdirectory-1 manage-profile replace-profile returned 0 This process requires having licenses for both server versions available and in the right location. If manage-profile replace-profile completes without error, you'll see the container continue the migration and eventually start up PingDirectory. If manage-profile replace-profile fails, an error is displayed and the container exits. The errors are because of some conflict in the server profile. The partition you set up previously provides an isolated environment for working out errors. Work through any errors until you can get manage-profile replace-profile to complete successfully before continuing.","title":"Staging changes"},{"location":"how-to/upgradePingDirectory/#rolling-out-the-changes","text":"When you're confident your upgrade will occur smoothly: To use the 4-rollout.yaml file in your local pingidentity-devops-getting-started/20-kustomize/12-pingdirectory-upgrade directory to deploy the rollout to the remaining nodes, enter: kubectl apply -f 4 -rollout.yaml This removes the partition.","title":"Rolling out the changes"},{"location":"how-to/upgradePingfederate/","text":"Upgrading PingFederate (Deprecated) \u00b6 In a DevOps environment, upgrades can be simplified through automation, orchestration, and separation of concerns. General Steps: Persistent Volume Upgrade of /opt/out/instance/server/default/data on pingfederate-admin Server Profile Upgrade Post Upgrade Persistent Volume Upgrade will include steps helpful to both pieces. Server Profile Upgrade will discuss extracting upgraded files. Caveats \u00b6 This Document Assumes Kubernetes and Helm The terms in this document will focus on deployments in a Kubernetes Environment using the ping-devops Helm chart. However, the concepts should apply to any containerized PingFederate Deployment. This Document will Become Outdated The examples referenced in this document point to a specifig tag. This tag may not exist anymore at the time of reading. To correct the issue, update the tag on your file to N -1 from the current PF version. Upgrades from Traditional Deployment It may be desirable to upgrade PingFederate along with migrating from a traditional environment. This is not recommended. Instead you should upgrade your current environment to the desired version of PingFederate and then create a profile that can be used in a containerized deployment. Persistent Volume on /opt/out The suggested script should not be used if a persistent volume is attached to /opt/out . New software bits will not include special files built into the docker image. It is recommended to mount volumes on PingFederate Admin to /opt/out/instance/server/default/data . Irrelevant Ingress The values.yaml files mentioned in this document expects and nginx ingress controller with class nginx-public . It is not an issue if your environment doesn't have this, the created ingresses will not be used. Persistent Volume Upgrade \u00b6 Steps needed in both Server-Profile upgrade and Persistent Volume upgrade include: Deploy your PingFederate version and server profile as background process Upgrade profile in container Backup the files in your profile. Download the PingFederate software bits for the new version. Run upgrade utility diff to view the changes. (optional) Reconfigure any variablized components. Export changes to your profile Here we will walk through an example upgrade. This Process Requires Container Exec Access Your orchestration user will need access to kubectl exec -it <pod> -- sh for multiple steps here. Deploy Pingfederate as a Background Process \u00b6 Deploy your PingFederate version and server profile as background process with Helm: Make sure you have a devops-secret If you are using this example as is, you will need a devops-secret Be sure to change the ingress domain name value to your domain in 01-background.yaml helm upgrade --install pf-upgrade pingidentity/ping-devops \\ --version 0.8.4 -f 30-helm/pingfederate-upgrade/01-background.yaml The args section starts pingfederate as a background process and tail -f /dev/null as the foreground process. Upgrade Profile in Container \u00b6 The steps for upgrading can be automated with a script. Example scripts are included at 30-helm/pingfederate-upgrade/hooks . To use the scripts, copy the folder your PingFederate container kubectl cp 30-helm/pingfederate-upgrade/hooks pf-upgrade-pingfederate-admin-0:/opt/staging The pf-upgrade.sh script will: download the target PingFederate software bits backup the current /opt/out folder to /opt/current_bak run the upgrade utility overwrite /opt/out or /opt/out/instance/server/default/data with upgraded files run diff between /opt/staging (server-profile location) and respective upgraded file. Diffs can be found in /tmp/stagingDiffs Exec into the container and run the script. kubectl exec -it pf-upgrade-pingfederate-admin-0 -- sh cd /opt/staging/hooks sh pf-upgrade.sh 10.3.4 At the conclusion of the script you will have an upgraded /opt/out/instance/server/default/data folder. Server Profile Upgrade \u00b6 If your profile is applied on each start of your container, you should keep your profile up to date with the product version you are deploying. After the previously run script, you can find upgraded profile files in /opt/new_staging These files will be hard-coded and you should follow Build a PingFederate Profile as needed for templating. Additionally, If you use the bulk-config data.json import it will not be found here. It should be imported via the standard process on the next container start. Post Upgrade \u00b6 To enable PingFederate admin as a foreground process, scale it down first. kubectl scale sts pf-upgrade-pingfederate-admin --replicas=0 Finally, update PingFederate image version to new target PingFederate version and run as normal. helm upgrade --install pf-upgrade pingidentity/ping-devops --version 0.8.4 \\ -f 30-helm/pingfederate-upgrade/02-upgraded.yaml This will restart the admin console, and trigger a rolling update of all the engines. Old Profile The final yaml 30-helm/pingfederate-upgrade/02-upgraded.yaml still points to the same profile. The steps that should have been completed in Server Profile Upgrade were not included. Connecting to the admin console will now show the upgraded version in cluster management.","title":"Upgrading PingFederate"},{"location":"how-to/upgradePingfederate/#upgrading-pingfederate-deprecated","text":"In a DevOps environment, upgrades can be simplified through automation, orchestration, and separation of concerns. General Steps: Persistent Volume Upgrade of /opt/out/instance/server/default/data on pingfederate-admin Server Profile Upgrade Post Upgrade Persistent Volume Upgrade will include steps helpful to both pieces. Server Profile Upgrade will discuss extracting upgraded files.","title":"Upgrading PingFederate (Deprecated)"},{"location":"how-to/upgradePingfederate/#caveats","text":"This Document Assumes Kubernetes and Helm The terms in this document will focus on deployments in a Kubernetes Environment using the ping-devops Helm chart. However, the concepts should apply to any containerized PingFederate Deployment. This Document will Become Outdated The examples referenced in this document point to a specifig tag. This tag may not exist anymore at the time of reading. To correct the issue, update the tag on your file to N -1 from the current PF version. Upgrades from Traditional Deployment It may be desirable to upgrade PingFederate along with migrating from a traditional environment. This is not recommended. Instead you should upgrade your current environment to the desired version of PingFederate and then create a profile that can be used in a containerized deployment. Persistent Volume on /opt/out The suggested script should not be used if a persistent volume is attached to /opt/out . New software bits will not include special files built into the docker image. It is recommended to mount volumes on PingFederate Admin to /opt/out/instance/server/default/data . Irrelevant Ingress The values.yaml files mentioned in this document expects and nginx ingress controller with class nginx-public . It is not an issue if your environment doesn't have this, the created ingresses will not be used.","title":"Caveats"},{"location":"how-to/upgradePingfederate/#persistent-volume-upgrade","text":"Steps needed in both Server-Profile upgrade and Persistent Volume upgrade include: Deploy your PingFederate version and server profile as background process Upgrade profile in container Backup the files in your profile. Download the PingFederate software bits for the new version. Run upgrade utility diff to view the changes. (optional) Reconfigure any variablized components. Export changes to your profile Here we will walk through an example upgrade. This Process Requires Container Exec Access Your orchestration user will need access to kubectl exec -it <pod> -- sh for multiple steps here.","title":"Persistent Volume Upgrade"},{"location":"how-to/upgradePingfederate/#deploy-pingfederate-as-a-background-process","text":"Deploy your PingFederate version and server profile as background process with Helm: Make sure you have a devops-secret If you are using this example as is, you will need a devops-secret Be sure to change the ingress domain name value to your domain in 01-background.yaml helm upgrade --install pf-upgrade pingidentity/ping-devops \\ --version 0.8.4 -f 30-helm/pingfederate-upgrade/01-background.yaml The args section starts pingfederate as a background process and tail -f /dev/null as the foreground process.","title":"Deploy Pingfederate as a Background Process"},{"location":"how-to/upgradePingfederate/#upgrade-profile-in-container","text":"The steps for upgrading can be automated with a script. Example scripts are included at 30-helm/pingfederate-upgrade/hooks . To use the scripts, copy the folder your PingFederate container kubectl cp 30-helm/pingfederate-upgrade/hooks pf-upgrade-pingfederate-admin-0:/opt/staging The pf-upgrade.sh script will: download the target PingFederate software bits backup the current /opt/out folder to /opt/current_bak run the upgrade utility overwrite /opt/out or /opt/out/instance/server/default/data with upgraded files run diff between /opt/staging (server-profile location) and respective upgraded file. Diffs can be found in /tmp/stagingDiffs Exec into the container and run the script. kubectl exec -it pf-upgrade-pingfederate-admin-0 -- sh cd /opt/staging/hooks sh pf-upgrade.sh 10.3.4 At the conclusion of the script you will have an upgraded /opt/out/instance/server/default/data folder.","title":"Upgrade Profile in Container"},{"location":"how-to/upgradePingfederate/#server-profile-upgrade","text":"If your profile is applied on each start of your container, you should keep your profile up to date with the product version you are deploying. After the previously run script, you can find upgraded profile files in /opt/new_staging These files will be hard-coded and you should follow Build a PingFederate Profile as needed for templating. Additionally, If you use the bulk-config data.json import it will not be found here. It should be imported via the standard process on the next container start.","title":"Server Profile Upgrade"},{"location":"how-to/upgradePingfederate/#post-upgrade","text":"To enable PingFederate admin as a foreground process, scale it down first. kubectl scale sts pf-upgrade-pingfederate-admin --replicas=0 Finally, update PingFederate image version to new target PingFederate version and run as normal. helm upgrade --install pf-upgrade pingidentity/ping-devops --version 0.8.4 \\ -f 30-helm/pingfederate-upgrade/02-upgraded.yaml This will restart the admin console, and trigger a rolling update of all the engines. Old Profile The final yaml 30-helm/pingfederate-upgrade/02-upgraded.yaml still points to the same profile. The steps that should have been completed in Server Profile Upgrade were not included. Connecting to the admin console will now show the upgraded version in cluster management.","title":"Post Upgrade"},{"location":"how-to/usingVault/","text":"Using Hashicorp Vault \u00b6 This documentation provides details for using Hashicorp Vault and secrets with Ping Identity DevOps images. Before you begin \u00b6 You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Have a running Hashicorp Vault instance. About this task \u00b6 The following examples explain and show: How to use HashiCorp Vault Secrets in native PingIdentity DevOps images How to use HashiCorp Vault Injector in Kubernetes deployments Kubernetes - HashiCorp Vault Injector \u00b6 If you are using Kubernetes to deploy your containers, it's highly recommended to use the HashiCorp Vault Injector. The following provides details on how to use secrets in a non-Kubernetes deployment, such as Docker-compose. If the HashiCorp Vault Injector Agent is installed, annotations can be added to the .yaml file of a Pod, Deployment, StatefulSet resource to pull in the secrets. The snippet below provides an example set of annotations (placed in to the metadata of the container) to pull in a pf.jwk secret into a container. Helm Chart Stateful Set This is an StatefulSet example created using the PingIdentity DevOps Helm Chart . apiVersion : apps/v1 kind : StatefulSet spec : template : metadata : annotations : vault.hashicorp.com/agent-init-first : \"true\" vault.hashicorp.com/agent-inject : \"true\" vault.hashicorp.com/agent-inject-secret-devops-secret.env.json : secret/.../devops-secret.env vault.hashicorp.com/agent-inject-template-devops-secret.env.json : | {{ with secret \"secret/.../devops-secret.env\" -}} {{ .Data.data | toJSONPretty }} {{- end }} vault.hashicorp.com/agent-inject-secret-devops-secret.env.json : secret/.../passwords vault.hashicorp.com/agent-inject-template-passwords.json : | {{ with secret \"secret/.../passwords\" -}} {{ .Data.data | toJSONPretty }} {{- end }} vault.hashicorp.com/agent-pre-populate-only : \"true\" vault.hashicorp.com/log-level : info vault.hashicorp.com/preserve-secret-case : \"true\" vault.hashicorp.com/role : k8s-default vault.hashicorp.com/secret-volume-path : /run/secrets Secrets - Variables \u00b6 Using the previous example, the value for secret secret/.../devops-secret.env JSON will be pulled into the container as /run/secrets/devops-secret.env.json . Because this secret ends in the value of .env , it will further be turned into a property file with NAME=VALUE pairs and is available to the container environment on start up. Example of devops-secret.env transformed into files { \"PING_IDENTITY_DEVOPS_USER\" : \"jsmith@example.com\" , \"PING_IDENTITY_DEVOPS_KEY\" : \"xxxxx-xxxx-xxxxx-xxxxx-xxxx\" } creates the files File: /run/secrets/devops-secret.env Contents: PING_IDENTITY_DEVOPS_USER=\"jsmith@example.com\" PING_IDENTITY_DEVOPS_KEY=\"xxxxx-xxxx-xxxxx-xxxxx-xxxx\" Secret - Files \u00b6 Using the previous example, the value for secret secret/.../passwords JSON will be pulled into the container as /run/secrets/passwords.json and for every key/value in that secret, a file will be created with the name of the key and contents of value . Example of /run/secrets/passwords.json transformed into files { \"root-user-password\" : \"secret-root-password\" , \"admin-password\" : \"secret-admin-password\" } creates the files File: /run/secrets/secret-root-password Contents: secret-root-password File: /run/secrets/secret-admin-password Contents: secret-admin-password Native DevOps HashiCorp Support \u00b6 Vault secrets can also be used in native PingIdentity DevOps images regardless of the environment they are deployed in, for example, Kubernetes, Docker, and Docker-compose. In these cases, there is no injector agent required. This does require some type of AuthN to your vault, such as USERNAME/PASSWORD or TOKEN. HashiCorp Injector method is recommended. The following image depicts the components and steps for pulling secrets into a container at start-up. You can use the following variables to deploy images that will pull secrets from the Vault. Variable Example Description SECRETS_DIR /run/secrets Location for storing secrets. See section below on using a tmpfs mounted filesystem to store secrets in a memory location. VAULT_TYPE hashicorp Type of vault used. Currently supporting hashicorp. VAULT_ADDR https://vault.example.com:8200 URL for the vault with secrets VAULT_TOKEN s.gvC3vd5aFz......JovV0b0A Active token used to authticate/authorize container to vault. Optional if VAULT_AUTH_USERNAME/VAULT_AUTH_PASSWORD are provided. VAULT_AUTH_USERNAME demo Username of internal vault identity. Optional if VAULT_TOKEN is provided. VAULT_AUTH_PASSWORD 2FederateM0re Password of internal vault identity. Optional if VAULT_TOKEN is provided. VAULT_SECRETS /pingfederate/encryption-keys A list of secrets to pull into the container. Must be the full secret path used in vault. The following example shows how these would be used in a docker-compose.yaml file. This example provides two secrets, as denoted by the VAULT_SECRETS setting. services : pingfederate : image : pingidentity/pingfederate:edge environment : ... ################################################ # Vault Info ################################################ - VAULT_TYPE=hashicorp - VAULT_ADDR=https://vault.ping-devops.com:8200 - VAULT_AUTH_USERNAME=demo - VAULT_AUTH_PASSWORD=2FederateM0re - VAULT_SECRETS=/demo/passwords /demo/getting-started/pingfederated/pf-keys The secret types (Variables/Files) are processed the same way as with the HashiCorp Injector Method above. Secrets - Base64 \u00b6 Often, there are secrets that might be of a binary format, such as certificates. Special key name suffixes can be used to perform certain processing on the keys when the file is created. The following table provides examples of how keys with special suffixes. Key Suffix Description .b64 or .base64 Specifies that the value is base64 encoded and the resulting file should be decoded when written, without the suffix. There is a message that is base64 encoded and stored in the vault as secret /demo/b64-demo and key hello.b64 Secret: /demo/b64-demo KEY VALUE --- ----- hello.b64 SGVsbG8gV29ybGQhCg== would result in the following file: /run/secrets/hello CONTENTS -------- Hello World! Using tmpfs for Secrets \u00b6 It's best practice to place secrets in a volume that won't be persisted to storage with the possibility that it might be improperly accessed at any point in the future, such as backups and environment variables. Kubernetes automatically provides the default SECRETS_DIR of /run/secrets for this. If using Docker, you should create a tmpfs type volume and size it to 32m and mount it to a path of /run/secrets . Docker-compose version > 2.4 Requires Docker-compose version 2.4 or later, due to the options provided to the tmpfs volumes definition Creates a /run/secrets volume under tmpfs version : \"2.4\" services : pingfederate : image : pingidentity/pingfederate:edge environment : ... tmpfs : /run/secrets ---- or ----- volumes : - type : tmpfs target : /run/secrets tmpfs : size : 32m See this mount by exec'ing into the container and running: > df -k /run/secrets Filesystem 1K-blocks Used Available Use% Mounted on tmpfs 16384 0 16384 0 % /run/secrets","title":"Vault/Secrets"},{"location":"how-to/usingVault/#using-hashicorp-vault","text":"This documentation provides details for using Hashicorp Vault and secrets with Ping Identity DevOps images.","title":"Using Hashicorp Vault"},{"location":"how-to/usingVault/#before-you-begin","text":"You must: Complete Get Started to set up your DevOps environment and run a test deployment of the products. Have a running Hashicorp Vault instance.","title":"Before you begin"},{"location":"how-to/usingVault/#about-this-task","text":"The following examples explain and show: How to use HashiCorp Vault Secrets in native PingIdentity DevOps images How to use HashiCorp Vault Injector in Kubernetes deployments","title":"About this task"},{"location":"how-to/usingVault/#kubernetes-hashicorp-vault-injector","text":"If you are using Kubernetes to deploy your containers, it's highly recommended to use the HashiCorp Vault Injector. The following provides details on how to use secrets in a non-Kubernetes deployment, such as Docker-compose. If the HashiCorp Vault Injector Agent is installed, annotations can be added to the .yaml file of a Pod, Deployment, StatefulSet resource to pull in the secrets. The snippet below provides an example set of annotations (placed in to the metadata of the container) to pull in a pf.jwk secret into a container. Helm Chart Stateful Set This is an StatefulSet example created using the PingIdentity DevOps Helm Chart . apiVersion : apps/v1 kind : StatefulSet spec : template : metadata : annotations : vault.hashicorp.com/agent-init-first : \"true\" vault.hashicorp.com/agent-inject : \"true\" vault.hashicorp.com/agent-inject-secret-devops-secret.env.json : secret/.../devops-secret.env vault.hashicorp.com/agent-inject-template-devops-secret.env.json : | {{ with secret \"secret/.../devops-secret.env\" -}} {{ .Data.data | toJSONPretty }} {{- end }} vault.hashicorp.com/agent-inject-secret-devops-secret.env.json : secret/.../passwords vault.hashicorp.com/agent-inject-template-passwords.json : | {{ with secret \"secret/.../passwords\" -}} {{ .Data.data | toJSONPretty }} {{- end }} vault.hashicorp.com/agent-pre-populate-only : \"true\" vault.hashicorp.com/log-level : info vault.hashicorp.com/preserve-secret-case : \"true\" vault.hashicorp.com/role : k8s-default vault.hashicorp.com/secret-volume-path : /run/secrets","title":"Kubernetes - HashiCorp Vault Injector"},{"location":"how-to/usingVault/#secrets-variables","text":"Using the previous example, the value for secret secret/.../devops-secret.env JSON will be pulled into the container as /run/secrets/devops-secret.env.json . Because this secret ends in the value of .env , it will further be turned into a property file with NAME=VALUE pairs and is available to the container environment on start up. Example of devops-secret.env transformed into files { \"PING_IDENTITY_DEVOPS_USER\" : \"jsmith@example.com\" , \"PING_IDENTITY_DEVOPS_KEY\" : \"xxxxx-xxxx-xxxxx-xxxxx-xxxx\" } creates the files File: /run/secrets/devops-secret.env Contents: PING_IDENTITY_DEVOPS_USER=\"jsmith@example.com\" PING_IDENTITY_DEVOPS_KEY=\"xxxxx-xxxx-xxxxx-xxxxx-xxxx\"","title":"Secrets - Variables"},{"location":"how-to/usingVault/#secret-files","text":"Using the previous example, the value for secret secret/.../passwords JSON will be pulled into the container as /run/secrets/passwords.json and for every key/value in that secret, a file will be created with the name of the key and contents of value . Example of /run/secrets/passwords.json transformed into files { \"root-user-password\" : \"secret-root-password\" , \"admin-password\" : \"secret-admin-password\" } creates the files File: /run/secrets/secret-root-password Contents: secret-root-password File: /run/secrets/secret-admin-password Contents: secret-admin-password","title":"Secret - Files"},{"location":"how-to/usingVault/#native-devops-hashicorp-support","text":"Vault secrets can also be used in native PingIdentity DevOps images regardless of the environment they are deployed in, for example, Kubernetes, Docker, and Docker-compose. In these cases, there is no injector agent required. This does require some type of AuthN to your vault, such as USERNAME/PASSWORD or TOKEN. HashiCorp Injector method is recommended. The following image depicts the components and steps for pulling secrets into a container at start-up. You can use the following variables to deploy images that will pull secrets from the Vault. Variable Example Description SECRETS_DIR /run/secrets Location for storing secrets. See section below on using a tmpfs mounted filesystem to store secrets in a memory location. VAULT_TYPE hashicorp Type of vault used. Currently supporting hashicorp. VAULT_ADDR https://vault.example.com:8200 URL for the vault with secrets VAULT_TOKEN s.gvC3vd5aFz......JovV0b0A Active token used to authticate/authorize container to vault. Optional if VAULT_AUTH_USERNAME/VAULT_AUTH_PASSWORD are provided. VAULT_AUTH_USERNAME demo Username of internal vault identity. Optional if VAULT_TOKEN is provided. VAULT_AUTH_PASSWORD 2FederateM0re Password of internal vault identity. Optional if VAULT_TOKEN is provided. VAULT_SECRETS /pingfederate/encryption-keys A list of secrets to pull into the container. Must be the full secret path used in vault. The following example shows how these would be used in a docker-compose.yaml file. This example provides two secrets, as denoted by the VAULT_SECRETS setting. services : pingfederate : image : pingidentity/pingfederate:edge environment : ... ################################################ # Vault Info ################################################ - VAULT_TYPE=hashicorp - VAULT_ADDR=https://vault.ping-devops.com:8200 - VAULT_AUTH_USERNAME=demo - VAULT_AUTH_PASSWORD=2FederateM0re - VAULT_SECRETS=/demo/passwords /demo/getting-started/pingfederated/pf-keys The secret types (Variables/Files) are processed the same way as with the HashiCorp Injector Method above.","title":"Native DevOps HashiCorp Support"},{"location":"how-to/usingVault/#secrets-base64","text":"Often, there are secrets that might be of a binary format, such as certificates. Special key name suffixes can be used to perform certain processing on the keys when the file is created. The following table provides examples of how keys with special suffixes. Key Suffix Description .b64 or .base64 Specifies that the value is base64 encoded and the resulting file should be decoded when written, without the suffix. There is a message that is base64 encoded and stored in the vault as secret /demo/b64-demo and key hello.b64 Secret: /demo/b64-demo KEY VALUE --- ----- hello.b64 SGVsbG8gV29ybGQhCg== would result in the following file: /run/secrets/hello CONTENTS -------- Hello World!","title":"Secrets - Base64"},{"location":"how-to/usingVault/#using-tmpfs-for-secrets","text":"It's best practice to place secrets in a volume that won't be persisted to storage with the possibility that it might be improperly accessed at any point in the future, such as backups and environment variables. Kubernetes automatically provides the default SECRETS_DIR of /run/secrets for this. If using Docker, you should create a tmpfs type volume and size it to 32m and mount it to a path of /run/secrets . Docker-compose version > 2.4 Requires Docker-compose version 2.4 or later, due to the options provided to the tmpfs volumes definition Creates a /run/secrets volume under tmpfs version : \"2.4\" services : pingfederate : image : pingidentity/pingfederate:edge environment : ... tmpfs : /run/secrets ---- or ----- volumes : - type : tmpfs target : /run/secrets tmpfs : size : 32m See this mount by exec'ing into the container and running: > df -k /run/secrets Filesystem 1K-blocks Used Available Use% Mounted on tmpfs 16384 0 16384 0 % /run/secrets","title":"Using tmpfs for Secrets"},{"location":"reference/HelmBasics/","text":"Helm Basics \u00b6 Although this document cannot cover the depths of this tool, new Helm users might find other technical documentation too involved for the purpose of beginning use of Ping Identity container images. This document aims to equip new users with helpful terminology in simple terms, with a focus on relevant commands. For more in-depth documentation around Helm, check out helm.sh . Note This overview uses Ping Identity images and practices as a guide, but generally applies to any interactions using Helm with Kubernetes. With these assumptions, this document might feel incomplete or inaccurate to veterans. If you would like to contribute to this document, feel free to open a pull request! Helm \u00b6 Ping Identity DevOps and Helm All of our instructions and examples are based on the Ping Identity DevOps Helm chart . If you are not using the Ping Identity DevOps Helm chart in production, we still recommend using it to generate your direct Kubernetes manifest files. Using our provided chart to create your files in this manner gives Ping Identity the best opportunity to support your environment. Everything in Kubernetes is deployed by defining what you want and allowing Kubernetes to achieve the desired state ( the declarative model ). Helm simplifies your interaction by building deployment patterns into templates with variables. The Ping Identity Helm chart includes Kubernetes templates and default values maintained by Ping Identity. With these in hand, you only need to provide values for the template variables to match your environment. For example, a service definition looks like the following file. With this file, Kubernetes is instructed to create a service resource with the name myping-pingdirectory . apiVersion : v1 kind : Service metadata : labels : app.kubernetes.io/instance : myping app.kubernetes.io/name : pingdirectory name : myping-pingdirectory spec : ports : - name : https port : 443 protocol : TCP targetPort : 1443 - name : ldap port : 389 protocol : TCP targetPort : 1389 - name : ldaps port : 636 protocol : TCP targetPort : 1636 selector : app.kubernetes.io/instance : myping app.kubernetes.io/name : pingdirectory type : ClusterIP Using our Helm chart, you can automatically define this entire resource and all other required resources for a basic deployment by setting pingdirectory.enabled=true . Terminology \u00b6 Manifests - the final Kubernetes YAML files that are sent to the cluster for resource creation. These files are standard Kubernetes files and will be similar to the service example shown above. Helm Templates - Go Template versions of Kubernetes YAML files. These templates enable the manifest creation to be parameterized. Values and values.yaml - A value is the setting you pass to a Helm chart from which the templates produce the manifests you want. Values can be passed individually on the command line, but more commonly they are collected and defined in a file named values.yaml . For example, if this file contained only this entry, the resulting Kubernetes manifest file would be over 200 lines long. pingdirectory : enabled : true release - When you deploy resources with Helm, you provide a name for identification. The combination of this name and the resources that are deployed using it make up a release . When using Helm, it is a common pattern to prefix all resources managed by a release with the release name. In our examples, myping is the release name, so you will see products in Kubernetes running with names similar to myping-pingfederate-admin , myping-pingdirectory , and myping-pingauthorize . Building the Helm Values File \u00b6 This documentation focuses on the Ping Identity DevOps Helm chart and the values passed to the Helm chart to achieve your configuration. For your deployment to fit your goals, you must create a values.yaml file. The most simple values.yaml for our Helm chart would be: global : enabled : true By default, this flag is set as global.enabled=false . These two lines are sufficient to turn on (deploy) every available Ping Identity software product with a basic configuration. Providing your own server profile \u00b6 In the documentation, there is an example for providing your own server profile stored in GitHub to PingDirectory. The documenation provides this snippet in the values.yaml specific to that feature: pingdirectory : envs : SERVER_PROFILE_URL : https://github.com/<your-github-user>/pingidentity-server-profiles This entry alone will not turn on PingDirectory, because the default value for pingdirectory.enabled is false. To complete the deployment, add the snippet to turn deploy and configure PingDirectory in the values.yaml file: global : enabled : true pingdirectory : envs : SERVER_PROFILE_URL : https://github.com/<your-github-user>/pingidentity-server-profiles This example snippet turns on all products, including PingDirectory, and overwrites the default pingdirectory.envs.SERVER_PROFILE_URL with https://github.com/<your-github-user>/pingidentity-server-profiles . This use of substitution and parameters is where the power of Helm to simplify ease of deployment begins to shine. To fully customize your deployment, review all available options by running: helm show values pingidentity/ping-devops This command prints all of the default values applied to your deployment. To overwrite any default values from the chart, copy the corresponding snippet and include it in your own values.yaml file with any modifications needed. Remember with YAML that tabbing and spacing matters. For most editors, copying all the way to the left margin and pasting at the very beginning of a line in your file should maintain proper indentation. Helm also provides a wide variety of plugins. A useful one is Helm diff . This plugin shows what changes would be applied between Helm upgrade commands. For example, if this plugin indicates anything in a Deployment or Statefulset would change, you can expect the corresponding pods to be cycled. In this example, Helm diff is useful to note changes that would occur, particularly when you are not prepared for containers to be restarted. Additional Commands \u00b6 As you go through the Helm examples, the goal is to build a values.yaml file that works in your environment. Deploy a release: \u00b6 helm upgrade --install <release_name> pingidentity/ping-devops -f /path/to/values.yaml Delete a release: \u00b6 This command will remove all resources except PVC and PV objects associated with the release from the cluster: helm uninstall <release name> Delete PVCs associated to a release: \u00b6 kubectl delete pvc --selector = app.kubernetes.io/instance = <release_name> Exit Codes \u00b6 Exit Code Description Exit Code 0 Absence of an attached foreground process Exit Code 1 Indicates failure due to application error Exit Code 137 Indicates failure as container received SIGKILL (manual intervention or \u2018oom-killer\u2019 [OUT-OF-MEMORY]) Exit Code 139 Indicates failure as container received SIGSEGV Exit Code 143 Indicates failure as a container received SIGTERM Example Configurations \u00b6 The Helm examples page contains example configurations for running and configuring Ping products using the Ping Devops Helm Chart. Please review the Getting Started Page before trying them.","title":"Helm Basics"},{"location":"reference/HelmBasics/#helm-basics","text":"Although this document cannot cover the depths of this tool, new Helm users might find other technical documentation too involved for the purpose of beginning use of Ping Identity container images. This document aims to equip new users with helpful terminology in simple terms, with a focus on relevant commands. For more in-depth documentation around Helm, check out helm.sh . Note This overview uses Ping Identity images and practices as a guide, but generally applies to any interactions using Helm with Kubernetes. With these assumptions, this document might feel incomplete or inaccurate to veterans. If you would like to contribute to this document, feel free to open a pull request!","title":"Helm Basics"},{"location":"reference/HelmBasics/#helm","text":"Ping Identity DevOps and Helm All of our instructions and examples are based on the Ping Identity DevOps Helm chart . If you are not using the Ping Identity DevOps Helm chart in production, we still recommend using it to generate your direct Kubernetes manifest files. Using our provided chart to create your files in this manner gives Ping Identity the best opportunity to support your environment. Everything in Kubernetes is deployed by defining what you want and allowing Kubernetes to achieve the desired state ( the declarative model ). Helm simplifies your interaction by building deployment patterns into templates with variables. The Ping Identity Helm chart includes Kubernetes templates and default values maintained by Ping Identity. With these in hand, you only need to provide values for the template variables to match your environment. For example, a service definition looks like the following file. With this file, Kubernetes is instructed to create a service resource with the name myping-pingdirectory . apiVersion : v1 kind : Service metadata : labels : app.kubernetes.io/instance : myping app.kubernetes.io/name : pingdirectory name : myping-pingdirectory spec : ports : - name : https port : 443 protocol : TCP targetPort : 1443 - name : ldap port : 389 protocol : TCP targetPort : 1389 - name : ldaps port : 636 protocol : TCP targetPort : 1636 selector : app.kubernetes.io/instance : myping app.kubernetes.io/name : pingdirectory type : ClusterIP Using our Helm chart, you can automatically define this entire resource and all other required resources for a basic deployment by setting pingdirectory.enabled=true .","title":"Helm"},{"location":"reference/HelmBasics/#terminology","text":"Manifests - the final Kubernetes YAML files that are sent to the cluster for resource creation. These files are standard Kubernetes files and will be similar to the service example shown above. Helm Templates - Go Template versions of Kubernetes YAML files. These templates enable the manifest creation to be parameterized. Values and values.yaml - A value is the setting you pass to a Helm chart from which the templates produce the manifests you want. Values can be passed individually on the command line, but more commonly they are collected and defined in a file named values.yaml . For example, if this file contained only this entry, the resulting Kubernetes manifest file would be over 200 lines long. pingdirectory : enabled : true release - When you deploy resources with Helm, you provide a name for identification. The combination of this name and the resources that are deployed using it make up a release . When using Helm, it is a common pattern to prefix all resources managed by a release with the release name. In our examples, myping is the release name, so you will see products in Kubernetes running with names similar to myping-pingfederate-admin , myping-pingdirectory , and myping-pingauthorize .","title":"Terminology"},{"location":"reference/HelmBasics/#building-the-helm-values-file","text":"This documentation focuses on the Ping Identity DevOps Helm chart and the values passed to the Helm chart to achieve your configuration. For your deployment to fit your goals, you must create a values.yaml file. The most simple values.yaml for our Helm chart would be: global : enabled : true By default, this flag is set as global.enabled=false . These two lines are sufficient to turn on (deploy) every available Ping Identity software product with a basic configuration.","title":"Building the Helm Values File"},{"location":"reference/HelmBasics/#providing-your-own-server-profile","text":"In the documentation, there is an example for providing your own server profile stored in GitHub to PingDirectory. The documenation provides this snippet in the values.yaml specific to that feature: pingdirectory : envs : SERVER_PROFILE_URL : https://github.com/<your-github-user>/pingidentity-server-profiles This entry alone will not turn on PingDirectory, because the default value for pingdirectory.enabled is false. To complete the deployment, add the snippet to turn deploy and configure PingDirectory in the values.yaml file: global : enabled : true pingdirectory : envs : SERVER_PROFILE_URL : https://github.com/<your-github-user>/pingidentity-server-profiles This example snippet turns on all products, including PingDirectory, and overwrites the default pingdirectory.envs.SERVER_PROFILE_URL with https://github.com/<your-github-user>/pingidentity-server-profiles . This use of substitution and parameters is where the power of Helm to simplify ease of deployment begins to shine. To fully customize your deployment, review all available options by running: helm show values pingidentity/ping-devops This command prints all of the default values applied to your deployment. To overwrite any default values from the chart, copy the corresponding snippet and include it in your own values.yaml file with any modifications needed. Remember with YAML that tabbing and spacing matters. For most editors, copying all the way to the left margin and pasting at the very beginning of a line in your file should maintain proper indentation. Helm also provides a wide variety of plugins. A useful one is Helm diff . This plugin shows what changes would be applied between Helm upgrade commands. For example, if this plugin indicates anything in a Deployment or Statefulset would change, you can expect the corresponding pods to be cycled. In this example, Helm diff is useful to note changes that would occur, particularly when you are not prepared for containers to be restarted.","title":"Providing your own server profile"},{"location":"reference/HelmBasics/#additional-commands","text":"As you go through the Helm examples, the goal is to build a values.yaml file that works in your environment.","title":"Additional Commands"},{"location":"reference/HelmBasics/#deploy-a-release","text":"helm upgrade --install <release_name> pingidentity/ping-devops -f /path/to/values.yaml","title":"Deploy a release:"},{"location":"reference/HelmBasics/#delete-a-release","text":"This command will remove all resources except PVC and PV objects associated with the release from the cluster: helm uninstall <release name>","title":"Delete a release:"},{"location":"reference/HelmBasics/#delete-pvcs-associated-to-a-release","text":"kubectl delete pvc --selector = app.kubernetes.io/instance = <release_name>","title":"Delete PVCs associated to a release:"},{"location":"reference/HelmBasics/#exit-codes","text":"Exit Code Description Exit Code 0 Absence of an attached foreground process Exit Code 1 Indicates failure due to application error Exit Code 137 Indicates failure as container received SIGKILL (manual intervention or \u2018oom-killer\u2019 [OUT-OF-MEMORY]) Exit Code 139 Indicates failure as container received SIGSEGV Exit Code 143 Indicates failure as a container received SIGTERM","title":"Exit Codes"},{"location":"reference/HelmBasics/#example-configurations","text":"The Helm examples page contains example configurations for running and configuring Ping products using the Ping Devops Helm Chart. Please review the Getting Started Page before trying them.","title":"Example Configurations"},{"location":"reference/addMOTD/","text":"Adding a MOTD \u00b6 You can create a message of the day (MOTD) JSON file to be provide an MOTD file to our product containers when they start. Before you begin \u00b6 You must: Complete the Get Started example to set up your DevOps environment and run a test deployment of the products. Using a MOTD file \u00b6 To employ a MOTD file: Edit the existing motd.json file: Edit the motd/motd.json file located in your local pingidentity-devops-getting-started/motd folder. Create a motd.json file in the location of your server profile: Create a motd.json file in the root of the server profile directory being referenced. This motd.json file will be appended to the /etc/motd file used by the provided image. Testing the MOTD file \u00b6 Test the new messages in the motd.json file using the test-motd.sh script. The script supplies the JQ_EXPR value used to pass the message data to the container. To test the motd.json file locally for our example use cases, from the pingidentity-devops-getting-started/motd directory, enter: ./test-motd.sh local To test the motd.json file you created in your server profile directory: Copy the test-motd.sh script located in the pingidentity-devops-getting-started/motd directory to your server profile directory. Enter: ./test-motd.sh local To test the motd.json with a server profile located in a Github repository: Ensure the test-motd.sh script is located in the local, cloned repository. From the local, cloned repository, enter: ./test-motd.sh github Example motd.json \u00b6 The example below shows the messages that are displayed for all product images. For this example, the messages are only shown from the validFrom to validTo dates: { \"devops\" : [ { \"validFrom\" : 20220701 , \"validTo\" : 20220730 , \"subject\" : \"General Message 1\" , \"message\" : [ \"This is line # 1\" , \"\" , \"This is line # 3\" ,] }, { \"validFrom\" : 20220801 , \"validTo\" : 20220830 , \"subject\" : \"General Message 2\" , \"message\" : [ \"Message goes here\" ] } ], \"pingfederate\" : [ { \"validFrom\" : 20220701 , \"validTo\" : 20220830 , \"subject\" : \"PingFederate Message 1\" , \"message\" : [ \"Message goes here\" ] } ] }","title":"Adding a MOTD"},{"location":"reference/addMOTD/#adding-a-motd","text":"You can create a message of the day (MOTD) JSON file to be provide an MOTD file to our product containers when they start.","title":"Adding a MOTD"},{"location":"reference/addMOTD/#before-you-begin","text":"You must: Complete the Get Started example to set up your DevOps environment and run a test deployment of the products.","title":"Before you begin"},{"location":"reference/addMOTD/#using-a-motd-file","text":"To employ a MOTD file: Edit the existing motd.json file: Edit the motd/motd.json file located in your local pingidentity-devops-getting-started/motd folder. Create a motd.json file in the location of your server profile: Create a motd.json file in the root of the server profile directory being referenced. This motd.json file will be appended to the /etc/motd file used by the provided image.","title":"Using a MOTD file"},{"location":"reference/addMOTD/#testing-the-motd-file","text":"Test the new messages in the motd.json file using the test-motd.sh script. The script supplies the JQ_EXPR value used to pass the message data to the container. To test the motd.json file locally for our example use cases, from the pingidentity-devops-getting-started/motd directory, enter: ./test-motd.sh local To test the motd.json file you created in your server profile directory: Copy the test-motd.sh script located in the pingidentity-devops-getting-started/motd directory to your server profile directory. Enter: ./test-motd.sh local To test the motd.json with a server profile located in a Github repository: Ensure the test-motd.sh script is located in the local, cloned repository. From the local, cloned repository, enter: ./test-motd.sh github","title":"Testing the MOTD file"},{"location":"reference/addMOTD/#example-motdjson","text":"The example below shows the messages that are displayed for all product images. For this example, the messages are only shown from the validFrom to validTo dates: { \"devops\" : [ { \"validFrom\" : 20220701 , \"validTo\" : 20220730 , \"subject\" : \"General Message 1\" , \"message\" : [ \"This is line # 1\" , \"\" , \"This is line # 3\" ,] }, { \"validFrom\" : 20220801 , \"validTo\" : 20220830 , \"subject\" : \"General Message 2\" , \"message\" : [ \"Message goes here\" ] } ], \"pingfederate\" : [ { \"validFrom\" : 20220701 , \"validTo\" : 20220830 , \"subject\" : \"PingFederate Message 1\" , \"message\" : [ \"Message goes here\" ] } ] }","title":"Example motd.json"},{"location":"reference/buildLocal/","text":"Building a Docker product image locally \u00b6 Build a Docker image of our products using the build tools found in our Docker Builds repo and a local copy of a product .zip archive. Docker Builds Cloning a build repository \u00b6 Open a terminal and clone the pingidentity-docker-builds repo: git clone https://github.com/pingidentity/pingidentity-docker-builds.git Download a product .zip archive \u00b6 Go to Product Downloads and download the product to be used to build a Docker image. Zip file versus installer Ensure you download the product distribution .zip archive and not the Windows installer When the download has finished, rename the file to product.zip : mv pingfederate-11.0.3.zip product.zip Move product.zip to the Build Directory. In the pingidentity-docker-builds repository directory for each product, move the product.zip file to the <product>/tmp directory, where /<product> is the name of one of our available products. For example: mv ~/Downloads/product.zip \\ ~/pingidentity/devops/pingidentity-docker-builds/pingfederate/tmp Build the Docker image \u00b6 Before building the image, display the versions.json file in the product directory. You must specify a valid version for the build script. Since the product .zip archive is being provided, it does not matter which version you select as long as it is valid. For example, you can see that 11.0.3 is a valid product version for PingFederate. { \"latest\" : \"11.0.3\" , \"versions\" : [ { \"version\" : \"11.0.3\" , \"preferredShim\" : \"alpine:3.15.4\" , \"shims\" : [ { \"shim\" : \"alpine:3.15.4\" , \"preferredJVM\" : \"al11\" , \"jvms\" : [ { \"jvm\" : \"al11\" , \"build\" : true , \"deploy\" : true , \"registries\" : [ \"DockerHub\" , \"Artifactory\" ] } ] }, Go to the base of the pingidentity-docker-builds repo. For example: cd ~/pingidentity/devops/pingidentity-docker-builds Run the serial_build.sh script with the appropriate options. For example: ./ci_scripts/serial_build.sh \\ -p pingfederate \\ -v 11 .0.3 \\ -s alpine:3.15.4 \\ -j al11 When the build is completed, the product and base images are displayed. For example: REPOSITORY TAG IMAGE ID CREATED SIZE pingidentity/pingfederate 11 .0.3-fsoverride-alpine_3.15.4-al11-master-f1ba-x86_64 404a2b14df0c 7 seconds ago 759MB pingidentity/pingbase master-f1ba-x86_64 eb7648692b55 About a minute ago 0B pingidentity/pingjvm al11-alpine_3.15.4-master-f1ba-x86_64 af0e87d8fafd About a minute ago 108MB pingidentity/pingcommon master-f1ba-x86_64 2e82b239e9bb About a minute ago 997kB pingidentity/pingdatacommon master-f1ba-x86_64 13f35b12a918 About a minute ago 1 .11MB Our Docker images are built using common foundational layers required by the product layer such as the Java virtual machine (JVM), pingcommon, and pingdatacommon. As it is unlikely you will have the foundational layers on your local system, build the first time using the serial_build.sh script. This script will create the foundational images, and if you want to use the same foundational layers for other builds, you need only run the build_product.sh script to build the product layer. You must specify the appropriate options when you run serial_build.sh . For PingFederate, the options might look like this: -p (Product): pingfederate -v (Version): 11.0.3 Note: this is the version retrieved from the versions.json file -s (Shim): alpine -j (Java): al11 Run from the repository root It is important to build from the base of the repository as shown in the example. Re-tagging the local image \u00b6 To change the tag of the created image and push it to your own Docker registry, use the docker tag command: docker tag [ image id ] \\ [ Docker Registry ] / [ Organization ] / [ Image Name ] : [ tag ] For example: docker tag 404a2b14df0c \\ gcp.io/pingidentity/pingfederate:localbuild # Display new tag docker image ls # Output snippet pingidentity/pingfederate 11 .0.3-fsoverride-alpine_3.15.4-al11-master-f1ba-x86_64 404a2b14df0c 4 minutes ago 759MB gcp.io/pingidentity/pingfederate localbuild 404a2b14df0c 4 minutes ago 759MB","title":"Build Local Images"},{"location":"reference/buildLocal/#building-a-docker-product-image-locally","text":"Build a Docker image of our products using the build tools found in our Docker Builds repo and a local copy of a product .zip archive. Docker Builds","title":"Building a Docker product image locally"},{"location":"reference/buildLocal/#cloning-a-build-repository","text":"Open a terminal and clone the pingidentity-docker-builds repo: git clone https://github.com/pingidentity/pingidentity-docker-builds.git","title":"Cloning a build repository"},{"location":"reference/buildLocal/#download-a-product-zip-archive","text":"Go to Product Downloads and download the product to be used to build a Docker image. Zip file versus installer Ensure you download the product distribution .zip archive and not the Windows installer When the download has finished, rename the file to product.zip : mv pingfederate-11.0.3.zip product.zip Move product.zip to the Build Directory. In the pingidentity-docker-builds repository directory for each product, move the product.zip file to the <product>/tmp directory, where /<product> is the name of one of our available products. For example: mv ~/Downloads/product.zip \\ ~/pingidentity/devops/pingidentity-docker-builds/pingfederate/tmp","title":"Download a product .zip archive"},{"location":"reference/buildLocal/#build-the-docker-image","text":"Before building the image, display the versions.json file in the product directory. You must specify a valid version for the build script. Since the product .zip archive is being provided, it does not matter which version you select as long as it is valid. For example, you can see that 11.0.3 is a valid product version for PingFederate. { \"latest\" : \"11.0.3\" , \"versions\" : [ { \"version\" : \"11.0.3\" , \"preferredShim\" : \"alpine:3.15.4\" , \"shims\" : [ { \"shim\" : \"alpine:3.15.4\" , \"preferredJVM\" : \"al11\" , \"jvms\" : [ { \"jvm\" : \"al11\" , \"build\" : true , \"deploy\" : true , \"registries\" : [ \"DockerHub\" , \"Artifactory\" ] } ] }, Go to the base of the pingidentity-docker-builds repo. For example: cd ~/pingidentity/devops/pingidentity-docker-builds Run the serial_build.sh script with the appropriate options. For example: ./ci_scripts/serial_build.sh \\ -p pingfederate \\ -v 11 .0.3 \\ -s alpine:3.15.4 \\ -j al11 When the build is completed, the product and base images are displayed. For example: REPOSITORY TAG IMAGE ID CREATED SIZE pingidentity/pingfederate 11 .0.3-fsoverride-alpine_3.15.4-al11-master-f1ba-x86_64 404a2b14df0c 7 seconds ago 759MB pingidentity/pingbase master-f1ba-x86_64 eb7648692b55 About a minute ago 0B pingidentity/pingjvm al11-alpine_3.15.4-master-f1ba-x86_64 af0e87d8fafd About a minute ago 108MB pingidentity/pingcommon master-f1ba-x86_64 2e82b239e9bb About a minute ago 997kB pingidentity/pingdatacommon master-f1ba-x86_64 13f35b12a918 About a minute ago 1 .11MB Our Docker images are built using common foundational layers required by the product layer such as the Java virtual machine (JVM), pingcommon, and pingdatacommon. As it is unlikely you will have the foundational layers on your local system, build the first time using the serial_build.sh script. This script will create the foundational images, and if you want to use the same foundational layers for other builds, you need only run the build_product.sh script to build the product layer. You must specify the appropriate options when you run serial_build.sh . For PingFederate, the options might look like this: -p (Product): pingfederate -v (Version): 11.0.3 Note: this is the version retrieved from the versions.json file -s (Shim): alpine -j (Java): al11 Run from the repository root It is important to build from the base of the repository as shown in the example.","title":"Build the Docker image"},{"location":"reference/buildLocal/#re-tagging-the-local-image","text":"To change the tag of the created image and push it to your own Docker registry, use the docker tag command: docker tag [ image id ] \\ [ Docker Registry ] / [ Organization ] / [ Image Name ] : [ tag ] For example: docker tag 404a2b14df0c \\ gcp.io/pingidentity/pingfederate:localbuild # Display new tag docker image ls # Output snippet pingidentity/pingfederate 11 .0.3-fsoverride-alpine_3.15.4-al11-master-f1ba-x86_64 404a2b14df0c 4 minutes ago 759MB gcp.io/pingidentity/pingfederate localbuild 404a2b14df0c 4 minutes ago 759MB","title":"Re-tagging the local image"},{"location":"reference/config/","text":"Image/Container Components and Configuration \u00b6 Container data flows and running state \u00b6 The diagram below shows the topology of a container with flows of data into the container and how it transitions to the eventual running state. Data Class Default Location Use Description VAULT ext Secret information from external Vault (i.e. HashiCorp Vault). Items like passwords, certificates, keys, etc... ORCH ext Environment variables from secrets, configmaps and/or env/envfile resources from orchestration (i.e. docker, k8s. SERVER PROFILE ext Product server profile from either an external repository (i.e. git) or external volume (i.e. aws s3). SERVER BITS /opt/server ro Uncompressed copy of the product software. Provided by image. SECRETS /run/secrets ro Read Only secrets residing on non-persistent storage (i.e. /run/secrets). IN /opt/in ro Volume intended to receive all incoming server-profile information. ENV /opt/staging/.env mem Environment variable settings used by hooks and product to configure container. STAGING /opt/staging tmp Temporary space used to prepare configuration and store variable settings before being moved to OUT OUT /opt/out rw Combo of product bits/configuration resulting in running container configuration. PERSISTENT VOLUME rw Persistent location of product bits/configuration in external storage (i.e. AWS EBS) Because of these many factors affecting how an image is deployed, the configuration options for use of the elements in the previous table can vary greatly, depending on factors such as: Deployment Environment - Kubernetes, Cloud Vendor, Local Docker CI/CD Tools - Kubectl, Helm, Kustomize, Terraform Source Maintenance - Git, Cloud Vendor Volumes Customer Environment - Development, Test, QA, Stage, Prod Security - Test/QA/Production Data, Secrets, Certificates, Secret Management Tools Examples \u00b6 File flowchart example \u00b6 The following diagram shows how files can enter and flow through the container: Production Example \u00b6 The following diagram shows an example in a high-level production scenario in an Amazon Web Services (AWS) EKS environment, where: HashiCorp Vault is used to provide secrets to the container. Helm is used to create k8s resources and deploy them. AWS EBS volumes is used to persist the state of the container. Development Example \u00b6 The following diagram shows an example in a high-level development scenario in an Azure AKS environment, where: No secrets management is used. Simple kubectl is used to deploy k8s resources. AWS EBS volumes is used to persist the state of the container. Customizing the Containers \u00b6 You can customize our product containers by: Customizing server profiles The server profiles supply configuration, data, and environment information to the product containers at startup. You can use our server profiles as-is or as a baseline for creating your own. You can find these profiles in Baseline server profiles in our pingidentity-server-profiles repository. Environment substitution You can deploy configurations in multiple environments with minimal changes by removing literal values and replacing them with environment variables. Using DevOps hooks Hooks are shell scripts, generally specific to a product, that you can use to automate certain operations. You can find the hooks for our builds in the Docker builds product directories . Using release tags We use sets of tags for each released build image. These tags identify whether the image is a specific stable release, the latest stable release, or current (potentially unstable) builds. You can find the release tag information in Docker images . You can try different tags in either the standalone startup scripts for the deployment examples or the YAML files for the orchestrated deployment examples. Adding a message of the day (MOTD) You can use a motd.json file to add message of the day information for inclusion in the images.","title":"Components and Configuration"},{"location":"reference/config/#imagecontainer-components-and-configuration","text":"","title":"Image/Container Components and Configuration"},{"location":"reference/config/#container-data-flows-and-running-state","text":"The diagram below shows the topology of a container with flows of data into the container and how it transitions to the eventual running state. Data Class Default Location Use Description VAULT ext Secret information from external Vault (i.e. HashiCorp Vault). Items like passwords, certificates, keys, etc... ORCH ext Environment variables from secrets, configmaps and/or env/envfile resources from orchestration (i.e. docker, k8s. SERVER PROFILE ext Product server profile from either an external repository (i.e. git) or external volume (i.e. aws s3). SERVER BITS /opt/server ro Uncompressed copy of the product software. Provided by image. SECRETS /run/secrets ro Read Only secrets residing on non-persistent storage (i.e. /run/secrets). IN /opt/in ro Volume intended to receive all incoming server-profile information. ENV /opt/staging/.env mem Environment variable settings used by hooks and product to configure container. STAGING /opt/staging tmp Temporary space used to prepare configuration and store variable settings before being moved to OUT OUT /opt/out rw Combo of product bits/configuration resulting in running container configuration. PERSISTENT VOLUME rw Persistent location of product bits/configuration in external storage (i.e. AWS EBS) Because of these many factors affecting how an image is deployed, the configuration options for use of the elements in the previous table can vary greatly, depending on factors such as: Deployment Environment - Kubernetes, Cloud Vendor, Local Docker CI/CD Tools - Kubectl, Helm, Kustomize, Terraform Source Maintenance - Git, Cloud Vendor Volumes Customer Environment - Development, Test, QA, Stage, Prod Security - Test/QA/Production Data, Secrets, Certificates, Secret Management Tools","title":"Container data flows and running state"},{"location":"reference/config/#examples","text":"","title":"Examples"},{"location":"reference/config/#file-flowchart-example","text":"The following diagram shows how files can enter and flow through the container:","title":"File flowchart example"},{"location":"reference/config/#production-example","text":"The following diagram shows an example in a high-level production scenario in an Amazon Web Services (AWS) EKS environment, where: HashiCorp Vault is used to provide secrets to the container. Helm is used to create k8s resources and deploy them. AWS EBS volumes is used to persist the state of the container.","title":"Production Example"},{"location":"reference/config/#development-example","text":"The following diagram shows an example in a high-level development scenario in an Azure AKS environment, where: No secrets management is used. Simple kubectl is used to deploy k8s resources. AWS EBS volumes is used to persist the state of the container.","title":"Development Example"},{"location":"reference/config/#customizing-the-containers","text":"You can customize our product containers by: Customizing server profiles The server profiles supply configuration, data, and environment information to the product containers at startup. You can use our server profiles as-is or as a baseline for creating your own. You can find these profiles in Baseline server profiles in our pingidentity-server-profiles repository. Environment substitution You can deploy configurations in multiple environments with minimal changes by removing literal values and replacing them with environment variables. Using DevOps hooks Hooks are shell scripts, generally specific to a product, that you can use to automate certain operations. You can find the hooks for our builds in the Docker builds product directories . Using release tags We use sets of tags for each released build image. These tags identify whether the image is a specific stable release, the latest stable release, or current (potentially unstable) builds. You can find the release tag information in Docker images . You can try different tags in either the standalone startup scripts for the deployment examples or the YAML files for the orchestrated deployment examples. Adding a message of the day (MOTD) You can use a motd.json file to add message of the day information for inclusion in the images.","title":"Customizing the Containers"},{"location":"reference/faqs/","text":"Frequently asked questions \u00b6 No egress \u00b6 \"My container environment is not allowed to make any external calls to services such as Github or Docker Hub. Can I still use Ping Identity containers?\" Yes. This practice is common in production scenarios. To use Ping Identity containers in this situation: Use an Existing License Use an empty remote profile SERVER_PROFILE_URL=\"\" Optionally, you can build your profile into the image Turn off license verification with MUTE_LICENSE_VERIFICATION=\"true\" Turn off calls to the Message of the Day (MOTD) with MOTD_URL=\"\"","title":"FAQs"},{"location":"reference/faqs/#frequently-asked-questions","text":"","title":"Frequently asked questions"},{"location":"reference/faqs/#no-egress","text":"\"My container environment is not allowed to make any external calls to services such as Github or Docker Hub. Can I still use Ping Identity containers?\" Yes. This practice is common in production scenarios. To use Ping Identity containers in this situation: Use an Existing License Use an empty remote profile SERVER_PROFILE_URL=\"\" Optionally, you can build your profile into the image Turn off license verification with MUTE_LICENSE_VERIFICATION=\"true\" Turn off calls to the Message of the Day (MOTD) with MOTD_URL=\"\"","title":"No egress"},{"location":"reference/hooks/","text":"Using DevOps hooks \u00b6 Our DevOps hooks are build-specific scripts that are called, or can be called, by the entrypoint.sh script used to start our product containers. Advanced usage Use of the hook scripts is intended only for DevOps professionals familiar with the products. The available hooks are built into the product images and can be found in the hooks subdirectory of each product directory in the Docker Builds repository. In the entrypoint.sh startup script, there is an example (stub) provided for the available hooks for all products. Warning It is critical that the supplied hook names be used if you modify entrypoint.sh . For example, they can be used to make subtle changes to a server profile. Using .pre and .post hooks \u00b6 When the hook scripts are called during the entrypoint.sh initialization, any corresponding .pre and .post hooks are also called. The .pre and .post extensions allow you to define custom scripts to be executed before or after any hook that is run in the container. You can include any custom .pre and .post hooks in the hooks directory of your server profile. Hooks with a .pre extension are run before the corresponding hook, and hooks with a .post extension are run after the corresponding hook. For example, a script named 80-post-start.sh.pre will execute immediately before the 80-post-start.sh hook and a script named 80-post-start.sh.post will be run immediately after that hook completes.","title":"DevOps Hooks"},{"location":"reference/hooks/#using-devops-hooks","text":"Our DevOps hooks are build-specific scripts that are called, or can be called, by the entrypoint.sh script used to start our product containers. Advanced usage Use of the hook scripts is intended only for DevOps professionals familiar with the products. The available hooks are built into the product images and can be found in the hooks subdirectory of each product directory in the Docker Builds repository. In the entrypoint.sh startup script, there is an example (stub) provided for the available hooks for all products. Warning It is critical that the supplied hook names be used if you modify entrypoint.sh . For example, they can be used to make subtle changes to a server profile.","title":"Using DevOps hooks"},{"location":"reference/hooks/#using-pre-and-post-hooks","text":"When the hook scripts are called during the entrypoint.sh initialization, any corresponding .pre and .post hooks are also called. The .pre and .post extensions allow you to define custom scripts to be executed before or after any hook that is run in the container. You can include any custom .pre and .post hooks in the hooks directory of your server profile. Hooks with a .pre extension are run before the corresponding hook, and hooks with a .post extension are run after the corresponding hook. For example, a script named 80-post-start.sh.pre will execute immediately before the 80-post-start.sh hook and a script named 80-post-start.sh.post will be run immediately after that hook completes.","title":"Using .pre and .post hooks"},{"location":"reference/k8sBasics/","text":"Kubernetes Basics \u00b6 Although this document cannot cover all aspects of these tools, new Kubernetes users might find other technical documentation too involved for purposes of using Ping Identity images. This document aims to equip new users with helpful terminology in simple terms, with a focus on relevant commands. Note This overview uses Ping Identity images and practices as a guide, but generally applies to any interactions in Kubernetes. With these assumptions, this document might feel incomplete or inaccurate to veterans. If you would like to contribute to this document, feel free to open a pull request! Kubernetes \u00b6 Terms \u00b6 Cluster - The ice cube tray. You can consider a Kubernetes cluster as a set of resources into which you can deploy containers. A cluster can be as small as your local computer or as large as hundreds of virtual machines (VMs), called nodes , in a data center. Interaction with the cluster is through an API requiring authentication and role-based access control (RBAC) that allows the actions necessary within the cluster. In a cloud provider Kubernetes cluster, such as Amazon Web Services (AWS) EKS, Azure AKS, or Google GKE, the cluster can span multiple Availability Zones (AZs), but only one region. In AWS terms, a cluster can be in the region us-west-2 but have nodes in the AZs us-west-2a, us-west-2b, and us-west-2c. Kubernetes provides high availability by distributing applications with multiple instances of containers, called replicas, across available AZs. Nodes - The individual ice cube spaces in the tray. The nodes are the pieces that provide allocatable resources, such as CPU and memory, and make up a cluster. Typically, these are VMs, and for example in AWS, they would be EC2 instances. Namespace - A loosely defined slice of the cluster. Namespaces are intended to be an segment scoped for deploying grouped applications. Note You can allocate resource limits available to a namespace, but this is not required. Context - A definition in your ~/.kube/config file that specifies the cluster and namespace where your kubectl commands will be executed. Deployments and Statefulsets - The water that fills ice cube spots. Applications are deployed as Deployments or Statefulsets. You can consider both of these objects as controllers that define and manage the following: Name of an application Number of instances (pods) of an application (replicas) Persistent storage Though they are similar, Deployments differ from Statefulsets in a few fundamental ways. Deployments \u00b6 Deployments are typically used for stateless applications - if a pod is lost or removed, any other pod in the same deployment can take on the activity the lost pod was performing. Pod names are inconsequential because each pod is identical with no state information required. As a result, the name of the pod does not matter and names are suffixed with a randomly generated string. The order in which pods are started is also inconsequential. When starting a deployment all pods are launched at the same time. When updating a deployment, you can cycle one, many, or all pods at the same time. Statefulsets \u00b6 StatefulSets are more structured in the manner in which the pods are handled. StatefulSets - as the name implies - are used for applications in which a known state is required. For example, many clustered products have an instance in the cluster that is considered the leader and all pods in the set need to know which pod is acting in this capacity. A controlled scale-up and scale-down process is needed to maintain known state as application nodes or instances join or leave the cluster or are restarted. Pod names are sticky in that each pod in the StatefulSet has a known name, with each pod receving an ordinal indicator (unlike the random pod name found in Deployments). For example, a StatefulSet will have pod names similar to: myping-pingdirectory-0, myping-pingdirectory-1, myping-pingdirectory-2 Controlled startup with health priority: unlike a Deployment, a StatefulSet deploys the first instance (pod name appended with -0) and waits for it to be healthy before adding another. Updates occur to instances in a rolling fashion, one-at-a-time, starting with the most recent pod(myping-pingdirectory-2) first. With a known Pod name, persistent storage can be maintained for each pod. After persistent storage is created and assigned, the same storage object is provided to the same-named pod every time. Pod - The molecules that make up the water. A Deployment/StatefulSet specifies number of pods to run for a given application. For example, you can have a pingfederate-engine deployment that calls for three replicas with two CPUs and 2 GB of memory, but you cannot make one engine larger or smaller than the others. Like a molecule, a pod can consist of just one container, or it can have multiple containers, called sidecars. For example, your pod can have a PingFederate container as the main process and a sidecar container, such as Splunk Universal Forwarder, to export logs. All containers in a pod, including these sidecars, share a namespace and IP address. Pods are are considered disposable and by default do not persist any data. To maintain state or data, external storage or a database of some kind is needed. PersistentVolume (PV) and PersistentVolumeClaim (PVC) - A virtual external storage device or definition attached to a Pod. The PV is the storage object and PVC is the claim that a given pod makes for that storage. Service - A slim LoadBalancer within the cluster. Pods can come and go, be disposed of or restarted. Every time a Pod is started, it will receive an IP address which often changes. In order to access the application hosted in the Pod, a fixed, known location or address is required. Services provide a single IP address and cluster-internal DNS resolution that is placed in front of Deployments and Statefulsets to distribute traffic. For service-to-service communication, such as PingFederate using PingDirectory as a user store, the application should be configured to point to a service name and port rather than the individual pods. Services are given fully-qualified domain names (FQDNs) in a cluster. Within the same namespace, services are accessible by their name ( https://myping-pingdirectory:443 ), but across namespaces, you must be more explicit ( https://myping-pingdirectory.<namespace>:443 ). A FQDN would be https://myping-pingdirectory.<namespace>.svc.cluster.local . Ingress - A network definition used to expose an application external to the cluster. In order for an ingress to work, you need an Ingress Controller. A common pattern is a deployment of Nginx pods fronted by a physical loadbalancer. The location the client application traffic hits the loadbalancer is forwarded to Nginx. The header information (hostname and path) of the request is evaluated and forwarded to a corresponding application. For example, suppose a PingFederate ingress has a host name of myping-pingfederate-engine.ping-local.com . If a client application makes a request to https://myping-pingfederate-engine.ping-local.com/pf/heartbeat.ping , the traffic flow of the request would be: Client -> LoadBalancer (Nginx k8s Service) -> Nginx Pod -> Pingfederate-engine k8s Service -> Pingfederate-engine pod Commands \u00b6 To see which cluster and namespace you are using, use the kubectx tool. Alternatively, you can run the following commands: # Retrieve and set context kubectl config get-contexts kubectl config current-context kubectl config use-context my-cluster-name # Set Namespace kubectl config set-context --current --namespace = <namespace> Viewing resources \u00b6 You can use k9s , which is a UI designed to run in a terminal. If you cannot use k9s, review the standard commands here. You can run kubectl get for any resource type , such as Pods, Deployments, Statefulsets, and PVCs. Many resources have short names: po = pods deploy = Deployments sts = Statefulsets ing = ingresses pvc = persistentvolumeclaims The most common command is get pods : kubectl get pods To show anything that the container prints to stdout , use logs : kubectl logs -f <pod-name> To show the logs of a pod with multiple containers, specify the container to view with the -c option: kubectl logs -f <pod-name> -c <container-name> To show the logs of a crashed pod ( RESTARTS != 0 ): kubectl logs -f <pod-name> --previous To see available host names by ingress: kubectl get ing Debugging \u00b6 When a pod crashes unexpectedly, you can mine information about the cause with the following commands. To view logs of the crash: kubectl logs -f <pod-name> --previous To view the reason for exit: kubectl describe pod <pod-name> When looking at describe , there are two main sections of the output to note: lastState - shows the exit code and the reason for exit. Events - this list is most helpful when your pod is not being created. It might be stuck in pending state if: There are not enough resources available for the pod to be created. Something about the pod definition is incorrect, such as a missing volume or secret. Common exit codes associated with containers are: Exit Code Description Exit Code 0 Absence of an attached foreground process Exit Code 1 Indicates failure due to application error Exit Code 137 Indicates failure as container received SIGKILL (manual intervention or \u2018oom-killer\u2019 [OUT-OF-MEMORY]) Exit Code 139 Indicates failure as container received SIGSEGV Exit Code 143 Indicates failure as a container received SIGTERM","title":"Kubernetes Basics"},{"location":"reference/k8sBasics/#kubernetes-basics","text":"Although this document cannot cover all aspects of these tools, new Kubernetes users might find other technical documentation too involved for purposes of using Ping Identity images. This document aims to equip new users with helpful terminology in simple terms, with a focus on relevant commands. Note This overview uses Ping Identity images and practices as a guide, but generally applies to any interactions in Kubernetes. With these assumptions, this document might feel incomplete or inaccurate to veterans. If you would like to contribute to this document, feel free to open a pull request!","title":"Kubernetes Basics"},{"location":"reference/k8sBasics/#kubernetes","text":"","title":"Kubernetes"},{"location":"reference/k8sBasics/#terms","text":"Cluster - The ice cube tray. You can consider a Kubernetes cluster as a set of resources into which you can deploy containers. A cluster can be as small as your local computer or as large as hundreds of virtual machines (VMs), called nodes , in a data center. Interaction with the cluster is through an API requiring authentication and role-based access control (RBAC) that allows the actions necessary within the cluster. In a cloud provider Kubernetes cluster, such as Amazon Web Services (AWS) EKS, Azure AKS, or Google GKE, the cluster can span multiple Availability Zones (AZs), but only one region. In AWS terms, a cluster can be in the region us-west-2 but have nodes in the AZs us-west-2a, us-west-2b, and us-west-2c. Kubernetes provides high availability by distributing applications with multiple instances of containers, called replicas, across available AZs. Nodes - The individual ice cube spaces in the tray. The nodes are the pieces that provide allocatable resources, such as CPU and memory, and make up a cluster. Typically, these are VMs, and for example in AWS, they would be EC2 instances. Namespace - A loosely defined slice of the cluster. Namespaces are intended to be an segment scoped for deploying grouped applications. Note You can allocate resource limits available to a namespace, but this is not required. Context - A definition in your ~/.kube/config file that specifies the cluster and namespace where your kubectl commands will be executed. Deployments and Statefulsets - The water that fills ice cube spots. Applications are deployed as Deployments or Statefulsets. You can consider both of these objects as controllers that define and manage the following: Name of an application Number of instances (pods) of an application (replicas) Persistent storage Though they are similar, Deployments differ from Statefulsets in a few fundamental ways.","title":"Terms"},{"location":"reference/k8sBasics/#deployments","text":"Deployments are typically used for stateless applications - if a pod is lost or removed, any other pod in the same deployment can take on the activity the lost pod was performing. Pod names are inconsequential because each pod is identical with no state information required. As a result, the name of the pod does not matter and names are suffixed with a randomly generated string. The order in which pods are started is also inconsequential. When starting a deployment all pods are launched at the same time. When updating a deployment, you can cycle one, many, or all pods at the same time.","title":"Deployments"},{"location":"reference/k8sBasics/#statefulsets","text":"StatefulSets are more structured in the manner in which the pods are handled. StatefulSets - as the name implies - are used for applications in which a known state is required. For example, many clustered products have an instance in the cluster that is considered the leader and all pods in the set need to know which pod is acting in this capacity. A controlled scale-up and scale-down process is needed to maintain known state as application nodes or instances join or leave the cluster or are restarted. Pod names are sticky in that each pod in the StatefulSet has a known name, with each pod receving an ordinal indicator (unlike the random pod name found in Deployments). For example, a StatefulSet will have pod names similar to: myping-pingdirectory-0, myping-pingdirectory-1, myping-pingdirectory-2 Controlled startup with health priority: unlike a Deployment, a StatefulSet deploys the first instance (pod name appended with -0) and waits for it to be healthy before adding another. Updates occur to instances in a rolling fashion, one-at-a-time, starting with the most recent pod(myping-pingdirectory-2) first. With a known Pod name, persistent storage can be maintained for each pod. After persistent storage is created and assigned, the same storage object is provided to the same-named pod every time. Pod - The molecules that make up the water. A Deployment/StatefulSet specifies number of pods to run for a given application. For example, you can have a pingfederate-engine deployment that calls for three replicas with two CPUs and 2 GB of memory, but you cannot make one engine larger or smaller than the others. Like a molecule, a pod can consist of just one container, or it can have multiple containers, called sidecars. For example, your pod can have a PingFederate container as the main process and a sidecar container, such as Splunk Universal Forwarder, to export logs. All containers in a pod, including these sidecars, share a namespace and IP address. Pods are are considered disposable and by default do not persist any data. To maintain state or data, external storage or a database of some kind is needed. PersistentVolume (PV) and PersistentVolumeClaim (PVC) - A virtual external storage device or definition attached to a Pod. The PV is the storage object and PVC is the claim that a given pod makes for that storage. Service - A slim LoadBalancer within the cluster. Pods can come and go, be disposed of or restarted. Every time a Pod is started, it will receive an IP address which often changes. In order to access the application hosted in the Pod, a fixed, known location or address is required. Services provide a single IP address and cluster-internal DNS resolution that is placed in front of Deployments and Statefulsets to distribute traffic. For service-to-service communication, such as PingFederate using PingDirectory as a user store, the application should be configured to point to a service name and port rather than the individual pods. Services are given fully-qualified domain names (FQDNs) in a cluster. Within the same namespace, services are accessible by their name ( https://myping-pingdirectory:443 ), but across namespaces, you must be more explicit ( https://myping-pingdirectory.<namespace>:443 ). A FQDN would be https://myping-pingdirectory.<namespace>.svc.cluster.local . Ingress - A network definition used to expose an application external to the cluster. In order for an ingress to work, you need an Ingress Controller. A common pattern is a deployment of Nginx pods fronted by a physical loadbalancer. The location the client application traffic hits the loadbalancer is forwarded to Nginx. The header information (hostname and path) of the request is evaluated and forwarded to a corresponding application. For example, suppose a PingFederate ingress has a host name of myping-pingfederate-engine.ping-local.com . If a client application makes a request to https://myping-pingfederate-engine.ping-local.com/pf/heartbeat.ping , the traffic flow of the request would be: Client -> LoadBalancer (Nginx k8s Service) -> Nginx Pod -> Pingfederate-engine k8s Service -> Pingfederate-engine pod","title":"Statefulsets"},{"location":"reference/k8sBasics/#commands","text":"To see which cluster and namespace you are using, use the kubectx tool. Alternatively, you can run the following commands: # Retrieve and set context kubectl config get-contexts kubectl config current-context kubectl config use-context my-cluster-name # Set Namespace kubectl config set-context --current --namespace = <namespace>","title":"Commands"},{"location":"reference/k8sBasics/#viewing-resources","text":"You can use k9s , which is a UI designed to run in a terminal. If you cannot use k9s, review the standard commands here. You can run kubectl get for any resource type , such as Pods, Deployments, Statefulsets, and PVCs. Many resources have short names: po = pods deploy = Deployments sts = Statefulsets ing = ingresses pvc = persistentvolumeclaims The most common command is get pods : kubectl get pods To show anything that the container prints to stdout , use logs : kubectl logs -f <pod-name> To show the logs of a pod with multiple containers, specify the container to view with the -c option: kubectl logs -f <pod-name> -c <container-name> To show the logs of a crashed pod ( RESTARTS != 0 ): kubectl logs -f <pod-name> --previous To see available host names by ingress: kubectl get ing","title":"Viewing resources"},{"location":"reference/k8sBasics/#debugging","text":"When a pod crashes unexpectedly, you can mine information about the cause with the following commands. To view logs of the crash: kubectl logs -f <pod-name> --previous To view the reason for exit: kubectl describe pod <pod-name> When looking at describe , there are two main sections of the output to note: lastState - shows the exit code and the reason for exit. Events - this list is most helpful when your pod is not being created. It might be stuck in pending state if: There are not enough resources available for the pod to be created. Something about the pod definition is incorrect, such as a missing volume or secret. Common exit codes associated with containers are: Exit Code Description Exit Code 0 Absence of an attached foreground process Exit Code 1 Indicates failure due to application error Exit Code 137 Indicates failure as container received SIGKILL (manual intervention or \u2018oom-killer\u2019 [OUT-OF-MEMORY]) Exit Code 139 Indicates failure as container received SIGSEGV Exit Code 143 Indicates failure as a container received SIGTERM","title":"Debugging"},{"location":"reference/pingone-config/","text":"PingOne Worker App and User Config \u00b6 PingOne Worker App Configuration \u00b6 To manage PingOne resources using credentials other than your own, you are required to have a PingOne Worker App. You have 3 options to authenticate to PingOne from pingctl: Authorization Code (w/ PKCE) Flow (Recommended and most secure) - Via a PingOne Admin User Implicit Flow - Via a PingOne Admin User Client Credentials Flow (Easiest, but most insecure, as a user isn't required) Additionally, you must set up the proper roles for your Worker App Authorization Code (w/ PKCE) Flow Settings \u00b6 The following shows an example of a Worker App setup for Authorization Code (w/ PKCE) Flow: Implicit Flow Settings \u00b6 The following shows an example of a Worker App setup for Implicit Flow: Client Credentials Flow Settings \u00b6 The following shows an example of a Worker App setup for Client Credentials Flow: Worker App Roles Settings \u00b6 The following shows an example of the minimum roles required. Typically, these are set up by default. PingOne User Config \u00b6 When using Authorization Code or Implicit Flows, you need to log in with an Administrative user to use the Worker App. The most important item is to add the proper administrative roles to the user. The following shows an example of this:","title":"PingOne Worker App and User Config"},{"location":"reference/pingone-config/#pingone-worker-app-and-user-config","text":"","title":"PingOne Worker App and User Config"},{"location":"reference/pingone-config/#pingone-worker-app-configuration","text":"To manage PingOne resources using credentials other than your own, you are required to have a PingOne Worker App. You have 3 options to authenticate to PingOne from pingctl: Authorization Code (w/ PKCE) Flow (Recommended and most secure) - Via a PingOne Admin User Implicit Flow - Via a PingOne Admin User Client Credentials Flow (Easiest, but most insecure, as a user isn't required) Additionally, you must set up the proper roles for your Worker App","title":"PingOne Worker App Configuration"},{"location":"reference/pingone-config/#authorization-code-w-pkce-flow-settings","text":"The following shows an example of a Worker App setup for Authorization Code (w/ PKCE) Flow:","title":"Authorization Code (w/ PKCE) Flow Settings"},{"location":"reference/pingone-config/#implicit-flow-settings","text":"The following shows an example of a Worker App setup for Implicit Flow:","title":"Implicit Flow Settings"},{"location":"reference/pingone-config/#client-credentials-flow-settings","text":"The following shows an example of a Worker App setup for Client Credentials Flow:","title":"Client Credentials Flow Settings"},{"location":"reference/pingone-config/#worker-app-roles-settings","text":"The following shows an example of the minimum roles required. Typically, these are set up by default.","title":"Worker App Roles Settings"},{"location":"reference/pingone-config/#pingone-user-config","text":"When using Authorization Code or Implicit Flows, you need to log in with an Administrative user to use the Worker App. The most important item is to add the proper administrative roles to the user. The following shows an example of this:","title":"PingOne User Config"},{"location":"reference/profileStructures/","text":"Server Profile Structures \u00b6 Each of the Docker images use a server profile structure that is specific to each product. The structure (directory paths and data) of the server profile differs between products. Depending on how you Deploy Your Server Profile , it will be pulled or mounted into /opt/in on the container and used to stage your deployment. The following locations are the server profile structures for each of our products with example usage. For help with an example of the basics, see the pingidentity-server-profiles/getting-started examples. Ignore .sec directories in examples In the getting-started profile examples, you should not use the .sec directory when providing passwords to your containers. These examples are only intended for demonstration purposes. Instead, set an environment variable with your secrets or orchestration later: PING_IDENTITY_PASSWORD = \"secret\" PingFederate \u00b6 See the example at getting-started/pingfederate . Path Location description instance Directories and files that you want to be used at product runtime, in accordance with the directory layout of the product. instance/server/default/data An extracted configuration archive exported from PingFederate. instance/bulk-config/data.json A JSON export from the PingFed admin API /bulk/export . instance/server/default/deploy/OAuthPlayground.war Automatically deploy the OAuthPlayground web application. instance/server/default/conf/META-INF/hivemodule.xml Apply a Hive module config to the container. Used for persisting OAuth clients, grants, and sessions to an external DB. PingFederate Integeration Kits By default, PingFederate is shipped with a handful of integration kits and adapters. If you need other integration kits or adapters in the deployment, manually download them and place them inside server/default/deploy of the server profile. You can find these resources in the product download page here . PingAccess \u00b6 Example at getting-started/pingaccess . Path Location description instance Directories and files that you want to be used at product runtime, in accordance with the directory layout of the product. instance/conf/pa.jwk Used to decrypt a data.json configuration upon import. instance/data/data.json PA 6.1+ A config file that, if found by the container, is uploaded into the container. instance/data/PingAccess.mv.db Database binary that would be ingested at container startup if found. PingAccess Best Practices PingAccess profiles are typically minimalist because the majority of PingAccess configurations can be found within a data.json or PingAccess.mv.db file. You should use data.json for configurations and only use PingAccess.mv.db if necessary. You can easily view and manipulate configurations directly in a JSON file as opposed to the binary PingAccess.mv.db file. This fact makes tracking changes in version control easier as well. PingAccess 6.1.x+ supports using only data.json , even when clustering. However on 6.1.0.3 make sure data.json is only supplied to the admin node. PingAccess 6.1.0+ PingAccess now supports native data.json ingestion, which is the recommended method . Place data.json or data.json.subst in instance/conf/data/start-up-deployer . The JSON configuration file for PingAccess must be named data.json . A data.json file that corresponds to earlier PingAccess versions might be accepted. However, after you are on version 6.1.x, the data.json file will be forward compatible. This support means you are able to avoid upgrades for your deployments! PingAccess 6.0.x and earlier The JSON configuration file for PingAccess must be named data.json and located in the instance/data directory. All PingAccess versions A corresponding file named pa.jwk must also exist in the instance/conf directory for the data.json file to be decrypted on import. To get a data.json and pa.jwk that work together, pull them both from the same running PingAccess instance. For example, if PingAccess is running in a local Docker container you can use these commands to export the data.json file and copy the pa.jwk file to your local Downloads directory: curl -k -u \"Administrator: ${ ADMIN_PASSWORD } \" -H \"X-Xsrf-Header: PingAccess\" https://localhost:9000/pa-admin-api/v3/config/export -o ~/Downloads/data.json docker cp <container_name>:/opt/out/instance/conf/pa.jwk ~/Downloads/pa.jwk Password Variables You can find the PingAccess administrator password in PingAccess.mv.db , not in data.json . For this reason, you can use the following environment variables to manage different scenarios: PING_IDENTITY_PASSWORD Use this variable if: You're starting a PingAccess container without any configurations. You're using only a data.json file for configurations. Your PingAccess.mv.db file has a password other than the default \"2Access\". The PING_IDENTITY_PASSWORD value will be used for all interactions with the PingAccess Admin API (such as importing configurations and creating clustering). PA_ADMIN_PASSWORD_INITIAL Use this variable in addition to PING_IDENTITY_PASSWORD to change the runtime admin password and override the password in PingAccess.mv.db . If you use only data.json and do notpass PING_IDENTITY_PASSWORD , the password will default to \"2FederateM0re\". Always use PING_IDENTITY_PASSWORD . Ping Data Products \u00b6 The Ping Data Products (PingDirectory, PingDataSync, PingAuthorize, PingDirectoryProxy) follow the same structure for server-profiles. Example at getting-started/pingdirectory . Path Location description pd.profile Server profile matching the structure as defined by PingDirectory Server Profiles instance Directories and files that you want to be used at product runtime, in accordance with the layout of the product. In general, this should be non existing or empty . env-vars You can set environment variables used during deployment. See Variables and Scope for more info. In general, this should be non existing or empty . Ping Data Server Profile Best Practices In most circumstances, the pd.profile directory should be the only directory in the server profile. All environment variables should be provided through Kubernetes configmaps/secrets and a secret management tool. Be careful providing an env-vars and if you do, please review Variables and Scope Creating a pd.profile from scratch Use the manage-profile tool (found in product bin directory) to generate a pd.profile from an existing Ping Data 8.0+ deployment. An example on creating this pd.profile looks like: manage-profile generate-profile --profileRoot /tmp/pd.profile rm /tmp/pd.profile/setup-arguments.txt Follow the instructions provided when you run the generate-profile to ensure that you include any additional components, such as encryption-settings .","title":"Server Profile"},{"location":"reference/profileStructures/#server-profile-structures","text":"Each of the Docker images use a server profile structure that is specific to each product. The structure (directory paths and data) of the server profile differs between products. Depending on how you Deploy Your Server Profile , it will be pulled or mounted into /opt/in on the container and used to stage your deployment. The following locations are the server profile structures for each of our products with example usage. For help with an example of the basics, see the pingidentity-server-profiles/getting-started examples. Ignore .sec directories in examples In the getting-started profile examples, you should not use the .sec directory when providing passwords to your containers. These examples are only intended for demonstration purposes. Instead, set an environment variable with your secrets or orchestration later: PING_IDENTITY_PASSWORD = \"secret\"","title":"Server Profile Structures"},{"location":"reference/profileStructures/#pingfederate","text":"See the example at getting-started/pingfederate . Path Location description instance Directories and files that you want to be used at product runtime, in accordance with the directory layout of the product. instance/server/default/data An extracted configuration archive exported from PingFederate. instance/bulk-config/data.json A JSON export from the PingFed admin API /bulk/export . instance/server/default/deploy/OAuthPlayground.war Automatically deploy the OAuthPlayground web application. instance/server/default/conf/META-INF/hivemodule.xml Apply a Hive module config to the container. Used for persisting OAuth clients, grants, and sessions to an external DB. PingFederate Integeration Kits By default, PingFederate is shipped with a handful of integration kits and adapters. If you need other integration kits or adapters in the deployment, manually download them and place them inside server/default/deploy of the server profile. You can find these resources in the product download page here .","title":"PingFederate"},{"location":"reference/profileStructures/#pingaccess","text":"Example at getting-started/pingaccess . Path Location description instance Directories and files that you want to be used at product runtime, in accordance with the directory layout of the product. instance/conf/pa.jwk Used to decrypt a data.json configuration upon import. instance/data/data.json PA 6.1+ A config file that, if found by the container, is uploaded into the container. instance/data/PingAccess.mv.db Database binary that would be ingested at container startup if found. PingAccess Best Practices PingAccess profiles are typically minimalist because the majority of PingAccess configurations can be found within a data.json or PingAccess.mv.db file. You should use data.json for configurations and only use PingAccess.mv.db if necessary. You can easily view and manipulate configurations directly in a JSON file as opposed to the binary PingAccess.mv.db file. This fact makes tracking changes in version control easier as well. PingAccess 6.1.x+ supports using only data.json , even when clustering. However on 6.1.0.3 make sure data.json is only supplied to the admin node. PingAccess 6.1.0+ PingAccess now supports native data.json ingestion, which is the recommended method . Place data.json or data.json.subst in instance/conf/data/start-up-deployer . The JSON configuration file for PingAccess must be named data.json . A data.json file that corresponds to earlier PingAccess versions might be accepted. However, after you are on version 6.1.x, the data.json file will be forward compatible. This support means you are able to avoid upgrades for your deployments! PingAccess 6.0.x and earlier The JSON configuration file for PingAccess must be named data.json and located in the instance/data directory. All PingAccess versions A corresponding file named pa.jwk must also exist in the instance/conf directory for the data.json file to be decrypted on import. To get a data.json and pa.jwk that work together, pull them both from the same running PingAccess instance. For example, if PingAccess is running in a local Docker container you can use these commands to export the data.json file and copy the pa.jwk file to your local Downloads directory: curl -k -u \"Administrator: ${ ADMIN_PASSWORD } \" -H \"X-Xsrf-Header: PingAccess\" https://localhost:9000/pa-admin-api/v3/config/export -o ~/Downloads/data.json docker cp <container_name>:/opt/out/instance/conf/pa.jwk ~/Downloads/pa.jwk Password Variables You can find the PingAccess administrator password in PingAccess.mv.db , not in data.json . For this reason, you can use the following environment variables to manage different scenarios: PING_IDENTITY_PASSWORD Use this variable if: You're starting a PingAccess container without any configurations. You're using only a data.json file for configurations. Your PingAccess.mv.db file has a password other than the default \"2Access\". The PING_IDENTITY_PASSWORD value will be used for all interactions with the PingAccess Admin API (such as importing configurations and creating clustering). PA_ADMIN_PASSWORD_INITIAL Use this variable in addition to PING_IDENTITY_PASSWORD to change the runtime admin password and override the password in PingAccess.mv.db . If you use only data.json and do notpass PING_IDENTITY_PASSWORD , the password will default to \"2FederateM0re\". Always use PING_IDENTITY_PASSWORD .","title":"PingAccess"},{"location":"reference/profileStructures/#ping-data-products","text":"The Ping Data Products (PingDirectory, PingDataSync, PingAuthorize, PingDirectoryProxy) follow the same structure for server-profiles. Example at getting-started/pingdirectory . Path Location description pd.profile Server profile matching the structure as defined by PingDirectory Server Profiles instance Directories and files that you want to be used at product runtime, in accordance with the layout of the product. In general, this should be non existing or empty . env-vars You can set environment variables used during deployment. See Variables and Scope for more info. In general, this should be non existing or empty . Ping Data Server Profile Best Practices In most circumstances, the pd.profile directory should be the only directory in the server profile. All environment variables should be provided through Kubernetes configmaps/secrets and a secret management tool. Be careful providing an env-vars and if you do, please review Variables and Scope Creating a pd.profile from scratch Use the manage-profile tool (found in product bin directory) to generate a pd.profile from an existing Ping Data 8.0+ deployment. An example on creating this pd.profile looks like: manage-profile generate-profile --profileRoot /tmp/pd.profile rm /tmp/pd.profile/setup-arguments.txt Follow the instructions provided when you run the generate-profile to ensure that you include any additional components, such as encryption-settings .","title":"Ping Data Products"},{"location":"reference/troubleshooting/","text":"Troubleshooting \u00b6 Getting started \u00b6 Examples Not Working \u00b6 Many common errors using Ping containers arise from using stale images. Our development is highly dynamic and Docker images can rapidly change. To avoid issues with stale images, remove all local images from your local cache. Doing so will force Docker to pull the latest images: docker rmi $( docker images \"pingidentity/*\" -q ) Moving tag Even though you might have a local image tagged \"latest\", this tag does not guarantee it is the newest image in the Docker hub registry. This tag is reapplied for each release image. Misconfigured pingctl \u00b6 If your containers cannot pull a license based on your DevOps user name and key, there might be some misconfiguration in your pingctl config file. Possible solutions: If you have ran pingctl config for the first time, see the Environment Configuration Documentation on how to export configured variables to your environment. Run pingctl info and make sure the configured variables in the utility are correct. See the utility's documentation for more information. Unable To Retrieve Evaluation License \u00b6 If a product instance or instances cannot retrieve the evaluation license, you might receive an error similar to this: ----- Starting hook: /opt/staging/hooks/17-check-license.sh Pulling evaluation license from Ping Identity for: Prod License: PD - v7.3 DevOps User: some-devops-user@example.com... Unable to download evaluation product.lic (000), most likely due to invalid PING_IDENTITY_DEVOPS_USER/PING_IDENTITY_DEVOPS_KEY ################################################################################## ############################ ALERT ################################# ################################################################################## # # No Ping Identity License File (PingDirectory.lic) was found in the server profile. # No Ping Identity DevOps User or Key was passed. # # # More info on obtaining your DevOps User and Key can be found at: # https://devops.pingidentity.com/get-started/devopsRegistration/ # ################################################################################## CONTAINER FAILURE: License File absent CONTAINER FAILURE: Error running 17-check-license.sh CONTAINER FAILURE: Error running 10-start-sequence.sh This error can be caused by: An invalid DevOps user name or key (as noted in the error). This failure is usually caused by some issue with the variables being passed in. To verify the variables in the pingctl configuration are correct for running Docker commands, run the following command: pingctl info A bad Docker image. Pull the Docker image again to verify. Network connectivity to the license server is blocked. To test this, on the machine that is running the container, run: curl -k https://license.pingidentity.com/devops/license If the license server is reachable, you will receive an error similar to this example: { \"error\" : \"missing devops-user header\" }","title":"Troubleshooting"},{"location":"reference/troubleshooting/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"reference/troubleshooting/#getting-started","text":"","title":"Getting started"},{"location":"reference/troubleshooting/#examples-not-working","text":"Many common errors using Ping containers arise from using stale images. Our development is highly dynamic and Docker images can rapidly change. To avoid issues with stale images, remove all local images from your local cache. Doing so will force Docker to pull the latest images: docker rmi $( docker images \"pingidentity/*\" -q ) Moving tag Even though you might have a local image tagged \"latest\", this tag does not guarantee it is the newest image in the Docker hub registry. This tag is reapplied for each release image.","title":"Examples Not Working"},{"location":"reference/troubleshooting/#misconfigured-pingctl","text":"If your containers cannot pull a license based on your DevOps user name and key, there might be some misconfiguration in your pingctl config file. Possible solutions: If you have ran pingctl config for the first time, see the Environment Configuration Documentation on how to export configured variables to your environment. Run pingctl info and make sure the configured variables in the utility are correct. See the utility's documentation for more information.","title":"Misconfigured pingctl"},{"location":"reference/troubleshooting/#unable-to-retrieve-evaluation-license","text":"If a product instance or instances cannot retrieve the evaluation license, you might receive an error similar to this: ----- Starting hook: /opt/staging/hooks/17-check-license.sh Pulling evaluation license from Ping Identity for: Prod License: PD - v7.3 DevOps User: some-devops-user@example.com... Unable to download evaluation product.lic (000), most likely due to invalid PING_IDENTITY_DEVOPS_USER/PING_IDENTITY_DEVOPS_KEY ################################################################################## ############################ ALERT ################################# ################################################################################## # # No Ping Identity License File (PingDirectory.lic) was found in the server profile. # No Ping Identity DevOps User or Key was passed. # # # More info on obtaining your DevOps User and Key can be found at: # https://devops.pingidentity.com/get-started/devopsRegistration/ # ################################################################################## CONTAINER FAILURE: License File absent CONTAINER FAILURE: Error running 17-check-license.sh CONTAINER FAILURE: Error running 10-start-sequence.sh This error can be caused by: An invalid DevOps user name or key (as noted in the error). This failure is usually caused by some issue with the variables being passed in. To verify the variables in the pingctl configuration are correct for running Docker commands, run the following command: pingctl info A bad Docker image. Pull the Docker image again to verify. Network connectivity to the license server is blocked. To test this, on the machine that is running the container, run: curl -k https://license.pingidentity.com/devops/license If the license server is reachable, you will receive an error similar to this example: { \"error\" : \"missing devops-user header\" }","title":"Unable To Retrieve Evaluation License"},{"location":"reference/usingCertificates/","text":"Using Certificates with Images \u00b6 This page provides details for using certificates with the Ping Identity images. Specifically it outlines the preferred locations to place the certificate and PIN/key files to provide best security practices and enable use by the underlying Ping Identity product. Currently, certificates can be provided to the PingData products when the containers are started. Prior to the 2008 sprint release Before the 2008 release, you were encouraged to place these files in the server profile (.../.sec/keystore). To align with security best practices, this approach is no longer longer recommended Instead, use a secret to pass the files to the containers. Before you begin \u00b6 You must: Complete Get started to set up your DevOps environment and run a test deployment of the products. Strongly recommended: Have a secrets management system, such as Hashicorp Vault, that holds your certificate and places them into your SECRETS_DIR (/run/secrets). For information on using a vault, if you have one, see Using Hashicorp Vault . About this topic \u00b6 The following examples explain how to deploy a certificate/PIN combination to an image in a secure way. PingData Image Certificates \u00b6 The PingData products, such as PingDirectory, PingDataSync, PingAuthorize, and PingDirectoryProxy, use a file location to determine certificates/PIN files: It is best practice to use a non-persistent location, such as /run/secrets, to store these files. If no certificate is provided, the container/product will generate a self-signed certificate. The default location for certificates and associated files are listed below, assuming a default SECRETS_DIR variable of /run/secrets . Variable Used Default Location/Value /run/secrets... Notes Keystore (JKS) KEYSTORE_FILE keystore Java KeyStore (JKS) Format. Set as default in absence of .p12 suffix Keystore (PKCS12) KEYSTORE_FILE keystore.p12 PKCS12 Format Keystore Type KEYSTORE_TYPE jks or pkcs12 Based on suffix of KEYSTORE_FILE Keystore PIN KEYSTORE_PIN_FILE keystore.pin Truststore (JKS) TRUSTSTORE_FILE truststore Set as default in absence of .p12 suffix Truststore (PKCS12) TRUSTSTORE_FILE truststore.p12 PKCS12 Format Truststore Type TRUSTSTORE_TYPE jks or pkcs12 Based on suffix of TRUSTSTORE_FILE Truststore PIN TRUSTSTORE_PIN_FILE truststore.pin Certificate Nickname CERTIFICATE_NICKNAME see below CERTIFICATE_NICKNAME Setting There is an additional certificate-based variable used to identity the certificate alias used within the KEYSTORE_FILE . That variable is called CERTIFICATE_NICKNAME , which identifies the certificate to use by the server in the KEYSTORE_FILE . If a value is not provided, the container will look at the list certs found in the KEYSTORE_FILE and if one - and only one - certificate is found of type PrivateKeyEntry , that alias will be used. Specifying your own location for a certificate If you are relying on certificates to be mounted to a different locations than the SECRET_DIR location or a different filename, you can provide your own values for those variables identified above. As an example: KEYSTORE_FILE = /my/path/to/certs/cert-file KEYSTORE_PIN_FILE = /my/path/to/certs/cert.pin KEYSTORE_TYPE = jks CERTIFICATE_NICKNAME = development-cert PingData image certificate rotation \u00b6 As mentioned above, for the PingData products there are variables for truststore and keystore. To change certificates, you will need to update the contents of the truststore or keystore in your server profile or secret store. After you update the contents, restart the container. The changes will be picked up automatically when the server restarts. If you have multiple certificates in the keystore, you can use the above-mentioned CERTIFICATE_NICKNAME variable to specify the certificate. The container will pick up that certificate from those stored in the keystore. For updating the product to use the new certificates, perform a rolling update. This action ensures that other servers will remain available as each pod is cycled. In addition, verify that remaining pods in the cluster have sufficient capacity to handle the increased load during the rolling update. Non-PingData image certificates \u00b6 For non-PingData images, such as PingAccess and PingFederate, the certificates are managed within the product configurations.","title":"Certificates"},{"location":"reference/usingCertificates/#using-certificates-with-images","text":"This page provides details for using certificates with the Ping Identity images. Specifically it outlines the preferred locations to place the certificate and PIN/key files to provide best security practices and enable use by the underlying Ping Identity product. Currently, certificates can be provided to the PingData products when the containers are started. Prior to the 2008 sprint release Before the 2008 release, you were encouraged to place these files in the server profile (.../.sec/keystore). To align with security best practices, this approach is no longer longer recommended Instead, use a secret to pass the files to the containers.","title":"Using Certificates with Images"},{"location":"reference/usingCertificates/#before-you-begin","text":"You must: Complete Get started to set up your DevOps environment and run a test deployment of the products. Strongly recommended: Have a secrets management system, such as Hashicorp Vault, that holds your certificate and places them into your SECRETS_DIR (/run/secrets). For information on using a vault, if you have one, see Using Hashicorp Vault .","title":"Before you begin"},{"location":"reference/usingCertificates/#about-this-topic","text":"The following examples explain how to deploy a certificate/PIN combination to an image in a secure way.","title":"About this topic"},{"location":"reference/usingCertificates/#pingdata-image-certificates","text":"The PingData products, such as PingDirectory, PingDataSync, PingAuthorize, and PingDirectoryProxy, use a file location to determine certificates/PIN files: It is best practice to use a non-persistent location, such as /run/secrets, to store these files. If no certificate is provided, the container/product will generate a self-signed certificate. The default location for certificates and associated files are listed below, assuming a default SECRETS_DIR variable of /run/secrets . Variable Used Default Location/Value /run/secrets... Notes Keystore (JKS) KEYSTORE_FILE keystore Java KeyStore (JKS) Format. Set as default in absence of .p12 suffix Keystore (PKCS12) KEYSTORE_FILE keystore.p12 PKCS12 Format Keystore Type KEYSTORE_TYPE jks or pkcs12 Based on suffix of KEYSTORE_FILE Keystore PIN KEYSTORE_PIN_FILE keystore.pin Truststore (JKS) TRUSTSTORE_FILE truststore Set as default in absence of .p12 suffix Truststore (PKCS12) TRUSTSTORE_FILE truststore.p12 PKCS12 Format Truststore Type TRUSTSTORE_TYPE jks or pkcs12 Based on suffix of TRUSTSTORE_FILE Truststore PIN TRUSTSTORE_PIN_FILE truststore.pin Certificate Nickname CERTIFICATE_NICKNAME see below CERTIFICATE_NICKNAME Setting There is an additional certificate-based variable used to identity the certificate alias used within the KEYSTORE_FILE . That variable is called CERTIFICATE_NICKNAME , which identifies the certificate to use by the server in the KEYSTORE_FILE . If a value is not provided, the container will look at the list certs found in the KEYSTORE_FILE and if one - and only one - certificate is found of type PrivateKeyEntry , that alias will be used. Specifying your own location for a certificate If you are relying on certificates to be mounted to a different locations than the SECRET_DIR location or a different filename, you can provide your own values for those variables identified above. As an example: KEYSTORE_FILE = /my/path/to/certs/cert-file KEYSTORE_PIN_FILE = /my/path/to/certs/cert.pin KEYSTORE_TYPE = jks CERTIFICATE_NICKNAME = development-cert","title":"PingData Image Certificates"},{"location":"reference/usingCertificates/#pingdata-image-certificate-rotation","text":"As mentioned above, for the PingData products there are variables for truststore and keystore. To change certificates, you will need to update the contents of the truststore or keystore in your server profile or secret store. After you update the contents, restart the container. The changes will be picked up automatically when the server restarts. If you have multiple certificates in the keystore, you can use the above-mentioned CERTIFICATE_NICKNAME variable to specify the certificate. The container will pick up that certificate from those stored in the keystore. For updating the product to use the new certificates, perform a rolling update. This action ensures that other servers will remain available as each pod is cycled. In addition, verify that remaining pods in the cluster have sufficient capacity to handle the increased load during the rolling update.","title":"PingData image certificate rotation"},{"location":"reference/usingCertificates/#non-pingdata-image-certificates","text":"For non-PingData images, such as PingAccess and PingFederate, the certificates are managed within the product configurations.","title":"Non-PingData image certificates"},{"location":"reference/variableScoping/","text":"Variables and scope \u00b6 Variables provide a way to store and reuse values with our Docker containers which are ultimately used by our Docker image hooks to customize configurations. It's important to understand: The different levels at which you can set variables How you should use variables Where you should set and use variables The following diagram shows the different scopes in which variables can be set and applied. Assume that you are viewing this diagram as a pyramid with the container at the top. The order of precedence for variables is top-down. Generally, you set variables having an orchestration scope. Image scope \u00b6 Variables having an image scope are assigned using the values set for the Docker image (for example, from Dockerfiles). These variables are often set as defaults, allowing scopes with a higher level of precedence to override them. To see the default environment variables available with any Docker image, enter: docker run pingidentity/<product-image>:<tag> env | sort Where <product-image> is the name of one of our products, and <tag> is the release tag (such as edge ). For the environment variables available for all products (PingBase) or individual products, see the Docker Images Reference . Orchestration scope \u00b6 Variables having orchestration scope are assigned at the orchestration layer. Typically, these environment variables are set using Docker commands, Docker Compose or Helm values. For example: Using docker run with --env : docker run --env SCOPE = env \\ pingidentity/pingdirectory:edge env | sort Using docker run with --env-file : echo \"SCOPE=env-file\" > /tmp/scope.properties docker run --env-file /tmp/scope.properties \\ pingidentity/pingdirectory:edge env | sort Using Docker Compose (docker-compose.yaml): environment : - SCOPE=compose env_file : - /tmp/scope.properties Using Kubernetes: env : - name : SCOPE value : kubernetes Using Helm variables: global : envs : PING_IDENTITY_ACCEPT_EULA : \"YES\" PING_IDENTITY_PASSWORD : \"2Federate\" ... Server profile scope \u00b6 Variables having server profile scope are supplied using property files in the server-profile repository. You need to be careful setting variables at this level because the settings can override variables already having an image or orchestration scope value set. You can use the following masthead in your env_vars files to provide examples of setting variables and how they might override variables having a scope with a lower level of precedence. It will also suppress a warning when processing the env_vars file: # .suppress-container-warning # # NOTICE: Settings in this file will override values set at the # image or orchestration layers of the container. Examples # include variables that are specific to this server profile. # # Options include: # # ALWAYS OVERRIDE the value in the container # NAME=VAL # # SET TO DEFAULT VALUE if not already set # export NAME=${NAME:=myDefaultValue} # Sets to string of \"myDefaultValue\" # export NAME=${NAME:-OTHER_VAR} # Sets ot value of OTHER_VAR variable # Container scope \u00b6 Variables having a container scope are assigned in the hook scripts and will overwrite variables that are set elsewhere. Variables that need to be passed to other hook scripts must be appended to the file assigned to ${CONTAINER_ENV} , (which defaults to /opt/staging/.env ). This file is sourced by every hook script. Scoping example \u00b6","title":"Variables and Scope"},{"location":"reference/variableScoping/#variables-and-scope","text":"Variables provide a way to store and reuse values with our Docker containers which are ultimately used by our Docker image hooks to customize configurations. It's important to understand: The different levels at which you can set variables How you should use variables Where you should set and use variables The following diagram shows the different scopes in which variables can be set and applied. Assume that you are viewing this diagram as a pyramid with the container at the top. The order of precedence for variables is top-down. Generally, you set variables having an orchestration scope.","title":"Variables and scope"},{"location":"reference/variableScoping/#image-scope","text":"Variables having an image scope are assigned using the values set for the Docker image (for example, from Dockerfiles). These variables are often set as defaults, allowing scopes with a higher level of precedence to override them. To see the default environment variables available with any Docker image, enter: docker run pingidentity/<product-image>:<tag> env | sort Where <product-image> is the name of one of our products, and <tag> is the release tag (such as edge ). For the environment variables available for all products (PingBase) or individual products, see the Docker Images Reference .","title":"Image scope"},{"location":"reference/variableScoping/#orchestration-scope","text":"Variables having orchestration scope are assigned at the orchestration layer. Typically, these environment variables are set using Docker commands, Docker Compose or Helm values. For example: Using docker run with --env : docker run --env SCOPE = env \\ pingidentity/pingdirectory:edge env | sort Using docker run with --env-file : echo \"SCOPE=env-file\" > /tmp/scope.properties docker run --env-file /tmp/scope.properties \\ pingidentity/pingdirectory:edge env | sort Using Docker Compose (docker-compose.yaml): environment : - SCOPE=compose env_file : - /tmp/scope.properties Using Kubernetes: env : - name : SCOPE value : kubernetes Using Helm variables: global : envs : PING_IDENTITY_ACCEPT_EULA : \"YES\" PING_IDENTITY_PASSWORD : \"2Federate\" ...","title":"Orchestration scope"},{"location":"reference/variableScoping/#server-profile-scope","text":"Variables having server profile scope are supplied using property files in the server-profile repository. You need to be careful setting variables at this level because the settings can override variables already having an image or orchestration scope value set. You can use the following masthead in your env_vars files to provide examples of setting variables and how they might override variables having a scope with a lower level of precedence. It will also suppress a warning when processing the env_vars file: # .suppress-container-warning # # NOTICE: Settings in this file will override values set at the # image or orchestration layers of the container. Examples # include variables that are specific to this server profile. # # Options include: # # ALWAYS OVERRIDE the value in the container # NAME=VAL # # SET TO DEFAULT VALUE if not already set # export NAME=${NAME:=myDefaultValue} # Sets to string of \"myDefaultValue\" # export NAME=${NAME:-OTHER_VAR} # Sets ot value of OTHER_VAR variable #","title":"Server profile scope"},{"location":"reference/variableScoping/#container-scope","text":"Variables having a container scope are assigned in the hook scripts and will overwrite variables that are set elsewhere. Variables that need to be passed to other hook scripts must be appended to the file assigned to ${CONTAINER_ENV} , (which defaults to /opt/staging/.env ). This file is sourced by every hook script.","title":"Container scope"},{"location":"reference/variableScoping/#scoping-example","text":"","title":"Scoping example"},{"location":"reference/yamlFiles/","text":"Customizing YAML files \u00b6 Docker Compose uses YAML files to configure a stack's containers on startup. You can customize our YAML files or use them as the basis for creating your own. For more information, see the Docker Compose File Reference . To customize our YAML files, you can: Add or change environment variables to use different server profiles. Add references to a file or files containing environment variables to pass to the container on startup. Change the wait-for times used to control the startup sequence of containers. Change the port mappings for a container. Change the release tag used for the Docker images (all product containers in the stack must use the same release tag). See Using Release Tags for more information. You will find the YAML files for deploying individual Ping product containers in the ${HOME}/projects/devops/pingidentity-devops-getting-started/11-docker-compose directory. YAML file format \u00b6 This format is used for the YAML files: version : \"3.9\" services : <ping-product> : image : pingidentity/<ping-product>:${PING_IDENTITY_DEVOPS_TAG} command : wait-for <another-ping-product>:<startup-port> -t <time-to-wait> -- entrypoint.sh start-server environment : - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=baseline/<ping-product> - PING_IDENTITY_ACCEPT_EULA=YES env_file : - ~/.pingidentity/config #volumes: # - ${HOME}/projects/devops/volumes/full-stack.<ping-product>:/opt/out # - ${HOME}/projects/devops/pingidentity-server-profiles/baseline/<ping-product>:/opt/in ports : - <host-port>:<container-port> - <host-port>:<container-port> networks : - pingnet-dmz networks : pingnet-internal : pingnet-dmz : Entry Description version The Docker Compose file specification version used. <ping-product> The name of the Ping Identity product container. image The build image of the product used for the container and the build tag to use (defaults to value assigned to PING_IDENTITY_DEVOPS_TAG in the ~/.pingidentity/config file. command We use the wait-for script to control the startup order, where <startup-port> is the port to check for whether <another-ping-product> container has started. The <time-to-wait> argument is the number of seconds to wait before executing the entrypoint.sh script with the start-server command. If you find a container is timing out while waiting for another container to start, try increasing the <time-to-wait> value. environment The environment variables being set. See Customizing Server Profiles for more information. The PING_IDENTITY_ACCEPT_EULA environment variable is set to \"YES\" when you complete the DevOps registration. This variable assignment appears here by default but could also be in your ~/.pingidentity/config file. env_file A file or files containing environment variable settings. The DevOps environment settings are stored in your ~/.pingidentity/config file. You also can specify additional files containing environment settings. For more information, see Customizing Server Profiles . volumes Commented out by default. The location bind mounted to the /opt/out volume is used to persist product container state and data. The location bind mounted to the /opt/in volume is used to supply server profile information to the container on startup. For more information, see Modify a server profile using local directories in Customizing Server Profiles . ports The port mappings between the host and the product container. For more information, see the Ports topic in the Docker Compose File Reference . networks One or more of the networks listed under the top-level networks key that the product container can use for Docker network communications. top level networks The Docker networks available for assignment to the containers in the stack. Our stacks are built to use an internal Docker network for communications between product containers ( pingnet-internal ) and an external-facing DMZ for external network communications ( pingnet-dmz ).","title":"Docker Compose YAML"},{"location":"reference/yamlFiles/#customizing-yaml-files","text":"Docker Compose uses YAML files to configure a stack's containers on startup. You can customize our YAML files or use them as the basis for creating your own. For more information, see the Docker Compose File Reference . To customize our YAML files, you can: Add or change environment variables to use different server profiles. Add references to a file or files containing environment variables to pass to the container on startup. Change the wait-for times used to control the startup sequence of containers. Change the port mappings for a container. Change the release tag used for the Docker images (all product containers in the stack must use the same release tag). See Using Release Tags for more information. You will find the YAML files for deploying individual Ping product containers in the ${HOME}/projects/devops/pingidentity-devops-getting-started/11-docker-compose directory.","title":"Customizing YAML files"},{"location":"reference/yamlFiles/#yaml-file-format","text":"This format is used for the YAML files: version : \"3.9\" services : <ping-product> : image : pingidentity/<ping-product>:${PING_IDENTITY_DEVOPS_TAG} command : wait-for <another-ping-product>:<startup-port> -t <time-to-wait> -- entrypoint.sh start-server environment : - SERVER_PROFILE_URL=https://github.com/pingidentity/pingidentity-server-profiles.git - SERVER_PROFILE_PATH=baseline/<ping-product> - PING_IDENTITY_ACCEPT_EULA=YES env_file : - ~/.pingidentity/config #volumes: # - ${HOME}/projects/devops/volumes/full-stack.<ping-product>:/opt/out # - ${HOME}/projects/devops/pingidentity-server-profiles/baseline/<ping-product>:/opt/in ports : - <host-port>:<container-port> - <host-port>:<container-port> networks : - pingnet-dmz networks : pingnet-internal : pingnet-dmz : Entry Description version The Docker Compose file specification version used. <ping-product> The name of the Ping Identity product container. image The build image of the product used for the container and the build tag to use (defaults to value assigned to PING_IDENTITY_DEVOPS_TAG in the ~/.pingidentity/config file. command We use the wait-for script to control the startup order, where <startup-port> is the port to check for whether <another-ping-product> container has started. The <time-to-wait> argument is the number of seconds to wait before executing the entrypoint.sh script with the start-server command. If you find a container is timing out while waiting for another container to start, try increasing the <time-to-wait> value. environment The environment variables being set. See Customizing Server Profiles for more information. The PING_IDENTITY_ACCEPT_EULA environment variable is set to \"YES\" when you complete the DevOps registration. This variable assignment appears here by default but could also be in your ~/.pingidentity/config file. env_file A file or files containing environment variable settings. The DevOps environment settings are stored in your ~/.pingidentity/config file. You also can specify additional files containing environment settings. For more information, see Customizing Server Profiles . volumes Commented out by default. The location bind mounted to the /opt/out volume is used to persist product container state and data. The location bind mounted to the /opt/in volume is used to supply server profile information to the container on startup. For more information, see Modify a server profile using local directories in Customizing Server Profiles . ports The port mappings between the host and the product container. For more information, see the Ports topic in the Docker Compose File Reference . networks One or more of the networks listed under the top-level networks key that the product container can use for Docker network communications. top level networks The Docker networks available for assignment to the containers in the stack. Our stacks are built to use an internal Docker network for communications between product containers ( pingnet-internal ) and an external-facing DMZ for external network communications ( pingnet-dmz ).","title":"YAML file format"},{"location":"release-notes/currentRelease/","text":"Version 2206 Release Notes \u00b6 Product release notes For information about product changes, refer to the release notes that can be found on each product's download page . DevOps Docker Builds, Version 2206 (July 01 2022) \u00b6 New Product Releases \u00b6 PingData products 9.1.0.0 released and PingData products 8.3.x are no longer built PingDirectory ( Dockerhub ) PingDirectory Proxy ( Dockerhub ) PingDataSync ( Dockerhub ) PingAuthorize ( Dockerhub ) PingDataConsole ( Dockerhub ) PingFederate 11.1.0 released and PF 10.3.x no longer built ( Dockerhub ) PingAccess 7.1.0 released and PA 6.3.x no longer built ( Dockerhub ) PingCentral 1.10.0 released ( Dockerhub ) PingDelegator 4.10.0 released and PDA 4.9.x no longer built ( Dockerhub ) Documentation \u00b6 How-to documentation for PingIntelligence Added page for Openshift configuration Resolved Defects \u00b6 (BRASS-464) Fixed PingAuthorize baseline server profile overwriting certain environment variables from the orchestration layer Enhancements \u00b6 Liberica JDK -> 11.0.15.1+2 Apache Tomcat in PingDataConsole -> 9.0.64 Apache JMeter -> 5.5 Features \u00b6 (BRASS-440) Kubernetes deployment script of Ping Intelligence Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Current Release"},{"location":"release-notes/currentRelease/#version-2206-release-notes","text":"Product release notes For information about product changes, refer to the release notes that can be found on each product's download page .","title":"Version 2206 Release Notes"},{"location":"release-notes/currentRelease/#devops-docker-builds-version-2206-july-01-2022","text":"","title":"DevOps Docker Builds, Version 2206 (July 01 2022)"},{"location":"release-notes/currentRelease/#new-product-releases","text":"PingData products 9.1.0.0 released and PingData products 8.3.x are no longer built PingDirectory ( Dockerhub ) PingDirectory Proxy ( Dockerhub ) PingDataSync ( Dockerhub ) PingAuthorize ( Dockerhub ) PingDataConsole ( Dockerhub ) PingFederate 11.1.0 released and PF 10.3.x no longer built ( Dockerhub ) PingAccess 7.1.0 released and PA 6.3.x no longer built ( Dockerhub ) PingCentral 1.10.0 released ( Dockerhub ) PingDelegator 4.10.0 released and PDA 4.9.x no longer built ( Dockerhub )","title":"New Product Releases"},{"location":"release-notes/currentRelease/#documentation","text":"How-to documentation for PingIntelligence Added page for Openshift configuration","title":"Documentation"},{"location":"release-notes/currentRelease/#resolved-defects","text":"(BRASS-464) Fixed PingAuthorize baseline server profile overwriting certain environment variables from the orchestration layer","title":"Resolved Defects"},{"location":"release-notes/currentRelease/#enhancements","text":"Liberica JDK -> 11.0.15.1+2 Apache Tomcat in PingDataConsole -> 9.0.64 Apache JMeter -> 5.5","title":"Enhancements"},{"location":"release-notes/currentRelease/#features","text":"(BRASS-440) Kubernetes deployment script of Ping Intelligence","title":"Features"},{"location":"release-notes/currentRelease/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2003/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2003 \u00b6 New Features \u00b6 PingDirectoryProxy The PingDirectoryProxy Docker image is now available. See the Ping Identity Docker Hub PingCentral The PingCentral Docker image is now available. See the Ping Identity Docker Hub Docker Compose Port Mappings We now support the Docker Compose best practice of quoting all port mappings. Docker Images (Tag: edge) We've built a pipeline to support nightly public builds of all Ping Identity Docker images using the edge tag. PingDirectory We've upgraded the PingDirectory Docker image to the current product version 8.0.0.1. PingFederate Version 10.1.0 We've built a beta PingFederate 10.1.0 Docker image. PingAccess Version 6.1.0 We've built a beta PingAccess 6.1.0 Docker image. Ping Tool Kit The Ping Tool Kit Docker image is now available. See Ping Identity Docker Hub . Both kubectl and kustomize are supported in the image. PingFederate Version 9.3 We've updated the PingFederate 9.3 Docker image to include the latest product patches. The ping-devops Utility We've added Kubernetes license secret generation, and server profile generation for PingDirectory to the ping-devops utility. See The ping-devops utility . A New Hook We've added a security start-up hook notifying administrators of keys and secrets found in the server profile. DevOps Evaluation License We've added retry functionality to attempt getting the DevOps evaluation license if the initial request fails. Product Artifacts and Extensions We've created operations to retrieve product artifacts and extensions using the DevOps credentials. Java 11 We've migrated all Alpine-based Docker images to Java 11 (Azul). PingDirectory Replication Timing We've added a profile and reference example to test PingDirectory replication timing. See the pingidentity-devops-getting-started Repo . Docker Base Image Security We've documented an evaluation of Docker base image security. See Evaluation of Docker Base Image Security . Resolved Defects \u00b6 (GDO-85) Resolved an issue where PingAccess 6.0 loaded a 5.2 license. (GDO-87) Resolved an issue where Data Console wasn't allowing users to authenticate (edge tag). (GDO-124) Resolved an issue in with pipeline where starting containers using Docker-Compose timed out. (GDO-89) Resolved an issue where *.subst template files were able to overwrite the server profile configuration. (GDO-72) Resolved an issue where motd.json did not parse correctly when the product was missing. (GDO-88) Resolved an issue where PingFederate profile metadata did not expand hostname , breaking OAuth flows. Changed \u00b6 (GDO-97) Removed WebConsole HTTP servlet from the baseline server profile. See the pingidentity-server-profiles repo . Qualified \u00b6 (GDO-42) Verified the ability to run our Docker containers as a non-root user. See Securing the Containers .","title":"Version 2003"},{"location":"release-notes/relnotes-2003/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2003/#devops-docker-builds-version-2003","text":"","title":"DevOps Docker Builds, Version 2003"},{"location":"release-notes/relnotes-2003/#new-features","text":"PingDirectoryProxy The PingDirectoryProxy Docker image is now available. See the Ping Identity Docker Hub PingCentral The PingCentral Docker image is now available. See the Ping Identity Docker Hub Docker Compose Port Mappings We now support the Docker Compose best practice of quoting all port mappings. Docker Images (Tag: edge) We've built a pipeline to support nightly public builds of all Ping Identity Docker images using the edge tag. PingDirectory We've upgraded the PingDirectory Docker image to the current product version 8.0.0.1. PingFederate Version 10.1.0 We've built a beta PingFederate 10.1.0 Docker image. PingAccess Version 6.1.0 We've built a beta PingAccess 6.1.0 Docker image. Ping Tool Kit The Ping Tool Kit Docker image is now available. See Ping Identity Docker Hub . Both kubectl and kustomize are supported in the image. PingFederate Version 9.3 We've updated the PingFederate 9.3 Docker image to include the latest product patches. The ping-devops Utility We've added Kubernetes license secret generation, and server profile generation for PingDirectory to the ping-devops utility. See The ping-devops utility . A New Hook We've added a security start-up hook notifying administrators of keys and secrets found in the server profile. DevOps Evaluation License We've added retry functionality to attempt getting the DevOps evaluation license if the initial request fails. Product Artifacts and Extensions We've created operations to retrieve product artifacts and extensions using the DevOps credentials. Java 11 We've migrated all Alpine-based Docker images to Java 11 (Azul). PingDirectory Replication Timing We've added a profile and reference example to test PingDirectory replication timing. See the pingidentity-devops-getting-started Repo . Docker Base Image Security We've documented an evaluation of Docker base image security. See Evaluation of Docker Base Image Security .","title":"New Features"},{"location":"release-notes/relnotes-2003/#resolved-defects","text":"(GDO-85) Resolved an issue where PingAccess 6.0 loaded a 5.2 license. (GDO-87) Resolved an issue where Data Console wasn't allowing users to authenticate (edge tag). (GDO-124) Resolved an issue in with pipeline where starting containers using Docker-Compose timed out. (GDO-89) Resolved an issue where *.subst template files were able to overwrite the server profile configuration. (GDO-72) Resolved an issue where motd.json did not parse correctly when the product was missing. (GDO-88) Resolved an issue where PingFederate profile metadata did not expand hostname , breaking OAuth flows.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2003/#changed","text":"(GDO-97) Removed WebConsole HTTP servlet from the baseline server profile. See the pingidentity-server-profiles repo .","title":"Changed"},{"location":"release-notes/relnotes-2003/#qualified","text":"(GDO-42) Verified the ability to run our Docker containers as a non-root user. See Securing the Containers .","title":"Qualified"},{"location":"release-notes/relnotes-2004/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2004 \u00b6 New Features \u00b6 PingCentral The PingCentral Docker image is now available. See the Ping Identity Docker hub . Docker Compose We've standardized our Docker Compose references. Performance We've built a performance framework. PingFederate version 10.0.2 We've updated the PingFederate 10 Docker image for the 10.0.2 release. The ping-devops utility We've added major enhancements to our ping-devops utility. See The ping-devops Utility . PingDirectory replication We've added support for PingDirectory replication using Docker Compose. Variables and scope We've added documentation to help with understanding the effective scope of variables. See Variables and Scope . Resolved Defects \u00b6 (GDO-1) Resolved issue where users were unable to override root and admin user passwords (PingDirectory). (GDO-129) Removed the console from Ping Data products when the server profile isn't specified. (GDO-54) Resolved PingDataGovernance issues within the baseline server profile. (GDO-138) Resolved issue regarding PingDataGovernance Policy Administration Point (PAP) launch. (GDO-189) Resolved issue with PingAccess heartbeat check. (GDO-196) Replaced nslookup with getent due to issues running in Alpine. (GDO-180) Resolved issue where extension signature verification may return a false positive. (GDO-169) Resolved issues with Ping Data Console by upgrading to Tomcat 9.0.34. (GDO-166) Resolved issue with make-ldif template processing.","title":"Version 2004"},{"location":"release-notes/relnotes-2004/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2004/#devops-docker-builds-version-2004","text":"","title":"DevOps Docker Builds, Version 2004"},{"location":"release-notes/relnotes-2004/#new-features","text":"PingCentral The PingCentral Docker image is now available. See the Ping Identity Docker hub . Docker Compose We've standardized our Docker Compose references. Performance We've built a performance framework. PingFederate version 10.0.2 We've updated the PingFederate 10 Docker image for the 10.0.2 release. The ping-devops utility We've added major enhancements to our ping-devops utility. See The ping-devops Utility . PingDirectory replication We've added support for PingDirectory replication using Docker Compose. Variables and scope We've added documentation to help with understanding the effective scope of variables. See Variables and Scope .","title":"New Features"},{"location":"release-notes/relnotes-2004/#resolved-defects","text":"(GDO-1) Resolved issue where users were unable to override root and admin user passwords (PingDirectory). (GDO-129) Removed the console from Ping Data products when the server profile isn't specified. (GDO-54) Resolved PingDataGovernance issues within the baseline server profile. (GDO-138) Resolved issue regarding PingDataGovernance Policy Administration Point (PAP) launch. (GDO-189) Resolved issue with PingAccess heartbeat check. (GDO-196) Replaced nslookup with getent due to issues running in Alpine. (GDO-180) Resolved issue where extension signature verification may return a false positive. (GDO-169) Resolved issues with Ping Data Console by upgrading to Tomcat 9.0.34. (GDO-166) Resolved issue with make-ldif template processing.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2005/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2005 (May 2020) \u00b6 New Features \u00b6 PingDelegator Docker Image The PingDelegator Docker image is now available. View on Docker Hub for more information. Test drive PingDelegator using the supplied docker-compose file in our Simple-Stack example. PingAccess Image Version 6.0.2 We've updated the PingAccess Image to version 6.0.2. PingFederate Version 9.3.3 We've updated the PingFederate 9.3.3 Docker image to include patch 4. Docker Builds Pipeline We've made a number of CI/CD enhancements to improve Image qualification (smoke/integration tests). Image Enhancements Improved the wait-for command to optionally wait for a path or file to become available. Resolved Defects \u00b6 (GDO-187) Resolved issue where MAX_HEAP_SIZE wasn't applied during container restart. (GDO-220) Resolved issue where log message didn't contain log file source name. (GDO-238) Resolved issue where ping-devops kubernetes start fails if DNS_ZONE variable not set. (GDO-245) Resolved issue where PingAccess didn't exit when configuration import failed. (GDO-263) Resolved issue within deploy_docs.sh which had resulted in some documentation to not be pushed to GitHub. (GDO-278) Resolved issue with PingAccess clustering Server Profile.","title":"Version 2005"},{"location":"release-notes/relnotes-2005/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2005/#devops-docker-builds-version-2005-may-2020","text":"","title":"DevOps Docker Builds, Version 2005 (May 2020)"},{"location":"release-notes/relnotes-2005/#new-features","text":"PingDelegator Docker Image The PingDelegator Docker image is now available. View on Docker Hub for more information. Test drive PingDelegator using the supplied docker-compose file in our Simple-Stack example. PingAccess Image Version 6.0.2 We've updated the PingAccess Image to version 6.0.2. PingFederate Version 9.3.3 We've updated the PingFederate 9.3.3 Docker image to include patch 4. Docker Builds Pipeline We've made a number of CI/CD enhancements to improve Image qualification (smoke/integration tests). Image Enhancements Improved the wait-for command to optionally wait for a path or file to become available.","title":"New Features"},{"location":"release-notes/relnotes-2005/#resolved-defects","text":"(GDO-187) Resolved issue where MAX_HEAP_SIZE wasn't applied during container restart. (GDO-220) Resolved issue where log message didn't contain log file source name. (GDO-238) Resolved issue where ping-devops kubernetes start fails if DNS_ZONE variable not set. (GDO-245) Resolved issue where PingAccess didn't exit when configuration import failed. (GDO-263) Resolved issue within deploy_docs.sh which had resulted in some documentation to not be pushed to GitHub. (GDO-278) Resolved issue with PingAccess clustering Server Profile.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2006/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2006 (June 2020) \u00b6 New Features \u00b6 Docker Compose Volumes Applications that create and manage configuration now have mounted volumes in Docker-Compose Examples , ensuring that your configuration changes are persisted across restarted. PingAccess Image Enhancements We've updated the PingAccess Image to support the new features available in version 6.1. Customer Support Data Collection Included in this release is the Java diagnostic tool to enable embedded customer support data collection. This tool set includes jstat , jmap and jhat . New Product Versions \u00b6 The following new product versions are available using edge , latest and 2006 image tags: PingFederate 10.1.0 PingAccess 6.1.0 PingDirectory 8.1.0.0 PingDirectoryProxy 8.1.0.0 PingDataGovernance 8.1.0.0 PingDataGovernance 8.1.0.0 PAP PingDataSync 8.1.0.0 PingCentral 1.4.0 Improvements \u00b6 Liveness Check We've made improvements to PingDirectory's liveness check to better inform dependant services on the status of the Directory service. Docker Build Pipeline We've published Documentation on how to build a Ping Identity Docker Image using a local zip artifact. We have improved our reference pipeline to allow for the build of a single product. We've made several CI/CD enhancements to improve Image qualification (smoke/integration tests). Configuration Substitution We've made enhancements to explicitly send the variables to be substituted. Resolved Defects \u00b6 (GDO-218) Resolved an issue where PingDirectory threw an error on manage-profile during setup. (GDO-289) Resolved an issue where Alpine based image couldn't install pip3. (GDO-329) Resolved an issue where PingCentral docs were not syncing to GitHub.","title":"Version 2006"},{"location":"release-notes/relnotes-2006/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2006/#devops-docker-builds-version-2006-june-2020","text":"","title":"DevOps Docker Builds, Version 2006 (June 2020)"},{"location":"release-notes/relnotes-2006/#new-features","text":"Docker Compose Volumes Applications that create and manage configuration now have mounted volumes in Docker-Compose Examples , ensuring that your configuration changes are persisted across restarted. PingAccess Image Enhancements We've updated the PingAccess Image to support the new features available in version 6.1. Customer Support Data Collection Included in this release is the Java diagnostic tool to enable embedded customer support data collection. This tool set includes jstat , jmap and jhat .","title":"New Features"},{"location":"release-notes/relnotes-2006/#new-product-versions","text":"The following new product versions are available using edge , latest and 2006 image tags: PingFederate 10.1.0 PingAccess 6.1.0 PingDirectory 8.1.0.0 PingDirectoryProxy 8.1.0.0 PingDataGovernance 8.1.0.0 PingDataGovernance 8.1.0.0 PAP PingDataSync 8.1.0.0 PingCentral 1.4.0","title":"New Product Versions"},{"location":"release-notes/relnotes-2006/#improvements","text":"Liveness Check We've made improvements to PingDirectory's liveness check to better inform dependant services on the status of the Directory service. Docker Build Pipeline We've published Documentation on how to build a Ping Identity Docker Image using a local zip artifact. We have improved our reference pipeline to allow for the build of a single product. We've made several CI/CD enhancements to improve Image qualification (smoke/integration tests). Configuration Substitution We've made enhancements to explicitly send the variables to be substituted.","title":"Improvements"},{"location":"release-notes/relnotes-2006/#resolved-defects","text":"(GDO-218) Resolved an issue where PingDirectory threw an error on manage-profile during setup. (GDO-289) Resolved an issue where Alpine based image couldn't install pip3. (GDO-329) Resolved an issue where PingCentral docs were not syncing to GitHub.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2007/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2007 (July 2020) \u00b6 New Features \u00b6 Signed Docker Images All DockerHub Images are now signed and conform to the Docker Content Trust Specification . Variablize PingAccess Ports We've updated the PingAccess start up hooks to allow users to customize application ports. PingAccess Upgrade Utility The PingAccess upgrade utility is now part of Docker Image. Certificate Management Add consistency and flexibility with the injection of certs/pins. Docker Image Startup Flexibility We've added the ability for end users to customize the startup sequence for Docker Images using pre and post hooks. See our Documentation for implementation details. Improvements \u00b6 Docker Build Pipeline We've made several CI/CD enhancements to improve Image qualification (smoke/integration tests). Resolved Defects \u00b6 (GDO-345) Resolved issue where PingDelegator was using PRIVATE rather than PUBLIC hostnames. (GDO-346) Resolved issue regarding the default minimum heap for PingDirectory. (GDO-380) Resolved issue within PingAccess Clustering (Admin Console) Kubernetes examples. (GDO-371) Resolved issue where PingDelegator wouldn't start using non-privileged user.","title":"Version 2007"},{"location":"release-notes/relnotes-2007/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2007/#devops-docker-builds-version-2007-july-2020","text":"","title":"DevOps Docker Builds, Version 2007 (July 2020)"},{"location":"release-notes/relnotes-2007/#new-features","text":"Signed Docker Images All DockerHub Images are now signed and conform to the Docker Content Trust Specification . Variablize PingAccess Ports We've updated the PingAccess start up hooks to allow users to customize application ports. PingAccess Upgrade Utility The PingAccess upgrade utility is now part of Docker Image. Certificate Management Add consistency and flexibility with the injection of certs/pins. Docker Image Startup Flexibility We've added the ability for end users to customize the startup sequence for Docker Images using pre and post hooks. See our Documentation for implementation details.","title":"New Features"},{"location":"release-notes/relnotes-2007/#improvements","text":"Docker Build Pipeline We've made several CI/CD enhancements to improve Image qualification (smoke/integration tests).","title":"Improvements"},{"location":"release-notes/relnotes-2007/#resolved-defects","text":"(GDO-345) Resolved issue where PingDelegator was using PRIVATE rather than PUBLIC hostnames. (GDO-346) Resolved issue regarding the default minimum heap for PingDirectory. (GDO-380) Resolved issue within PingAccess Clustering (Admin Console) Kubernetes examples. (GDO-371) Resolved issue where PingDelegator wouldn't start using non-privileged user.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2008/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2008 (August 2020) \u00b6 New Features \u00b6 Secret Management A number of key enhancements have been made to natively support secret management within our Docker Images. See Documentation for implementation details. DevOps Development Mode We've added a 'Continue on Failure' option to all Docker Images. This allows the Container to say alive while any potential issues are being investigated. DevOps Program Registration Signing up for the Ping DevOps program is now self-service! Simply follow the instructions found Here . Improvements \u00b6 Ping-DevOps Utility We've added secret management commands to ping-devops, allowing you to quickly integrate secrets into your deployments. Image Restart State A number of enhancements have been made to improve the overall restart flow in our Docker Images. Resolved Defects \u00b6 (GDO-352) Resolved restart issue in PingDataGovernance PAP. (GDO-392) Resolved issue within PingDelegator when DS_PORT variable was undefined. (GDO-395) Resolved issue within PingDirectory restart when Java versions changed. (GDO-397) Resolved issue where PingFederate failed to start in Kubernetes using the full-stack example. (GDO-404) Resolved issue where some users were unable to log into the PingAccess console using the Image edge tag and Baseline server profile.","title":"Version 2008"},{"location":"release-notes/relnotes-2008/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2008/#devops-docker-builds-version-2008-august-2020","text":"","title":"DevOps Docker Builds, Version 2008 (August 2020)"},{"location":"release-notes/relnotes-2008/#new-features","text":"Secret Management A number of key enhancements have been made to natively support secret management within our Docker Images. See Documentation for implementation details. DevOps Development Mode We've added a 'Continue on Failure' option to all Docker Images. This allows the Container to say alive while any potential issues are being investigated. DevOps Program Registration Signing up for the Ping DevOps program is now self-service! Simply follow the instructions found Here .","title":"New Features"},{"location":"release-notes/relnotes-2008/#improvements","text":"Ping-DevOps Utility We've added secret management commands to ping-devops, allowing you to quickly integrate secrets into your deployments. Image Restart State A number of enhancements have been made to improve the overall restart flow in our Docker Images.","title":"Improvements"},{"location":"release-notes/relnotes-2008/#resolved-defects","text":"(GDO-352) Resolved restart issue in PingDataGovernance PAP. (GDO-392) Resolved issue within PingDelegator when DS_PORT variable was undefined. (GDO-395) Resolved issue within PingDirectory restart when Java versions changed. (GDO-397) Resolved issue where PingFederate failed to start in Kubernetes using the full-stack example. (GDO-404) Resolved issue where some users were unable to log into the PingAccess console using the Image edge tag and Baseline server profile.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2009/","text":"Release Notes \u00b6 Devops Docker Builds, Version 2009 (September 2020) \u00b6 New Features \u00b6 PingDataSync Clustering Within PingDataSync 8.2.0.0-EA we've introduced clustering, ensuring your deployment is highly available. Certificate Management Usage We've added documentation for DevOps Certificate Management . PingAccess Release \u00b6 PingAccess 6.1.2 is now available using edge , latest and 2009 image tags Product Betas and Release Candidates \u00b6 Looking to see what the next official product release will contain? Start using the beta and early access builds today. PingFederate 10.2.0-Beta PingAccess 6.2.0-Beta PingDirectory 8.2.0.0-EA PingDirectoryProxy 8.2.0.0-EA PingDataGovernance 8.2.0.0-EA PingDataGovernance 8.2.0.0-EA PAP PingDataSync 8.2.0.0-EA Improvements \u00b6 Image Hardening We've updated our Image hardening Guide to help secure your production deployments.","title":"Version 2009"},{"location":"release-notes/relnotes-2009/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2009/#devops-docker-builds-version-2009-september-2020","text":"","title":"Devops Docker Builds, Version 2009 (September 2020)"},{"location":"release-notes/relnotes-2009/#new-features","text":"PingDataSync Clustering Within PingDataSync 8.2.0.0-EA we've introduced clustering, ensuring your deployment is highly available. Certificate Management Usage We've added documentation for DevOps Certificate Management .","title":"New Features"},{"location":"release-notes/relnotes-2009/#pingaccess-release","text":"PingAccess 6.1.2 is now available using edge , latest and 2009 image tags","title":"PingAccess Release"},{"location":"release-notes/relnotes-2009/#product-betas-and-release-candidates","text":"Looking to see what the next official product release will contain? Start using the beta and early access builds today. PingFederate 10.2.0-Beta PingAccess 6.2.0-Beta PingDirectory 8.2.0.0-EA PingDirectoryProxy 8.2.0.0-EA PingDataGovernance 8.2.0.0-EA PingDataGovernance 8.2.0.0-EA PAP PingDataSync 8.2.0.0-EA","title":"Product Betas and Release Candidates"},{"location":"release-notes/relnotes-2009/#improvements","text":"Image Hardening We've updated our Image hardening Guide to help secure your production deployments.","title":"Improvements"},{"location":"release-notes/relnotes-2010/","text":"Release Notes \u00b6 Devops Docker Builds, Version 2010 (October 2020) \u00b6 New Features \u00b6 PingIdentity Helm Charts Looking to deploy the PingDevOps stack into your Kubernetes cluster? We've published our Helm Charts to help streamline deployment. PingIntelligence (ASE) Docker Image PingIntelligence (ASE) is now available on DockerHub! Pull the 4.3 ASE image Here . PingFederate Bulk API Configuration Management We've added tooling and documentation for managing PingFederate configuration using the build API export and import. View the latest documentation Here . Enhancements \u00b6 PingFederate Version 10.0.6 now available. Image now includes tcp.xml.subst for cluster parameterization. Updated image to support easier enablement/use of Bouncy Castle FIPS provider with PingFederate. PingAccess Version 6.1.3 is now available. LDAP SDK Updated to version 5.1.1 ping-devops CLI Added functionality to generate K8s license and version secret directly from the evaluation license service. Added ACCEPT_EULA value to K8s devops-secret. Resolved Defects \u00b6 (GDO-411) Resolved issue where access token was logged when using private Git repository. (GDO-444) Resolved PingDirectory issue with keystore exception on restart. (GDO-491) Removed GPG from base Docker image. (GDO-495) Removed gosu from base Docker image. (GDO-513) Resolved issue with replication topology list on PingDirectory restart.","title":"Version 2010"},{"location":"release-notes/relnotes-2010/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2010/#devops-docker-builds-version-2010-october-2020","text":"","title":"Devops Docker Builds, Version 2010 (October 2020)"},{"location":"release-notes/relnotes-2010/#new-features","text":"PingIdentity Helm Charts Looking to deploy the PingDevOps stack into your Kubernetes cluster? We've published our Helm Charts to help streamline deployment. PingIntelligence (ASE) Docker Image PingIntelligence (ASE) is now available on DockerHub! Pull the 4.3 ASE image Here . PingFederate Bulk API Configuration Management We've added tooling and documentation for managing PingFederate configuration using the build API export and import. View the latest documentation Here .","title":"New Features"},{"location":"release-notes/relnotes-2010/#enhancements","text":"PingFederate Version 10.0.6 now available. Image now includes tcp.xml.subst for cluster parameterization. Updated image to support easier enablement/use of Bouncy Castle FIPS provider with PingFederate. PingAccess Version 6.1.3 is now available. LDAP SDK Updated to version 5.1.1 ping-devops CLI Added functionality to generate K8s license and version secret directly from the evaluation license service. Added ACCEPT_EULA value to K8s devops-secret.","title":"Enhancements"},{"location":"release-notes/relnotes-2010/#resolved-defects","text":"(GDO-411) Resolved issue where access token was logged when using private Git repository. (GDO-444) Resolved PingDirectory issue with keystore exception on restart. (GDO-491) Removed GPG from base Docker image. (GDO-495) Removed gosu from base Docker image. (GDO-513) Resolved issue with replication topology list on PingDirectory restart.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2011/","text":"Release Notes \u00b6 Devops Docker Builds, Version 2011 (November 2020) \u00b6 New Features \u00b6 Internal XRay Scanning We've automated the process to scan all Sprint Release Docker Images for CVE's Enhancements \u00b6 PingFederate Version 10.1.3 now available. Parameterized run.properties, ldap.properties and tcp.xml now included in Docker Image Helm Charts We added a number of enhancements to our Helm charts. See the Helm Release Notes for details. Misc. Updated EULA check to be case insensitive Add Java back into pingtoolkit Image Updated example docker run commands in Dockerfile documentation Info message when Server Profile URLs are not present Resolved Defects \u00b6 (GDO-549) - Resolved issue where SCIM Swagger test pages don't work in PingDataGovernance Docker Image (GDO-567) - Resolved issue where changes made to PingDirectory's java.properties were erased on container restart (GDO-599) - Change wait-for localhost to use IP address (GDO-604) - Modified simple-sync server profile to work in Kubernetes environment with different service names (GDO-606) - Resolved issue where copy of server bits throws errors when running under non-root security context","title":"Version 2011"},{"location":"release-notes/relnotes-2011/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2011/#devops-docker-builds-version-2011-november-2020","text":"","title":"Devops Docker Builds, Version 2011 (November 2020)"},{"location":"release-notes/relnotes-2011/#new-features","text":"Internal XRay Scanning We've automated the process to scan all Sprint Release Docker Images for CVE's","title":"New Features"},{"location":"release-notes/relnotes-2011/#enhancements","text":"PingFederate Version 10.1.3 now available. Parameterized run.properties, ldap.properties and tcp.xml now included in Docker Image Helm Charts We added a number of enhancements to our Helm charts. See the Helm Release Notes for details. Misc. Updated EULA check to be case insensitive Add Java back into pingtoolkit Image Updated example docker run commands in Dockerfile documentation Info message when Server Profile URLs are not present","title":"Enhancements"},{"location":"release-notes/relnotes-2011/#resolved-defects","text":"(GDO-549) - Resolved issue where SCIM Swagger test pages don't work in PingDataGovernance Docker Image (GDO-567) - Resolved issue where changes made to PingDirectory's java.properties were erased on container restart (GDO-599) - Change wait-for localhost to use IP address (GDO-604) - Modified simple-sync server profile to work in Kubernetes environment with different service names (GDO-606) - Resolved issue where copy of server bits throws errors when running under non-root security context","title":"Resolved Defects"},{"location":"release-notes/relnotes-2012/","text":"Release Notes \u00b6 Devops Docker Builds, Version 2012 (December 2020) \u00b6 New Features \u00b6 DevOps Documentation We've moved from GitBook to MKDocs to provide a richer DevOps documentation experience. Enhancements \u00b6 PingFederate Version 10.2 now available. PingAccess Version 6.2 is now available. PingDirectory Version 8.2.0 is now available. PingDataGovernance Version 8.2.0 is now available. PingDataSync Version 8.2.0 is now available. PingCentral Version 1.6.0 is now available. LDAP SDK Version 5.1.3 is now available. Updated to latest Tomcat version. PingData Console SSO Example We've provided an example of running the Admin Console in Docker with SSO configured. Resolved Defects \u00b6 (GDO-362) Resolved issue where PingDirectory instances become active prior to being fully synchronized. (GDO-502) Resolved potential vulnerability by updating Ping Data products to Spring Framework v4.3.29. (GDO-544) Resolved issue where PingDataGovernance PAP images' MAX_HEAP_SIZE variable had no effect. (GDO-618) Resolved issue where base layer was missing JMX agent. (GDO-640) Resolved issue where wait-for command didn't honor timeout when waiting for host:port. Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.0 6.1.3 6.0.4 PingCentral 1.6.0 1.5.0 PingDataConsole 8.2.0.0 8.1.0.0 8.0.0.1 PingDataGovernance 8.2.0.0 8.1.0.0 8.0.0.1 PingDataGovernance PAP 8.2.0.0 8.1.0.0 8.0.0.1 PingDataSync 8.2.0.0 8.1.0.0 8.0.0.1 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.0 8.1.0.0 8.0.0.1 PingDirectoryProxy 8.2.0.0 8.1.0.0 8.0.0.1 PingFederate 10.2.0 10.1.3 10.1.2 PingIntelligence 4.4 4.3 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2012"},{"location":"release-notes/relnotes-2012/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2012/#devops-docker-builds-version-2012-december-2020","text":"","title":"Devops Docker Builds, Version 2012 (December 2020)"},{"location":"release-notes/relnotes-2012/#new-features","text":"DevOps Documentation We've moved from GitBook to MKDocs to provide a richer DevOps documentation experience.","title":"New Features"},{"location":"release-notes/relnotes-2012/#enhancements","text":"PingFederate Version 10.2 now available. PingAccess Version 6.2 is now available. PingDirectory Version 8.2.0 is now available. PingDataGovernance Version 8.2.0 is now available. PingDataSync Version 8.2.0 is now available. PingCentral Version 1.6.0 is now available. LDAP SDK Version 5.1.3 is now available. Updated to latest Tomcat version. PingData Console SSO Example We've provided an example of running the Admin Console in Docker with SSO configured.","title":"Enhancements"},{"location":"release-notes/relnotes-2012/#resolved-defects","text":"(GDO-362) Resolved issue where PingDirectory instances become active prior to being fully synchronized. (GDO-502) Resolved potential vulnerability by updating Ping Data products to Spring Framework v4.3.29. (GDO-544) Resolved issue where PingDataGovernance PAP images' MAX_HEAP_SIZE variable had no effect. (GDO-618) Resolved issue where base layer was missing JMX agent. (GDO-640) Resolved issue where wait-for command didn't honor timeout when waiting for host:port.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2012/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.0 6.1.3 6.0.4 PingCentral 1.6.0 1.5.0 PingDataConsole 8.2.0.0 8.1.0.0 8.0.0.1 PingDataGovernance 8.2.0.0 8.1.0.0 8.0.0.1 PingDataGovernance PAP 8.2.0.0 8.1.0.0 8.0.0.1 PingDataSync 8.2.0.0 8.1.0.0 8.0.0.1 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.0 8.1.0.0 8.0.0.1 PingDirectoryProxy 8.2.0.0 8.1.0.0 8.0.0.1 PingFederate 10.2.0 10.1.3 10.1.2 PingIntelligence 4.4 4.3 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2101/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2101 (January 2021) \u00b6 Enhancements \u00b6 PingFederate Versions 10.2.1 and 10.1.4 are now available. PingDirectory Versions 8.2.0.1 and 8.1.0.3 are now available. PingDirectory now delays its readiness state until replication has completed (Kubernetes). Improved container restart time by regenerating java.properties only when changes are made to JVM or JVM options. PingDataGovernance Versions 8.2.0.1 and 8.1.0.3 are now available. PingDataSync Versions 8.2.0.1 and 8.1.0.3 are now available. PingDelegator 4.4.1 Version 4.4.1 is now available. LDAP SDK Version 5.1.3 is now available. Container Secrets Sourcing of secret_envs is now recursive. Resolved Defects \u00b6 (GDO-577) - Resolved issue to suppress environment variables in cn=monitor for PingData products. (GDO-658) - Enhanced error messages returned by the evaluation license service. (GDO-659) - Resolved issue where evaluation license server used incorrect calculation for checking image expiration. (GDO-668) - Resolved issue where remnants of previous server profile remained in place when restarting a container. (GDO-674) - Resolved issue where hashing contents of the SECRETS_DIR risked leaving passwords stored insecurely on the container filesystem. Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.0 6.1.3 PingCentral 1.6.0 1.5.0 PingDataConsole 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDataGovernance 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDataGovernance PAP 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDataSync 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDirectoryProxy 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingFederate 10.2.1 10.1.4 10.2.0 10.1.3 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2101"},{"location":"release-notes/relnotes-2101/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2101/#devops-docker-builds-version-2101-january-2021","text":"","title":"DevOps Docker Builds, Version 2101 (January 2021)"},{"location":"release-notes/relnotes-2101/#enhancements","text":"PingFederate Versions 10.2.1 and 10.1.4 are now available. PingDirectory Versions 8.2.0.1 and 8.1.0.3 are now available. PingDirectory now delays its readiness state until replication has completed (Kubernetes). Improved container restart time by regenerating java.properties only when changes are made to JVM or JVM options. PingDataGovernance Versions 8.2.0.1 and 8.1.0.3 are now available. PingDataSync Versions 8.2.0.1 and 8.1.0.3 are now available. PingDelegator 4.4.1 Version 4.4.1 is now available. LDAP SDK Version 5.1.3 is now available. Container Secrets Sourcing of secret_envs is now recursive.","title":"Enhancements"},{"location":"release-notes/relnotes-2101/#resolved-defects","text":"(GDO-577) - Resolved issue to suppress environment variables in cn=monitor for PingData products. (GDO-658) - Enhanced error messages returned by the evaluation license service. (GDO-659) - Resolved issue where evaluation license server used incorrect calculation for checking image expiration. (GDO-668) - Resolved issue where remnants of previous server profile remained in place when restarting a container. (GDO-674) - Resolved issue where hashing contents of the SECRETS_DIR risked leaving passwords stored insecurely on the container filesystem.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2101/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.0 6.1.3 PingCentral 1.6.0 1.5.0 PingDataConsole 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDataGovernance 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDataGovernance PAP 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDataSync 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingDirectoryProxy 8.2.0.1 8.1.0.3 8.2.0.0 8.1.0.0 PingFederate 10.2.1 10.1.4 10.2.0 10.1.3 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2102/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2102 (February 2021) \u00b6 Enhancements \u00b6 PingFederate Support for creation and loading of certificates for admin. Version 10.2.2 is now available. PingAccess Baseline now has clustering support. Version 6.1.4 is now available. PingDirectory Improve speed of replace-profile process during PingDirectory restart. Indexes are automatically rebuilt upon server restart. Version 8.2.0.2 is now available. PingDataGovernance Helm charts have been added for the PingDataGovernance policy editor. Version 8.2.0.2 is now available. PingDataSync Version 8.2.0.2 is now available. Resolved Defects \u00b6 (GDO-382) - Resolved issue where PingDirectory is unable to restart when upgrading 7.3 to 8.1 due to a license error. (GDO-543) - Updated \"Related Docker Images\" documentation in PAP Dockerfile. (GDO-672) - Resolved issue with 'manage-profile setup' signaling a dsconfig error. (GDO-680) - Resolved issue with PingDirectory set_server_available and set_server_unavailable methods being very. (GDO-311) - Updated 05-expand-templates.sh to no longer build data.zip if a data.zip directory is found in the profile. Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.0 6.1.4 6.1.3 PingCentral 1.6.0 1.5.0 PingDataConsole 8.2.0.2 8.1.0.3 8.2.0.1 PingDataGovernance 8.2.0.2 8.1.0.3 8.2.0.1 PingDataGovernance PAP 8.2.0.2 8.1.0.3 8.2.0.1 PingDataSync 8.2.0.2 8.1.0.3 8.2.0.1 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.2 8.1.0.3 8.2.0.1 PingDirectoryProxy 8.2.0.2 8.1.0.3 8.2.0.1 PingFederate 10.2.2 10.1.4 10.2.1 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2102"},{"location":"release-notes/relnotes-2102/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2102/#devops-docker-builds-version-2102-february-2021","text":"","title":"DevOps Docker Builds, Version 2102 (February 2021)"},{"location":"release-notes/relnotes-2102/#enhancements","text":"PingFederate Support for creation and loading of certificates for admin. Version 10.2.2 is now available. PingAccess Baseline now has clustering support. Version 6.1.4 is now available. PingDirectory Improve speed of replace-profile process during PingDirectory restart. Indexes are automatically rebuilt upon server restart. Version 8.2.0.2 is now available. PingDataGovernance Helm charts have been added for the PingDataGovernance policy editor. Version 8.2.0.2 is now available. PingDataSync Version 8.2.0.2 is now available.","title":"Enhancements"},{"location":"release-notes/relnotes-2102/#resolved-defects","text":"(GDO-382) - Resolved issue where PingDirectory is unable to restart when upgrading 7.3 to 8.1 due to a license error. (GDO-543) - Updated \"Related Docker Images\" documentation in PAP Dockerfile. (GDO-672) - Resolved issue with 'manage-profile setup' signaling a dsconfig error. (GDO-680) - Resolved issue with PingDirectory set_server_available and set_server_unavailable methods being very. (GDO-311) - Updated 05-expand-templates.sh to no longer build data.zip if a data.zip directory is found in the profile.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2102/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.0 6.1.4 6.1.3 PingCentral 1.6.0 1.5.0 PingDataConsole 8.2.0.2 8.1.0.3 8.2.0.1 PingDataGovernance 8.2.0.2 8.1.0.3 8.2.0.1 PingDataGovernance PAP 8.2.0.2 8.1.0.3 8.2.0.1 PingDataSync 8.2.0.2 8.1.0.3 8.2.0.1 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.2 8.1.0.3 8.2.0.1 PingDirectoryProxy 8.2.0.2 8.1.0.3 8.2.0.1 PingFederate 10.2.2 10.1.4 10.2.1 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2103/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2103 (March 2021) \u00b6 New Features \u00b6 Images run as non-privileged user by default Critical: We've greatly improved the security of our images by having them run as a non-privileged user by default. See Migrating to Unprivileged Images for information about migrating existing deployments. Layer simplification We've consolidated layers in our images where possible. Enhancements \u00b6 PingFederate The baseline image now uses data.json instead of the former use of the /data folder. New variables have been added to run.properties for controlling provisioning failover and grace period. Versions 10.1.5 and 10.3-Beta are now available. PingAccess Versions 6.2.1 and 6.3-Beta are now available. PingCentral Versions 1.7.0 is now available. PingDirectory The number of layers present in the image has been reduced and simplified. Version 8.2.0.3 is now available. PingDataGovernance Version 8.2.0.3 is now available. PingDataSync Version 8.2.0.3 is now available. Resolved Defects \u00b6 (GDO-742) - Resolved issue which may cause permissions errors creating files under /run/secrets during PingDirectory setup (GDO-746) - Resolved issue in which PingDirectory cannot rejoin its replication topology after restart (GDO-749) - Addressed documentation issue in which bulleted lists are not printed correctly Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.1 6.1.4 6.2.0 PingCentral 1.7.0 1.6.0 1.5.0 PingDataConsole 8.2.0.3 8.1.0.3 8.2.0.2 PingDataGovernance 8.2.0.3 8.1.0.3 8.2.0.2 PingDataGovernance PAP 8.2.0.3 8.1.0.3 8.2.0.2 PingDataSync 8.2.0.3 8.1.0.3 8.2.0.2 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.3 8.1.0.3 8.2.0.2 PingDirectoryProxy 8.2.0.3 8.1.0.3 8.2.0.2 PingFederate 10.2.2 10.1.5 10.1.4 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2103"},{"location":"release-notes/relnotes-2103/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2103/#devops-docker-builds-version-2103-march-2021","text":"","title":"DevOps Docker Builds, Version 2103 (March 2021)"},{"location":"release-notes/relnotes-2103/#new-features","text":"Images run as non-privileged user by default Critical: We've greatly improved the security of our images by having them run as a non-privileged user by default. See Migrating to Unprivileged Images for information about migrating existing deployments. Layer simplification We've consolidated layers in our images where possible.","title":"New Features"},{"location":"release-notes/relnotes-2103/#enhancements","text":"PingFederate The baseline image now uses data.json instead of the former use of the /data folder. New variables have been added to run.properties for controlling provisioning failover and grace period. Versions 10.1.5 and 10.3-Beta are now available. PingAccess Versions 6.2.1 and 6.3-Beta are now available. PingCentral Versions 1.7.0 is now available. PingDirectory The number of layers present in the image has been reduced and simplified. Version 8.2.0.3 is now available. PingDataGovernance Version 8.2.0.3 is now available. PingDataSync Version 8.2.0.3 is now available.","title":"Enhancements"},{"location":"release-notes/relnotes-2103/#resolved-defects","text":"(GDO-742) - Resolved issue which may cause permissions errors creating files under /run/secrets during PingDirectory setup (GDO-746) - Resolved issue in which PingDirectory cannot rejoin its replication topology after restart (GDO-749) - Addressed documentation issue in which bulleted lists are not printed correctly","title":"Resolved Defects"},{"location":"release-notes/relnotes-2103/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.1 6.1.4 6.2.0 PingCentral 1.7.0 1.6.0 1.5.0 PingDataConsole 8.2.0.3 8.1.0.3 8.2.0.2 PingDataGovernance 8.2.0.3 8.1.0.3 8.2.0.2 PingDataGovernance PAP 8.2.0.3 8.1.0.3 8.2.0.2 PingDataSync 8.2.0.3 8.1.0.3 8.2.0.2 PingDelegator 4.4.0 4.2.1 PingDirectory 8.2.0.3 8.1.0.3 8.2.0.2 PingDirectoryProxy 8.2.0.3 8.1.0.3 8.2.0.2 PingFederate 10.2.2 10.1.5 10.1.4 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2104/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2104 (April 2021) \u00b6 New Features \u00b6 Early Access and Beta Release Docker Images PingAccess 6.3.0-Beta PingAuthorize 8.3.0.0-EA PingAuthorize PAP 8.3.0.0-EA PingDataConsole 8.3.0.0-EA PingDataSync 8.3.0.0-EA PingDirectory 8.3.0.0-EA PingDirectoryProxy 8.3.0.0-EA PingFederate 10.3.0-Beta Enhancements \u00b6 watch-fs-changes We've updated the watch-fs-changes utility to accept command-line parameters to watch additional locations Startup Time Performance We've updated the start-server.sh script to improve container start up times for all PingData products. Helm Charts for PingDirectoryProxy PingDirectoryProxy has been integrated into Ping's Helm Charts Resolved Defects \u00b6 (GDO-649) - Resolved issue where the provided self-signed certificates for PingDataConsole didn't function in Chrome on MacOS (GDO-770) - Resolved issue where PingDataConsole didn't log console messages by default (GDO-773) - Resolved issue where the collect-support-data tool couldn't find the required JDK Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.1 6.1.4 PingCentral 1.7.0 1.6.0 PingDataConsole 8.2.0.3 8.1.0.3 PingDataGovernance 8.2.0.3 8.1.0.3 PingDataGovernance PAP 8.2.0.3 8.1.0.3 PingDataSync 8.2.0.3 8.1.0.3 PingDelegator 4.4.0 PingDirectory 8.2.0.3 8.1.0.3 PingDirectoryProxy 8.2.0.3 8.1.0.3 PingFederate 10.2.2 10.1.5 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2104"},{"location":"release-notes/relnotes-2104/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2104/#devops-docker-builds-version-2104-april-2021","text":"","title":"DevOps Docker Builds, Version 2104 (April 2021)"},{"location":"release-notes/relnotes-2104/#new-features","text":"Early Access and Beta Release Docker Images PingAccess 6.3.0-Beta PingAuthorize 8.3.0.0-EA PingAuthorize PAP 8.3.0.0-EA PingDataConsole 8.3.0.0-EA PingDataSync 8.3.0.0-EA PingDirectory 8.3.0.0-EA PingDirectoryProxy 8.3.0.0-EA PingFederate 10.3.0-Beta","title":"New Features"},{"location":"release-notes/relnotes-2104/#enhancements","text":"watch-fs-changes We've updated the watch-fs-changes utility to accept command-line parameters to watch additional locations Startup Time Performance We've updated the start-server.sh script to improve container start up times for all PingData products. Helm Charts for PingDirectoryProxy PingDirectoryProxy has been integrated into Ping's Helm Charts","title":"Enhancements"},{"location":"release-notes/relnotes-2104/#resolved-defects","text":"(GDO-649) - Resolved issue where the provided self-signed certificates for PingDataConsole didn't function in Chrome on MacOS (GDO-770) - Resolved issue where PingDataConsole didn't log console messages by default (GDO-773) - Resolved issue where the collect-support-data tool couldn't find the required JDK","title":"Resolved Defects"},{"location":"release-notes/relnotes-2104/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.2.1 6.1.4 PingCentral 1.7.0 1.6.0 PingDataConsole 8.2.0.3 8.1.0.3 PingDataGovernance 8.2.0.3 8.1.0.3 PingDataGovernance PAP 8.2.0.3 8.1.0.3 PingDataSync 8.2.0.3 8.1.0.3 PingDelegator 4.4.0 PingDirectory 8.2.0.3 8.1.0.3 PingDirectoryProxy 8.2.0.3 8.1.0.3 PingFederate 10.2.2 10.1.5 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2105/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2105 (June 3 2021) \u00b6 New Features \u00b6 PingFederate PingFederate 10.2.3 is now available on Dockerhub PingDelegator PingDelegator 4.5.0 is now available on Dockerhub Resolved Defects \u00b6 (GDO-813) - Resolved issue where OAuth APIS were broken using baseline server profile and pingfederate:edge (GDO-818) - Resolved issue where users were unable to build images locally due to a file permission error (GDO-829) - Resolved issue where a dsconfig command was unable to run due to a quoting error Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.0-Beta 6.2.1 6.1.4 PingCentral 1.7.0 1.6.0 PingDataConsole 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDataGovernance 8.2.0.3 8.1.0.3 PingDataGovernance PAP 8.2.0.3 8.1.0.3 PingDataSync 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDelegator 4.5.0 4.4.1 4.2.1 PingDirectory 8.3.0.0-EA 8.2.0.4 8.2.0.3 8.1.0.3 PingDirectoryProxy 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingFederate 10.3.0-Beta 10.2.3 10.1.5 10.2.2 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2105"},{"location":"release-notes/relnotes-2105/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2105/#devops-docker-builds-version-2105-june-3-2021","text":"","title":"DevOps Docker Builds, Version 2105 (June 3 2021)"},{"location":"release-notes/relnotes-2105/#new-features","text":"PingFederate PingFederate 10.2.3 is now available on Dockerhub PingDelegator PingDelegator 4.5.0 is now available on Dockerhub","title":"New Features"},{"location":"release-notes/relnotes-2105/#resolved-defects","text":"(GDO-813) - Resolved issue where OAuth APIS were broken using baseline server profile and pingfederate:edge (GDO-818) - Resolved issue where users were unable to build images locally due to a file permission error (GDO-829) - Resolved issue where a dsconfig command was unable to run due to a quoting error","title":"Resolved Defects"},{"location":"release-notes/relnotes-2105/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.0-Beta 6.2.1 6.1.4 PingCentral 1.7.0 1.6.0 PingDataConsole 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDataGovernance 8.2.0.3 8.1.0.3 PingDataGovernance PAP 8.2.0.3 8.1.0.3 PingDataSync 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDelegator 4.5.0 4.4.1 4.2.1 PingDirectory 8.3.0.0-EA 8.2.0.4 8.2.0.3 8.1.0.3 PingDirectoryProxy 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingFederate 10.3.0-Beta 10.2.3 10.1.5 10.2.2 PingIntelligence 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2106/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2106 (July 6 2021) \u00b6 New Features \u00b6 ARM-Based Images Ping Identity now offers ARM-based Docker images! These images are currently experimental and are not intended for production deployment View the available tags on Dockerhub PingFederate PingFederate 10.3.0 and 10.2.4 are now available on Dockerhub PingAccess PingAccess 6.3.0 is now available on Dockerhub PingDirectory PingDirectory 8.3.0 and 8.2.0.5 are now available on Dockerhub PingAuthorize PingAuthorize 8.3.0 is now available on Dockerhub PingCentral PingCentral 1.8 is now available on Dockerhub PingDelegator PingDelegator 4.6.0 is now available on Dockerhub PingIntelligence (ASE) PingIntelligence 5.0 is now available on Dockerhub LDAP SDK LDAP SDK 6.0.0 is now available on Dockerhub Enhancements \u00b6 PingFederate Allow logging level to be set via an environment variable (PF_LOG_LEVEL) Added property pf.admin.baseurl to run.properties configuration file Added ability to generate the run.properties and jvm-memory.options files based on supplied environment variables HEAP Awareness All Ping Identity Docker images can now calculate the heap based on the memory allocated to the container Java Tools Added jcmd, jstat, jinfo, jmap, jps, jstack tools to images Docker-Compose Added tmpfs secrets directory to all of the docker-compose examples in the Getting-Started repository Resolved Defects \u00b6 (GDO-657) - Resolved PingDelegator self-signed certificate issue (GDO-834) - Resolved issue where PingDataConsole doesn't build correctly when providing a local product.zip file (GDO-836) - Resolved issue where PingDirectory restart failed due to startup hook syntax error (GDO-885) - Resolved HTTPS/LDAPS port variables in PingAuthorize profiles to support Helm charts Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.0 6.2.1 6.3.0-Beta 6.1.4 PingAuthorize 8.3.0.0 PingAuthorize PAP 8.3.0.0 PingCentral 1.8.0 1.7.0 1.6.0 PingDataConsole 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDataGovernance 8.2.0.5 8.2.0.3 8.1.0.3 PingDataGovernance PAP 8.2.0.5 8.2.0.3 8.1.0.3 PingDataSync 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDelegator 4.6.0 4.4.1 4.5.0 4.4.1 4.2.1 PingDirectory 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDirectoryProxy 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingFederate 10.3.0 10.2.4 10.3.0-Beta 10.2.3 10.1.5 PingIntelligence 5.0 4.4.1 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2106"},{"location":"release-notes/relnotes-2106/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2106/#devops-docker-builds-version-2106-july-6-2021","text":"","title":"DevOps Docker Builds, Version 2106 (July 6 2021)"},{"location":"release-notes/relnotes-2106/#new-features","text":"ARM-Based Images Ping Identity now offers ARM-based Docker images! These images are currently experimental and are not intended for production deployment View the available tags on Dockerhub PingFederate PingFederate 10.3.0 and 10.2.4 are now available on Dockerhub PingAccess PingAccess 6.3.0 is now available on Dockerhub PingDirectory PingDirectory 8.3.0 and 8.2.0.5 are now available on Dockerhub PingAuthorize PingAuthorize 8.3.0 is now available on Dockerhub PingCentral PingCentral 1.8 is now available on Dockerhub PingDelegator PingDelegator 4.6.0 is now available on Dockerhub PingIntelligence (ASE) PingIntelligence 5.0 is now available on Dockerhub LDAP SDK LDAP SDK 6.0.0 is now available on Dockerhub","title":"New Features"},{"location":"release-notes/relnotes-2106/#enhancements","text":"PingFederate Allow logging level to be set via an environment variable (PF_LOG_LEVEL) Added property pf.admin.baseurl to run.properties configuration file Added ability to generate the run.properties and jvm-memory.options files based on supplied environment variables HEAP Awareness All Ping Identity Docker images can now calculate the heap based on the memory allocated to the container Java Tools Added jcmd, jstat, jinfo, jmap, jps, jstack tools to images Docker-Compose Added tmpfs secrets directory to all of the docker-compose examples in the Getting-Started repository","title":"Enhancements"},{"location":"release-notes/relnotes-2106/#resolved-defects","text":"(GDO-657) - Resolved PingDelegator self-signed certificate issue (GDO-834) - Resolved issue where PingDataConsole doesn't build correctly when providing a local product.zip file (GDO-836) - Resolved issue where PingDirectory restart failed due to startup hook syntax error (GDO-885) - Resolved HTTPS/LDAPS port variables in PingAuthorize profiles to support Helm charts","title":"Resolved Defects"},{"location":"release-notes/relnotes-2106/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.0 6.2.1 6.3.0-Beta 6.1.4 PingAuthorize 8.3.0.0 PingAuthorize PAP 8.3.0.0 PingCentral 1.8.0 1.7.0 1.6.0 PingDataConsole 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDataGovernance 8.2.0.5 8.2.0.3 8.1.0.3 PingDataGovernance PAP 8.2.0.5 8.2.0.3 8.1.0.3 PingDataSync 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDelegator 4.6.0 4.4.1 4.5.0 4.4.1 4.2.1 PingDirectory 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingDirectoryProxy 8.3.0.0 8.2.0.5 8.3.0.0-EA 8.2.0.3 8.1.0.3 PingFederate 10.3.0 10.2.4 10.3.0-Beta 10.2.3 10.1.5 PingIntelligence 5.0 4.4.1 4.4 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2107/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2107 (August 4 2021) \u00b6 New Features \u00b6 PingFederate Added support for pf.admin.baseurl within baseline Server Profile PingAccess PingAccess 6.2.2 is now available on Dockerhub PingDirectory PingDirectory 8.3.0.1 is now available on Dockerhub PingDirectoryProxy PingDirectoryProxy 8.3.0.1 is now available on Dockerhub PingDataSync PingDirectory 8.3.0.1 is now available on Dockerhub PingAuthorize PingAuthorize 8.3.0.1 is now available on Dockerhub Enhancements \u00b6 PingDelegator Baseline now works on both local and Kubernetes environments Helm Charts Release 0.6.8 - Probes & Ingress Resolved Defects \u00b6 (GDO-860) - Resolved issue where the PingAuthorize Policy Editor auto-generated documentation uses wrong ports (GDO-907) - Restored functionality for prepending the name of the log file to each log line (GDO-887) - All Docker images are now signed Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.0 6.2.2 6.2.1 PingAuthorize 8.3.0.1 8.3.0.0 PingAuthorize PAP 8.3.0.1 8.3.0.0 PingCentral 1.8.0 1.7.0 PingDataConsole 8.3.0.1 8.2.0.5 8.3.0.0 PingDataGovernance 8.2.0.5 PingDataGovernance PAP 8.2.0.5 PingDataSync 8.3.0.1 8.2.0.5 8.3.0.0 PingDelegator 4.6.0 4.4.1 PingDirectory 8.3.0.1 8.2.0.5 8.3.0.0 PingDirectoryProxy 8.3.0.1 8.2.0.5 8.3.0.0 PingFederate 10.3.0 10.2.4 PingIntelligence 5.0 4.4.1 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2107"},{"location":"release-notes/relnotes-2107/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2107/#devops-docker-builds-version-2107-august-4-2021","text":"","title":"DevOps Docker Builds, Version 2107 (August 4 2021)"},{"location":"release-notes/relnotes-2107/#new-features","text":"PingFederate Added support for pf.admin.baseurl within baseline Server Profile PingAccess PingAccess 6.2.2 is now available on Dockerhub PingDirectory PingDirectory 8.3.0.1 is now available on Dockerhub PingDirectoryProxy PingDirectoryProxy 8.3.0.1 is now available on Dockerhub PingDataSync PingDirectory 8.3.0.1 is now available on Dockerhub PingAuthorize PingAuthorize 8.3.0.1 is now available on Dockerhub","title":"New Features"},{"location":"release-notes/relnotes-2107/#enhancements","text":"PingDelegator Baseline now works on both local and Kubernetes environments Helm Charts Release 0.6.8 - Probes & Ingress","title":"Enhancements"},{"location":"release-notes/relnotes-2107/#resolved-defects","text":"(GDO-860) - Resolved issue where the PingAuthorize Policy Editor auto-generated documentation uses wrong ports (GDO-907) - Restored functionality for prepending the name of the log file to each log line (GDO-887) - All Docker images are now signed","title":"Resolved Defects"},{"location":"release-notes/relnotes-2107/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.0 6.2.2 6.2.1 PingAuthorize 8.3.0.1 8.3.0.0 PingAuthorize PAP 8.3.0.1 8.3.0.0 PingCentral 1.8.0 1.7.0 PingDataConsole 8.3.0.1 8.2.0.5 8.3.0.0 PingDataGovernance 8.2.0.5 PingDataGovernance PAP 8.2.0.5 PingDataSync 8.3.0.1 8.2.0.5 8.3.0.0 PingDelegator 4.6.0 4.4.1 PingDirectory 8.3.0.1 8.2.0.5 8.3.0.0 PingDirectoryProxy 8.3.0.1 8.2.0.5 8.3.0.0 PingFederate 10.3.0 10.2.4 PingIntelligence 5.0 4.4.1 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2108/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2108 (August 27 2021) \u00b6 New Features \u00b6 PingFederate PingFederate 10.3.1 and 10.2.5 are now available on Dockerhub PingAccess PingAccess 6.3.1 is now available on Dockerhub Enhancements \u00b6 Documentation Our DevOps documentation now supports both light and dark modes. Toggle between the two by clicking the icon in the top navigation bar. Docker Images Upgraded the Image OS from Alpine 3.13 to 3.14 Helm Charts View the detailed release notes for Ping's Helm Charts here Release 0.7.0 - ServiceAccount/Role/RoleBinding for testFramework Release 0.7.1 - Public hostname/ports Release 0.7.2 - PingFederate PF_ADMIN_PUBLIC_BASEURL variable Release 0.7.3 - Support full definition of initContainers attributes in testSteps and finalStep Release 0.7.4 - Set initContainer settings from values.yaml instead of hard coded templates Resolved Defects \u00b6 (GDO-945) - Resolved issue where PingCentral was unable to communicate with PingAccess in the docker-compose full-stack example . (GDO-872) - Resolved issue in tooling when building images locally ( serial_build.sh ). Product Build Matrix \u00b6 The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.1 6.2.2 6.3.0 PingAuthorize 8.3.0.1 PingAuthorize PAP 8.3.0.1 PingCentral 1.8.0 1.7.0 PingDataConsole 8.3.0.1 8.2.0.5 PingDataGovernance 8.2.0.5 PingDataGovernance PAP 8.2.0.5 PingDataSync 8.3.0.1 8.2.0.5 PingDelegator 4.6.0 4.4.1 PingDirectory 8.3.0.1 8.2.0.5 PingDirectoryProxy 8.3.0.1 8.2.0.5 PingFederate 10.3.1 10.2.5 10.3.0 10.2.4 PingIntelligence 5.0 4.4.1 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Version 2108"},{"location":"release-notes/relnotes-2108/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2108/#devops-docker-builds-version-2108-august-27-2021","text":"","title":"DevOps Docker Builds, Version 2108 (August 27 2021)"},{"location":"release-notes/relnotes-2108/#new-features","text":"PingFederate PingFederate 10.3.1 and 10.2.5 are now available on Dockerhub PingAccess PingAccess 6.3.1 is now available on Dockerhub","title":"New Features"},{"location":"release-notes/relnotes-2108/#enhancements","text":"Documentation Our DevOps documentation now supports both light and dark modes. Toggle between the two by clicking the icon in the top navigation bar. Docker Images Upgraded the Image OS from Alpine 3.13 to 3.14 Helm Charts View the detailed release notes for Ping's Helm Charts here Release 0.7.0 - ServiceAccount/Role/RoleBinding for testFramework Release 0.7.1 - Public hostname/ports Release 0.7.2 - PingFederate PF_ADMIN_PUBLIC_BASEURL variable Release 0.7.3 - Support full definition of initContainers attributes in testSteps and finalStep Release 0.7.4 - Set initContainer settings from values.yaml instead of hard coded templates","title":"Enhancements"},{"location":"release-notes/relnotes-2108/#resolved-defects","text":"(GDO-945) - Resolved issue where PingCentral was unable to communicate with PingAccess in the docker-compose full-stack example . (GDO-872) - Resolved issue in tooling when building images locally ( serial_build.sh ).","title":"Resolved Defects"},{"location":"release-notes/relnotes-2108/#product-build-matrix","text":"The following table includes product versions and their accompanying Image build status for this release. Product Active Build Build EOL PingAccess 6.3.1 6.2.2 6.3.0 PingAuthorize 8.3.0.1 PingAuthorize PAP 8.3.0.1 PingCentral 1.8.0 1.7.0 PingDataConsole 8.3.0.1 8.2.0.5 PingDataGovernance 8.2.0.5 PingDataGovernance PAP 8.2.0.5 PingDataSync 8.3.0.1 8.2.0.5 PingDelegator 4.6.0 4.4.1 PingDirectory 8.3.0.1 8.2.0.5 PingDirectoryProxy 8.3.0.1 8.2.0.5 PingFederate 10.3.1 10.2.5 10.3.0 10.2.4 PingIntelligence 5.0 4.4.1 Build Matrix Info Bolded product version number is version within 'latest' image tag. Build EOL denotes product versions that are no longer built as of this release.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2109/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2109 (October 06 2021) \u00b6 Notice PingFederate deployments prior to sprint release 2108 (Aug 27th, 2021) may be at risk. Please visit here for details on impacted and patched versions. New Features \u00b6 PingFederate PingFederate 10.3.2 and 11.0 Beta are now available on Dockerhub PingAccess PingAccess 6.3.1 and 7.0 Beta are now available on Dockerhub PingDirectory PingDirectory 8.3.0.2, 8.2.0.6, and 9.0 EA are now available on Dockerhub PingAuthorize PingAuthorize 8.3.0.2, 8.2.0.6, and 9.0 EA are now available on Dockerhub PingIntelligence PingIntelligence 5.0.1 is now available on Dockerhub Enhancements \u00b6 Documentation Improved Introduction to Image/Container anatomy Docker Images JDK Liberica 11.0.12+7 is now supported Images now include a startup probe script /opt/startup.sh Helm Charts View the detailed release notes for Ping's Helm Charts here Release 0.7.6 - Support for scheduler name on pods Kubernetes PingDirectory now waits for its pod DNS hostname to match expected K8 pod IP Resolved Defects \u00b6 (GDO-896) - Resolved issue where PingDirectory failed to pick up the product license during deployment (GDO-989) - Resolved issue in which PingDirectory seed failure in multi-region topology causes a replication island Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.3.1, 10.2.4 PingAccess 6.3.0 PingDirectory and and PingAuthorize 8.3.0.1, 8.2.0.5 PingIntelligence 5.0.0","title":"Version 2109"},{"location":"release-notes/relnotes-2109/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2109/#devops-docker-builds-version-2109-october-06-2021","text":"Notice PingFederate deployments prior to sprint release 2108 (Aug 27th, 2021) may be at risk. Please visit here for details on impacted and patched versions.","title":"DevOps Docker Builds, Version 2109 (October 06 2021)"},{"location":"release-notes/relnotes-2109/#new-features","text":"PingFederate PingFederate 10.3.2 and 11.0 Beta are now available on Dockerhub PingAccess PingAccess 6.3.1 and 7.0 Beta are now available on Dockerhub PingDirectory PingDirectory 8.3.0.2, 8.2.0.6, and 9.0 EA are now available on Dockerhub PingAuthorize PingAuthorize 8.3.0.2, 8.2.0.6, and 9.0 EA are now available on Dockerhub PingIntelligence PingIntelligence 5.0.1 is now available on Dockerhub","title":"New Features"},{"location":"release-notes/relnotes-2109/#enhancements","text":"Documentation Improved Introduction to Image/Container anatomy Docker Images JDK Liberica 11.0.12+7 is now supported Images now include a startup probe script /opt/startup.sh Helm Charts View the detailed release notes for Ping's Helm Charts here Release 0.7.6 - Support for scheduler name on pods Kubernetes PingDirectory now waits for its pod DNS hostname to match expected K8 pod IP","title":"Enhancements"},{"location":"release-notes/relnotes-2109/#resolved-defects","text":"(GDO-896) - Resolved issue where PingDirectory failed to pick up the product license during deployment (GDO-989) - Resolved issue in which PingDirectory seed failure in multi-region topology causes a replication island","title":"Resolved Defects"},{"location":"release-notes/relnotes-2109/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.3.1, 10.2.4 PingAccess 6.3.0 PingDirectory and and PingAuthorize 8.3.0.1, 8.2.0.5 PingIntelligence 5.0.0","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2110/","text":"Release Notes \u00b6 DevOps Docker Builds, Version 2110 (November 01 2021) \u00b6 New Features \u00b6 PingFederate PingFederate 10.3.3 and 10.2.7 are now available on Dockerhub . PingDirectory PingDirectory 8.3.0.3 is now available on Dockerhub . PingAuthorize PingAuthorize 8.3.0.3 is now available on Dockerhub . PingCentral PingCentral 1.9 is now available on Dockerhub . UnboundID LDAP SDK UnboundID LDAP SDK tool set 6.0.2 is now available on Dockerhub . Enhancements \u00b6 Documentation Improved documenation around certificate rotation for PingDirectory. Update DevOps support policy statement. Docker Images Images that include Apache Tomcat have been updated to 9.0.54. Startup time for PingDirectory has been improved. PF_LDAP_USERNAME and PF_LDAP_PASSWORD variables are now required with PingFederate to promote best security practices. Helm Charts View the detailed release notes for Ping's Helm Charts here Release 0.7.7 - Update default security context group id to root. Release 0.7.8 - Server profile updates, generate master password for Ping services. Resolved Defects \u00b6 (BRASS-72) - Resolved issue in which numbers were not rendered correctly in some cases in public docs. (BRASS-71) - Resolved issue in which PingDirectory seed name is not rendered correctly. Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.3.2, 10.2.6 PingDirectory and and PingAuthorize 8.3.0.2 PingCentral 1.7","title":"Version 2110"},{"location":"release-notes/relnotes-2110/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/relnotes-2110/#devops-docker-builds-version-2110-november-01-2021","text":"","title":"DevOps Docker Builds, Version 2110 (November 01 2021)"},{"location":"release-notes/relnotes-2110/#new-features","text":"PingFederate PingFederate 10.3.3 and 10.2.7 are now available on Dockerhub . PingDirectory PingDirectory 8.3.0.3 is now available on Dockerhub . PingAuthorize PingAuthorize 8.3.0.3 is now available on Dockerhub . PingCentral PingCentral 1.9 is now available on Dockerhub . UnboundID LDAP SDK UnboundID LDAP SDK tool set 6.0.2 is now available on Dockerhub .","title":"New Features"},{"location":"release-notes/relnotes-2110/#enhancements","text":"Documentation Improved documenation around certificate rotation for PingDirectory. Update DevOps support policy statement. Docker Images Images that include Apache Tomcat have been updated to 9.0.54. Startup time for PingDirectory has been improved. PF_LDAP_USERNAME and PF_LDAP_PASSWORD variables are now required with PingFederate to promote best security practices. Helm Charts View the detailed release notes for Ping's Helm Charts here Release 0.7.7 - Update default security context group id to root. Release 0.7.8 - Server profile updates, generate master password for Ping services.","title":"Enhancements"},{"location":"release-notes/relnotes-2110/#resolved-defects","text":"(BRASS-72) - Resolved issue in which numbers were not rendered correctly in some cases in public docs. (BRASS-71) - Resolved issue in which PingDirectory seed name is not rendered correctly.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2110/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.3.2, 10.2.6 PingDirectory and and PingAuthorize 8.3.0.2 PingCentral 1.7","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2111-1/","text":"Version 2111.1 Release Notes \u00b6 DevOps Docker Builds, Version 2111.1 (December 16 2021) \u00b6 New Product Releases \u00b6 PingAccess PingAccess 7.0.1 is now available on Dockerhub . PingCentral PingCentral 1.8.1 is available on Dockerhub . PingFederate PingFederate 11.0.0 is available on Dockerhub . Enhancements \u00b6 Docker Images Applied the log4j2 patch updated zip files to PingAccess and PingFederate per recommendation of the Ping Identity CVE knowledge article . The applied patches are available on the Ping Identity CVE knowledge article. All images tagged with the sprint 2111.1 do not contain the Log4j2 vulnerability CVE-2021-44228. Purged all DockerHub images vulnerable to the Log4j2 vulnerability CVE-2021-44228. This is to ensure all PingIdentity images published do not have the Log4j2 vulnerabilities. Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 11.0.0-Beta PingAccess 7.0.0-Beta","title":"Version 2111.1"},{"location":"release-notes/relnotes-2111-1/#version-21111-release-notes","text":"","title":"Version 2111.1 Release Notes"},{"location":"release-notes/relnotes-2111-1/#devops-docker-builds-version-21111-december-16-2021","text":"","title":"DevOps Docker Builds, Version 2111.1 (December 16 2021)"},{"location":"release-notes/relnotes-2111-1/#new-product-releases","text":"PingAccess PingAccess 7.0.1 is now available on Dockerhub . PingCentral PingCentral 1.8.1 is available on Dockerhub . PingFederate PingFederate 11.0.0 is available on Dockerhub .","title":"New Product Releases"},{"location":"release-notes/relnotes-2111-1/#enhancements","text":"Docker Images Applied the log4j2 patch updated zip files to PingAccess and PingFederate per recommendation of the Ping Identity CVE knowledge article . The applied patches are available on the Ping Identity CVE knowledge article. All images tagged with the sprint 2111.1 do not contain the Log4j2 vulnerability CVE-2021-44228. Purged all DockerHub images vulnerable to the Log4j2 vulnerability CVE-2021-44228. This is to ensure all PingIdentity images published do not have the Log4j2 vulnerabilities.","title":"Enhancements"},{"location":"release-notes/relnotes-2111-1/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 11.0.0-Beta PingAccess 7.0.0-Beta","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2111/","text":"Version 2111 Release Notes \u00b6 DevOps Docker Builds, Version 2111 (December 06 2021) \u00b6 New Product Releases \u00b6 PingFederate PingFederate 10.3.4 is available on Dockerhub . PingAccess PingAccess 6.3.2 is now available on Dockerhub . Enhancements \u00b6 Tools The pingctl tool is now POSIX compliant in preparation for the pingdevops tool's deprecation. Docker Images PingDirectory, PingDirectoryProxy, and PingDataSync will now start without a server profile. Update JDK to 11.0.13+8. Azul JVM has been deprecated in Favor of Liberica JVM. PingData images are now killed with a TERM signal. Update Apache Tomcat to Version 9.0.55. Update Alpine to 3.15 and UBI8 to 8.5. PingFederate PF_LDAP_USERNAME and PF_LDAP_PASSWORD variables are no longer required by default. Helm Charts View the detailed release notes for Ping's Helm Charts here . Release 0.7.9 Support for HPA Scaling Behavior Support for shareProcessNamespace in pod spec Helm test image pull policy no longer hard-coded in helm-charts/charts/ping-devops/templates/pinglib/_tests/tpl Cluster service for pingaccess-admin Resolved Defects \u00b6 (BRASS-80) - 07-apply-server-profile hook now handles PingDirectory restart correctly. (BRASS-172) - Default values have been added for PF_LDAP_USERNAME and PF_LDAP_PASSWORD to work around startup errors for PingFederate images. Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.3.3 PingAccess 6.3.1","title":"Version 2111"},{"location":"release-notes/relnotes-2111/#version-2111-release-notes","text":"","title":"Version 2111 Release Notes"},{"location":"release-notes/relnotes-2111/#devops-docker-builds-version-2111-december-06-2021","text":"","title":"DevOps Docker Builds, Version 2111 (December 06 2021)"},{"location":"release-notes/relnotes-2111/#new-product-releases","text":"PingFederate PingFederate 10.3.4 is available on Dockerhub . PingAccess PingAccess 6.3.2 is now available on Dockerhub .","title":"New Product Releases"},{"location":"release-notes/relnotes-2111/#enhancements","text":"Tools The pingctl tool is now POSIX compliant in preparation for the pingdevops tool's deprecation. Docker Images PingDirectory, PingDirectoryProxy, and PingDataSync will now start without a server profile. Update JDK to 11.0.13+8. Azul JVM has been deprecated in Favor of Liberica JVM. PingData images are now killed with a TERM signal. Update Apache Tomcat to Version 9.0.55. Update Alpine to 3.15 and UBI8 to 8.5. PingFederate PF_LDAP_USERNAME and PF_LDAP_PASSWORD variables are no longer required by default. Helm Charts View the detailed release notes for Ping's Helm Charts here . Release 0.7.9 Support for HPA Scaling Behavior Support for shareProcessNamespace in pod spec Helm test image pull policy no longer hard-coded in helm-charts/charts/ping-devops/templates/pinglib/_tests/tpl Cluster service for pingaccess-admin","title":"Enhancements"},{"location":"release-notes/relnotes-2111/#resolved-defects","text":"(BRASS-80) - 07-apply-server-profile hook now handles PingDirectory restart correctly. (BRASS-172) - Default values have been added for PF_LDAP_USERNAME and PF_LDAP_PASSWORD to work around startup errors for PingFederate images.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2111/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.3.3 PingAccess 6.3.1","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2112/","text":"Version 2112 Release Notes \u00b6 DevOps Docker Builds, Version 2112 (January 05 2022) \u00b6 New Product Releases \u00b6 PingFederate PingFederate 11.0 is now available on Dockerhub . PingAccess PingAccess 7.0 is now available on Dockerhub . PingDirectory PingDirectory 9.0 is now available on Dockerhub . PingDelegator PingDelegator 4.8 is now available on Dockerhub . PingDirectoryProxy PingDirectoryProxy 9.0 is now available on Dockerhub . PingDataSync PingDataSync 9.0 is now available on Dockerhub . PingAuthorize PingAuthorize 9.0 is now available on Dockerhub . PingIntelligence PingIntelligence 5.1 is now available on Dockerhub . Enhancements \u00b6 Docker Images Apache Tomcat to Version 9.0.56 jmeter image to 5.4.3 LDAP SDK to 6.0.3 PingAccess to log4j 2.12.2, 2.12.3 patch Set UNBOUNDID_SKIP_START_PRECHECK_NODETACH environment variable to true for PingData Helm Charts #### Release 0.8.3 #### Features Document supported values Issues Resolved Issue #233 Ingress - semverCompare now retrieves correct K8 version for applying the correct apiVersion {{- if semverCompare \">=1.19.x\" $top.Capabilities.KubeVersion.Version }} Issue #254 Update default global.image.tag to 2112 Resolved Defects \u00b6 (BRASS-60) - Bulk Config Tool Document has been deprecated. Building a PingFederate profile has taken its place. (BRASS-181) - Update to PingDirectory liveness and readiness probes to use timeoutSeconds 5 and failureThreshold 3. Update to PingDirectory readiness probes to use readiness.sh. Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.2.7 PingAccess 6.2.2 PingCentral 1.8.1 PingDirectory 8.2.0.6 PingDirectoryProxy 8.2.0.6 PingDataSync 8.2.0.6 PingIntelligence 4.4.1 PingDelegator 4.7, 4.4.1","title":"Version 2112"},{"location":"release-notes/relnotes-2112/#version-2112-release-notes","text":"","title":"Version 2112 Release Notes"},{"location":"release-notes/relnotes-2112/#devops-docker-builds-version-2112-january-05-2022","text":"","title":"DevOps Docker Builds, Version 2112 (January 05 2022)"},{"location":"release-notes/relnotes-2112/#new-product-releases","text":"PingFederate PingFederate 11.0 is now available on Dockerhub . PingAccess PingAccess 7.0 is now available on Dockerhub . PingDirectory PingDirectory 9.0 is now available on Dockerhub . PingDelegator PingDelegator 4.8 is now available on Dockerhub . PingDirectoryProxy PingDirectoryProxy 9.0 is now available on Dockerhub . PingDataSync PingDataSync 9.0 is now available on Dockerhub . PingAuthorize PingAuthorize 9.0 is now available on Dockerhub . PingIntelligence PingIntelligence 5.1 is now available on Dockerhub .","title":"New Product Releases"},{"location":"release-notes/relnotes-2112/#enhancements","text":"Docker Images Apache Tomcat to Version 9.0.56 jmeter image to 5.4.3 LDAP SDK to 6.0.3 PingAccess to log4j 2.12.2, 2.12.3 patch Set UNBOUNDID_SKIP_START_PRECHECK_NODETACH environment variable to true for PingData Helm Charts #### Release 0.8.3 #### Features Document supported values Issues Resolved Issue #233 Ingress - semverCompare now retrieves correct K8 version for applying the correct apiVersion {{- if semverCompare \">=1.19.x\" $top.Capabilities.KubeVersion.Version }} Issue #254 Update default global.image.tag to 2112","title":"Enhancements"},{"location":"release-notes/relnotes-2112/#resolved-defects","text":"(BRASS-60) - Bulk Config Tool Document has been deprecated. Building a PingFederate profile has taken its place. (BRASS-181) - Update to PingDirectory liveness and readiness probes to use timeoutSeconds 5 and failureThreshold 3. Update to PingDirectory readiness probes to use readiness.sh.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2112/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions. The following versions are no longer actively maintained: PingFederate 10.2.7 PingAccess 6.2.2 PingCentral 1.8.1 PingDirectory 8.2.0.6 PingDirectoryProxy 8.2.0.6 PingDataSync 8.2.0.6 PingIntelligence 4.4.1 PingDelegator 4.7, 4.4.1","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2201/","text":"Version 2201 Release Notes \u00b6 DevOps Docker Builds, Version 2201 (February 07 2022) \u00b6 New Product Releases \u00b6 PingFederate PingFederate 11.0.1 is now available on Dockerhub . PingAccess PingAccess 6.3.3 is now available on Dockerhub . PingDirectory PingDirectory 8.3.0.5 is now available on Dockerhub . PingDataConsole PingDataConsole 8.3.0.5 is now available on Dockerhub . PingDirectoryProxy PingDirectoryProxy 8.3.0.5 is now available on Dockerhub . PingDataSync PingDataSync 8.3.0.5 is now available on Dockerhub . PingAuthorize PingAuthorize 8.3.0.5 is now available on Dockerhub . PingAuthorizePAP PingAuthorizePAP 8.3.0.5 is now available on Dockerhub . Enhancements \u00b6 Docker Images Apache Tomcat to Version 9.0.58 Liberica JDK to 11.0.14+9 Helm Charts #### Release 0.8.5 #### Features PingCentral now supported. Example values application found here Issues Resolved Issue #119 Workload template not honoring false values from values.yaml. Previously, false did not overwrite true in the Ping Identity Helm Chart template. This fix in _merge-util.tpl will resolve multiple cases within the Ping Identity Helm Chart. {{- $globalValues := deepCopy $top.Values.global -}} {{- $prodValues := deepCopy (index $top.Values $prodName) -}} {{- $mergedValues := mergeOverwrite $globalValues $prodValues -}} Issue #264 Update default global.image.tag to 2201 Resolved Defects \u00b6 (BRASS-315) - PingFederate server profiles in getting-started and baseline no longer contain an invalid runtime certificate Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Version 2201"},{"location":"release-notes/relnotes-2201/#version-2201-release-notes","text":"","title":"Version 2201 Release Notes"},{"location":"release-notes/relnotes-2201/#devops-docker-builds-version-2201-february-07-2022","text":"","title":"DevOps Docker Builds, Version 2201 (February 07 2022)"},{"location":"release-notes/relnotes-2201/#new-product-releases","text":"PingFederate PingFederate 11.0.1 is now available on Dockerhub . PingAccess PingAccess 6.3.3 is now available on Dockerhub . PingDirectory PingDirectory 8.3.0.5 is now available on Dockerhub . PingDataConsole PingDataConsole 8.3.0.5 is now available on Dockerhub . PingDirectoryProxy PingDirectoryProxy 8.3.0.5 is now available on Dockerhub . PingDataSync PingDataSync 8.3.0.5 is now available on Dockerhub . PingAuthorize PingAuthorize 8.3.0.5 is now available on Dockerhub . PingAuthorizePAP PingAuthorizePAP 8.3.0.5 is now available on Dockerhub .","title":"New Product Releases"},{"location":"release-notes/relnotes-2201/#enhancements","text":"Docker Images Apache Tomcat to Version 9.0.58 Liberica JDK to 11.0.14+9 Helm Charts #### Release 0.8.5 #### Features PingCentral now supported. Example values application found here Issues Resolved Issue #119 Workload template not honoring false values from values.yaml. Previously, false did not overwrite true in the Ping Identity Helm Chart template. This fix in _merge-util.tpl will resolve multiple cases within the Ping Identity Helm Chart. {{- $globalValues := deepCopy $top.Values.global -}} {{- $prodValues := deepCopy (index $top.Values $prodName) -}} {{- $mergedValues := mergeOverwrite $globalValues $prodValues -}} Issue #264 Update default global.image.tag to 2201","title":"Enhancements"},{"location":"release-notes/relnotes-2201/#resolved-defects","text":"(BRASS-315) - PingFederate server profiles in getting-started and baseline no longer contain an invalid runtime certificate","title":"Resolved Defects"},{"location":"release-notes/relnotes-2201/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2202/","text":"Version 2202 Release Notes \u00b6 DevOps Docker Builds, Version 2202 (March 03 2022) \u00b6 New Product Releases \u00b6 PingCentral PingCentral 1.9.3 is now available on Dockerhub . Enhancements \u00b6 Docker Images Apache Tomcat to Version 9.0.59 Liberica JDK to 11.0.14.1+1 Documentation DevOps Getting Started GitHub Repo has been updated Complex Docker Compose examples deprecated and removed Helm Charts Release 0.8.6 Issues Resolved Update default global.image.tag to 2202 Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Version 2202"},{"location":"release-notes/relnotes-2202/#version-2202-release-notes","text":"","title":"Version 2202 Release Notes"},{"location":"release-notes/relnotes-2202/#devops-docker-builds-version-2202-march-03-2022","text":"","title":"DevOps Docker Builds, Version 2202 (March 03 2022)"},{"location":"release-notes/relnotes-2202/#new-product-releases","text":"PingCentral PingCentral 1.9.3 is now available on Dockerhub .","title":"New Product Releases"},{"location":"release-notes/relnotes-2202/#enhancements","text":"Docker Images Apache Tomcat to Version 9.0.59 Liberica JDK to 11.0.14.1+1 Documentation DevOps Getting Started GitHub Repo has been updated Complex Docker Compose examples deprecated and removed Helm Charts Release 0.8.6 Issues Resolved Update default global.image.tag to 2202","title":"Enhancements"},{"location":"release-notes/relnotes-2202/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2203/","text":"Version 2203 Release Notes \u00b6 DevOps Docker Builds, Version 2203 (April 01 2022) \u00b6 New Product Releases \u00b6 PingFederate PingFederate 11.0.2 is now available on Dockerhub . Documentation Helm and Kustomize Documents added DevOps Getting Started GitHub Repo has been updated 20-kubernetes directory has been renamed to 20-kustomize, as well as kustomize examples reduced 30-helm directory added with examples included Resolved Defects \u00b6 (BRASS-313) - Update docs and pingdataconsole server profile(s) for breaking application.yaml change between 8.3 and 9.0 Helm Chart Releases \u00b6 Release 0.9.0 Release 0.8.9 Release 0.8.8 Release 0.8.7 Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Version 2203"},{"location":"release-notes/relnotes-2203/#version-2203-release-notes","text":"","title":"Version 2203 Release Notes"},{"location":"release-notes/relnotes-2203/#devops-docker-builds-version-2203-april-01-2022","text":"","title":"DevOps Docker Builds, Version 2203 (April 01 2022)"},{"location":"release-notes/relnotes-2203/#new-product-releases","text":"PingFederate PingFederate 11.0.2 is now available on Dockerhub . Documentation Helm and Kustomize Documents added DevOps Getting Started GitHub Repo has been updated 20-kubernetes directory has been renamed to 20-kustomize, as well as kustomize examples reduced 30-helm directory added with examples included","title":"New Product Releases"},{"location":"release-notes/relnotes-2203/#resolved-defects","text":"(BRASS-313) - Update docs and pingdataconsole server profile(s) for breaking application.yaml change between 8.3 and 9.0","title":"Resolved Defects"},{"location":"release-notes/relnotes-2203/#helm-chart-releases","text":"Release 0.9.0 Release 0.8.9 Release 0.8.8 Release 0.8.7","title":"Helm Chart Releases"},{"location":"release-notes/relnotes-2203/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2204/","text":"Version 2204 Release Notes \u00b6 DevOps Docker Builds, Version 2204 (May 05 2022) \u00b6 New Product Releases \u00b6 PingAccess PingAccess 6.3.4 is now available on Dockerhub . PingIntelligence PingIntelligence 5.1.1 is now available on Dockerhub . pingctl pingctl 1.0.5 released Release Notes Documentation \u00b6 Environment Considerations added Workaround for NFS and PingData Getting Started Examples updated Getting-started docker-compose examples now use default registry and image tag values docker-compose examples now use pingctl's config file over deprecated ping-devops's config file Pingctl configuration updated Instructions to export environment variables if wanted Resolved Defects \u00b6 (BRASS-389) - Fix an issue with the getSemanticImageVersion function that was causing \"bad number\" errors during hook scripts. (BRASS-397) - Updated PingDirectory and PingFederate server profiles to remove hard-coded instances of dc=example,dc=com and replace them with the USER_BASE_DN environment variable. Enhancements \u00b6 Docker Images Apache Tomcat to Version 9.0.62 Alpine to version 3.15.4 Liberica JDK to 11.0.15+10 Features \u00b6 (BRASS-393) PingDirectory supports multiple base DNS for replication Updated the PingDirectory image to support enabling and initializing replication for multiple base DNs with the REPLICATION_BASE_DNS variable, in addition to the USER_BASE_DN variable. Multiple DNs can be delimited with a ';' character. For example: REPLICATION_BASE_DNS=dc=additional,dc=com;dc=another,dc=com (BRASS-394) PingDataSync supports persistent volume for restarts Updated the PingDataSync restart logic to include use of the manage-profile replace-profile command to support running PingDataSync with a persistent volume. This allows for updating the PingDataSync configuration on container restart, without requiring deploying a fresh container or volume. Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Version 2204"},{"location":"release-notes/relnotes-2204/#version-2204-release-notes","text":"","title":"Version 2204 Release Notes"},{"location":"release-notes/relnotes-2204/#devops-docker-builds-version-2204-may-05-2022","text":"","title":"DevOps Docker Builds, Version 2204 (May 05 2022)"},{"location":"release-notes/relnotes-2204/#new-product-releases","text":"PingAccess PingAccess 6.3.4 is now available on Dockerhub . PingIntelligence PingIntelligence 5.1.1 is now available on Dockerhub . pingctl pingctl 1.0.5 released Release Notes","title":"New Product Releases"},{"location":"release-notes/relnotes-2204/#documentation","text":"Environment Considerations added Workaround for NFS and PingData Getting Started Examples updated Getting-started docker-compose examples now use default registry and image tag values docker-compose examples now use pingctl's config file over deprecated ping-devops's config file Pingctl configuration updated Instructions to export environment variables if wanted","title":"Documentation"},{"location":"release-notes/relnotes-2204/#resolved-defects","text":"(BRASS-389) - Fix an issue with the getSemanticImageVersion function that was causing \"bad number\" errors during hook scripts. (BRASS-397) - Updated PingDirectory and PingFederate server profiles to remove hard-coded instances of dc=example,dc=com and replace them with the USER_BASE_DN environment variable.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2204/#enhancements","text":"Docker Images Apache Tomcat to Version 9.0.62 Alpine to version 3.15.4 Liberica JDK to 11.0.15+10","title":"Enhancements"},{"location":"release-notes/relnotes-2204/#features","text":"(BRASS-393) PingDirectory supports multiple base DNS for replication Updated the PingDirectory image to support enabling and initializing replication for multiple base DNs with the REPLICATION_BASE_DNS variable, in addition to the USER_BASE_DN variable. Multiple DNs can be delimited with a ';' character. For example: REPLICATION_BASE_DNS=dc=additional,dc=com;dc=another,dc=com (BRASS-394) PingDataSync supports persistent volume for restarts Updated the PingDataSync restart logic to include use of the manage-profile replace-profile command to support running PingDataSync with a persistent volume. This allows for updating the PingDataSync configuration on container restart, without requiring deploying a fresh container or volume.","title":"Features"},{"location":"release-notes/relnotes-2204/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2205/","text":"Version 2205 Release Notes \u00b6 DevOps Docker Builds, Version 2205 (June 02 2022) \u00b6 New Product Releases \u00b6 PingAccess PingAccess 7.0.4 is now available on Dockerhub . PingData products Updated all PingData products to build 8.3.0.6 PingDirectory ( Dockerhub ) PingDirectory Proxy ( Dockerhub ) PingDataSync ( Dockerhub ) PingAuthorize ( Dockerhub ) PingDataConsole ( Dockerhub ) PingFederate PingFederate 11.0.3 and 10.3.7 are now available on Dockerhub . PingIdentity LDAPSDK PingIdentity LDAPSDK upgraded to 6.0.5 in Docker image Dockerhub . Documentation \u00b6 Sidecar Example created Page with details and recommendations for using a sidecar, with example Migrating root-based deployment documentation updated Refined this page with recommendations of pre-migration steps Resolved Defects \u00b6 (BRASS-402) - Updates to PingAccess and PingFederate Updated the PingAccess and PingFederate builds to generate a run.properties.subst.default file based on the product default run.properties file pulled from /opt/server. This ensures that any other defaults in the product are included in the default run.properties. This change allows for setting the PingAccess operational mode through the OPERATIONAL_MODE environment variable, without requiring a server profile. (BRASS-428) - PingAccess FIPS mode properties issues Updated the default FIPS properties file for PingAccess to use the correct filename and the correct property name to enable FIPS mode. Enhancements \u00b6 Docker Images Apache Tomcat to Version 9.0.63 Alpine to version 3.16.0 Features \u00b6 (BRASS-434) Support Null SecurityContext in Helm Charts for Openshift Enables the helm charts to generate with workload.securityContext as null, permitting the Openshift environment to generate the security context properly. Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Version 2205"},{"location":"release-notes/relnotes-2205/#version-2205-release-notes","text":"","title":"Version 2205 Release Notes"},{"location":"release-notes/relnotes-2205/#devops-docker-builds-version-2205-june-02-2022","text":"","title":"DevOps Docker Builds, Version 2205 (June 02 2022)"},{"location":"release-notes/relnotes-2205/#new-product-releases","text":"PingAccess PingAccess 7.0.4 is now available on Dockerhub . PingData products Updated all PingData products to build 8.3.0.6 PingDirectory ( Dockerhub ) PingDirectory Proxy ( Dockerhub ) PingDataSync ( Dockerhub ) PingAuthorize ( Dockerhub ) PingDataConsole ( Dockerhub ) PingFederate PingFederate 11.0.3 and 10.3.7 are now available on Dockerhub . PingIdentity LDAPSDK PingIdentity LDAPSDK upgraded to 6.0.5 in Docker image Dockerhub .","title":"New Product Releases"},{"location":"release-notes/relnotes-2205/#documentation","text":"Sidecar Example created Page with details and recommendations for using a sidecar, with example Migrating root-based deployment documentation updated Refined this page with recommendations of pre-migration steps","title":"Documentation"},{"location":"release-notes/relnotes-2205/#resolved-defects","text":"(BRASS-402) - Updates to PingAccess and PingFederate Updated the PingAccess and PingFederate builds to generate a run.properties.subst.default file based on the product default run.properties file pulled from /opt/server. This ensures that any other defaults in the product are included in the default run.properties. This change allows for setting the PingAccess operational mode through the OPERATIONAL_MODE environment variable, without requiring a server profile. (BRASS-428) - PingAccess FIPS mode properties issues Updated the default FIPS properties file for PingAccess to use the correct filename and the correct property name to enable FIPS mode.","title":"Resolved Defects"},{"location":"release-notes/relnotes-2205/#enhancements","text":"Docker Images Apache Tomcat to Version 9.0.63 Alpine to version 3.16.0","title":"Enhancements"},{"location":"release-notes/relnotes-2205/#features","text":"(BRASS-434) Support Null SecurityContext in Helm Charts for Openshift Enables the helm charts to generate with workload.securityContext as null, permitting the Openshift environment to generate the security context properly.","title":"Features"},{"location":"release-notes/relnotes-2205/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"release-notes/relnotes-2206/","text":"Version 2206 Release Notes \u00b6 Product release notes For information about product changes, refer to the release notes that can be found on each product's download page . DevOps Docker Builds, Version 2206 (July 01 2022) \u00b6 New Product Releases \u00b6 PingData products 9.1.0.0 released and PingData products 8.3.x are no longer built PingDirectory ( Dockerhub ) PingDirectory Proxy ( Dockerhub ) PingDataSync ( Dockerhub ) PingAuthorize ( Dockerhub ) PingDataConsole ( Dockerhub ) PingFederate 11.1.0 released and PF 10.3.x no longer built ( Dockerhub ) PingAccess 7.1.0 released and PA 6.3.x no longer built ( Dockerhub ) PingCentral 1.10.0 released ( Dockerhub ) PingDelegator 4.10.0 released and PDA 4.9.x no longer built ( Dockerhub ) Documentation \u00b6 How-to documentation for PingIntelligence Added page for Openshift configuration Resolved Defects \u00b6 (BRASS-464) Fixed PingAuthorize baseline server profile overwriting certain environment variables from the orchestration layer Enhancements \u00b6 Liberica JDK -> 11.0.15.1+2 Apache Tomcat in PingDataConsole -> 9.0.64 Apache JMeter -> 5.5 Features \u00b6 (BRASS-440) Kubernetes deployment script of Ping Intelligence Product Build Matrix \u00b6 See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Version 2206"},{"location":"release-notes/relnotes-2206/#version-2206-release-notes","text":"Product release notes For information about product changes, refer to the release notes that can be found on each product's download page .","title":"Version 2206 Release Notes"},{"location":"release-notes/relnotes-2206/#devops-docker-builds-version-2206-july-01-2022","text":"","title":"DevOps Docker Builds, Version 2206 (July 01 2022)"},{"location":"release-notes/relnotes-2206/#new-product-releases","text":"PingData products 9.1.0.0 released and PingData products 8.3.x are no longer built PingDirectory ( Dockerhub ) PingDirectory Proxy ( Dockerhub ) PingDataSync ( Dockerhub ) PingAuthorize ( Dockerhub ) PingDataConsole ( Dockerhub ) PingFederate 11.1.0 released and PF 10.3.x no longer built ( Dockerhub ) PingAccess 7.1.0 released and PA 6.3.x no longer built ( Dockerhub ) PingCentral 1.10.0 released ( Dockerhub ) PingDelegator 4.10.0 released and PDA 4.9.x no longer built ( Dockerhub )","title":"New Product Releases"},{"location":"release-notes/relnotes-2206/#documentation","text":"How-to documentation for PingIntelligence Added page for Openshift configuration","title":"Documentation"},{"location":"release-notes/relnotes-2206/#resolved-defects","text":"(BRASS-464) Fixed PingAuthorize baseline server profile overwriting certain environment variables from the orchestration layer","title":"Resolved Defects"},{"location":"release-notes/relnotes-2206/#enhancements","text":"Liberica JDK -> 11.0.15.1+2 Apache Tomcat in PingDataConsole -> 9.0.64 Apache JMeter -> 5.5","title":"Enhancements"},{"location":"release-notes/relnotes-2206/#features","text":"(BRASS-440) Kubernetes deployment script of Ping Intelligence","title":"Features"},{"location":"release-notes/relnotes-2206/#product-build-matrix","text":"See the Product Version, Image Release Matrix for currently supported image and product versions.","title":"Product Build Matrix"},{"location":"tools/ldapsdkUtil/","text":"The ldap-sdk-tools utility \u00b6 The ldap-sdk-tools Docker image gives you easy access to our LDAP Client SDK tools for use with PingDirectory. For complete documentation, see the pingidentity/ldapsdk repository . Setting up the utility \u00b6 From your local pingidentity-devops-getting-started directory, enter: ./ldapsdk When you run the ldapsdk script for the first time, you're prompted to configure your settings. To edit the settings in the future, enter: sh ldapsdk configure To start the ldap-sdk-tools Docker image, enter: docker run -it --rm --network pingnet pingidentity/ldap-sdk-tools:latest To list the available tools, enter ls","title":"ldap-sdk-tools"},{"location":"tools/ldapsdkUtil/#the-ldap-sdk-tools-utility","text":"The ldap-sdk-tools Docker image gives you easy access to our LDAP Client SDK tools for use with PingDirectory. For complete documentation, see the pingidentity/ldapsdk repository .","title":"The ldap-sdk-tools utility"},{"location":"tools/ldapsdkUtil/#setting-up-the-utility","text":"From your local pingidentity-devops-getting-started directory, enter: ./ldapsdk When you run the ldapsdk script for the first time, you're prompted to configure your settings. To edit the settings in the future, enter: sh ldapsdk configure To start the ldap-sdk-tools Docker image, enter: docker run -it --rm --network pingnet pingidentity/ldap-sdk-tools:latest To list the available tools, enter ls","title":"Setting up the utility"},{"location":"tools/pingDevopsUtil_Deprecated/","text":"The ping-devops Utility (Deprecated) \u00b6 ping-devops was our general DevOps command-line utility, but has been superseded by the pingctl tool . This page is maintained for referential knowledge only, and the tool is no longer actively maintained or supported. Users are recommended to migrate to the pingctl product for continued support. Dependent Utilities \u00b6 To perform all of its operations, ping-devops has a dependency on the following utilities: openssl base64 kustomize kubectl envsubst jq ping-devops Usage \u00b6 Enter ping-devops in a terminal to display the commands listing, which is shown in the following example. ##################################################################### # Ping Identity DevOps (version 0.7.2) # # Documentation: https://devops.pingidentity.com # GitHub Repos: https://github.com/topics/ping-devops ##################################################################### General Usage: ping-devops config ping-devops info [ -v ] ping-devops version ping-devops clean ping-devops topic [ { topic-name } ] Generate Kubernetes/Kustomize/License Resources: ping-devops generate devops-secret ping-devops generate tls-secret { domain } ping-devops generate ssh-id-secret { ssh id_rsa file } ping-devops generate license { product } { ver } ping-devops generate license-secret { license file } ping-devops generate license-secret { product } { ver } ping-devops generate kustomization.yaml Running Docker/Kubernetes Environments: ping-devops docker [ info | start | stop | rm | clean ] ping-devops kubernetes [ info | start | rm | clean ] Hashicorp Vault: ping-devops vault get-token ping-devops vault create-annotations { secret } Further help: https://github.com/pingidentity/ping-devops","title":"ping-devops utility (deprecated)"},{"location":"tools/pingDevopsUtil_Deprecated/#the-ping-devops-utility-deprecated","text":"ping-devops was our general DevOps command-line utility, but has been superseded by the pingctl tool . This page is maintained for referential knowledge only, and the tool is no longer actively maintained or supported. Users are recommended to migrate to the pingctl product for continued support.","title":"The ping-devops Utility (Deprecated)"},{"location":"tools/pingDevopsUtil_Deprecated/#dependent-utilities","text":"To perform all of its operations, ping-devops has a dependency on the following utilities: openssl base64 kustomize kubectl envsubst jq","title":"Dependent Utilities"},{"location":"tools/pingDevopsUtil_Deprecated/#ping-devops-usage","text":"Enter ping-devops in a terminal to display the commands listing, which is shown in the following example. ##################################################################### # Ping Identity DevOps (version 0.7.2) # # Documentation: https://devops.pingidentity.com # GitHub Repos: https://github.com/topics/ping-devops ##################################################################### General Usage: ping-devops config ping-devops info [ -v ] ping-devops version ping-devops clean ping-devops topic [ { topic-name } ] Generate Kubernetes/Kustomize/License Resources: ping-devops generate devops-secret ping-devops generate tls-secret { domain } ping-devops generate ssh-id-secret { ssh id_rsa file } ping-devops generate license { product } { ver } ping-devops generate license-secret { license file } ping-devops generate license-secret { product } { ver } ping-devops generate kustomization.yaml Running Docker/Kubernetes Environments: ping-devops docker [ info | start | stop | rm | clean ] ping-devops kubernetes [ info | start | rm | clean ] Hashicorp Vault: ping-devops vault get-token ping-devops vault create-annotations { secret } Further help: https://github.com/pingidentity/ping-devops","title":"ping-devops Usage"},{"location":"tools/pingDownloader_Deprecated/","text":"The PingDownloader Image (Deprecated) \u00b6 PingDownloader Deprecation Due to internal infrastructure changes to our license server, we no longer provide product installation files through the PingDownloader image. The production installation files are still available to all customers located at Ping Identity's Downloads Page . PingDownloader was an image used to simplify the download process of Ping Identity product installation files and license files. How to get Product Installation Files Without PingDownloader \u00b6 Navigate to Ping Identity's Download webpage . Select a Product download page, for example: PingFederate Download Page . Click on the download button for the desired installation method and product version. If prompted to sign in, please sign in and the download will begin. Alternatively, Sign In Here . If you do not have a Ping Identity account, you can create one on the Account Creation Page . How to get Product License Files Without PingDownloader \u00b6 Install our command-line utility pingctl . Installation steps are described in the utility's Documentation . Run pingctl config to configure the command line tool with your DevOps User and Key information. See our Introduction Documentation for obtaining and using your DevOps User and Key. Run pingctl license {product} {version} to obtain the license file. The {version} portion of the command expects the format to be {major}.{minor} . For example, the following command retrieves a license for PingFederate 11.0.3: pingctl license pingfederate 11.0","title":"PingDownloader Image (deprecated)"},{"location":"tools/pingDownloader_Deprecated/#the-pingdownloader-image-deprecated","text":"PingDownloader Deprecation Due to internal infrastructure changes to our license server, we no longer provide product installation files through the PingDownloader image. The production installation files are still available to all customers located at Ping Identity's Downloads Page . PingDownloader was an image used to simplify the download process of Ping Identity product installation files and license files.","title":"The PingDownloader Image (Deprecated)"},{"location":"tools/pingDownloader_Deprecated/#how-to-get-product-installation-files-without-pingdownloader","text":"Navigate to Ping Identity's Download webpage . Select a Product download page, for example: PingFederate Download Page . Click on the download button for the desired installation method and product version. If prompted to sign in, please sign in and the download will begin. Alternatively, Sign In Here . If you do not have a Ping Identity account, you can create one on the Account Creation Page .","title":"How to get Product Installation Files Without PingDownloader"},{"location":"tools/pingDownloader_Deprecated/#how-to-get-product-license-files-without-pingdownloader","text":"Install our command-line utility pingctl . Installation steps are described in the utility's Documentation . Run pingctl config to configure the command line tool with your DevOps User and Key information. See our Introduction Documentation for obtaining and using your DevOps User and Key. Run pingctl license {product} {version} to obtain the license file. The {version} portion of the command expects the format to be {major}.{minor} . For example, the following command retrieves a license for PingFederate 11.0.3: pingctl license pingfederate 11.0","title":"How to get Product License Files Without PingDownloader"},{"location":"tools/pingctlUtil/","text":"The pingctl Utility \u00b6 pingctl is our general DevOps command-line utility. Dependent Utilities \u00b6 To perform all of its operations, pingctl has a dependency on the following utilities: openssl base64 kubectl envsubst jq jwt Installation and Upgrades \u00b6 Using Homebrew to install pingctl on MacOS, Windows via Windows Subsystem for Linux , or Linux. To install, enter: brew install pingidentity/tap/pingctl To upgrade, enter: brew upgrade pingidentity/tap/pingctl To check for upgrades, run the following command. Check regularly Check for upgrades regularly. pingctl version The dependent utilities for pingctl are also installed or upgraded during this process. Using sh to install pingctl on Linux and WSL. To install or upgrade, enter: curl -sL https://bit.ly/pingctl-install | sh Ensure you have the dependent utilities for pingctl installed. Usage \u00b6 pingctl < command > [ options ] Available Commands : info Print pingctl config config Manage pingctl config version Version Details and Check clean Remove ~/ . pingidentity / pingctl kubernetes Kubernetes Tools license Ping Identity Licensing Tools pingone PingOne Tools Use pingctl for info on available commands. Use pingctl <command> for info on a specific command. Options \u00b6 -h Provide usage details. Available Commands \u00b6 kubernetes license pingone info Provides a summary of variables defined with pingctl. config Provides an interactive process in which the user can provide all the pingctl standard variables (i.e. PingOne and Ping DevOps) as well as custom variables version Displays the current version of the tool, and checks to see if an update is available. clean Cleans the cached pingctl work directory containing the latest PingOne Access Token","title":"pingctl"},{"location":"tools/pingctlUtil/#the-pingctl-utility","text":"pingctl is our general DevOps command-line utility.","title":"The pingctl Utility"},{"location":"tools/pingctlUtil/#dependent-utilities","text":"To perform all of its operations, pingctl has a dependency on the following utilities: openssl base64 kubectl envsubst jq jwt","title":"Dependent Utilities"},{"location":"tools/pingctlUtil/#installation-and-upgrades","text":"Using Homebrew to install pingctl on MacOS, Windows via Windows Subsystem for Linux , or Linux. To install, enter: brew install pingidentity/tap/pingctl To upgrade, enter: brew upgrade pingidentity/tap/pingctl To check for upgrades, run the following command. Check regularly Check for upgrades regularly. pingctl version The dependent utilities for pingctl are also installed or upgraded during this process. Using sh to install pingctl on Linux and WSL. To install or upgrade, enter: curl -sL https://bit.ly/pingctl-install | sh Ensure you have the dependent utilities for pingctl installed.","title":"Installation and Upgrades"},{"location":"tools/pingctlUtil/#usage","text":"pingctl < command > [ options ] Available Commands : info Print pingctl config config Manage pingctl config version Version Details and Check clean Remove ~/ . pingidentity / pingctl kubernetes Kubernetes Tools license Ping Identity Licensing Tools pingone PingOne Tools Use pingctl for info on available commands. Use pingctl <command> for info on a specific command.","title":"Usage"},{"location":"tools/pingctlUtil/#options","text":"-h Provide usage details.","title":"Options"},{"location":"tools/pingctlUtil/#available-commands","text":"kubernetes license pingone info Provides a summary of variables defined with pingctl. config Provides an interactive process in which the user can provide all the pingctl standard variables (i.e. PingOne and Ping DevOps) as well as custom variables version Displays the current version of the tool, and checks to see if an update is available. clean Cleans the cached pingctl work directory containing the latest PingOne Access Token","title":"Available Commands"},{"location":"tools/commands/kubernetes/","text":"pingctl kubernetes \u00b6 Description \u00b6 Manage Ping related Kubernetes resources. Generate devops-secret secret containing Ping DevOps variables PING_IDENTITY_DEVOPS_KEY and PING_IDENTITY_DEVOPS_SECRET Generate tls-secret secret containing a self-signed certificate and key for a specified domain. Generate ssh-id-secret secret containing a file with ssh id (i.e. ~/.ssh/id_rsa) Generate license-secret secret containing a Ping Identity product license file or generated eval license Provide details about a cached kubectl oidc token Display the entire jwt token Display a specific claim Clear the kubectl oidc cache Usage \u00b6 pingctl kubernetes generate devops-secret pingctl kubernetes generate tls-secret {domain} pingctl kubernetes generate ssh-id-secret {ssh id_rsa file} pingctl kubernetes generate license-secret {license file} pingctl kubernetes generate license-secret {product} {ver} pingctl kubernetes oidc clear pingctl kubernetes oidc {claim} pingctl kubernetes oidc info Options \u00b6","title":"pingctl kubernetes - Generate kubernetes resources"},{"location":"tools/commands/kubernetes/#pingctl-kubernetes","text":"","title":"pingctl kubernetes"},{"location":"tools/commands/kubernetes/#description","text":"Manage Ping related Kubernetes resources. Generate devops-secret secret containing Ping DevOps variables PING_IDENTITY_DEVOPS_KEY and PING_IDENTITY_DEVOPS_SECRET Generate tls-secret secret containing a self-signed certificate and key for a specified domain. Generate ssh-id-secret secret containing a file with ssh id (i.e. ~/.ssh/id_rsa) Generate license-secret secret containing a Ping Identity product license file or generated eval license Provide details about a cached kubectl oidc token Display the entire jwt token Display a specific claim Clear the kubectl oidc cache","title":"Description"},{"location":"tools/commands/kubernetes/#usage","text":"pingctl kubernetes generate devops-secret pingctl kubernetes generate tls-secret {domain} pingctl kubernetes generate ssh-id-secret {ssh id_rsa file} pingctl kubernetes generate license-secret {license file} pingctl kubernetes generate license-secret {product} {ver} pingctl kubernetes oidc clear pingctl kubernetes oidc {claim} pingctl kubernetes oidc info","title":"Usage"},{"location":"tools/commands/kubernetes/#options","text":"","title":"Options"},{"location":"tools/commands/license/","text":"pingctl license \u00b6 Description \u00b6 Provides access to Ping Identity evaluation license keys. Retrieve license based on product name and version Usage \u00b6 pingctl license {product} {ver} Options \u00b6 product: name of the product This name is generally a collapsed one-word representation of the product name. For example: Ping Federate is pingfederate ver: version of the product This value is the major.minor representation of the version of the product in question. For example, if a product had a point release of 10.2.3 you would provide 10.2","title":"pingctl license - Ping Identity license tool"},{"location":"tools/commands/license/#pingctl-license","text":"","title":"pingctl license"},{"location":"tools/commands/license/#description","text":"Provides access to Ping Identity evaluation license keys. Retrieve license based on product name and version","title":"Description"},{"location":"tools/commands/license/#usage","text":"pingctl license {product} {ver}","title":"Usage"},{"location":"tools/commands/license/#options","text":"product: name of the product This name is generally a collapsed one-word representation of the product name. For example: Ping Federate is pingfederate ver: version of the product This value is the major.minor representation of the version of the product in question. For example, if a product had a point release of 10.2.3 you would provide 10.2","title":"Options"},{"location":"tools/commands/pingone/","text":"pingctl pingone \u00b6 Description \u00b6 Provides ability to manage PingOne environments. Capabilities of this command include: Listing, searching and retrieving PingOne resources (i.e. user, populations, groups) Adding PingOne resources Deleting PingOne resources Usage \u00b6 pingctl pingone get # Get PingOne resource(s) pingctl pingone add # Add PingOne resource pingctl pingone delete # Delete PingOne resource pingctl pingone add-user-group # Add group to user pingctl pingone delete-user-group # Delete group from user pingctl pingone token # Obtain access token Options \u00b6 All subcommands \u00b6 -r Provide REST Calls get \u00b6 - o [ table | csv | json ] Output format ( default : table ) also set with env variable : PINGCTL_DEFAULT_OUTPUT - i { id } Search based on object guid - n { name } Search based on exact filter - f { filter } PingOne filter ( SCIM based ) ex : '.name.given eq \"john\"' '.email sw \"john\"' - c { columns } Columns to output based on \"heading:jsonAttr\" An example of available jsonAttrs can be found by using a json output first . ex : 'LastName:name.family,FirstName:name.given' - s { sort column } Columns to sort output on based on \"jsonAttr\" The jsonAttr MUST be listed in the list of columns ( - c option ) . ex : 'name.family' - p { population name } Population from which to retrieve a user / group If not provided , the 'Default' population is used add \u00b6 - p { population name } Population into which to add a user / group If not provided , the ' Default ' population is used","title":"pingctl pingone - Managing PingOne environments"},{"location":"tools/commands/pingone/#pingctl-pingone","text":"","title":"pingctl pingone"},{"location":"tools/commands/pingone/#description","text":"Provides ability to manage PingOne environments. Capabilities of this command include: Listing, searching and retrieving PingOne resources (i.e. user, populations, groups) Adding PingOne resources Deleting PingOne resources","title":"Description"},{"location":"tools/commands/pingone/#usage","text":"pingctl pingone get # Get PingOne resource(s) pingctl pingone add # Add PingOne resource pingctl pingone delete # Delete PingOne resource pingctl pingone add-user-group # Add group to user pingctl pingone delete-user-group # Delete group from user pingctl pingone token # Obtain access token","title":"Usage"},{"location":"tools/commands/pingone/#options","text":"","title":"Options"},{"location":"tools/commands/pingone/#all-subcommands","text":"-r Provide REST Calls","title":"All subcommands"},{"location":"tools/commands/pingone/#get","text":"- o [ table | csv | json ] Output format ( default : table ) also set with env variable : PINGCTL_DEFAULT_OUTPUT - i { id } Search based on object guid - n { name } Search based on exact filter - f { filter } PingOne filter ( SCIM based ) ex : '.name.given eq \"john\"' '.email sw \"john\"' - c { columns } Columns to output based on \"heading:jsonAttr\" An example of available jsonAttrs can be found by using a json output first . ex : 'LastName:name.family,FirstName:name.given' - s { sort column } Columns to sort output on based on \"jsonAttr\" The jsonAttr MUST be listed in the list of columns ( - c option ) . ex : 'name.family' - p { population name } Population from which to retrieve a user / group If not provided , the 'Default' population is used","title":"get"},{"location":"tools/commands/pingone/#add","text":"- p { population name } Population into which to add a user / group If not provided , the ' Default ' population is used","title":"add"},{"location":"videos/placeholder/","text":"Coming Soon! \u00b6 Check back here soon for videos related to this site and our efforts!","title":"Placeholder"},{"location":"videos/placeholder/#coming-soon","text":"Check back here soon for videos related to this site and our efforts!","title":"Coming Soon!"}]}